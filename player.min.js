(function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.WebTorrent=e()}})(function(){var t=Math.abs,n=Math.pow,r=Math.floor,o=String.fromCharCode,a=Math.ceil,d=Math.max,s=Math.min,l;return function(){function d(s,e,n){function t(o,i){if(!e[o]){if(!s[o]){var l="function"==typeof require&&require;if(!i&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var a=e[o]={exports:{}};s[o][0].call(a.exports,function(e){var r=s[o][1][e];return t(r||e)},a,a.exports,d,s,e,n)}return e[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)t(n[o]);return t}return d}()({1:[function(e,t){const n=e("debug")("webtorrent:file-stream"),r=e("readable-stream");class o extends r.Readable{constructor(e,t){super(t),this.destroyed=!1,this._torrent=e._torrent;const n=t&&t.start||0,r=t&&t.end&&t.end<e.length?t.end:e.length-1,o=e._torrent.pieceLength;this._startPiece=0|(n+e.offset)/o,this._endPiece=0|(r+e.offset)/o,this._piece=this._startPiece,this._offset=n+e.offset-this._startPiece*o,this._missing=r-n+1,this._reading=!1,this._notifying=!1,this._criticalLength=s(0|1048576/o,2)}_read(){this._reading||(this._reading=!0,this._notify())}_notify(){if(!this._reading||0===this._missing)return;if(!this._torrent.bitfield.get(this._piece))return this._torrent.critical(this._piece,this._piece+this._criticalLength);if(this._notifying)return;if(this._notifying=!0,this._torrent.destroyed)return this._destroy(new Error("Torrent removed"));const e=this._piece;this._torrent.store.get(e,(t,r)=>{if(this._notifying=!1,!this.destroyed)return n("read %s (length %s) (err %s)",e,r.length,t&&t.message),t?this._destroy(t):void(this._offset&&(r=r.slice(this._offset),this._offset=0),this._missing<r.length&&(r=r.slice(0,this._missing)),this._missing-=r.length,n("pushing buffer of length %s",r.length),this._reading=!1,this.push(r),0===this._missing&&this.push(null))}),this._piece+=1}destroy(e){this._destroy(null,e)}_destroy(e,t){this.destroyed||(this.destroyed=!0,!this._torrent.destroyed&&this._torrent.deselect(this._startPiece,this._endPiece,!0),e&&this.emit("error",e),this.emit("close"),t&&t())}}t.exports=o},{debug:30,"readable-stream":85}],2:[function(e,t){(function(n){const{EventEmitter:r}=e("events"),{PassThrough:o}=e("readable-stream"),i=e("end-of-stream"),a=e("path"),l=e("render-media"),c=e("stream-to-blob"),u=e("stream-to-blob-url"),f=e("stream-with-known-length-to-buffer"),p=e("./file-stream");class h extends r{constructor(e,t){super(),this._torrent=e,this._destroyed=!1,this.name=t.name,this.path=t.path,this.length=t.length,this.offset=t.offset,this.done=!1;const n=t.offset,r=n+t.length-1;this._startPiece=0|n/this._torrent.pieceLength,this._endPiece=0|r/this._torrent.pieceLength,0===this.length&&(this.done=!0,this.emit("done"))}get downloaded(){if(!this._torrent.bitfield)return 0;const{pieces:e,bitfield:t,pieceLength:n}=this._torrent,{_startPiece:r,_endPiece:o}=this,i=e[r],a=this.offset%n;let l=t.get(r)?n-a:d(n-a-i.missing,0);for(let i=r+1;i<=o;++i)if(t.get(i))l+=n;else{const t=e[i];l+=n-t.missing}return s(l,this.length)}get progress(){return this.length?this.downloaded/this.length:0}select(e){0===this.length||this._torrent.select(this._startPiece,this._endPiece,e)}deselect(){0===this.length||this._torrent.deselect(this._startPiece,this._endPiece,!1)}createReadStream(e){if(0===this.length){const e=new o;return n.nextTick(()=>{e.end()}),e}const t=new p(this,e);return this._torrent.select(t._startPiece,t._endPiece,!0,()=>{t._notify()}),i(t,()=>{this._destroyed||!this._torrent.destroyed&&this._torrent.deselect(t._startPiece,t._endPiece,!0)}),t}getBuffer(e){f(this.createReadStream(),this.length,e)}getBlob(e){if("undefined"==typeof window)throw new Error("browser-only method");c(this.createReadStream(),this._getMimeType()).then(t=>e(null,t),t=>e(t))}getBlobURL(e){if("undefined"==typeof window)throw new Error("browser-only method");u(this.createReadStream(),this._getMimeType()).then(t=>e(null,t),t=>e(t))}appendTo(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");l.append(this,e,t,n)}renderTo(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");l.render(this,e,t,n)}_getMimeType(){return l.mime[a.extname(this.name).toLowerCase()]}_destroy(){this._destroyed=!0,this._torrent=null}}t.exports=h}).call(this,e("_process"))},{"./file-stream":1,_process:61,"end-of-stream":32,events:33,path:59,"readable-stream":85,"render-media":86,"stream-to-blob":104,"stream-to-blob-url":103,"stream-with-known-length-to-buffer":105}],3:[function(e,t,n){const r=e("unordered-array-remove"),o=e("debug")("webtorrent:peer"),i=e("bittorrent-protocol"),a=e("./webconn");n.createWebRTCPeer=(e,t)=>{const n=new d(e.id,"webrtc");return n.conn=e,n.swarm=t,n.conn.connected?n.onConnect():(n.conn.once("connect",()=>{n.onConnect()}),n.conn.once("error",e=>{n.destroy(e)}),n.startConnectTimeout()),n},n.createTCPIncomingPeer=e=>{const t=`${e.remoteAddress}:${e.remotePort}`,n=new d(t,"tcpIncoming");return n.conn=e,n.addr=t,n.onConnect(),n},n.createTCPOutgoingPeer=(e,t)=>{const n=new d(e,"tcpOutgoing");return n.addr=e,n.swarm=t,n},n.createWebSeedPeer=(e,t)=>{const n=new d(e,"webSeed");return n.swarm=t,n.conn=new a(e,t),n.onConnect(),n};class d{constructor(e,t){this.id=e,this.type=t,o("new %s Peer %s",t,e),this.addr=null,this.conn=null,this.swarm=null,this.wire=null,this.connected=!1,this.destroyed=!1,this.timeout=null,this.retries=0,this.sentHandshake=!1}onConnect(){if(!this.destroyed){this.connected=!0,o("Peer %s connected",this.id),clearTimeout(this.connectTimeout);const e=this.conn;e.once("end",()=>{this.destroy()}),e.once("close",()=>{this.destroy()}),e.once("finish",()=>{this.destroy()}),e.once("error",e=>{this.destroy(e)});const t=this.wire=new i;t.type=this.type,t.once("end",()=>{this.destroy()}),t.once("close",()=>{this.destroy()}),t.once("finish",()=>{this.destroy()}),t.once("error",e=>{this.destroy(e)}),t.once("handshake",(e,t)=>{this.onHandshake(e,t)}),this.startHandshakeTimeout(),e.pipe(t).pipe(e),this.swarm&&!this.sentHandshake&&this.handshake()}}onHandshake(e,t){if(!this.swarm)return;if(this.destroyed)return;if(this.swarm.destroyed)return this.destroy(new Error("swarm already destroyed"));if(e!==this.swarm.infoHash)return this.destroy(new Error("unexpected handshake info hash for this swarm"));if(t===this.swarm.peerId)return this.destroy(new Error("refusing to connect to ourselves"));o("Peer %s got handshake %s",this.id,e),clearTimeout(this.handshakeTimeout),this.retries=0;let n=this.addr;!n&&this.conn.remoteAddress&&this.conn.remotePort&&(n=`${this.conn.remoteAddress}:${this.conn.remotePort}`),this.swarm._onWire(this.wire,n);this.swarm&&!this.swarm.destroyed&&(this.sentHandshake||this.handshake())}handshake(){const e={dht:!this.swarm.private&&!!this.swarm.client.dht};this.wire.handshake(this.swarm.infoHash,this.swarm.client.peerId,e),this.sentHandshake=!0}startConnectTimeout(){clearTimeout(this.connectTimeout),this.connectTimeout=setTimeout(()=>{this.destroy(new Error("connect timeout"))},"webrtc"===this.type?25e3:5e3),this.connectTimeout.unref&&this.connectTimeout.unref()}startHandshakeTimeout(){clearTimeout(this.handshakeTimeout),this.handshakeTimeout=setTimeout(()=>{this.destroy(new Error("handshake timeout"))},25e3),this.handshakeTimeout.unref&&this.handshakeTimeout.unref()}destroy(e){if(this.destroyed)return;this.destroyed=!0,this.connected=!1,o("destroy %s (error: %s)",this.id,e&&(e.message||e)),clearTimeout(this.connectTimeout),clearTimeout(this.handshakeTimeout);const t=this.swarm,n=this.conn,i=this.wire;this.swarm=null,this.conn=null,this.wire=null,t&&i&&r(t.wires,t.wires.indexOf(i)),n&&(n.on("error",()=>{}),n.destroy()),i&&i.destroy(),t&&t.removePeer(this.id)}}},{"./webconn":6,"bittorrent-protocol":14,debug:30,"unordered-array-remove":115}],4:[function(e,t){t.exports=class{constructor(e){this._torrent=e,this._numPieces=e.pieces.length,this._pieces=Array(this._numPieces),this._onWire=e=>{this.recalculate(),this._initWire(e)},this._onWireHave=e=>{this._pieces[e]+=1},this._onWireBitfield=()=>{this.recalculate()},this._torrent.wires.forEach(e=>{this._initWire(e)}),this._torrent.on("wire",this._onWire),this.recalculate()}getRarestPiece(e){let t=[],n=1/0;for(let r=0;r<this._numPieces;++r){if(e&&!e(r))continue;const o=this._pieces[r];o===n?t.push(r):o<n&&(t=[r],n=o)}return t.length?t[0|Math.random()*t.length]:-1}destroy(){this._torrent.removeListener("wire",this._onWire),this._torrent.wires.forEach(e=>{this._cleanupWireEvents(e)}),this._torrent=null,this._pieces=null,this._onWire=null,this._onWireHave=null,this._onWireBitfield=null}_initWire(e){e._onClose=()=>{this._cleanupWireEvents(e);for(let t=0;t<this._numPieces;++t)this._pieces[t]-=e.peerPieces.get(t)},e.on("have",this._onWireHave),e.on("bitfield",this._onWireBitfield),e.once("close",e._onClose)}recalculate(){this._pieces.fill(0);for(const e of this._torrent.wires)for(let t=0;t<this._numPieces;++t)this._pieces[t]+=e.peerPieces.get(t)}_cleanupWireEvents(e){e.removeListener("have",this._onWireHave),e.removeListener("bitfield",this._onWireBitfield),e._onClose&&e.removeListener("close",e._onClose),e._onClose=null}}},{}],5:[function(e,t){(function(n,r){function o(e,t){return 2+a(t*e.downloadSpeed()/L.BLOCK_LENGTH)}function l(e,t,n){return 1+a(t*e.downloadSpeed()/n)}function c(e){return 0|Math.random()*e}function u(){}const f=e("addr-to-ip-port"),p=e("bitfield"),h=e("chunk-store-stream/write"),m=e("debug")("webtorrent:torrent"),g=e("torrent-discovery"),_=e("events").EventEmitter,b=e("fs"),i=e("fs-chunk-store"),y=e("simple-get"),w=e("immediate-chunk-store"),k=e("multistream"),E=e("net"),x=e("os"),v=e("run-parallel"),S=e("run-parallel-limit"),C=e("parse-torrent"),I=e("path"),L=e("torrent-piece"),T=e("pump"),B=e("random-iterate"),R=e("simple-sha1"),A=e("speedometer"),U=e("uniq"),P=e("ut_metadata"),O=e("ut_pex"),N=e("parse-numeric-range"),M=e("./file"),H=e("./peer"),q=e("./rarity-map"),D=e("./server"),j=5e3,F=3*L.BLOCK_LENGTH,W=1,z=n.browser?1/0:2,V=[1e3,5e3,15e3],G=e("../package.json").version,K=`WebTorrent/${G} (https://webtorrent.io)`;let Y;try{Y=I.join(b.statSync("/tmp")&&"/tmp","webtorrent")}catch(e){Y=I.join("function"==typeof x.tmpdir?x.tmpdir():"/","webtorrent")}class X extends _{constructor(e,t,n){super(),this._debugId="unknown infohash",this.client=t,this.announce=n.announce,this.urlList=n.urlList,this.path=n.path,this.skipVerify=!!n.skipVerify,this._store=n.store||i,this._getAnnounceOpts=n.getAnnounceOpts,this.strategy=n.strategy||"sequential",this.maxWebConns=n.maxWebConns||4,this._rechokeNumSlots=!1===n.uploads||0===n.uploads?0:+n.uploads||10,this._rechokeOptimisticWire=null,this._rechokeOptimisticTime=0,this._rechokeIntervalId=null,this.ready=!1,this.destroyed=!1,this.paused=!1,this.done=!1,this.metadata=null,this.store=null,this.files=[],this.pieces=[],this._amInterested=!1,this._selections=[],this._critical=[],this.wires=[],this._queue=[],this._peers={},this._peersLength=0,this.received=0,this.uploaded=0,this._downloadSpeed=A(),this._uploadSpeed=A(),this._servers=[],this._xsRequests=[],this._fileModtimes=n.fileModtimes,null!==e&&this._onTorrentId(e),this._debug("new torrent")}get timeRemaining(){return this.done?0:0===this.downloadSpeed?1/0:1e3*((this.length-this.downloaded)/this.downloadSpeed)}get downloaded(){if(!this.bitfield)return 0;let e=0;for(let t=0,n=this.pieces.length;t<n;++t)if(this.bitfield.get(t))e+=t===n-1?this.lastPieceLength:this.pieceLength;else{const n=this.pieces[t];e+=n.length-n.missing}return e}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){return this.length?this.downloaded/this.length:0}get ratio(){return this.uploaded/(this.received||1)}get numPeers(){return this.wires.length}get torrentFileBlobURL(){if("undefined"==typeof window)throw new Error("browser-only property");return this.torrentFile?URL.createObjectURL(new Blob([this.torrentFile],{type:"application/x-bittorrent"})):null}get _numQueued(){return this._queue.length+(this._peersLength-this._numConns)}get _numConns(){let e=0;for(const t in this._peers)this._peers[t].connected&&(e+=1);return e}get swarm(){return console.warn("WebTorrent: `torrent.swarm` is deprecated. Use `torrent` directly instead."),this}_onTorrentId(e){if(this.destroyed)return;let t;try{t=C(e)}catch(e){}t?(this.infoHash=t.infoHash,this._debugId=t.infoHash.toString("hex").substring(0,7),n.nextTick(()=>{this.destroyed||this._onParsedTorrent(t)})):C.remote(e,(e,t)=>this.destroyed?void 0:e?this._destroy(e):void this._onParsedTorrent(t))}_onParsedTorrent(e){if(!this.destroyed){if(this._processParsedTorrent(e),!this.infoHash)return this._destroy(new Error("Malformed torrent data: No info hash"));(this.path||(this.path=I.join(Y,this.infoHash)),this._rechokeIntervalId=setInterval(()=>{this._rechoke()},1e4),this._rechokeIntervalId.unref&&this._rechokeIntervalId.unref(),this.emit("_infoHash",this.infoHash),!this.destroyed)&&(this.emit("infoHash",this.infoHash),this.destroyed||(this.client.listening?this._onListening():this.client.once("listening",()=>{this._onListening()})))}}_processParsedTorrent(e){this._debugId=e.infoHash.toString("hex").substring(0,7),this.announce&&(e.announce=e.announce.concat(this.announce)),this.client.tracker&&r.WEBTORRENT_ANNOUNCE&&!this.private&&(e.announce=e.announce.concat(r.WEBTORRENT_ANNOUNCE)),this.urlList&&(e.urlList=e.urlList.concat(this.urlList)),U(e.announce),U(e.urlList),Object.assign(this,e),this.magnetURI=C.toMagnetURI(e),this.torrentFile=C.toTorrentFile(e)}_onListening(){this.destroyed||(this.info?this._onMetadata(this):(this.xs&&this._getMetadataFromServer(),this._startDiscovery()))}_startDiscovery(){if(this.discovery||this.destroyed)return;let e=this.client.tracker;e&&(e=Object.assign({},this.client.tracker,{getAnnounceOpts:()=>{const e={uploaded:this.uploaded,downloaded:this.downloaded,left:d(this.length-this.downloaded,0)};return this.client.tracker.getAnnounceOpts&&Object.assign(e,this.client.tracker.getAnnounceOpts()),this._getAnnounceOpts&&Object.assign(e,this._getAnnounceOpts()),e}})),this.discovery=new g({infoHash:this.infoHash,announce:this.announce,peerId:this.client.peerId,dht:!this.private&&this.client.dht,tracker:e,port:this.client.torrentPort,userAgent:K}),this.discovery.on("error",e=>{this._destroy(e)}),this.discovery.on("peer",e=>{"string"==typeof e&&this.done||this.addPeer(e)}),this.discovery.on("trackerAnnounce",()=>{this.emit("trackerAnnounce"),0===this.numPeers&&this.emit("noPeers","tracker")}),this.discovery.on("dhtAnnounce",()=>{this.emit("dhtAnnounce"),0===this.numPeers&&this.emit("noPeers","dht")}),this.discovery.on("warning",e=>{this.emit("warning",e)})}_getMetadataFromServer(){function e(e,n){function r(r,o,i){if(t.destroyed)return n(null);if(t.metadata)return n(null);if(r)return t.emit("warning",new Error(`http error from xs param: ${e}`)),n(null);if(200!==o.statusCode)return t.emit("warning",new Error(`non-200 status code ${o.statusCode} from xs param: ${e}`)),n(null);let a;try{a=C(i)}catch(e){}return a?a.infoHash===t.infoHash?void(t._onMetadata(a),n(null)):(t.emit("warning",new Error(`got torrent file with incorrect info hash from xs param: ${e}`)),n(null)):(t.emit("warning",new Error(`got invalid torrent file from xs param: ${e}`)),n(null))}if(0!==e.indexOf("http://")&&0!==e.indexOf("https://"))return t.emit("warning",new Error(`skipping non-http xs param: ${e}`)),n(null);let o;try{o=y.concat({url:e,method:"GET",headers:{"user-agent":K}},r)}catch(r){return t.emit("warning",new Error(`skipping invalid url xs param: ${e}`)),n(null)}t._xsRequests.push(o)}const t=this,n=Array.isArray(this.xs)?this.xs:[this.xs],r=n.map(t=>n=>{e(t,n)});v(r)}_onMetadata(e){if(this.metadata||this.destroyed)return;this._debug("got metadata"),this._xsRequests.forEach(e=>{e.abort()}),this._xsRequests=[];let t;if(e&&e.infoHash)t=e;else try{t=C(e)}catch(e){return this._destroy(e)}if(this._processParsedTorrent(t),this.metadata=this.torrentFile,this.client.enableWebSeeds&&this.urlList.forEach(e=>{this.addWebSeed(e)}),this._rarityMap=new q(this),this.store=new w(new this._store(this.pieceLength,{torrent:{infoHash:this.infoHash},files:this.files.map(e=>({path:I.join(this.path,e.path),length:e.length,offset:e.offset})),length:this.length,name:this.infoHash})),this.files=this.files.map(e=>new M(this,e)),this.so){const e=N.parse(this.so);this.files.forEach((t,n)=>{e.includes(n)&&this.files[n].select(!0)})}else 0!==this.pieces.length&&this.select(0,this.pieces.length-1,!1);if(this._hashes=this.pieces,this.pieces=this.pieces.map((e,t)=>{const n=t===this.pieces.length-1?this.lastPieceLength:this.pieceLength;return new L(n)}),this._reservations=this.pieces.map(()=>[]),this.bitfield=new p(this.pieces.length),this.wires.forEach(e=>{e.ut_metadata&&e.ut_metadata.setMetadata(this.metadata),this._onWireWithMetadata(e)}),this.emit("metadata"),!this.destroyed)if(this.skipVerify)this._markAllVerified(),this._onStore();else{const e=e=>e?this._destroy(e):void(this._debug("done verifying"),this._onStore());this._debug("verifying existing torrent data"),this._fileModtimes&&this._store===i?this.getFileModtimes((t,n)=>{if(t)return this._destroy(t);const r=this.files.map((e,t)=>n[t]===this._fileModtimes[t]).every(e=>e);r?(this._markAllVerified(),this._onStore()):this._verifyPieces(e)}):this._verifyPieces(e)}}getFileModtimes(e){const t=[];S(this.files.map((e,n)=>r=>{b.stat(I.join(this.path,e.path),(e,o)=>e&&"ENOENT"!==e.code?r(e):void(t[n]=o&&o.mtime.getTime(),r(null)))}),z,n=>{this._debug("done getting file modtimes"),e(n,t)})}_verifyPieces(e){S(this.pieces.map((e,t)=>e=>this.destroyed?e(new Error("torrent is destroyed")):void this.store.get(t,(r,o)=>this.destroyed?e(new Error("torrent is destroyed")):r?n.nextTick(e,null):void R(o,n=>{if(this.destroyed)return e(new Error("torrent is destroyed"));if(n===this._hashes[t]){if(!this.pieces[t])return e(null);this._debug("piece verified %s",t),this._markVerified(t)}else this._debug("piece invalid %s",t);e(null)}))),z,e)}rescanFiles(e){if(this.destroyed)throw new Error("torrent is destroyed");e||(e=u),this._verifyPieces(t=>t?(this._destroy(t),e(t)):void(this._checkDone(),e(null)))}_markAllVerified(){for(let e=0;e<this.pieces.length;e++)this._markVerified(e)}_markVerified(e){this.pieces[e]=null,this._reservations[e]=null,this.bitfield.set(e,!0)}_onStore(){this.destroyed||(this._debug("on store"),this._startDiscovery(),this.ready=!0,this.emit("ready"),this._checkDone(),this._updateSelections())}destroy(e){this._destroy(null,e)}_destroy(e,t){if(!this.destroyed){for(const e in this.destroyed=!0,this._debug("destroy"),this.client._remove(this),clearInterval(this._rechokeIntervalId),this._xsRequests.forEach(e=>{e.abort()}),this._rarityMap&&this._rarityMap.destroy(),this._peers)this.removePeer(e);this.files.forEach(e=>{e instanceof M&&e._destroy()});const n=this._servers.map(e=>t=>{e.destroy(t)});this.discovery&&n.push(e=>{this.discovery.destroy(e)}),this.store&&n.push(e=>{this.store.close(e)}),v(n,t),e&&(0===this.listenerCount("error")?this.client.emit("error",e):this.emit("error",e)),this.emit("close"),this.client=null,this.files=[],this.discovery=null,this.store=null,this._rarityMap=null,this._peers=null,this._servers=null,this._xsRequests=null}}addPeer(t){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");if(this.client.blocked){let e;if("string"==typeof t){let n;try{n=f(t)}catch(n){return this._debug("ignoring peer: invalid %s",t),this.emit("invalidPeer",t),!1}e=n[0]}else"string"==typeof t.remoteAddress&&(e=t.remoteAddress);if(e&&this.client.blocked.contains(e))return this._debug("ignoring peer: blocked %s",t),"string"!=typeof t&&t.destroy(),this.emit("blockedPeer",t),!1}const n=!!this._addPeer(t);return n?this.emit("peer",t):this.emit("invalidPeer",t),n}_addPeer(e){if(this.destroyed)return"string"!=typeof e&&e.destroy(),null;if("string"==typeof e&&!this._validAddr(e))return this._debug("ignoring peer: invalid %s",e),null;const t=e&&e.id||e;if(this._peers[t])return this._debug("ignoring peer: duplicate (%s)",t),"string"!=typeof e&&e.destroy(),null;if(this.paused)return this._debug("ignoring peer: torrent is paused"),"string"!=typeof e&&e.destroy(),null;this._debug("add peer %s",t);let n;return n="string"==typeof e?H.createTCPOutgoingPeer(e,this):H.createWebRTCPeer(e,this),this._peers[n.id]=n,this._peersLength+=1,"string"==typeof e&&(this._queue.push(n),this._drain()),n}addWebSeed(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!/^https?:\/\/.+/.test(e))return this.emit("warning",new Error(`ignoring invalid web seed: ${e}`)),void this.emit("invalidPeer",e);if(this._peers[e])return this.emit("warning",new Error(`ignoring duplicate web seed: ${e}`)),void this.emit("invalidPeer",e);this._debug("add web seed %s",e);const t=H.createWebSeedPeer(e,this);this._peers[t.id]=t,this._peersLength+=1,this.emit("peer",e)}_addIncomingPeer(e){return this.destroyed?e.destroy(new Error("torrent is destroyed")):this.paused?e.destroy(new Error("torrent is paused")):void(this._debug("add incoming peer %s",e.id),this._peers[e.id]=e,this._peersLength+=1)}removePeer(e){const t=e&&e.id||e;e=this._peers[t];e&&(this._debug("removePeer %s",t),delete this._peers[t],this._peersLength-=1,e.destroy(),this._drain())}select(e,t,n,r){if(this.destroyed)throw new Error("torrent is destroyed");if(0>e||t<e||this.pieces.length<=t)throw new Error(`invalid selection ${e} : ${t}`);n=+n||0,this._debug("select %s-%s (priority %s)",e,t,n),this._selections.push({from:e,to:t,offset:0,priority:n,notify:r||u}),this._selections.sort((e,t)=>t.priority-e.priority),this._updateSelections()}deselect(e,t,n){if(this.destroyed)throw new Error("torrent is destroyed");n=+n||0,this._debug("deselect %s-%s (priority %s)",e,t,n);for(let r=0;r<this._selections.length;++r){const o=this._selections[r];if(o.from===e&&o.to===t&&o.priority===n){this._selections.splice(r,1);break}}this._updateSelections()}critical(e,t){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("critical %s-%s",e,t);for(let n=e;n<=t;++n)this._critical[n]=!0;this._updateSelections()}_onWire(e,t){if(this._debug("got wire %s (%s)",e._debugId,t||"Unknown"),e.on("download",e=>{this.destroyed||(this.received+=e,this._downloadSpeed(e),this.client._downloadSpeed(e),this.emit("download",e),this.client.emit("download",e))}),e.on("upload",e=>{this.destroyed||(this.uploaded+=e,this._uploadSpeed(e),this.client._uploadSpeed(e),this.emit("upload",e),this.client.emit("upload",e))}),this.wires.push(e),t){const n=f(t);e.remoteAddress=n[0],e.remotePort=n[1]}this.client.dht&&this.client.dht.listening&&e.on("port",n=>this.destroyed||this.client.dht.destroyed?void 0:e.remoteAddress?0===n||65536<n?this._debug("ignoring invalid PORT from peer"):void(this._debug("port: %s (from %s)",n,t),this.client.dht.addNode({host:e.remoteAddress,port:n})):this._debug("ignoring PORT from peer with no address")),e.on("timeout",()=>{this._debug("wire timeout (%s)",t),e.destroy()}),e.setTimeout(3e4,!0),e.setKeepAlive(!0),e.use(P(this.metadata)),e.ut_metadata.on("warning",e=>{this._debug("ut_metadata warning: %s",e.message)}),this.metadata||(e.ut_metadata.on("metadata",e=>{this._debug("got metadata via ut_metadata"),this._onMetadata(e)}),e.ut_metadata.fetch()),"function"!=typeof O||this.private||(e.use(O()),e.ut_pex.on("peer",e=>{this.done||(this._debug("ut_pex: got peer: %s (from %s)",e,t),this.addPeer(e))}),e.ut_pex.on("dropped",e=>{const n=this._peers[e];n&&!n.connected&&(this._debug("ut_pex: dropped peer: %s (from %s)",e,t),this.removePeer(e))}),e.once("close",()=>{e.ut_pex.reset()})),this.emit("wire",e,t),this.metadata&&n.nextTick(()=>{this._onWireWithMetadata(e)})}_onWireWithMetadata(e){let t=null;const n=()=>{this.destroyed||e.destroyed||(this._numQueued>2*(this._numConns-this.numPeers)&&e.amInterested?e.destroy():(t=setTimeout(n,j),t.unref&&t.unref()))};let r;const o=()=>{if(e.peerPieces.buffer.length===this.bitfield.buffer.length){for(r=0;r<this.pieces.length;++r)if(!e.peerPieces.get(r))return;e.isSeeder=!0,e.choke()}};e.on("bitfield",()=>{o(),this._update()}),e.on("have",()=>{o(),this._update()}),e.once("interested",()=>{e.unchoke()}),e.once("close",()=>{clearTimeout(t)}),e.on("choke",()=>{clearTimeout(t),t=setTimeout(n,j),t.unref&&t.unref()}),e.on("unchoke",()=>{clearTimeout(t),this._update()}),e.on("request",(t,n,r,o)=>r>131072?e.destroy():void(this.pieces[t]||this.store.get(t,{offset:n,length:r},o))),e.bitfield(this.bitfield),e.uninterested(),e.peerExtensions.dht&&this.client.dht&&this.client.dht.listening&&e.port(this.client.dht.address().port),"webSeed"!==e.type&&(t=setTimeout(n,j),t.unref&&t.unref()),e.isSeeder=!1,o()}_updateSelections(){!this.ready||this.destroyed||(n.nextTick(()=>{this._gcSelections()}),this._updateInterest(),this._update())}_gcSelections(){for(let e=0;e<this._selections.length;++e){const t=this._selections[e],n=t.offset;for(;this.bitfield.get(t.from+t.offset)&&t.from+t.offset<t.to;)t.offset+=1;n!==t.offset&&t.notify(),t.to===t.from+t.offset&&this.bitfield.get(t.from+t.offset)&&(this._selections.splice(e,1),e-=1,t.notify(),this._updateInterest())}this._selections.length||this.emit("idle")}_updateInterest(){const e=this._amInterested;this._amInterested=!!this._selections.length,this.wires.forEach(e=>{let t=!1;for(let n=0;n<this.pieces.length;++n)if(this.pieces[n]&&e.peerPieces.get(n)){t=!0;break}t?e.interested():e.uninterested()});e===this._amInterested||(this._amInterested?this.emit("interested"):this.emit("uninterested"))}_update(){if(!this.destroyed){const e=B(this.wires);for(let t;t=e();)this._updateWireWrapper(t)}}_updateWireWrapper(e){const t=this;"undefined"!=typeof window&&"function"==typeof window.requestIdleCallback?window.requestIdleCallback(function(){t._updateWire(e)},{timeout:250}):t._updateWire(e)}_updateWire(e){function t(t,n,r,o){return a=>a>=t&&a<=n&&!(a in r)&&e.peerPieces.get(a)&&(!o||o(a))}function n(){const t=e.downloadSpeed()||1;if(t>F)return()=>!0;const n=d(1,e.requests.length)*L.BLOCK_LENGTH/t;let r=10,o=0;return e=>{if(!r||a.bitfield.get(e))return!0;for(let i=a.pieces[e].missing;o<a.wires.length;o++){const d=a.wires[o],s=d.downloadSpeed();if(!(s<F)&&!(s<=t)&&d.peerPieces.get(e)&&!(0<(i-=s*n)))return r--,!1}return!0}}function r(e){let t=e;for(let n=e;n<a._selections.length&&a._selections[n].priority;n++)t=n;const n=a._selections[e];a._selections[e]=a._selections[t],a._selections[t]=n}function i(o){if(e.requests.length>=l)return!0;const d=n();for(let n=0;n<a._selections.length;n++){const i=a._selections[n];let s;if("rarest"===a.strategy){const c=i.from+i.offset,u=i.to,f={};let p=0;for(const h=t(c,u,f,d);p<u-c+1&&(s=a._rarityMap.getRarestPiece(h),!(0>s));){for(;a._request(e,s,a._critical[s]||o););if(e.requests.length<l){f[s]=!0,p++;continue}return i.priority&&r(n),!0}}else for(s=i.from+i.offset;s<=i.to;s++)if(e.peerPieces.get(s)&&d(s)){for(;a._request(e,s,a._critical[s]||o););if(!(e.requests.length<l))return i.priority&&r(n),!0}}return!1}const a=this;if(e.peerChoking)return;if(!e.downloaded)return function(){if(!e.requests.length)for(let n=a._selections.length;n--;){const r=a._selections[n];let o;if("rarest"===a.strategy){const n=r.from+r.offset,i=r.to,d={};let s=0;for(const r=t(n,i,d);s<i-n+1&&(o=a._rarityMap.getRarestPiece(r),!(0>o));){if(a._request(e,o,!1))return;d[o]=!0,s+=1}}else for(o=r.to;o>=r.from+r.offset;--o)if(e.peerPieces.get(o)&&a._request(e,o,!1))return}}();const s=o(e,.5);if(e.requests.length>=s)return;const l=o(e,W);i(!1)||i(!0)}_rechoke(){if(!this.ready)return;0<this._rechokeOptimisticTime?this._rechokeOptimisticTime-=1:this._rechokeOptimisticWire=null;const e=[];this.wires.forEach(t=>{t.isSeeder||t===this._rechokeOptimisticWire||e.push({wire:t,downloadSpeed:t.downloadSpeed(),uploadSpeed:t.uploadSpeed(),salt:Math.random(),isChoked:!0})}),e.sort(function(e,t){return e.downloadSpeed===t.downloadSpeed?e.uploadSpeed===t.uploadSpeed?e.wire.amChoking===t.wire.amChoking?e.salt-t.salt:e.wire.amChoking?1:-1:t.uploadSpeed-e.uploadSpeed:t.downloadSpeed-e.downloadSpeed});let t=0,n=0;for(;n<e.length&&t<this._rechokeNumSlots;++n)e[n].isChoked=!1,e[n].wire.peerInterested&&(t+=1);if(!this._rechokeOptimisticWire&&n<e.length&&this._rechokeNumSlots){const t=e.slice(n).filter(e=>e.wire.peerInterested),r=t[c(t.length)];r&&(r.isChoked=!1,this._rechokeOptimisticWire=r.wire,this._rechokeOptimisticTime=2)}e.forEach(e=>{e.wire.amChoking!==e.isChoked&&(e.isChoked?e.wire.choke():e.wire.unchoke())})}_hotswap(e,t){const n=e.downloadSpeed();if(n<L.BLOCK_LENGTH)return!1;if(!this._reservations[t])return!1;const o=this._reservations[t];if(!o)return!1;let r=1/0,a,d;for(d=0;d<o.length;d++){const t=o[d];if(!t||t===e)continue;const i=t.downloadSpeed();i>=F||2*i>n||i>r||(a=t,r=i)}if(!a)return!1;for(d=0;d<o.length;d++)o[d]===a&&(o[d]=null);for(d=0;d<a.requests.length;d++){const e=a.requests[d];e.piece===t&&this.pieces[t].cancel(0|e.offset/L.BLOCK_LENGTH)}return this.emit("hotswap",a,e,t),!0}_request(e,t,a){function d(){n.nextTick(()=>{c._update()})}const c=this,u=e.requests.length,f="webSeed"===e.type;if(c.bitfield.get(t))return!1;const p=f?s(l(e,W,c.pieceLength),c.maxWebConns):o(e,W);if(u>=p)return!1;const h=c.pieces[t];let m=f?h.reserveRemaining():h.reserve();if(-1===m&&a&&c._hotswap(e,t)&&(m=f?h.reserveRemaining():h.reserve()),-1===m)return!1;let g=c._reservations[t];g||(g=c._reservations[t]=[]);let _=g.indexOf(null);-1===_&&(_=g.length),g[_]=e;const b=h.chunkOffset(m),y=f?h.chunkLengthRemaining(m):h.chunkLength(m);return e.request(t,b,y,function n(r,o){if(c.destroyed)return;if(!c.ready)return c.once("ready",()=>{n(r,o)});if(g[_]===e&&(g[_]=null),h!==c.pieces[t])return d();if(r)return c._debug("error getting piece %s (offset: %s length: %s) from %s: %s",t,b,y,`${e.remoteAddress}:${e.remotePort}`,r.message),f?h.cancelRemaining(m):h.cancel(m),void d();if(c._debug("got piece %s (offset: %s length: %s) from %s",t,b,y,`${e.remoteAddress}:${e.remotePort}`),!h.set(m,o,e))return d();const i=h.flush();R(i,e=>{if(!c.destroyed){if(e===c._hashes[t]){if(!c.pieces[t])return;c._debug("piece verified %s",t),c.pieces[t]=null,c._reservations[t]=null,c.bitfield.set(t,!0),c.store.put(t,i),c.wires.forEach(e=>{e.have(t)}),c._checkDone()&&!c.destroyed&&c.discovery.complete()}else c.pieces[t]=new L(h.length),c.emit("warning",new Error(`Piece ${t} failed verification`));d()}})}),!0}_checkDone(){if(this.destroyed)return;this.files.forEach(e=>{if(!e.done){for(let t=e._startPiece;t<=e._endPiece;++t)if(!this.bitfield.get(t))return;e.done=!0,e.emit("done"),this._debug(`file done: ${e.name}`)}});let e=!0;for(let t=0;t<this._selections.length;t++){const n=this._selections[t];for(let t=n.from;t<=n.to;t++)if(!this.bitfield.get(t)){e=!1;break}if(!e)break}return!this.done&&e&&(this.done=!0,this._debug(`torrent done: ${this.infoHash}`),this.emit("done")),this._gcSelections(),e}load(e,t){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.ready)return this.once("ready",()=>{this.load(e,t)});Array.isArray(e)||(e=[e]),t||(t=u);const n=new k(e),r=new h(this.store,this.pieceLength);T(n,r,e=>e?t(e):void(this._markAllVerified(),this._checkDone(),t(null)))}createServer(e){if("function"!=typeof D)throw new Error("node.js-only method");if(this.destroyed)throw new Error("torrent is destroyed");const t=new D(this,e);return this._servers.push(t),t}pause(){this.destroyed||(this._debug("pause"),this.paused=!0)}resume(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())}_debug(){const e=[].slice.call(arguments);e[0]=`[${this.client._debugId}] [${this._debugId}] ${e[0]}`,m(...e)}_drain(){if(this._debug("_drain numConns %s maxConns %s",this._numConns,this.client.maxConns),"function"!=typeof E.connect||this.destroyed||this.paused||this._numConns>=this.client.maxConns)return;this._debug("drain (%s queued, %s/%s peers)",this._numQueued,this.numPeers,this.client.maxConns);const e=this._queue.shift();if(!e)return;this._debug("tcp connect attempt to %s",e.addr);const t=f(e.addr),n={host:t[0],port:t[1]},r=e.conn=E.connect(n);r.once("connect",()=>{e.onConnect()}),r.once("error",t=>{e.destroy(t)}),e.startConnectTimeout(),r.on("close",()=>{if(!this.destroyed){if(e.retries>=V.length)return void this._debug("conn %s closed: will not re-add (max %s attempts)",e.addr,V.length);const t=V[e.retries];this._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",e.addr,t,e.retries+1);const n=setTimeout(()=>{const t=this._addPeer(e.addr);t&&(t.retries=e.retries+1)},t);n.unref&&n.unref()}})}_validAddr(e){let t;try{t=f(e)}catch(t){return!1}const n=t[0],r=t[1];return 0<r&&65535>r&&("127.0.0.1"!==n||r!==this.client.torrentPort)}}t.exports=X}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../package.json":124,"./file":2,"./peer":3,"./rarity-map":4,"./server":21,_process:61,"addr-to-ip-port":7,bitfield:13,"chunk-store-stream/write":28,debug:30,events:33,fs:22,"fs-chunk-store":46,"immediate-chunk-store":38,multistream:54,net:21,os:21,"parse-numeric-range":57,"parse-torrent":58,path:59,pump:62,"random-iterate":68,"run-parallel":89,"run-parallel-limit":88,"simple-get":93,"simple-sha1":95,speedometer:98,"torrent-discovery":110,"torrent-piece":111,uniq:114,ut_metadata:118,ut_pex:21}],6:[function(e,t){(function(n){const r=e("bitfield"),o=e("debug")("webtorrent:webconn"),i=e("simple-get"),a=e("simple-sha1"),l=e("bittorrent-protocol"),c=e("../package.json").version;t.exports=class extends l{constructor(e,t){super(),this.url=e,this.webPeerId=a.sync(e),this._torrent=t,this._init()}_init(){this.setKeepAlive(!0),this.once("handshake",e=>{if(this.destroyed)return;this.handshake(e,this.webPeerId);const t=this._torrent.pieces.length,n=new r(t);for(let r=0;r<=t;r++)n.set(r,!0);this.bitfield(n)}),this.once("interested",()=>{o("interested"),this.unchoke()}),this.on("uninterested",()=>{o("uninterested")}),this.on("choke",()=>{o("choke")}),this.on("unchoke",()=>{o("unchoke")}),this.on("bitfield",()=>{o("bitfield")}),this.on("request",(e,t,n,r)=>{o("request pieceIndex=%d offset=%d length=%d",e,t,n),this.httpRequest(e,t,n,r)})}httpRequest(e,t,r,a){const l=e*this._torrent.pieceLength,u=l+t,f=u+r-1,p=this._torrent.files;let h;if(1>=p.length)h=[{url:this.url,start:u,end:f}];else{const e=p.filter(e=>e.offset<=f&&e.offset+e.length>u);if(1>e.length)return a(new Error("Could not find file corresponnding to web seed range request"));h=e.map(e=>{const t=e.offset+e.length-1,n=this.url+("/"===this.url[this.url.length-1]?"":"/")+e.path;return{url:n,fileOffsetInRange:d(e.offset-u,0),start:d(u-e.offset,0),end:s(t,f-e.offset)}})}let m=0,g=!1,_;1<h.length&&(_=n.alloc(r)),h.forEach(n=>{function d(e,t){return 200>e.statusCode||300<=e.statusCode?(g=!0,a(new Error(`Unexpected HTTP status code ${e.statusCode}`))):void(o("Got data of length %d",t.length),1===h.length?a(null,t):(t.copy(_,n.fileOffsetInRange),++m===h.length&&a(null,_)))}const s=n.url,l=n.start,u=n.end;o("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",s,e,t,r,l,u);const f={url:s,method:"GET",headers:{"user-agent":`WebTorrent/${c} (https://webtorrent.io)`,range:`bytes=${l}-${u}`}};i.concat(f,(e,t,n)=>g?void 0:e?"undefined"==typeof window||s.startsWith(`${window.location.origin}/`)?(g=!0,a(e)):i.head(s,(t,n)=>g?void 0:t?(g=!0,a(t)):200>n.statusCode||300<=n.statusCode?(g=!0,a(new Error(`Unexpected HTTP status code ${n.statusCode}`))):n.url===s?(g=!0,a(e)):void(f.url=n.url,i.concat(f,(e,t,n)=>g?void 0:e?(g=!0,a(e)):void d(t,n)))):void d(t,n))})}destroy(){super.destroy(),this._torrent=null}}}).call(this,e("buffer").Buffer)},{"../package.json":124,bitfield:13,"bittorrent-protocol":14,buffer:26,debug:30,"simple-get":93,"simple-sha1":95}],7:[function(e,t){const n=/^\[?([^\]]+)\]?:(\d+)$/;let r={},o=0;t.exports=function(e){if(1e5===o&&t.exports.reset(),!r[e]){const t=n.exec(e);if(!t)throw new Error(`invalid addr: ${e}`);r[e]=[t[1],+t[2]],o+=1}return r[e]},t.exports.reset=function(){r={},o=0}},{}],8:[function(e,t,n){'use strict';function r(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function o(e,t,n){return 3*(t+n)/4-n}function a(e){var t=r(e),n=t[0],a=t[1],d=new f(o(e,n,a)),s=0,l=0<a?n-4:n,c,p;for(p=0;p<l;p+=4)c=u[e.charCodeAt(p)]<<18|u[e.charCodeAt(p+1)]<<12|u[e.charCodeAt(p+2)]<<6|u[e.charCodeAt(p+3)],d[s++]=255&c>>16,d[s++]=255&c>>8,d[s++]=255&c;return 2===a&&(c=u[e.charCodeAt(p)]<<2|u[e.charCodeAt(p+1)]>>4,d[s++]=255&c),1===a&&(c=u[e.charCodeAt(p)]<<10|u[e.charCodeAt(p+1)]<<4|u[e.charCodeAt(p+2)]>>2,d[s++]=255&c>>8,d[s++]=255&c),d}function d(e){return c[63&e>>18]+c[63&e>>12]+c[63&e>>6]+c[63&e]}function s(e,t,n){for(var r=[],o=t,a;o<n;o+=3)a=(16711680&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2]),r.push(d(a));return r.join("")}function l(e){for(var t=e.length,n=t%3,r=[],o=16383,a=0,d=t-n,l;a<d;a+=o)r.push(s(e,a,a+o>d?d:a+o));return 1===n?(l=e[t-1],r.push(c[l>>2]+c[63&l<<4]+"==")):2===n&&(l=(e[t-2]<<8)+e[t-1],r.push(c[l>>10]+c[63&l>>4]+c[63&l<<2]+"=")),r.join("")}n.byteLength=function(e){var t=r(e),n=t[0],o=t[1];return 3*(n+o)/4-o},n.toByteArray=a,n.fromByteArray=l;for(var c=[],u=[],f="undefined"==typeof Uint8Array?Array:Uint8Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,m=p.length;h<m;++h)c[h]=p[h],u[p.charCodeAt(h)]=h;u[45]=62,u[95]=63},{}],9:[function(e,t){function n(e,t,n){for(var r=0,o=1,a=t,d;a<n;a++){if(d=e[a],58>d&&48<=d){r=10*r+(d-48);continue}if(a!==t||43!==d){if(a===t&&45===d){o=-1;continue}if(46===d)break;throw new Error("not a number: buffer["+a+"] = "+d)}}return r*o}function r(e,t,n,o){return null==e||0===e.length?null:("number"!=typeof t&&null==o&&(o=t,t=void 0),"number"!=typeof n&&null==o&&(o=n,n=void 0),r.position=0,r.encoding=o||null,r.data=i.isBuffer(e)?e.slice(t,n):i.from(e),r.bytes=r.data.length,r.next())}var i=e("safe-buffer").Buffer;const a=101;r.bytes=0,r.position=0,r.data=null,r.encoding=null,r.next=function(){switch(r.data[r.position]){case 100:return r.dictionary();case 108:return r.list();case 105:return r.integer();default:return r.buffer();}},r.find=function(e){for(var t=r.position,n=r.data.length,a=r.data;t<n;){if(a[t]===e)return t;t++}throw new Error("Invalid data: Missing delimiter \""+o(e)+"\" [0x"+e.toString(16)+"]")},r.dictionary=function(){r.position++;for(var e={};r.data[r.position]!==a;)e[r.buffer()]=r.next();return r.position++,e},r.list=function(){r.position++;for(var e=[];r.data[r.position]!==a;)e.push(r.next());return r.position++,e},r.integer=function(){var e=r.find(a),t=n(r.data,r.position+1,e);return r.position+=e+1-r.position,t},r.buffer=function(){var e=r.find(58),t=n(r.data,r.position,e),o=++e+t;return r.position=o,r.encoding?r.data.toString(r.encoding,e,o):r.data.slice(e,o)},t.exports=r},{"safe-buffer":91}],10:[function(e,t){function n(e,t,o){var i=[],a=null;return n._encode(i,e),a=r.concat(i),n.bytes=a.length,r.isBuffer(t)?(a.copy(t,o),t):a}var r=e("safe-buffer").Buffer;n.bytes=-1,n._floatConversionDetected=!1,n.getType=function(e){return r.isBuffer(e)?"buffer":Array.isArray(e)?"array":ArrayBuffer.isView(e)?"arraybufferview":e instanceof Number?"number":e instanceof Boolean?"boolean":e instanceof ArrayBuffer?"arraybuffer":typeof e},n._encode=function(e,t){if(null!=t)switch(n.getType(t)){case"buffer":n.buffer(e,t);break;case"object":n.dict(e,t);break;case"array":n.list(e,t);break;case"string":n.string(e,t);break;case"number":n.number(e,t);break;case"boolean":n.number(e,t);break;case"arraybufferview":n.buffer(e,r.from(t.buffer,t.byteOffset,t.byteLength));break;case"arraybuffer":n.buffer(e,r.from(t));}};var o=r.from("e"),i=r.from("d"),a=r.from("l");n.buffer=function(e,t){e.push(r.from(t.length+":"),t)},n.string=function(e,t){e.push(r.from(r.byteLength(t)+":"+t))},n.number=function(e,t){var o=(t/2147483648<<0)*2147483648+(t%2147483648<<0);e.push(r.from("i"+o+"e")),o===t||n._floatConversionDetected||(n._floatConversionDetected=!0,console.warn("WARNING: Possible data corruption detected with value \""+t+"\":","Bencoding only defines support for integers, value was converted to \""+o+"\""),console.trace())},n.dict=function(e,t){e.push(i);for(var r=0,a=Object.keys(t).sort(),d=a.length,s;r<d;r++)s=a[r],null==t[s]||(n.string(e,s),n._encode(e,t[s]));e.push(o)},n.list=function(e,t){var r=0,d=t.length;for(e.push(a);r<d;r++)null!=t[r]&&n._encode(e,t[r]);e.push(o)},t.exports=n},{"safe-buffer":91}],11:[function(e,t){var n=t.exports;n.encode=e("./encode"),n.decode=e("./decode"),n.byteLength=n.encodingLength=function(e){return n.encode(e).length}},{"./decode":9,"./encode":10}],12:[function(e,t){t.exports=function(e,t,n,r,o){var i,a;if(void 0===r)r=0;else if(r|=0,0>r||r>=e.length)throw new RangeError("invalid lower bound");if(void 0===o)o=e.length-1;else if(o|=0,o<r||o>=e.length)throw new RangeError("invalid upper bound");for(;r<=o;)if(i=r+(o-r>>>1),a=+n(e[i],t,i,e),0>a)r=i+1;else if(0<a)o=i-1;else return i;return~r}},{}],13:[function(e,t){function n(e){let t=e>>3;return 0!=e%8&&t++,t}"undefined"!=typeof t&&(t.exports=class{constructor(e=0,t){const r=null!=t&&t.grow;this.grow=r&&isFinite(r)&&n(r)||r||0,this.buffer="number"==typeof e?new Uint8Array(n(e)):e}get(e){const t=e>>3;return t<this.buffer.length&&!!(this.buffer[t]&128>>e%8)}set(e,t=!0){const n=e>>3;if(t){if(this.buffer.length<n+1){const e=d(n+1,s(2*this.buffer.length,this.grow));if(e<=this.grow){const t=new Uint8Array(e);t.set(this.buffer),this.buffer=t}}this.buffer[n]|=128>>e%8}else n<this.buffer.length&&(this.buffer[n]&=~(128>>e%8))}})},{}],14:[function(e,t){(function(n){const r=e("unordered-array-remove"),o=e("bencode"),i=e("bitfield"),a=e("debug")("bittorrent-protocol"),d=e("randombytes"),s=e("speedometer"),l=e("readable-stream"),c=n.from("\x13BitTorrent protocol"),u=n.from([0,0,0,0]),f=n.from([0,0,0,1,0]),p=n.from([0,0,0,1,1]),h=n.from([0,0,0,1,2]),m=n.from([0,0,0,1,3]),g=[0,0,0,0,0,0,0,0],_=[0,0,0,3,9,0,0];class b{constructor(e,t,n,r){this.piece=e,this.offset=t,this.length=n,this.callback=r}}class y extends l.Duplex{constructor(){super(),this._debugId=d(4).toString("hex"),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=null,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new i(0,{grow:4e5}),this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=s(),this.downloadSpeed=s(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this.destroyed=!1,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this.once("finish",()=>this._onFinish()),this._parseHandshake()}setKeepAlive(e){this._debug("setKeepAlive %s",e),clearInterval(this._keepAliveInterval);!1===e||(this._keepAliveInterval=setInterval(()=>{this.keepAlive()},55e3))}setTimeout(e,t){this._debug("setTimeout ms=%d unref=%s",e,t),this._clearTimeout(),this._timeoutMs=e,this._timeoutUnref=!!t,this._updateTimeout()}destroy(){this.destroyed||(this.destroyed=!0,this._debug("destroy"),this.emit("close"),this.end())}end(...e){this._debug("end"),this._onUninterested(),this._onChoke(),super.end(...e)}use(e){function t(){}const n=e.prototype.name;if(!n)throw new Error("Extension class requires a \"name\" property on the prototype");this._debug("use extension.name=%s",n);const r=this._nextExt,o=new e(this);"function"!=typeof o.onHandshake&&(o.onHandshake=t),"function"!=typeof o.onExtendedHandshake&&(o.onExtendedHandshake=t),"function"!=typeof o.onMessage&&(o.onMessage=t),this.extendedMapping[r]=n,this._ext[n]=o,this[n]=o,this._nextExt+=1}keepAlive(){this._debug("keep-alive"),this._push(u)}handshake(e,t,r){let o,i;if("string"==typeof e?(e=e.toLowerCase(),o=n.from(e,"hex")):(o=e,e=o.toString("hex")),"string"==typeof t?i=n.from(t,"hex"):(i=t,t=i.toString("hex")),20!==o.length||20!==i.length)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",e,t,r);const a=n.from(g);a[5]|=16,r&&r.dht&&(a[7]|=1),this._push(n.concat([c,a,o,i])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_sendExtendedHandshake(){const e=Object.assign({},this.extendedHandshake);for(const t in e.m={},this.extendedMapping){const n=this.extendedMapping[t];e.m[n]=+t}this.extended(0,o.encode(e)),this._extendedHandshakeSent=!0}choke(){if(!this.amChoking){for(this.amChoking=!0,this._debug("choke");this.peerRequests.length;)this.peerRequests.pop();this._push(f)}}unchoke(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(p))}interested(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(h))}uninterested(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(m))}have(e){this._debug("have %d",e),this._message(4,[e],null)}bitfield(e){this._debug("bitfield"),n.isBuffer(e)||(e=e.buffer),this._message(5,[],e)}request(e,t,n,r){return r||(r=()=>{}),this._finished?r(new Error("wire is closed")):this.peerChoking?r(new Error("peer is choking")):void(this._debug("request index=%d offset=%d length=%d",e,t,n),this.requests.push(new b(e,t,n,r)),this._updateTimeout(),this._message(6,[e,t,n],null))}piece(e,t,n){this._debug("piece index=%d offset=%d",e,t),this.uploaded+=n.length,this.uploadSpeed(n.length),this.emit("upload",n.length),this._message(7,[e,t],n)}cancel(e,t,n){this._debug("cancel index=%d offset=%d length=%d",e,t,n),this._callback(this._pull(this.requests,e,t,n),new Error("request was cancelled"),null),this._message(8,[e,t,n],null)}port(e){this._debug("port %d",e);const t=n.from(_);t.writeUInt16BE(e,5),this._push(t)}extended(e,t){if(this._debug("extended ext=%s",e),"string"==typeof e&&this.peerExtendedMapping[e]&&(e=this.peerExtendedMapping[e]),"number"==typeof e){const r=n.from([e]),i=n.isBuffer(t)?t:o.encode(t);this._message(20,[],n.concat([r,i]))}else throw new Error(`Unrecognized extension: ${e}`)}_read(){}_message(e,t,r){const o=r?r.length:0,a=n.allocUnsafe(5+4*t.length);a.writeUInt32BE(a.length+o-4,0),a[4]=e;for(let n=0;n<t.length;n++)a.writeUInt32BE(t[n],5+4*n);this._push(a),r&&this._push(r)}_push(e){return this._finished?void 0:this.push(e)}_onKeepAlive(){this._debug("got keep-alive"),this.emit("keep-alive")}_onHandshake(e,t,n){const r=e.toString("hex"),o=t.toString("hex");this._debug("got handshake i=%s p=%s exts=%o",r,o,n),this.peerId=o,this.peerIdBuffer=t,this.peerExtensions=n,this.emit("handshake",r,o,n);for(var i in this._ext)this._ext[i].onHandshake(r,o,n);n.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_onChoke(){for(this.peerChoking=!0,this._debug("got choke"),this.emit("choke");this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)}_onUnchoke(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")}_onInterested(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")}_onUninterested(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")}_onHave(e){this.peerPieces.get(e)||(this._debug("got have %d",e),this.peerPieces.set(e,!0),this.emit("have",e))}_onBitField(e){this.peerPieces=new i(e),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)}_onRequest(e,t,n){if(!this.amChoking){this._debug("got request index=%d offset=%d length=%d",e,t,n);const o=(o,i)=>r===this._pull(this.peerRequests,e,t,n)?o?this._debug("error satisfying request index=%d offset=%d length=%d (%s)",e,t,n,o.message):void this.piece(e,t,i):void 0;var r=new b(e,t,n,o);this.peerRequests.push(r),this.emit("request",e,t,n,o)}}_onPiece(e,t,n){this._debug("got piece index=%d offset=%d",e,t),this._callback(this._pull(this.requests,e,t,n.length),null,n),this.downloaded+=n.length,this.downloadSpeed(n.length),this.emit("download",n.length),this.emit("piece",e,t,n)}_onCancel(e,t,n){this._debug("got cancel index=%d offset=%d length=%d",e,t,n),this._pull(this.peerRequests,e,t,n),this.emit("cancel",e,t,n)}_onPort(e){this._debug("got port %d",e),this.emit("port",e)}_onExtended(e,t){if(0===e){let e;try{e=o.decode(t)}catch(e){this._debug("ignoring invalid extended handshake: %s",e.message||e)}if(!e)return;this.peerExtendedHandshake=e;if("object"==typeof e.m)for(var n in e.m)this.peerExtendedMapping[n]=+e.m[n].toString();for(n in this._ext)this.peerExtendedMapping[n]&&this._ext[n].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[e]&&(e=this.extendedMapping[e],this._ext[e]&&this._ext[e].onMessage(t)),this._debug("got extended message ext=%s",e),this.emit("extended",e,t)}_onTimeout(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")}_write(e,t,r){for(this._bufferSize+=e.length,this._buffer.push(e);this._bufferSize>=this._parserSize;){const e=1===this._buffer.length?this._buffer[0]:n.concat(this._buffer);this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[e.slice(this._parserSize)]:[],this._parser(e.slice(0,this._parserSize))}r(null)}_callback(e,t,n){e&&(this._clearTimeout(),!this.peerChoking&&!this._finished&&this._updateTimeout(),e.callback(t,n))}_clearTimeout(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}_updateTimeout(){this._timeoutMs&&this.requests.length&&!this._timeout&&(this._timeout=setTimeout(()=>this._onTimeout(),this._timeoutMs),this._timeoutUnref&&this._timeout.unref&&this._timeout.unref())}_parse(e,t){this._parserSize=e,this._parser=t}_onMessageLength(e){const t=e.readUInt32BE(0);0<t?this._parse(t,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))}_onMessage(e){switch(this._parse(4,this._onMessageLength),e[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(e.readUInt32BE(1));case 5:return this._onBitField(e.slice(1));case 6:return this._onRequest(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 7:return this._onPiece(e.readUInt32BE(1),e.readUInt32BE(5),e.slice(9));case 8:return this._onCancel(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 9:return this._onPort(e.readUInt16BE(1));case 20:return this._onExtended(e.readUInt8(1),e.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",e);}}_parseHandshake(){this._parse(1,e=>{const t=e.readUInt8(0);this._parse(t+48,e=>{const n=e.slice(0,t);return"BitTorrent protocol"===n.toString()?void(e=e.slice(t),this._onHandshake(e.slice(8,28),e.slice(28,48),{dht:!!(1&e[7]),extended:!!(16&e[5])}),this._parse(4,this._onMessageLength)):(this._debug("Error: wire not speaking BitTorrent protocol (%s)",n.toString()),void this.end())})})}_onFinish(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,()=>{});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)}_debug(...e){e[0]=`[${this._debugId}] ${e[0]}`,a(...e)}_pull(e,t,n,o){for(let a=0;a<e.length;a++){const i=e[a];if(i.piece===t&&i.offset===n&&i.length===o)return r(e,a),i}return null}}t.exports=y}).call(this,e("buffer").Buffer)},{bencode:11,bitfield:13,buffer:26,debug:30,randombytes:69,"readable-stream":85,speedometer:98,"unordered-array-remove":115}],15:[function(e,t){(function(n,r){const o=e("debug")("bittorrent-tracker:client"),i=e("events"),a=e("once"),d=e("run-parallel"),s=e("simple-peer"),l=e("uniq"),c=e("./lib/common"),u=e("./lib/client/http-tracker"),f=e("./lib/client/udp-tracker"),p=e("./lib/client/websocket-tracker");class h extends i{constructor(e={}){if(super(),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");if(!n.browser&&!e.port)throw new Error("Option `port` is required");this.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),this._peerIdBuffer=r.from(this.peerId,"hex"),this._peerIdBinary=this._peerIdBuffer.toString("binary"),this.infoHash="string"==typeof e.infoHash?e.infoHash.toLowerCase():e.infoHash.toString("hex"),this._infoHashBuffer=r.from(this.infoHash,"hex"),this._infoHashBinary=this._infoHashBuffer.toString("binary"),o("new client %s",this.infoHash),this.destroyed=!1,this._port=e.port,this._getAnnounceOpts=e.getAnnounceOpts,this._rtcConfig=e.rtcConfig,this._userAgent=e.userAgent,this._wrtc="function"==typeof e.wrtc?e.wrtc():e.wrtc;let t="string"==typeof e.announce?[e.announce]:null==e.announce?[]:e.announce;t=t.map(e=>(e=e.toString(),"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),e)),t=l(t);const i=!1!==this._wrtc&&(!!this._wrtc||s.WEBRTC_SUPPORT),a=e=>{n.nextTick(()=>{this.emit("warning",e)})};this._trackers=t.map(e=>{let t;try{t=new URL(e)}catch(t){return a(new Error(`Invalid tracker URL: ${e}`)),null}const n=t.port;if(0>n||65535<n)return a(new Error(`Invalid tracker port: ${e}`)),null;const r=t.protocol;return("http:"===r||"https:"===r)&&"function"==typeof u?new u(this,e):"udp:"===r&&"function"==typeof f?new f(this,e):("ws:"===r||"wss:"===r)&&i?"ws:"===r&&"undefined"!=typeof window&&"https:"===window.location.protocol?(a(new Error(`Unsupported tracker protocol: ${e}`)),null):new p(this,e):(a(new Error(`Unsupported tracker protocol: ${e}`)),null)}).filter(Boolean)}start(e){e=this._defaultAnnounceOpts(e),e.event="started",o("send `start` %o",e),this._announce(e),this._trackers.forEach(e=>{e.setInterval()})}stop(e){e=this._defaultAnnounceOpts(e),e.event="stopped",o("send `stop` %o",e),this._announce(e)}complete(e){e||(e={}),e=this._defaultAnnounceOpts(e),e.event="completed",o("send `complete` %o",e),this._announce(e)}update(e){e=this._defaultAnnounceOpts(e),e.event&&delete e.event,o("send `update` %o",e),this._announce(e)}_announce(e){this._trackers.forEach(t=>{t.announce(e)})}scrape(e){o("send `scrape`"),e||(e={}),this._trackers.forEach(t=>{t.scrape(e)})}setInterval(e){o("setInterval %d",e),this._trackers.forEach(t=>{t.setInterval(e)})}destroy(e){if(!this.destroyed){this.destroyed=!0,o("destroy");const t=this._trackers.map(e=>t=>{e.destroy(t)});d(t,e),this._trackers=[],this._getAnnounceOpts=null}}_defaultAnnounceOpts(e={}){return null==e.numwant&&(e.numwant=c.DEFAULT_ANNOUNCE_PEERS),null==e.uploaded&&(e.uploaded=0),null==e.downloaded&&(e.downloaded=0),this._getAnnounceOpts&&(e=Object.assign({},e,this._getAnnounceOpts())),e}}h.scrape=(e,t)=>{if(t=a(t),!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");const n=Object.assign({},e,{infoHash:Array.isArray(e.infoHash)?e.infoHash[0]:e.infoHash,peerId:r.from("01234567890123456789"),port:6881}),o=new h(n);o.once("error",t),o.once("warning",t);let i=Array.isArray(e.infoHash)?e.infoHash.length:1;const d={};return o.on("scrape",e=>{if(i-=1,d[e.infoHash]=e,0===i){o.destroy();const e=Object.keys(d);1===e.length?t(null,d[e[0]]):t(null,d)}}),e.infoHash=Array.isArray(e.infoHash)?e.infoHash.map(e=>r.from(e,"hex")):r.from(e.infoHash,"hex"),o.scrape({infoHash:e.infoHash}),o},t.exports=h}).call(this,e("_process"),e("buffer").Buffer)},{"./lib/client/http-tracker":21,"./lib/client/udp-tracker":21,"./lib/client/websocket-tracker":17,"./lib/common":18,_process:61,buffer:26,debug:30,events:33,once:56,"run-parallel":89,"simple-peer":94,uniq:114}],16:[function(e,t){const n=e("events");t.exports=class extends n{constructor(e,t){super(),this.client=e,this.announceUrl=t,this.interval=null,this.destroyed=!1}setInterval(e){null==e&&(e=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),e&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},e),this.interval.unref&&this.interval.unref())}}},{events:33}],17:[function(e,t){function o(){}const i=e("debug")("bittorrent-tracker:websocket-tracker"),a=e("simple-peer"),d=e("randombytes"),l=e("simple-websocket"),c=e("../common"),u=e("./tracker"),f={};class p extends u{constructor(e,t,n){super(e,t),i("new websocket tracker %s",t),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.announce(e)});const t=Object.assign({},e,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(t.trackerid=this._trackerId),"stopped"===e.event||"completed"===e.event)this._send(t);else{const n=s(e.numwant,10);this._generateOffers(n,e=>{t.numwant=n,t.offers=e,this._send(t)})}}scrape(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.scrape(e)});const t=Array.isArray(e.infoHash)&&0<e.infoHash.length?e.infoHash.map(e=>e.toString("binary")):e.infoHash&&e.infoHash.toString("binary")||this.client._infoHashBinary;this._send({action:"scrape",info_hash:t})}destroy(e=o){function t(){r&&(clearTimeout(r),r=null),n.removeListener("data",t),n.destroy(),n=null}if(this.destroyed)return e(null);for(const t in this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer),this.peers){const e=this.peers[t];clearTimeout(e.trackerTimeout),e.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,f[this.announceUrl]&&(f[this.announceUrl].consumers-=1),0<f[this.announceUrl].consumers)return e();let n=f[this.announceUrl];if(delete f[this.announceUrl],n.on("error",o),n.once("close",e),!this.expectingResponse)return t();var r=setTimeout(t,c.DESTROY_TIMEOUT);n.once("data",t)}_openSocket(){this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=e=>{this._onSocketError(e)},this._onSocketDataBound=e=>{this._onSocketData(e)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=f[this.announceUrl],this.socket?(f[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound()):(this.socket=f[this.announceUrl]=new l(this.announceUrl),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)),this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch(e){return void this.client.emit("warning",new Error("Invalid tracker response"))}"announce"===e.action?this._onAnnounceResponse(e):"scrape"===e.action?this._onScrapeResponse(e):this._onSocketError(new Error(`invalid action in WS response: ${e.action}`))}}_onAnnounceResponse(e){if(e.info_hash!==this.client._infoHashBinary)return void i("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,c.binaryToHex(e.info_hash),this.client.infoHash);if(e.peer_id&&e.peer_id===this.client._peerIdBinary)return;i("received %s from %s for %s",JSON.stringify(e),this.announceUrl,this.client.infoHash);const t=e["failure reason"];if(t)return this.client.emit("warning",new Error(t));const n=e["warning message"];n&&this.client.emit("warning",new Error(n));const r=e.interval||e["min interval"];r&&this.setInterval(1e3*r);const o=e["tracker id"];if(o&&(this._trackerId=o),null!=e.complete){const t=Object.assign({},e,{announce:this.announceUrl,infoHash:c.binaryToHex(e.info_hash)});this.client.emit("update",t)}let a;if(e.offer&&e.peer_id&&(i("creating peer (from remote offer)"),a=this._createPeer(),a.id=c.binaryToHex(e.peer_id),a.once("signal",t=>{const n={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:e.peer_id,answer:t,offer_id:e.offer_id};this._trackerId&&(n.trackerid=this._trackerId),this._send(n)}),a.signal(e.offer),this.client.emit("peer",a)),e.answer&&e.peer_id){const t=c.binaryToHex(e.offer_id);a=this.peers[t],a?(a.id=c.binaryToHex(e.peer_id),a.signal(e.answer),this.client.emit("peer",a),clearTimeout(a.trackerTimeout),a.trackerTimeout=null,delete this.peers[t]):i(`got unexpected answer: ${JSON.stringify(e.answer)}`)}}_onScrapeResponse(e){e=e.files||{};const t=Object.keys(e);return 0===t.length?void this.client.emit("warning",new Error("invalid scrape response")):void t.forEach(t=>{const n=Object.assign(e[t],{announce:this.announceUrl,infoHash:c.binaryToHex(t)});this.client.emit("scrape",n)})}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())}_startReconnectTimer(){const e=r(Math.random()*120000)+s(n(2,this.retries)*10000,1800000);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},e),this.reconnectTimer.unref&&this.reconnectTimer.unref(),i("reconnecting socket in %s ms",e)}_send(e){if(!this.destroyed){this.expectingResponse=!0;const t=JSON.stringify(e);i("send %s",t),this.socket.send(t)}}_generateOffers(e,t){function n(){const e=d(20).toString("hex");i("creating peer (from _generateOffers)");const t=o.peers[e]=o._createPeer({initiator:!0});t.once("signal",t=>{a.push({offer:t,offer_id:c.hexToBinary(e)}),r()}),t.trackerTimeout=setTimeout(()=>{i("tracker timeout: destroying peer"),t.trackerTimeout=null,delete o.peers[e],t.destroy()},50000),t.trackerTimeout.unref&&t.trackerTimeout.unref()}function r(){a.length===e&&(i("generated %s offers",e),t(a))}const o=this,a=[];i("generating %s offers",e);for(let r=0;r<e;++r)n();r()}_createPeer(e){function t(e){r.client.emit("warning",new Error(`Connection error: ${e.message}`)),o.destroy()}function n(){o.removeListener("error",t),o.removeListener("connect",n)}const r=this;e=Object.assign({trickle:!1,config:r.client._rtcConfig,wrtc:r.client._wrtc},e);const o=new a(e);return o.once("error",t),o.once("connect",n),o}}p.prototype.DEFAULT_ANNOUNCE_INTERVAL=30000,p._socketPool=f,t.exports=p},{"../common":18,"./tracker":16,debug:30,randombytes:69,"simple-peer":94,"simple-websocket":97}],18:[function(e,t,n){(function(t){n.DEFAULT_ANNOUNCE_PEERS=50,n.MAX_ANNOUNCE_PEERS=82,n.binaryToHex=function(e){return"string"!=typeof e&&(e+=""),t.from(e,"binary").toString("hex")},n.hexToBinary=function(e){return"string"!=typeof e&&(e+=""),t.from(e,"hex").toString("binary")};var r=e("./common-node");Object.assign(n,r)}).call(this,e("buffer").Buffer)},{"./common-node":21,buffer:26}],19:[function(e,t){(function(n){t.exports=function(e,t){function r(i){o.removeEventListener("loadend",r,!1),i.error?t(i.error):t(null,n.from(o.result))}if("undefined"==typeof Blob||!(e instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof t)throw new Error("second argument must be a function");var o=new FileReader;o.addEventListener("loadend",r,!1),o.readAsArrayBuffer(e)}}).call(this,e("buffer").Buffer)},{buffer:26}],20:[function(e,t){(function(n){const{Transform:r}=e("readable-stream");t.exports=class extends r{constructor(e,t={}){super(t),"object"==typeof e&&(t=e,e=t.size),this.size=e||512;const{nopad:n,zeroPadding:r=!0}=t;this._zeroPadding=!n&&!!r,this._buffered=[],this._bufferedBytes=0}_transform(e,t,r){for(this._bufferedBytes+=e.length,this._buffered.push(e);this._bufferedBytes>=this.size;){const e=n.concat(this._buffered);this._bufferedBytes-=this.size,this.push(e.slice(0,this.size)),this._buffered=[e.slice(this.size,e.length)]}r()}_flush(){if(this._bufferedBytes&&this._zeroPadding){const e=n.alloc(this.size-this._bufferedBytes);this._buffered.push(e),this.push(n.concat(this._buffered)),this._buffered=null}else this._bufferedBytes&&(this.push(n.concat(this._buffered)),this._buffered=null);this.push(null)}}}).call(this,e("buffer").Buffer)},{buffer:26,"readable-stream":85}],21:[function(){},{}],22:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],23:[function(e,t){(function(e){t.exports=function(t){if("number"!=typeof t)throw new TypeError("\"size\" argument must be a number");if(0>t)throw new RangeError("\"size\" argument must not be negative");return e.allocUnsafe?e.allocUnsafe(t):new e(t)}}).call(this,e("buffer").Buffer)},{buffer:26}],24:[function(e,t){(function(n){var r=e("buffer-fill"),o=e("buffer-alloc-unsafe");t.exports=function(e,t,i){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");if(0>e)throw new RangeError("\"size\" argument must not be negative");if(n.alloc)return n.alloc(e,t,i);var a=o(e);return 0===e?a:void 0===t?r(a,0):("string"!=typeof i&&(i=void 0),r(a,t,i))}}).call(this,e("buffer").Buffer)},{buffer:26,"buffer-alloc-unsafe":23,"buffer-fill":25}],25:[function(e,t){(function(e){function n(e){return 1===e.length&&256>e.charCodeAt(0)}function r(e,t,n,r){if(0>n||r>e.length)throw new RangeError("Out of range index");return n>>>=0,r=void 0===r?e.length:r>>>0,r>n&&e.fill(t,n,r),e}function o(e,t,n,r){if(0>n||r>e.length)throw new RangeError("Out of range index");if(r<=n)return e;n>>>=0,r=void 0===r?e.length:r>>>0;for(var o=n,i=t.length;o<=r-i;)t.copy(e,o),o+=i;return o!==r&&t.copy(e,o,0,r-o),e}var i=function(){try{if(!e.isEncoding("latin1"))return!1;var t=e.alloc?e.alloc(4):new e(4);return t.fill("ab","ucs2"),"61006200"===t.toString("hex")}catch(e){return!1}}();t.exports=function(t,a,d,s,l){if(i)return t.fill(a,d,s,l);if("number"==typeof a)return r(t,a,d,s);if("string"==typeof a){if("string"==typeof d?(l=d,d=0,s=t.length):"string"==typeof s&&(l=s,s=t.length),void 0!==l&&"string"!=typeof l)throw new TypeError("encoding must be a string");if("latin1"===l&&(l="binary"),"string"==typeof l&&!e.isEncoding(l))throw new TypeError("Unknown encoding: "+l);if(""===a)return r(t,0,d,s);if(n(a))return r(t,a.charCodeAt(0),d,s);a=new e(a,l)}return e.isBuffer(a)?o(t,a,d,s):r(t,0,d,s)}}).call(this,e("buffer").Buffer)},{buffer:26}],26:[function(e,t,r){(function(t){'use strict';function a(e){if(2147483647<e)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"");var n=new Uint8Array(e);return Object.setPrototypeOf(n,t.prototype),n}function t(e,n,r){if("number"==typeof e){if("string"==typeof n)throw new TypeError("The \"string\" argument must be of type string. Received type number");return u(e)}return d(e,n,r)}function d(e,n,r){if("string"==typeof e)return f(e,n);if(ArrayBuffer.isView(e))return p(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return h(e,n,r);if("number"==typeof e)throw new TypeError("The \"value\" argument must not be of type number. Received type number");var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return t.from(o,n,r);var i=m(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be of type number");else if(0>e)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"")}function c(e,t,n){return l(e),0>=e?a(e):void 0===t?a(e):"string"==typeof n?a(e).fill(t,n):a(e).fill(t)}function u(e){return l(e),a(0>e?0:0|g(e))}function f(e,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|b(e,n),o=a(r),i=o.write(e,n);return i!==r&&(o=o.slice(0,i)),o}function p(e){for(var t=0>e.length?0:0|g(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,n,r){if(0>n||e.byteLength<n)throw new RangeError("\"offset\" is outside of buffer bounds");if(e.byteLength<n+(r||0))throw new RangeError("\"length\" is outside of buffer bounds");var o;return o=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),Object.setPrototypeOf(o,t.prototype),o}function m(e){if(t.isBuffer(e)){var n=0|g(e.length),r=a(n);return 0===r.length?r:(e.copy(r,0,0,n),r)}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0:"number"!=typeof e.length||Y(e.length)?a(0):p(e)}function g(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),t.alloc(+e)}function b(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError("The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type "+typeof e);var r=e.length,o=2<arguments.length&&!0===arguments[2];if(!o&&0===r)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(i)return o?-1:F(e).length;n=(""+n).toLowerCase(),i=!0;}}function y(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return B(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return U(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0;}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function k(e,n,r,o,i){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):2147483647<r?r=2147483647:-2147483648>r&&(r=-2147483648),r=+r,Y(r)&&(r=i?0:e.length-1),0>r&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(0>r)if(i)r=0;else return-1;if("string"==typeof n&&(n=t.from(n,o)),t.isBuffer(n))return 0===n.length?-1:E(e,n,r,o,i);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):E(e,[n],r,o,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,o){function a(e,t){return 1===d?e[t]:e.readUInt16BE(t*d)}var d=1,s=e.length,l=t.length;if(void 0!==r&&(r=(r+"").toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>e.length||2>t.length)return-1;d=2,s/=2,l/=2,n/=2}var c;if(o){var u=-1;for(c=n;c<s;c++)if(a(e,c)!==a(t,-1===u?0:c-u))-1!==u&&(c-=c-u),u=-1;else if(-1===u&&(u=c),c-u+1===l)return u*d}else for(n+l>s&&(n=s-l),c=n;0<=c;c--){for(var f=!0,p=0;p<l;p++)if(a(e,c+p)!==a(t,p)){f=!1;break}if(f)return c}return-1}function x(e,t,n,r){n=+n||0;var o=e.length-n;r?(r=+r,r>o&&(r=o)):r=o;var a=t.length;r>a/2&&(r=a/2);for(var d=0,s;d<r;++d){if(s=parseInt(t.substr(2*d,2),16),Y(s))return d;e[n+d]=s}return d}function v(e,t,n,r){return G(F(t,e.length-n),e,n,r)}function S(e,t,n,r){return G(W(t),e,n,r)}function C(e,t,n,r){return S(e,t,n,r)}function I(e,t,n,r){return G(V(t),e,n,r)}function L(e,t,n,r){return G(z(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function B(e,t,n){n=s(e.length,n);for(var r=[],o=t;o<n;){var a=e[o],d=null,l=239<a?4:223<a?3:191<a?2:1;if(o+l<=n){var c,u,f,p;1===l?128>a&&(d=a):2===l?(c=e[o+1],128==(192&c)&&(p=(31&a)<<6|63&c,127<p&&(d=p))):3===l?(c=e[o+1],u=e[o+2],128==(192&c)&&128==(192&u)&&(p=(15&a)<<12|(63&c)<<6|63&u,2047<p&&(55296>p||57343<p)&&(d=p))):4===l?(c=e[o+1],u=e[o+2],f=e[o+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(p=(15&a)<<18|(63&c)<<12|(63&u)<<6|63&f,65535<p&&1114112>p&&(d=p))):void 0}null===d?(d=65533,l=1):65535<d&&(d-=65536,r.push(55296|1023&d>>>10),d=56320|1023&d),r.push(d),o+=l}return R(r)}function R(e){var t=e.length;if(t<=4096)return o.apply(String,e);for(var n="",r=0;r<t;)n+=o.apply(String,e.slice(r,r+=4096));return n}function A(e,t,n){var r="";n=s(e.length,n);for(var a=t;a<n;++a)r+=o(127&e[a]);return r}function U(e,t,n){var r="";n=s(e.length,n);for(var a=t;a<n;++a)r+=o(e[a]);return r}function P(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var o="",a=t;a<n;++a)o+=Z[e[a]];return o}function O(e,t,n){for(var r=e.slice(t,n),a="",d=0;d<r.length;d+=2)a+=o(r[d]+256*r[d+1]);return a}function N(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,n,r,o,i,a){if(!t.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(n>i||n<a)throw new RangeError("\"value\" argument is out of bounds");if(r+o>e.length)throw new RangeError("Index out of range")}function H(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function q(e,t,n,r,o){return t=+t,n>>>=0,o||H(e,t,n,4,34028234663852886e22,-34028234663852886e22),$.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,o){return t=+t,n>>>=0,o||H(e,t,n,8,17976931348623157e292,-17976931348623157e292),$.write(e,t,n,r,52,8),n+8}function j(e){if(e=e.split("=")[0],e=e.trim().replace(J,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function F(e,t){t=t||1/0;for(var n=e.length,r=null,o=[],a=0,d;a<n;++a){if(d=e.charCodeAt(a),55295<d&&57344>d){if(!r){if(56319<d){-1<(t-=3)&&o.push(239,191,189);continue}else if(a+1===n){-1<(t-=3)&&o.push(239,191,189);continue}r=d;continue}if(56320>d){-1<(t-=3)&&o.push(239,191,189),r=d;continue}d=(r-55296<<10|d-56320)+65536}else r&&-1<(t-=3)&&o.push(239,191,189);if(r=null,128>d){if(0>(t-=1))break;o.push(d)}else if(2048>d){if(0>(t-=2))break;o.push(192|d>>6,128|63&d)}else if(65536>d){if(0>(t-=3))break;o.push(224|d>>12,128|63&d>>6,128|63&d)}else if(1114112>d){if(0>(t-=4))break;o.push(240|d>>18,128|63&d>>12,128|63&d>>6,128|63&d)}else throw new Error("Invalid code point")}return o}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function z(e,t){for(var n=[],r=0,o,a,d;r<e.length&&!(0>(t-=2));++r)o=e.charCodeAt(r),a=o>>8,d=o%256,n.push(d),n.push(a);return n}function V(e){return X.toByteArray(j(e))}function G(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!==e}var X=e("base64-js"),$=e("ieee754"),Q="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=t,r.SlowBuffer=_,r.INSPECT_MAX_BYTES=50;r.kMaxLength=2147483647,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(t){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){return t.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){return t.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,n){return d(e,t,n)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return c(e,t,n)},t.allocUnsafe=function(e){return u(e)},t.allocUnsafeSlow=function(e){return u(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(K(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),K(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array");if(e===n)return 0;for(var r=e.length,o=n.length,d=0,l=s(r,o);d<l;++d)if(e[d]!==n[d]){r=e[d],o=n[d];break}return r<o?-1:o<r?1:0},t.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return t.alloc(0);var r;if(n===void 0)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var o=t.allocUnsafe(n),a=0;for(r=0;r<e.length;++r){var d=e[r];if(K(d,Uint8Array)&&(d=t.from(d)),!t.isBuffer(d))throw new TypeError("\"list\" argument must be an Array of Buffers");d.copy(o,a),a+=d.length}return o},t.byteLength=b,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?B(this,0,e):y.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Q&&(t.prototype[Q]=t.prototype.inspect),t.prototype.compare=function(e,n,r,o,a){if(K(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError("The \"target\" argument must be one of type Buffer or Uint8Array. Received type "+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===a&&(a=this.length),0>n||r>e.length||0>o||a>this.length)throw new RangeError("out of range index");if(o>=a&&n>=r)return 0;if(o>=a)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,o>>>=0,a>>>=0,this===e)return 0;for(var d=a-o,l=r-n,c=s(d,l),u=this.slice(o,a),f=e.slice(n,r),p=0;p<c;++p)if(u[p]!==f[p]){d=u[p],l=f[p];break}return d<l?-1:l<d?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return k(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return k(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((void 0===n||n>o)&&(n=o),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0;}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),n<e&&(n=e);var o=this.subarray(e,n);return Object.setPrototypeOf(o,t.prototype),o},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var o=this[e],a=1,d=0;++d<t&&(a*=256);)o+=this[e+d]*a;return a*=128,o>=a&&(o-=n(2,8*t)),o},t.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var o=t,a=1,d=this[e+--o];0<o&&(a*=256);)d+=this[e+--o]*a;return a*=128,d>=a&&(d-=n(2,8*t)),d},t.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),$.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),$.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),$.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),$.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,r,o){if(e=+e,t>>>=0,r>>>=0,!o){var a=n(2,8*r)-1;M(this,e,t,r,a,0)}var d=1,s=0;for(this[t]=255&e;++s<r&&(d*=256);)this[t+s]=255&e/d;return t+r},t.prototype.writeUIntBE=function(e,t,r,o){if(e=+e,t>>>=0,r>>>=0,!o){var a=n(2,8*r)-1;M(this,e,t,r,a,0)}var d=r-1,s=1;for(this[t+d]=255&e;0<=--d&&(s*=256);)this[t+d]=255&e/s;return t+r},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,r,o){if(e=+e,t>>>=0,!o){var a=n(2,8*r-1);M(this,e,t,r,a-1,-a)}var d=0,s=1,l=0;for(this[t]=255&e;++d<r&&(s*=256);)0>e&&0===l&&0!==this[t+d-1]&&(l=1),this[t+d]=255&(e/s>>0)-l;return t+r},t.prototype.writeIntBE=function(e,t,r,o){if(e=+e,t>>>=0,!o){var a=n(2,8*r-1);M(this,e,t,r,a-1,-a)}var d=r-1,s=1,l=0;for(this[t+d]=255&e;0<=--d&&(s*=256);)0>e&&0===l&&0!==this[t+d+1]&&(l=1),this[t+d]=255&(e/s>>0)-l;return t+r},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,o){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),0<o&&o<r&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("Index out of range");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var a=o-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,o);else if(this===e&&r<n&&n<o)for(var d=a-1;0<=d;--d)e[d+n]=this[d+r];else Uint8Array.prototype.set.call(e,this.subarray(r,o),n);return a},t.prototype.fill=function(e,n,r,o){if("string"==typeof e){if("string"==typeof n?(o=n,n=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!t.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){var a=e.charCodeAt(0);("utf8"===o&&128>a||"latin1"===o)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=+e);if(0>n||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=r===void 0?this.length:r>>>0,e||(e=0);var d;if("number"==typeof e)for(d=n;d<r;++d)this[d]=e;else{var s=t.isBuffer(e)?e:t.from(e,o),l=s.length;if(0===l)throw new TypeError("The value \""+e+"\" is invalid for argument \"value\"");for(d=0;d<r-n;++d)this[d+n]=s[d%l]}return this};var J=/[^+/0-9A-Za-z-_]/g,Z=function(){for(var e="0123456789abcdef",t=Array(256),n=0,r;16>n;++n){r=16*n;for(var o=0;16>o;++o)t[r+o]=e[n]+e[o]}return t}()}).call(this,e("buffer").Buffer)},{"base64-js":8,buffer:26,ieee754:37}],27:[function(e,t){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],28:[function(e,t){const n=e("block-stream2"),r=e("readable-stream");class o extends r.Writable{constructor(e,t,r={}){if(super(r),!e||!e.put||!e.get)throw new Error("First argument must be an abstract-chunk-store compliant store");if(t=+t,!t)throw new Error("Second argument must be a chunk length");this._blockstream=new n(t,{zeroPadding:!1}),this._outstandingPuts=0;let o=0;const i=t=>{this.destroyed||(this._outstandingPuts+=1,e.put(o,t,()=>{this._outstandingPuts-=1,0===this._outstandingPuts&&"function"==typeof this._finalCb&&(this._finalCb(null),this._finalCb=null)}),o+=1)};this._blockstream.on("data",i).on("error",e=>{this.destroy(e)})}_write(e,t,n){this._blockstream.write(e,t,n)}_final(e){this._blockstream.end(),this._blockstream.once("end",()=>{0===this._outstandingPuts?e(null):this._finalCb=e})}destroy(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))}}t.exports=o},{"block-stream2":20,"readable-stream":85}],29:[function(e,t){(function(n,r,o){function i(e){return e.reduce((e,t)=>Array.isArray(t)?e.concat(i(t)):e.concat(t),[])}function d(e,t,r){function a(){A(e.map(e=>t=>{const n={};if(m(e))n.getStream=b(e),n.length=e.size;else if(o.isBuffer(e))n.getStream=y(e),n.length=e.length;else if(_(e))n.getStream=k(e,n),n.length=0;else{if("string"==typeof e){if("function"!=typeof I.stat)throw new Error("filesystem paths do not work in the browser");const n=1<l||c;return void s(e,n,t)}throw new Error("invalid input type")}n.path=e.path,t(null,n)}),(e,t)=>e?r(e):void(t=i(t),r(null,t,c)))}if(g(e)&&(e=Array.from(e)),Array.isArray(e)||(e=[e]),0===e.length)throw new Error("invalid input type");e.forEach(e=>{if(null==e)throw new Error(`invalid input type: ${e}`)}),e=e.map(e=>m(e)&&"string"==typeof e.path&&"function"==typeof I.stat?e.path:e),1!==e.length||"string"==typeof e[0]||e[0].name||(e[0].name=t.name);let d=null;e.forEach((t,n)=>{if("string"==typeof t)return;let r=t.fullPath||t.name;r||(r=`Unknown File ${n+1}`,t.unknownName=!0),t.path=r.split("/"),t.path[0]||t.path.shift(),2>t.path.length?d=null:0===n&&1<e.length?d=t.path[0]:t.path[0]!==d&&(d=null)}),e=e.filter(e=>{if("string"==typeof e)return!0;const t=e.path[e.path.length-1];return u(t)&&T.not(t)}),d&&e.forEach(e=>{const t=(o.isBuffer(e)||_(e))&&!e.path;"string"==typeof e||t||e.path.shift()}),!t.name&&d&&(t.name=d),t.name||e.some(e=>"string"==typeof e?(t.name=S.basename(e),!0):e.unknownName?void 0:(t.name=e.path[e.path.length-1],!0)),t.name||(t.name=`Unnamed Torrent ${Date.now()}`);const l=e.reduce((e,t)=>e+ +("string"==typeof t),0);let c=1===e.length;if(1===e.length&&"string"==typeof e[0]){if("function"!=typeof I.stat)throw new Error("filesystem paths do not work in the browser");L(e[0],(e,t)=>e?r(e):void(c=t,a()))}else n.nextTick(()=>{a()})}function s(e,t,n){c(e,l,(r,o)=>r?n(r):void(o=Array.isArray(o)?i(o):[o],e=S.normalize(e),t&&(e=e.slice(0,e.lastIndexOf(S.sep)+1)),e[e.length-1]!==S.sep&&(e+=S.sep),o.forEach(t=>{t.getStream=w(t.path),t.path=t.path.replace(e,"").split(S.sep)}),n(null,o)))}function l(e,t){t=R(t),I.stat(e,(n,r)=>{if(n)return t(n);const o={length:r.size,path:e};t(null,o)})}function c(e,t,n){I.stat(e,(r,o)=>r?n(r):void(o.isDirectory()?I.readdir(e,(r,o)=>r?n(r):void A(o.filter(u).filter(T.not).map(n=>r=>{c(S.join(e,n),t,r)}),n)):o.isFile()&&t(e,n)))}function u(e){return"."!==e[0]}function f(e,t,n){function r(e){c+=e.length;const t=p;U(e,e=>{l[t]=e,f-=1,s()}),f+=1,p+=1}function i(){h=!0,s()}function a(e){d(),n(e)}function d(){m.removeListener("error",a),g.removeListener("data",r),g.removeListener("end",i),g.removeListener("error",a)}function s(){h&&0===f&&(d(),n(null,o.from(l.join(""),"hex"),c))}n=R(n);const l=[];let c=0;const u=e.map(e=>e.getStream);let f=0,p=0,h=!1;const m=new B(u),g=new x(t,{zeroPadding:!1});m.on("error",a),m.pipe(g).on("data",r).on("end",i).on("error",a)}function p(e,n,o){let i=n.announceList;i||("string"==typeof n.announce?i=[[n.announce]]:Array.isArray(n.announce)&&(i=n.announce.map(e=>[e]))),i||(i=[]),r.WEBTORRENT_ANNOUNCE&&("string"==typeof r.WEBTORRENT_ANNOUNCE?i.push([[r.WEBTORRENT_ANNOUNCE]]):Array.isArray(r.WEBTORRENT_ANNOUNCE)&&(i=i.concat(r.WEBTORRENT_ANNOUNCE.map(e=>[e])))),n.announce===void 0&&n.announceList===void 0&&(i=i.concat(t.exports.announceList)),"string"==typeof n.urlList&&(n.urlList=[n.urlList]);const d={info:{name:n.name},"creation date":a((+n.creationDate||Date.now())/1e3),encoding:"UTF-8"};0!==i.length&&(d.announce=i[0][0],d["announce-list"]=i),n.comment!==void 0&&(d.comment=n.comment),n.createdBy!==void 0&&(d["created by"]=n.createdBy),n.private!==void 0&&(d.info.private=+n.private),n.info!==void 0&&Object.assign(d.info,n.info),n.sslCert!==void 0&&(d.info["ssl-cert"]=n.sslCert),n.urlList!==void 0&&(d["url-list"]=n.urlList);const s=n.pieceLength||v(e.reduce(h,0));d.info["piece length"]=s,f(e,s,(t,r,i)=>t?o(t):void(d.info.pieces=r,e.forEach(e=>{delete e.getStream}),n.singleFileTorrent?d.info.length=i:d.info.files=e,o(null,E.encode(d))))}function h(e,t){return e+t.length}function m(e){return"undefined"!=typeof Blob&&e instanceof Blob}function g(e){return"undefined"!=typeof FileList&&e instanceof FileList}function _(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}function b(e){return()=>new C(e)}function y(e){return()=>{const t=new P.PassThrough;return t.end(e),t}}function w(e){return()=>I.createReadStream(e)}function k(e,t){return()=>{const n=new P.Transform;return n._transform=function(e,n,r){t.length+=e.length,this.push(e),r()},e.pipe(n),n}}const E=e("bencode"),x=e("block-stream2"),v=e("piece-length"),S=e("path"),C=e("filestream/read"),I=e("fs"),L=e("is-file"),T=e("junk"),B=e("multistream"),R=e("once"),A=e("run-parallel"),U=e("simple-sha1"),P=e("readable-stream");t.exports=function(e,t,n){"function"==typeof t&&([t,n]=[n,t]),t=t?Object.assign({},t):{},d(e,t,(e,r,o)=>e?n(e):void(t.singleFileTorrent=o,p(r,t,n)))},t.exports.parseInput=function(e,t,n){"function"==typeof t&&([t,n]=[n,t]),t=t?Object.assign({},t):{},d(e,t,n)},t.exports.announceList=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"],["wss://tracker.fastcast.nz"]]}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("buffer").Buffer)},{_process:61,bencode:11,"block-stream2":20,buffer:26,"filestream/read":34,fs:22,"is-file":41,junk:43,multistream:54,once:56,path:59,"piece-length":60,"readable-stream":85,"run-parallel":89,"simple-sha1":95}],30:[function(e,t,n){(function(o){function i(){let e;try{e=n.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof o&&"env"in o&&(e=o.env.DEBUG),e}n.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"===e||(r++,"%c"===e&&(o=r))}),e.splice(o,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=i,n.useColors=function(){return!!("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=e("./common")(n);const{formatters:a}=t.exports;a.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,e("_process"))},{"./common":31,_process:61}],31:[function(e,n){n.exports=function(n){function r(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return o.colors[t(n)%o.colors.length]}function o(e){function t(...e){if(!t.enabled)return;const r=t,i=+new Date,a=i-(n||i);r.diff=a,r.prev=n,r.curr=i,n=i,e[0]=o.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let d=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if("%%"===t)return t;d++;const i=o.formatters[n];if("function"==typeof i){const n=e[d];t=i.call(r,n),e.splice(d,1),d--}return t}),o.formatArgs.call(r,e);const s=r.log||o.log;s.apply(r,e)}let n;return t.namespace=e,t.enabled=o.enabled(e),t.useColors=o.useColors(),t.color=r(e),t.destroy=i,t.extend=a,"function"==typeof o.init&&o.init(t),o.instances.push(t),t}function i(){const e=o.instances.indexOf(this);return-1!==e&&(o.instances.splice(e,1),!0)}function a(e,t){const n=o(this.namespace+("undefined"==typeof t?":":t)+e);return n.log=this.log,n}function d(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(e){return e instanceof Error?e.stack||e.message:e},o.disable=function(){const e=[...o.names.map(d),...o.skips.map(d).map(e=>"-"+e)].join(",");return o.enable(""),e},o.enable=function(e){o.save(e),o.names=[],o.skips=[];let t;const n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&(e=n[t].replace(/\*/g,".*?"),"-"===e[0]?o.skips.push(new RegExp("^"+e.substr(1)+"$")):o.names.push(new RegExp("^"+e+"$")));for(t=0;t<o.instances.length;t++){const e=o.instances[t];e.enabled=o.enabled(e.namespace)}},o.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=o.skips.length;t<n;t++)if(o.skips[t].test(e))return!1;for(t=0,n=o.names.length;t<n;t++)if(o.names[t].test(e))return!0;return!1},o.humanize=e("ms"),Object.keys(n).forEach(e=>{o[e]=n[e]}),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=r,o.enable(o.load()),o}},{ms:53}],32:[function(e,t){(function(n){var r=e("once"),o=function(){},i=function(e){return e.setHeader&&"function"==typeof e.abort},a=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},d=function(e,t,s){if("function"==typeof t)return d(e,null,t);t||(t={}),s=r(s||o);var l=e._writableState,c=e._readableState,u=t.readable||!1!==t.readable&&e.readable,f=t.writable||!1!==t.writable&&e.writable,p=!1,h=function(){e.writable||m()},m=function(){f=!1,u||s.call(e)},g=function(){u=!1,f||s.call(e)},_=function(t){s.call(e,t?new Error("exited with error code: "+t):null)},b=function(t){s.call(e,t)},y=function(){n.nextTick(w)},w=function(){return p?void 0:u&&!(c&&c.ended&&!c.destroyed)?s.call(e,new Error("premature close")):f&&!(l&&l.ended&&!l.destroyed)?s.call(e,new Error("premature close")):void 0},k=function(){e.req.on("finish",m)};return i(e)?(e.on("complete",m),e.on("abort",y),e.req?k():e.on("request",k)):f&&!l&&(e.on("end",h),e.on("close",h)),a(e)&&e.on("exit",_),e.on("end",g),e.on("finish",m),!1!==t.error&&e.on("error",b),e.on("close",y),function(){p=!0,e.removeListener("complete",m),e.removeListener("abort",y),e.removeListener("request",k),e.req&&e.req.removeListener("finish",m),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",m),e.removeListener("exit",_),e.removeListener("end",g),e.removeListener("error",b),e.removeListener("close",y)}};t.exports=d}).call(this,e("_process"))},{_process:61,once:56}],33:[function(e,t){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=y(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function r(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function a(e,t,n){if(t)e.call(n);else for(var r=e.length,o=_(e,r),a=0;a<r;++a)o[a].call(n)}function d(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,a=_(e,o),d=0;d<o;++d)a[d].call(n,r)}function s(e,t,n,r,o){if(t)e.call(n,r,o);else for(var a=e.length,d=_(e,a),s=0;s<a;++s)d[s].call(n,r,o)}function l(e,t,n,r,o,a){if(t)e.call(n,r,o,a);else for(var d=e.length,s=_(e,d),l=0;l<d;++l)s[l].call(n,r,o,a)}function c(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,a=_(e,o),d=0;d<o;++d)a[d].apply(n,r)}function u(e,t,n,o){var i,a,d;if("function"!=typeof n)throw new TypeError("\"listener\" argument must be a function");if(a=e._events,a?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),d=a[t]):(a=e._events=y(null),e._eventsCount=0),!d)d=a[t]=n,++e._eventsCount;else if("function"==typeof d?d=a[t]=o?[n,d]:[d,n]:o?d.unshift(n):d.push(n),!d.warned&&(i=r(e),i&&0<i&&d.length>i)){d.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+d.length+" \""+(t+"\" listeners added. Use emitter.setMaxListeners() to increase limit."));s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=d.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}return e}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e);}}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=k.call(f,r);return o.listener=n,r.wrapFn=o,o}function h(e,t,n){var r=e._events;if(!r)return[];var o=r[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?b(o):_(o,o.length):[]}function m(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function g(e,t){for(var r=t,o=r+1,a=e.length;o<a;r+=1,o+=1)e[r]=e[o];e.pop()}function _(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function b(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var y=Object.create||function(e){var t=function(){};return t.prototype=e,new t},w=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},k=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0;var E=10,x;try{var v={};Object.defineProperty&&Object.defineProperty(v,"x",{value:0}),x=0===v.x}catch(e){x=!1}x?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(e){if("number"!=typeof e||0>e||e!==e)throw new TypeError("\"defaultMaxListeners\" must be a positive number");E=e}}):n.defaultMaxListeners=E,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||isNaN(e))throw new TypeError("\"n\" argument must be a positive number");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return r(this)},n.prototype.emit=function(e){var t="error"===e,n,r,o,u,f,p;if(p=this._events,p)t=t&&null==p.error;else if(!t)return!1;if(t){if(1<arguments.length&&(n=arguments[1]),n instanceof Error)throw n;else{var h=new Error("Unhandled \"error\" event. ("+n+")");throw h.context=n,h}return!1}if(r=p[e],!r)return!1;var m="function"==typeof r;switch(o=arguments.length,o){case 1:a(r,m,this);break;case 2:d(r,m,this,arguments[1]);break;case 3:s(r,m,this,arguments[1],arguments[2]);break;case 4:l(r,m,this,arguments[1],arguments[2],arguments[3]);break;default:for(u=Array(o-1),f=1;f<o;f++)u[f-1]=arguments[f];c(r,m,this,u);}return!0},n.prototype.addListener=function(e,t){return u(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return u(this,e,t,!0)},n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError("\"listener\" argument must be a function");return this.on(e,p(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError("\"listener\" argument must be a function");return this.prependListener(e,p(this,e,t)),this},n.prototype.removeListener=function(e,t){var n,r,o,a,d;if("function"!=typeof t)throw new TypeError("\"listener\" argument must be a function");if(r=this._events,!r)return this;if(n=r[e],!n)return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=y(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){d=n[a].listener,o=a;break}if(0>o)return this;0===o?n.shift():g(n,o),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,d||t)}return this},n.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=y(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=y(null):delete n[e]),this;if(0===arguments.length){var o=w(n),a;for(r=0;r<o.length;++r)a=o[r],"removeListener"===a||this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=y(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},n.prototype.listeners=function(e){return h(this,e,!0)},n.prototype.rawListeners=function(e){return h(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},n.prototype.listenerCount=m,n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],34:[function(e,t){const{Readable:n}=e("readable-stream"),r=e("typedarray-to-buffer");t.exports=class extends n{constructor(e,t={}){super(t),this._offset=0,this._ready=!1,this._file=e,this._size=e.size,this._chunkSize=t.chunkSize||d(this._size/1e3,204800);const n=new FileReader;n.onload=()=>{this.push(r(n.result))},n.onerror=()=>{this.emit("error",n.error)},this.reader=n,this._generateHeaderBlocks(e,t,(e,t)=>e?this.emit("error",e):void(Array.isArray(t)&&t.forEach(e=>this.push(e)),this._ready=!0,this.emit("_ready")))}_generateHeaderBlocks(e,t,n){n(null,[])}_read(){if(!this._ready)return void this.once("_ready",this._read.bind(this));const e=this._offset;let t=this._offset+this._chunkSize;return t>this._size&&(t=this._size),e===this._size?(this.destroy(),void this.push(null)):void(this.reader.readAsArrayBuffer(this._file.slice(e,t)),this._offset=t)}destroy(){if(this._file=null,this.reader){this.reader.onload=null,this.reader.onerror=null;try{this.reader.abort()}catch(t){}}this.reader=null}}},{"readable-stream":85,"typedarray-to-buffer":112}],35:[function(e,t){t.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],36:[function(e,t){function n(e){if("string"==typeof e&&(e=o.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error("Protocol \""+e.protocol+"\" not supported. Expected \"https:\"");return e}var r=e("http"),o=e("url"),i=t.exports;for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);i.request=function(e,t){return e=n(e),r.request.call(this,e,t)},i.get=function(e,t){return e=n(e),r.get.call(this,e,t)}},{http:99,url:116}],37:[function(e,o,i){i.read=function(t,r,o,a,l){var c=8*l-a-1,u=(1<<c)-1,f=u>>1,p=-7,h=o?l-1:0,g=o?-1:1,d=t[r+h],_,b;for(h+=g,_=d&(1<<-p)-1,d>>=-p,p+=c;0<p;_=256*_+t[r+h],h+=g,p-=8);for(b=_&(1<<-p)-1,_>>=-p,p+=a;0<p;b=256*b+t[r+h],h+=g,p-=8);if(0===_)_=1-f;else{if(_===u)return b?NaN:(d?-1:1)*(1/0);b+=n(2,a),_-=f}return(d?-1:1)*b*n(2,_-a)},i.write=function(o,a,l,u,f,p){var h=Math.LN2,g=Math.log,_=8*p-f-1,b=(1<<_)-1,y=b>>1,w=23===f?n(2,-24)-n(2,-77):0,k=u?0:p-1,E=u?1:-1,d=0>a||0===a&&0>1/a?1:0,s,x,v;for(a=t(a),isNaN(a)||a===1/0?(x=isNaN(a)?1:0,s=b):(s=r(g(a)/h),1>a*(v=n(2,-s))&&(s--,v*=2),a+=1<=s+y?w/v:w*n(2,1-y),2<=a*v&&(s++,v/=2),s+y>=b?(x=0,s=b):1<=s+y?(x=(a*v-1)*n(2,f),s+=y):(x=a*n(2,y-1)*n(2,f),s=0));8<=f;o[l+k]=255&x,k+=E,x/=256,f-=8);for(s=s<<f|x,_+=f;0<_;o[l+k]=255&s,k+=E,s/=256,_-=8);o[l+k-E]|=128*d}},{}],38:[function(e,t){const n=e("queue-microtask");t.exports=class{constructor(e){if(this.store=e,this.chunkLength=e.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}put(e,t,n){this.mem[e]=t,this.store.put(e,t,t=>{this.mem[e]=null,n&&n(t)})}get(e,t,r){if("function"==typeof t)return this.get(e,null,t);let o=this.mem[e];if(!o)return this.store.get(e,t,r);if(t){const e=t.offset||0,n=t.length?e+t.length:o.length;o=o.slice(e,n)}n(()=>{r&&r(null,o)})}close(e){this.store.close(e)}destroy(e){this.store.destroy(e)}}},{"queue-microtask":67}],39:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],40:[function(e,t){t.exports=function(e){for(var t=0,n=e.length;t<n;++t)if(e.charCodeAt(t)>127)return!1;return!0}},{}],41:[function(e,t){'use strict';function n(e){return r.existsSync(e)&&r.statSync(e).isFile()}var r=e("fs");t.exports=function(e,t){return t?void r.stat(e,function(e,n){return e?t(e):t(null,n.isFile())}):n(e)},t.exports.sync=n},{fs:22}],42:[function(e,t){function n(e){return r(e)||o(e)}function r(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function o(e){return a[i.call(e)]}t.exports=n,n.strict=r,n.loose=o;var i=Object.prototype.toString,a={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0}},{}],43:[function(e,t,n){'use strict';n.re=()=>{throw new Error("`junk.re` was renamed to `junk.regex`")},n.regex=new RegExp(["^npm-debug\\.log$","^\\..*\\.swp$","^\\.DS_Store$","^\\.AppleDouble$","^\\.LSOverride$","^Icon\\r$","^\\._.*","^\\.Spotlight-V100(?:$|\\/)","\\.Trashes","^__MACOSX$","~$","^Thumbs\\.db$","^ehthumbs\\.db$","^Desktop\\.ini$","@eaDir$"].join("|")),n.is=e=>n.regex.test(e),n.not=e=>!n.is(e),n.default=t.exports},{}],44:[function(e,t){(function(n){function r(e){const t={},r=e.split("magnet:?")[1],a=r&&0<=r.length?r.split("&"):[];a.forEach(e=>{const n=e.split("=");if(2!==n.length)return;const r=n[0];let o=n[1];if("dn"===r&&(o=decodeURIComponent(o).replace(/\+/g," ")),("tr"===r||"xs"===r||"as"===r||"ws"===r)&&(o=decodeURIComponent(o)),"kt"===r&&(o=decodeURIComponent(o).split("+")),"ix"===r&&(o=+o),!t[r])t[r]=o;else if(Array.isArray(t[r]))t[r].push(o);else{const e=t[r];t[r]=[e,o]}});let d;if(t.xt){const e=Array.isArray(t.xt)?t.xt:[t.xt];e.forEach(e=>{if(d=e.match(/^urn:btih:(.{40})/))t.infoHash=d[1].toLowerCase();else if(d=e.match(/^urn:btih:(.{32})/)){const e=o.decode(d[1]);t.infoHash=n.from(e,"binary").toString("hex")}})}return t.infoHash&&(t.infoHashBuffer=n.from(t.infoHash,"hex")),t.dn&&(t.name=t.dn),t.kt&&(t.keywords=t.kt),t.announce="string"==typeof t.tr?[t.tr]:Array.isArray(t.tr)?t.tr:[],t.urlList=[],("string"==typeof t.as||Array.isArray(t.as))&&(t.urlList=t.urlList.concat(t.as)),("string"==typeof t.ws||Array.isArray(t.ws))&&(t.urlList=t.urlList.concat(t.ws)),i(t.announce),i(t.urlList),t}t.exports=r,t.exports.decode=r,t.exports.encode=function(e){e=Object.assign({},e),e.infoHashBuffer&&(e.xt=`urn:btih:${e.infoHashBuffer.toString("hex")}`),e.infoHash&&(e.xt=`urn:btih:${e.infoHash}`),e.name&&(e.dn=e.name),e.keywords&&(e.kt=e.keywords),e.announce&&(e.tr=e.announce),e.urlList&&(e.ws=e.urlList,delete e.as);let t="magnet:?";return Object.keys(e).filter(e=>2===e.length).forEach((n,r)=>{const o=Array.isArray(e[n])?e[n]:[e[n]];o.forEach((e,o)=>{(0<r||0<o)&&("kt"!==n||0===o)&&(t+="&"),"dn"===n&&(e=encodeURIComponent(e).replace(/%20/g,"+")),("tr"===n||"xs"===n||"as"===n||"ws"===n)&&(e=encodeURIComponent(e)),"kt"===n&&(e=encodeURIComponent(e)),t+="kt"===n&&0<o?`+${e}`:`${n}=${e}`})}),t};const o=e("thirty-two"),i=e("uniq")}).call(this,e("buffer").Buffer)},{buffer:26,"thirty-two":107,uniq:114}],45:[function(e,t){function n(e,t){var r=this;if(!(r instanceof n))return new n(e,t);if(!s)throw new Error("web browser lacks MediaSource support");t||(t={}),r._debug=t.debug,r._bufferDuration=t.bufferDuration||60,r._elem=e,r._mediaSource=new s,r._streams=[],r.detailedError=null,r._errorHandler=function(){r._elem.removeEventListener("error",r._errorHandler);var e=r._streams.slice();e.forEach(function(e){e.destroy(r._elem.error)})},r._elem.addEventListener("error",r._errorHandler),r._elem.src=window.URL.createObjectURL(r._mediaSource)}function r(e,t){var n=this;if(a.Writable.call(n),n._wrapper=e,n._elem=e._elem,n._mediaSource=e._mediaSource,n._allStreams=e._streams,n._allStreams.push(n),n._bufferDuration=e._bufferDuration,n._sourceBuffer=null,n._debugBuffers=[],n._openHandler=function(){n._onSourceOpen()},n._flowHandler=function(){n._flow()},n._errorHandler=function(e){n.destroyed||n.emit("error",e)},"string"==typeof t)n._type=t,"open"===n._mediaSource.readyState?n._createSourceBuffer():n._mediaSource.addEventListener("sourceopen",n._openHandler);else if(null===t._sourceBuffer)t.destroy(),n._type=t._type,n._mediaSource.addEventListener("sourceopen",n._openHandler);else if(t._sourceBuffer)t.destroy(),n._type=t._type,n._sourceBuffer=t._sourceBuffer,n._debugBuffers=t._debugBuffers,n._sourceBuffer.addEventListener("updateend",n._flowHandler),n._sourceBuffer.addEventListener("error",n._errorHandler);else throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");n._elem.addEventListener("timeupdate",n._flowHandler),n.on("error",function(e){n._wrapper.error(e)}),n.on("finish",function(){if(!n.destroyed&&(n._finished=!0,n._allStreams.every(function(e){return e._finished}))){n._wrapper._dumpDebugData();try{n._mediaSource.endOfStream()}catch(e){}}})}function o(e,t){var n=document.createElement("a");n.href=window.URL.createObjectURL(new window.Blob(e)),n.download=t,n.click()}t.exports=n;var i=e("inherits"),a=e("readable-stream"),d=e("to-arraybuffer"),s="undefined"!=typeof window&&window.MediaSource;n.prototype.createWriteStream=function(e){var t=this;return new r(t,e)},n.prototype.error=function(e){var t=this;t.detailedError||(t.detailedError=e),t._dumpDebugData();try{t._mediaSource.endOfStream("decode")}catch(e){}try{window.URL.revokeObjectURL(t._elem.src)}catch(e){}},n.prototype._dumpDebugData=function(){var e=this;e._debug&&(e._debug=!1,e._streams.forEach(function(e,t){o(e._debugBuffers,"mediasource-stream-"+t)}))},i(r,a.Writable),r.prototype._onSourceOpen=function(){var e=this;e.destroyed||(e._mediaSource.removeEventListener("sourceopen",e._openHandler),e._createSourceBuffer())},r.prototype.destroy=function(e){var t=this;t.destroyed||(t.destroyed=!0,t._allStreams.splice(t._allStreams.indexOf(t),1),t._mediaSource.removeEventListener("sourceopen",t._openHandler),t._elem.removeEventListener("timeupdate",t._flowHandler),t._sourceBuffer&&(t._sourceBuffer.removeEventListener("updateend",t._flowHandler),t._sourceBuffer.removeEventListener("error",t._errorHandler),"open"===t._mediaSource.readyState&&t._sourceBuffer.abort()),e&&t.emit("error",e),t.emit("close"))},r.prototype._createSourceBuffer=function(){var e=this;if(!e.destroyed)if(!s.isTypeSupported(e._type))e.destroy(new Error("The provided type is not supported"));else if(e._sourceBuffer=e._mediaSource.addSourceBuffer(e._type),e._sourceBuffer.addEventListener("updateend",e._flowHandler),e._sourceBuffer.addEventListener("error",e._errorHandler),e._cb){var t=e._cb;e._cb=null,t()}},r.prototype._write=function(e,t,n){var r=this;if(!r.destroyed){if(!r._sourceBuffer)return void(r._cb=function(o){return o?n(o):void r._write(e,t,n)});if(r._sourceBuffer.updating)return n(new Error("Cannot append buffer while source buffer updating"));var o=d(e);r._wrapper._debug&&r._debugBuffers.push(o);try{r._sourceBuffer.appendBuffer(o)}catch(e){return void r.destroy(e)}r._cb=n}},r.prototype._flow=function(){var e=this;if(!(e.destroyed||!e._sourceBuffer||e._sourceBuffer.updating)&&!("open"===e._mediaSource.readyState&&e._getBufferDuration()>e._bufferDuration)&&e._cb){var t=e._cb;e._cb=null,t()}};r.prototype._getBufferDuration=function(){for(var e=this,t=e._sourceBuffer.buffered,n=e._elem.currentTime,r=-1,o=0;o<t.length;o++){var a=t.start(o),d=t.end(o)+0;if(a>n)break;else(0<=r||n<=d)&&(r=d)}var s=r-n;return 0>s&&(s=0),s}},{inherits:39,"readable-stream":85,"to-arraybuffer":109}],46:[function(e,t){(function(e){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t||(t={}),this.chunkLength=+e,!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=+t.length||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=a(this.length/this.chunkLength)-1)}function r(t,n,r){e.nextTick(function(){t&&t(n,r)})}t.exports=n,n.prototype.put=function(e,t,n){if(this.closed)return r(n,new Error("Storage is closed"));var o=e===this.lastChunkIndex;return o&&t.length!==this.lastChunkLength?r(n,new Error("Last chunk length must be "+this.lastChunkLength)):o||t.length===this.chunkLength?void(this.chunks[e]=t,r(n,null)):r(n,new Error("Chunk length must be "+this.chunkLength))},n.prototype.get=function(e,t,n){if("function"==typeof t)return this.get(e,null,t);if(this.closed)return r(n,new Error("Storage is closed"));var o=this.chunks[e];if(!o){var i=new Error("Chunk not found");return i.notFound=!0,r(n,i)}if(!t)return r(n,null,o);var a=t.offset||0,d=t.length||o.length-a;r(n,null,o.slice(a,d+a))},n.prototype.close=n.prototype.destroy=function(e){return this.closed?r(e,new Error("Storage is closed")):void(this.closed=!0,this.chunks=null,r(e,null))}}).call(this,e("_process"))},{_process:61}],47:[function(e,t,n){(function(t){function o(e,t,n){for(var r=t;r<n;r++)e[r]=0}function i(e,t,n){t.writeUInt32BE(r((e.getTime()+2082844800000)/1e3),n)}function a(e,t,n){t.writeUIntBE(r((e.getTime()+2082844800000)/1e3),n,6)}function d(e,t,n){t.writeUInt16BE(r(e)%65536,n),t.writeUInt16BE(r(256*(256*e))%65536,n+2)}function l(e,t,n){t[n]=r(e)%256,t[n+1]=r(256*e)%256}function c(e,t,n){e||(e=[0,0,0,0,0,0,0,0,0]);for(var r=0;r<e.length;r++)d(e[r],t,n+4*r)}function u(e,n,r){var o=t.from(e,"utf8");o.copy(n,r),n[r+o.length]=0}function f(e){for(var t=Array(e.length/4),n=0;n<t.length;n++)t[n]=m(e,4*n);return t}function p(e,t){return new Date(1e3*e.readUIntBE(t,6)-2082844800000)}function h(e,t){return new Date(1e3*e.readUInt32BE(t)-2082844800000)}function m(e,t){return e.readUInt16BE(t)+e.readUInt16BE(t+2)/65536}function g(e,t){return e[t]+e[t+1]/256}function _(e,t,n){var r;for(r=0;r<n&&!(0===e[t+r]);r++);return e.toString("utf8",t,t+r)}var b=e("./index"),y=e("./descriptor"),w=e("uint64be");n.fullBoxes={};["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","co64","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"].forEach(function(e){n.fullBoxes[e]=!0}),n.ftyp={},n.ftyp.encode=function(e,r,o){r=r?r.slice(o):t.alloc(n.ftyp.encodingLength(e));var a=e.compatibleBrands||[];r.write(e.brand,0,4,"ascii"),r.writeUInt32BE(e.brandVersion,4);for(var d=0;d<a.length;d++)r.write(a[d],8+4*d,4,"ascii");return n.ftyp.encode.bytes=8+4*a.length,r},n.ftyp.decode=function(e,t){e=e.slice(t);for(var n=e.toString("ascii",0,4),r=e.readUInt32BE(4),o=[],a=8;a<e.length;a+=4)o.push(e.toString("ascii",a,a+4));return{brand:n,brandVersion:r,compatibleBrands:o}},n.ftyp.encodingLength=function(e){return 8+4*(e.compatibleBrands||[]).length},n.mvhd={},n.mvhd.encode=function(e,r,a){return r=r?r.slice(a):t.alloc(96),i(e.ctime||new Date,r,0),i(e.mtime||new Date,r,4),r.writeUInt32BE(e.timeScale||0,8),r.writeUInt32BE(e.duration||0,12),d(e.preferredRate||0,r,16),l(e.preferredVolume||0,r,20),o(r,22,32),c(e.matrix,r,32),r.writeUInt32BE(e.previewTime||0,68),r.writeUInt32BE(e.previewDuration||0,72),r.writeUInt32BE(e.posterTime||0,76),r.writeUInt32BE(e.selectionTime||0,80),r.writeUInt32BE(e.selectionDuration||0,84),r.writeUInt32BE(e.currentTime||0,88),r.writeUInt32BE(e.nextTrackId||0,92),n.mvhd.encode.bytes=96,r},n.mvhd.decode=function(e,t){return e=e.slice(t),{ctime:h(e,0),mtime:h(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),preferredRate:m(e,16),preferredVolume:g(e,20),matrix:f(e.slice(32,68)),previewTime:e.readUInt32BE(68),previewDuration:e.readUInt32BE(72),posterTime:e.readUInt32BE(76),selectionTime:e.readUInt32BE(80),selectionDuration:e.readUInt32BE(84),currentTime:e.readUInt32BE(88),nextTrackId:e.readUInt32BE(92)}},n.mvhd.encodingLength=function(){return 96},n.tkhd={},n.tkhd.encode=function(e,r,a){return r=r?r.slice(a):t.alloc(80),i(e.ctime||new Date,r,0),i(e.mtime||new Date,r,4),r.writeUInt32BE(e.trackId||0,8),o(r,12,16),r.writeUInt32BE(e.duration||0,16),o(r,20,28),r.writeUInt16BE(e.layer||0,28),r.writeUInt16BE(e.alternateGroup||0,30),r.writeUInt16BE(e.volume||0,32),c(e.matrix,r,36),r.writeUInt32BE(e.trackWidth||0,72),r.writeUInt32BE(e.trackHeight||0,76),n.tkhd.encode.bytes=80,r},n.tkhd.decode=function(e,t){return e=e.slice(t),{ctime:h(e,0),mtime:h(e,4),trackId:e.readUInt32BE(8),duration:e.readUInt32BE(16),layer:e.readUInt16BE(28),alternateGroup:e.readUInt16BE(30),volume:e.readUInt16BE(32),matrix:f(e.slice(36,72)),trackWidth:e.readUInt32BE(72),trackHeight:e.readUInt32BE(76)}},n.tkhd.encodingLength=function(){return 80},n.mdhd={},n.mdhd.encode=function(e,r,o){return 1===e.version?(r=r?r.slice(o):t.alloc(32),a(e.ctime||new Date,r,0),a(e.mtime||new Date,r,8),r.writeUInt32BE(e.timeScale||0,16),r.writeUIntBE(e.duration||0,20,6),r.writeUInt16BE(e.language||0,28),r.writeUInt16BE(e.quality||0,30),n.mdhd.encode.bytes=32,r):(r=r?r.slice(o):t.alloc(20),i(e.ctime||new Date,r,0),i(e.mtime||new Date,r,4),r.writeUInt32BE(e.timeScale||0,8),r.writeUInt32BE(e.duration||0,12),r.writeUInt16BE(e.language||0,16),r.writeUInt16BE(e.quality||0,18),n.mdhd.encode.bytes=20,r)},n.mdhd.decode=function(e,t,n){e=e.slice(t);return 20!=n-t?{ctime:p(e,0),mtime:p(e,8),timeScale:e.readUInt32BE(16),duration:e.readUIntBE(20,6),language:e.readUInt16BE(28),quality:e.readUInt16BE(30)}:{ctime:h(e,0),mtime:h(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),language:e.readUInt16BE(16),quality:e.readUInt16BE(18)}},n.mdhd.encodingLength=function(e){return 1===e.version?32:20},n.vmhd={},n.vmhd.encode=function(e,r,o){r=r?r.slice(o):t.alloc(8),r.writeUInt16BE(e.graphicsMode||0,0);var i=e.opcolor||[0,0,0];return r.writeUInt16BE(i[0],2),r.writeUInt16BE(i[1],4),r.writeUInt16BE(i[2],6),n.vmhd.encode.bytes=8,r},n.vmhd.decode=function(e,t){return e=e.slice(t),{graphicsMode:e.readUInt16BE(0),opcolor:[e.readUInt16BE(2),e.readUInt16BE(4),e.readUInt16BE(6)]}},n.vmhd.encodingLength=function(){return 8},n.smhd={},n.smhd.encode=function(e,r,i){return r=r?r.slice(i):t.alloc(4),r.writeUInt16BE(e.balance||0,0),o(r,2,4),n.smhd.encode.bytes=4,r},n.smhd.decode=function(e,t){return e=e.slice(t),{balance:e.readUInt16BE(0)}},n.smhd.encodingLength=function(){return 4},n.stsd={},n.stsd.encode=function(e,r,o){r=r?r.slice(o):t.alloc(n.stsd.encodingLength(e));var a=e.entries||[];r.writeUInt32BE(a.length,0);for(var d=4,s=0,l;s<a.length;s++)l=a[s],b.encode(l,r,d),d+=b.encode.bytes;return n.stsd.encode.bytes=d,r},n.stsd.decode=function(e,t,n){e=e.slice(t);for(var r=e.readUInt32BE(0),o=Array(r),a=4,d=0,s;d<r;d++)s=b.decode(e,a,n),o[d]=s,a+=s.length;return{entries:o}},n.stsd.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var n=0;n<e.entries.length;n++)t+=b.encodingLength(e.entries[n]);return t},n.avc1=n.VisualSampleEntry={},n.VisualSampleEntry.encode=function(e,r,i){r=r?r.slice(i):t.alloc(n.VisualSampleEntry.encodingLength(e)),o(r,0,6),r.writeUInt16BE(e.dataReferenceIndex||0,6),o(r,8,24),r.writeUInt16BE(e.width||0,24),r.writeUInt16BE(e.height||0,26),r.writeUInt32BE(e.hResolution||4718592,28),r.writeUInt32BE(e.vResolution||4718592,32),o(r,36,40),r.writeUInt16BE(e.frameCount||1,40);var a=e.compressorName||"",d=s(a.length,31);r.writeUInt8(d,42),r.write(a,43,d,"utf8"),r.writeUInt16BE(e.depth||24,74),r.writeInt16BE(-1,76);var l=78,c=e.children||[];c.forEach(function(e){b.encode(e,r,l),l+=b.encode.bytes}),n.VisualSampleEntry.encode.bytes=l},n.VisualSampleEntry.decode=function(e,t,n){e=e.slice(t);for(var r=n-t,o=s(e.readUInt8(42),31),i={dataReferenceIndex:e.readUInt16BE(6),width:e.readUInt16BE(24),height:e.readUInt16BE(26),hResolution:e.readUInt32BE(28),vResolution:e.readUInt32BE(32),frameCount:e.readUInt16BE(40),compressorName:e.toString("utf8",43,43+o),depth:e.readUInt16BE(74),children:[]},a=78;8<=r-a;){var d=b.decode(e,a,r);i.children.push(d),i[d.type]=d,a+=d.length}return i},n.VisualSampleEntry.encodingLength=function(e){var t=78,n=e.children||[];return n.forEach(function(e){t+=b.encodingLength(e)}),t},n.avcC={},n.avcC.encode=function(e,r,o){r=r?r.slice(o):t.alloc(e.buffer.length),e.buffer.copy(r),n.avcC.encode.bytes=e.buffer.length},n.avcC.decode=function(e,n,r){return e=e.slice(n,r),{mimeCodec:e.toString("hex",1,4),buffer:t.from(e)}},n.avcC.encodingLength=function(e){return e.buffer.length},n.mp4a=n.AudioSampleEntry={},n.AudioSampleEntry.encode=function(e,r,i){r=r?r.slice(i):t.alloc(n.AudioSampleEntry.encodingLength(e)),o(r,0,6),r.writeUInt16BE(e.dataReferenceIndex||0,6),o(r,8,16),r.writeUInt16BE(e.channelCount||2,16),r.writeUInt16BE(e.sampleSize||16,18),o(r,20,24),r.writeUInt32BE(e.sampleRate||0,24);var a=28,d=e.children||[];d.forEach(function(e){b.encode(e,r,a),a+=b.encode.bytes}),n.AudioSampleEntry.encode.bytes=a},n.AudioSampleEntry.decode=function(e,t,n){e=e.slice(t,n);for(var r=n-t,o={dataReferenceIndex:e.readUInt16BE(6),channelCount:e.readUInt16BE(16),sampleSize:e.readUInt16BE(18),sampleRate:e.readUInt32BE(24),children:[]},i=28;8<=r-i;){var a=b.decode(e,i,r);o.children.push(a),o[a.type]=a,i+=a.length}return o},n.AudioSampleEntry.encodingLength=function(e){var t=28,n=e.children||[];return n.forEach(function(e){t+=b.encodingLength(e)}),t},n.esds={},n.esds.encode=function(e,r,o){r=r?r.slice(o):t.alloc(e.buffer.length),e.buffer.copy(r,0),n.esds.encode.bytes=e.buffer.length},n.esds.decode=function(e,n,r){e=e.slice(n,r);var o=y.Descriptor.decode(e,0,e.length),i="ESDescriptor"===o.tagName?o:{},a=i.DecoderConfigDescriptor||{},d=a.oti||0,s=a.DecoderSpecificInfo,l=s?(248&s.buffer.readUInt8(0))>>3:0,c=null;return d&&(c=d.toString(16),l&&(c+="."+l)),{mimeCodec:c,buffer:t.from(e.slice(0))}},n.esds.encodingLength=function(e){return e.buffer.length},n.stsz={},n.stsz.encode=function(e,r,o){var a=e.entries||[];r=r?r.slice(o):t.alloc(n.stsz.encodingLength(e)),r.writeUInt32BE(0,0),r.writeUInt32BE(a.length,4);for(var d=0;d<a.length;d++)r.writeUInt32BE(a[d],4*d+8);return n.stsz.encode.bytes=8+4*a.length,r},n.stsz.decode=function(e,t){e=e.slice(t);for(var n=e.readUInt32BE(0),r=e.readUInt32BE(4),o=Array(r),a=0;a<r;a++)o[a]=0===n?e.readUInt32BE(4*a+8):n;return{entries:o}},n.stsz.encodingLength=function(e){return 8+4*e.entries.length},n.stss=n.stco={},n.stco.encode=function(e,r,o){var a=e.entries||[];r=r?r.slice(o):t.alloc(n.stco.encodingLength(e)),r.writeUInt32BE(a.length,0);for(var d=0;d<a.length;d++)r.writeUInt32BE(a[d],4*d+4);return n.stco.encode.bytes=4+4*a.length,r},n.stco.decode=function(e,t){e=e.slice(t);for(var n=e.readUInt32BE(0),r=Array(n),o=0;o<n;o++)r[o]=e.readUInt32BE(4*o+4);return{entries:r}},n.stco.encodingLength=function(e){return 4+4*e.entries.length},n.co64={},n.co64.encode=function(e,r,o){var a=e.entries||[];r=r?r.slice(o):t.alloc(n.co64.encodingLength(e)),r.writeUInt32BE(a.length,0);for(var d=0;d<a.length;d++)w.encode(a[d],r,8*d+4);return n.co64.encode.bytes=4+8*a.length,r},n.co64.decode=function(e,t){e=e.slice(t);for(var n=e.readUInt32BE(0),r=Array(n),o=0;o<n;o++)r[o]=w.decode(e,8*o+4);return{entries:r}},n.co64.encodingLength=function(e){return 4+8*e.entries.length},n.stts={},n.stts.encode=function(e,r,o){var a=e.entries||[];r=r?r.slice(o):t.alloc(n.stts.encodingLength(e)),r.writeUInt32BE(a.length,0);for(var d=0,s;d<a.length;d++)s=8*d+4,r.writeUInt32BE(a[d].count||0,s),r.writeUInt32BE(a[d].duration||0,s+4);return n.stts.encode.bytes=4+8*e.entries.length,r},n.stts.decode=function(e,t){e=e.slice(t);for(var n=e.readUInt32BE(0),r=Array(n),o=0,a;o<n;o++)a=8*o+4,r[o]={count:e.readUInt32BE(a),duration:e.readUInt32BE(a+4)};return{entries:r}},n.stts.encodingLength=function(e){return 4+8*e.entries.length},n.ctts={},n.ctts.encode=function(e,r,o){var a=e.entries||[];r=r?r.slice(o):t.alloc(n.ctts.encodingLength(e)),r.writeUInt32BE(a.length,0);for(var d=0,s;d<a.length;d++)s=8*d+4,r.writeUInt32BE(a[d].count||0,s),r.writeUInt32BE(a[d].compositionOffset||0,s+4);return n.ctts.encode.bytes=4+8*a.length,r},n.ctts.decode=function(e,t){e=e.slice(t);for(var n=e.readUInt32BE(0),r=Array(n),o=0,a;o<n;o++)a=8*o+4,r[o]={count:e.readUInt32BE(a),compositionOffset:e.readInt32BE(a+4)};return{entries:r}},n.ctts.encodingLength=function(e){return 4+8*e.entries.length},n.stsc={},n.stsc.encode=function(e,r,o){var a=e.entries||[];r=r?r.slice(o):t.alloc(n.stsc.encodingLength(e)),r.writeUInt32BE(a.length,0);for(var d=0,s;d<a.length;d++)s=12*d+4,r.writeUInt32BE(a[d].firstChunk||0,s),r.writeUInt32BE(a[d].samplesPerChunk||0,s+4),r.writeUInt32BE(a[d].sampleDescriptionId||0,s+8);return n.stsc.encode.bytes=4+12*a.length,r},n.stsc.decode=function(e,t){e=e.slice(t);for(var n=e.readUInt32BE(0),r=Array(n),o=0,a;o<n;o++)a=12*o+4,r[o]={firstChunk:e.readUInt32BE(a),samplesPerChunk:e.readUInt32BE(a+4),sampleDescriptionId:e.readUInt32BE(a+8)};return{entries:r}},n.stsc.encodingLength=function(e){return 4+12*e.entries.length},n.dref={},n.dref.encode=function(e,r,o){r=r?r.slice(o):t.alloc(n.dref.encodingLength(e));var a=e.entries||[];r.writeUInt32BE(a.length,0);for(var d=4,s=0;s<a.length;s++){var l=a[s],c=(l.buf?l.buf.length:0)+4+4;r.writeUInt32BE(c,d),d+=4,r.write(l.type,d,4,"ascii"),d+=4,l.buf&&(l.buf.copy(r,d),d+=l.buf.length)}return n.dref.encode.bytes=d,r},n.dref.decode=function(e,t){e=e.slice(t);for(var n=e.readUInt32BE(0),r=Array(n),o=4,a=0;a<n;a++){var d=e.readUInt32BE(o),s=e.toString("ascii",o+4,o+8),l=e.slice(o+8,o+d);o+=d,r[a]={type:s,buf:l}}return{entries:r}},n.dref.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var n=0,r;n<e.entries.length;n++)r=e.entries[n].buf,t+=(r?r.length:0)+4+4;return t},n.elst={},n.elst.encode=function(e,r,o){var a=e.entries||[];r=r?r.slice(o):t.alloc(n.elst.encodingLength(e)),r.writeUInt32BE(a.length,0);for(var s=0,l;s<a.length;s++)l=12*s+4,r.writeUInt32BE(a[s].trackDuration||0,l),r.writeUInt32BE(a[s].mediaTime||0,l+4),d(a[s].mediaRate||0,r,l+8);return n.elst.encode.bytes=4+12*a.length,r},n.elst.decode=function(e,t){e=e.slice(t);for(var n=e.readUInt32BE(0),r=Array(n),o=0,a;o<n;o++)a=12*o+4,r[o]={trackDuration:e.readUInt32BE(a),mediaTime:e.readInt32BE(a+4),mediaRate:m(e,a+8)};return{entries:r}},n.elst.encodingLength=function(e){return 4+12*e.entries.length},n.hdlr={},n.hdlr.encode=function(e,r,o){r=r?r.slice(o):t.alloc(n.hdlr.encodingLength(e));var i=21+(e.name||"").length;return r.fill(0,0,i),r.write(e.handlerType||"",4,4,"ascii"),u(e.name||"",r,20),n.hdlr.encode.bytes=i,r},n.hdlr.decode=function(e,t,n){return e=e.slice(t),{handlerType:e.toString("ascii",4,8),name:_(e,20,n)}},n.hdlr.encodingLength=function(e){return 21+(e.name||"").length},n.mehd={},n.mehd.encode=function(e,r,o){return r=r?r.slice(o):t.alloc(4),r.writeUInt32BE(e.fragmentDuration||0,0),n.mehd.encode.bytes=4,r},n.mehd.decode=function(e,t){return e=e.slice(t),{fragmentDuration:e.readUInt32BE(0)}},n.mehd.encodingLength=function(){return 4},n.trex={},n.trex.encode=function(e,r,o){return r=r?r.slice(o):t.alloc(20),r.writeUInt32BE(e.trackId||0,0),r.writeUInt32BE(e.defaultSampleDescriptionIndex||0,4),r.writeUInt32BE(e.defaultSampleDuration||0,8),r.writeUInt32BE(e.defaultSampleSize||0,12),r.writeUInt32BE(e.defaultSampleFlags||0,16),n.trex.encode.bytes=20,r},n.trex.decode=function(e,t){return e=e.slice(t),{trackId:e.readUInt32BE(0),defaultSampleDescriptionIndex:e.readUInt32BE(4),defaultSampleDuration:e.readUInt32BE(8),defaultSampleSize:e.readUInt32BE(12),defaultSampleFlags:e.readUInt32BE(16)}},n.trex.encodingLength=function(){return 20},n.mfhd={},n.mfhd.encode=function(e,r,o){return r=r?r.slice(o):t.alloc(4),r.writeUInt32BE(e.sequenceNumber||0,0),n.mfhd.encode.bytes=4,r},n.mfhd.decode=function(e){return{sequenceNumber:e.readUInt32BE(0)}},n.mfhd.encodingLength=function(){return 4},n.tfhd={},n.tfhd.encode=function(e,r,o){return r=r?r.slice(o):t.alloc(4),r.writeUInt32BE(e.trackId,0),n.tfhd.encode.bytes=4,r},n.tfhd.decode=function(){},n.tfhd.encodingLength=function(){return 4},n.tfdt={},n.tfdt.encode=function(e,r,o){return r=r?r.slice(o):t.alloc(4),r.writeUInt32BE(e.baseMediaDecodeTime||0,0),n.tfdt.encode.bytes=4,r},n.tfdt.decode=function(){},n.tfdt.encodingLength=function(){return 4},n.trun={},n.trun.encode=function(e,r,o){r=r?r.slice(o):t.alloc(8+16*e.entries.length),r.writeUInt32BE(e.entries.length,0),r.writeInt32BE(e.dataOffset,4);for(var a=8,d=0,s;d<e.entries.length;d++)s=e.entries[d],r.writeUInt32BE(s.sampleDuration,a),a+=4,r.writeUInt32BE(s.sampleSize,a),a+=4,r.writeUInt32BE(s.sampleFlags,a),a+=4,0===(e.version||0)?r.writeUInt32BE(s.sampleCompositionTimeOffset,a):r.writeInt32BE(s.sampleCompositionTimeOffset,a),a+=4;n.trun.encode.bytes=a},n.trun.decode=function(){},n.trun.encodingLength=function(e){return 8+16*e.entries.length},n.mdat={},n.mdat.encode=function(e,t,r){e.buffer?(e.buffer.copy(t,r),n.mdat.encode.bytes=e.buffer.length):n.mdat.encode.bytes=n.mdat.encodingLength(e)},n.mdat.decode=function(e,n,r){return{buffer:t.from(e.slice(n,r))}},n.mdat.encodingLength=function(e){return e.buffer?e.buffer.length:e.contentLength}}).call(this,e("buffer").Buffer)},{"./descriptor":48,"./index":49,buffer:26,uint64be:113}],48:[function(e,t,n){(function(e){var t={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};n.Descriptor={},n.Descriptor.decode=function(r,o,i){var a=r.readUInt8(o),d=o+1,s=0,l;do l=r.readUInt8(d++),s=s<<7|127&l;while(128&l);var c=t[a],u;return u=n[c]?n[c].decode(r,d,i):{buffer:e.from(r.slice(d,d+s))},u.tag=a,u.tagName=c,u.length=d-o+s,u.contentsLen=s,u},n.DescriptorArray={},n.DescriptorArray.decode=function(e,r,o){for(var i=r,a={};i+2<=o;){var d=n.Descriptor.decode(e,i,o);i+=d.length;var s=t[d.tag]||"Descriptor"+d.tag;a[s]=d}return a},n.ESDescriptor={},n.ESDescriptor.decode=function(e,t,r){var o=e.readUInt8(t+2),i=t+3;if(128&o&&(i+=2),64&o){var a=e.readUInt8(i);i+=a+1}return 32&o&&(i+=2),n.DescriptorArray.decode(e,i,r)},n.DecoderConfigDescriptor={},n.DecoderConfigDescriptor.decode=function(e,t,r){var o=e.readUInt8(t),i=n.DescriptorArray.decode(e,t+13,r);return i.oti=o,i}}).call(this,e("buffer").Buffer)},{buffer:26}],49:[function(e,t,n){(function(t){var r=e("uint64be"),o=e("./boxes"),i=4294967295,a=n,d=n.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","tfdt","trun","sbgps","sgpds","subss","saizs","saios","meta"]};a.encode=function(e,n,r){return a.encodingLength(e),r=r||0,n=n||t.alloc(e.length),a._encode(e,n,r)},a._encode=function(e,t,n){var s=e.type,l=e.length;l>i&&(l=1),t.writeUInt32BE(l,n),t.write(e.type,n+4,4,"ascii");var c=n+8;if(1===l&&(r.encode(e.length,t,c),c+=8),o.fullBoxes[s]&&(t.writeUInt32BE(e.flags||0,c),t.writeUInt8(e.version||0,c),c+=4),d[s]){var u=d[s];u.forEach(function(n){if(5===n.length){var r=e[n]||[];n=n.substr(0,4),r.forEach(function(e){a._encode(e,t,c),c+=a.encode.bytes})}else e[n]&&(a._encode(e[n],t,c),c+=a.encode.bytes)}),e.otherBoxes&&e.otherBoxes.forEach(function(e){a._encode(e,t,c),c+=a.encode.bytes})}else if(o[s]){var f=o[s].encode;f(e,t,c),c+=f.bytes}else if(e.buffer){var p=e.buffer;p.copy(t,c),c+=e.buffer.length}else throw new Error("Either `type` must be set to a known type (not'"+s+"') or `buffer` must be set");return a.encode.bytes=c-n,t},a.readHeaders=function(e,t,n){if(t=t||0,n=n||e.length,8>n-t)return 8;var i=e.readUInt32BE(t),a=e.toString("ascii",t+4,t+8),d=t+8;if(1===i){if(16>n-t)return 16;i=r.decode(e,d),d+=8}var s,l;return o.fullBoxes[a]&&(s=e.readUInt8(d),l=16777215&e.readUInt32BE(d),d+=4),{length:i,headersLen:d-t,contentLen:i-(d-t),type:a,version:s,flags:l}},a.decode=function(e,t,n){t=t||0,n=n||e.length;var r=a.readHeaders(e,t,n);if(!r||r.length>n-t)throw new Error("Data too short");return a.decodeWithoutHeaders(r,e,t+r.headersLen,t+r.length)},a.decodeWithoutHeaders=function(e,n,r,i){r=r||0,i=i||n.length;var s=e.type,l={};if(d[s]){l.otherBoxes=[];for(var c=d[s],u=r,f;8<=i-u;)if(f=a.decode(n,u,i),u+=f.length,0<=c.indexOf(f.type))l[f.type]=f;else if(0<=c.indexOf(f.type+"s")){var p=f.type+"s",h=l[p]=l[p]||[];h.push(f)}else l.otherBoxes.push(f)}else if(o[s]){var m=o[s].decode;l=m(n,r,i)}else l.buffer=t.from(n.slice(r,i));return l.length=e.length,l.contentLen=e.contentLen,l.type=e.type,l.version=e.version,l.flags=e.flags,l},a.encodingLength=function(e){var t=e.type,n=8;if(o.fullBoxes[t]&&(n+=4),d[t]){var r=d[t];r.forEach(function(t){if(5===t.length){var r=e[t]||[];t=t.substr(0,4),r.forEach(function(e){e.type=t,n+=a.encodingLength(e)})}else if(e[t]){var o=e[t];o.type=t,n+=a.encodingLength(o)}}),e.otherBoxes&&e.otherBoxes.forEach(function(e){n+=a.encodingLength(e)})}else if(o[t])n+=o[t].encodingLength(e);else if(e.buffer)n+=e.buffer.length;else throw new Error("Either `type` must be set to a known type (not'"+t+"') or `buffer` must be set");return n>i&&(n+=8),e.length=n,n}}).call(this,e("buffer").Buffer)},{"./boxes":47,buffer:26,uint64be:113}],50:[function(e,t){(function(n){var r=e("readable-stream"),o=e("next-event"),i=e("mp4-box-encoding"),a=n.alloc(0);class d extends r.Writable{constructor(e){super(e),this.destroyed=!1,this._pending=0,this._missing=0,this._ignoreEmpty=!1,this._buf=null,this._str=null,this._cb=null,this._ondrain=null,this._writeBuffer=null,this._writeCb=null,this._ondrain=null,this._kick()}destroy(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))}_write(e,t,n){if(!this.destroyed){for(var r=!this._str||!this._str._writableState.needDrain;e.length&&!this.destroyed;){if(!this._missing&&!this._ignoreEmpty)return this._writeBuffer=e,void(this._writeCb=n);var o=e.length<this._missing?e.length:this._missing;if(this._buf?e.copy(this._buf,this._buf.length-this._missing):this._str&&(r=this._str.write(o===e.length?e:e.slice(0,o))),this._missing-=o,!this._missing){var i=this._buf,d=this._cb,s=this._str;this._buf=this._cb=this._str=this._ondrain=null,r=!0,this._ignoreEmpty=!1,s&&s.end(),d&&d(i)}e=o===e.length?a:e.slice(o)}return this._pending&&!this._missing?(this._writeBuffer=e,void(this._writeCb=n)):void(r?n():this._ondrain(n))}}_buffer(e,t){this._missing=e,this._buf=n.alloc(e),this._cb=t}_stream(e,t){return this._missing=e,this._str=new s(this),this._ondrain=o(this._str,"drain"),this._pending++,this._str.on("end",()=>{this._pending--,this._kick()}),this._cb=t,this._str}_readBox(){const e=(t,r)=>{this._buffer(t,t=>{r=r?n.concat([r,t]):t;var o=i.readHeaders(r);"number"==typeof o?e(o-r.length,r):(this._pending++,this._headers=o,this.emit("box",o))})};e(8)}stream(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var e=this._headers;return this._headers=null,this._stream(e.contentLen,null)}decode(e){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=this._headers;this._headers=null,this._buffer(t.contentLen,n=>{var r=i.decodeWithoutHeaders(t,n);e(r),this._pending--,this._kick()})}ignore(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var e=this._headers;this._headers=null,this._missing=e.contentLen,0===this._missing&&(this._ignoreEmpty=!0),this._cb=()=>{this._pending--,this._kick()}}_kick(){if(!this._pending&&(this._buf||this._str||this._readBox(),this._writeBuffer)){var e=this._writeCb,t=this._writeBuffer;this._writeBuffer=null,this._writeCb=null,this._write(t,null,e)}}}class s extends r.PassThrough{constructor(e){super(),this._parent=e,this.destroyed=!1}destroy(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}t.exports=d}).call(this,e("buffer").Buffer)},{buffer:26,"mp4-box-encoding":49,"next-event":55,"readable-stream":85}],51:[function(e,t){(function(n,r){function o(){}var i=e("readable-stream"),a=e("mp4-box-encoding");class d extends i.Readable{constructor(e){super(e),this.destroyed=!1,this._finalized=!1,this._reading=!1,this._stream=null,this._drain=null,this._want=!1,this._onreadable=()=>{this._want&&(this._want=!1,this._read())},this._onend=()=>{this._stream=null}}mdat(e,t){this.mediaData(e,t)}mediaData(e,t){var n=new s(this);return this.box({type:"mdat",contentLength:e,encodeBufferLen:8,stream:n},t),n}box(e,t){if(t||(t=o),this.destroyed)return t(new Error("Encoder is destroyed"));var i;if(e.encodeBufferLen&&(i=r.alloc(e.encodeBufferLen)),e.stream)e.buffer=null,i=a.encode(e,i),this.push(i),this._stream=e.stream,this._stream.on("readable",this._onreadable),this._stream.on("end",this._onend),this._stream.on("end",t),this._forward();else{i=a.encode(e,i);var d=this.push(i);if(d)return n.nextTick(t);this._drain=t}}destroy(e){if(!this.destroyed){if(this.destroyed=!0,this._stream&&this._stream.destroy&&this._stream.destroy(),this._stream=null,this._drain){var t=this._drain;this._drain=null,t(e)}e&&this.emit("error",e),this.emit("close")}}finalize(){this._finalized=!0,this._stream||this._drain||this.push(null)}_forward(){if(this._stream)for(;!this.destroyed;){var e=this._stream.read();if(!e)return void(this._want=!!this._stream);if(!this.push(e))return}}_read(){if(!(this._reading||this.destroyed)){if(this._reading=!0,this._stream&&this._forward(),this._drain){var e=this._drain;this._drain=null,e()}this._reading=!1,this._finalized&&this.push(null)}}}class s extends i.PassThrough{constructor(e){super(),this._parent=e,this.destroyed=!1}destroy(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}t.exports=d}).call(this,e("_process"),e("buffer").Buffer)},{_process:61,buffer:26,"mp4-box-encoding":49,"readable-stream":85}],52:[function(e,t,n){const r=e("./decode"),o=e("./encode");n.decode=e=>new r(e),n.encode=e=>new o(e)},{"./decode":50,"./encode":51}],53:[function(e,n){var s=Math.round;function r(e){if(e+="",!(100<e.length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();return"years"===n||"year"===n||"yrs"===n||"yr"===n||"y"===n?31557600000*r:"weeks"===n||"week"===n||"w"===n?604800000*r:"days"===n||"day"===n||"d"===n?86400000*r:"hours"===n||"hour"===n||"hrs"===n||"hr"===n||"h"===n?3600000*r:"minutes"===n||"minute"===n||"mins"===n||"min"===n||"m"===n?60000*r:"seconds"===n||"second"===n||"secs"===n||"sec"===n||"s"===n?1000*r:"milliseconds"===n||"millisecond"===n||"msecs"===n||"msec"===n||"ms"===n?r:void 0}}}function o(e){var n=t(e);return 86400000<=n?s(e/86400000)+"d":3600000<=n?s(e/3600000)+"h":60000<=n?s(e/60000)+"m":1000<=n?s(e/1000)+"s":e+"ms"}function i(e){var n=t(e);return 86400000<=n?a(e,n,86400000,"day"):3600000<=n?a(e,n,3600000,"hour"):60000<=n?a(e,n,60000,"minute"):1000<=n?a(e,n,1000,"second"):e+" ms"}function a(e,t,r,n){return s(e/r)+" "+n+(t>=1.5*r?"s":"")}var l=24*(60*60000);n.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return r(e);if("number"===n&&isFinite(e))return t.long?i(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],54:[function(e,t){function n(e){return o(e,{objectMode:!0,highWaterMark:16})}function r(e){return o(e)}function o(e,t){if(!e||"function"==typeof e||e._readableState)return e;var n=new i.Readable(t).wrap(e);return e.destroy&&(n.destroy=e.destroy.bind(e)),n}var i=e("readable-stream");class a extends i.Readable{constructor(e,t){super(t),this.destroyed=!1,this._drained=!1,this._forwarding=!1,this._current=null,this._toStreams2=t&&t.objectMode?n:r,"function"==typeof e?this._queue=e:(this._queue=e.map(this._toStreams2),this._queue.forEach(e=>{"function"!=typeof e&&this._attachErrorListener(e)})),this._next()}_read(){this._drained=!0,this._forward()}_forward(){if(!this._forwarding&&this._drained&&this._current){this._forwarding=!0;for(var e;null!==(e=this._current.read())&&this._drained;)this._drained=this.push(e);this._forwarding=!1}}destroy(e){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),"function"!=typeof this._queue&&this._queue.forEach(e=>{e.destroy&&e.destroy()}),e&&this.emit("error",e),this.emit("close"))}_next(){if(this._current=null,"function"==typeof this._queue)this._queue((e,t)=>e?this.destroy(e):void(t=this._toStreams2(t),this._attachErrorListener(t),this._gotNextStream(t)));else{var e=this._queue.shift();"function"==typeof e&&(e=this._toStreams2(e()),this._attachErrorListener(e)),this._gotNextStream(e)}}_gotNextStream(e){if(!e)return this.push(null),void this.destroy();this._current=e,this._forward();const t=()=>{this._forward()},n=()=>{e._readableState.ended||this.destroy()},r=()=>{this._current=null,e.removeListener("readable",t),e.removeListener("end",r),e.removeListener("close",n),this._next()};e.on("readable",t),e.once("end",r),e.once("close",n)}_attachErrorListener(e){if(!e)return;const t=n=>{e.removeListener("error",t),this.destroy(n)};e.once("error",t)}}a.obj=e=>new a(e,{objectMode:!0,highWaterMark:16}),t.exports=a},{"readable-stream":85}],55:[function(e,t){t.exports=function(e,t){var n=null;return e.on(t,function(e){if(n){var t=n;n=null,t(e)}}),function(e){n=e}}},{}],56:[function(e,t){function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function r(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}var o=e("wrappy");t.exports=o(n),t.exports.strict=o(r),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return r(this)},configurable:!0})})},{wrappy:122}],57:[function(e,t){function n(e){if(/^-?\d+$/.test(e))return parseInt(e,10);var t;if(t=e.match(/^(-?\d+)(-|\.\.\.?|\u2025|\u2026|\u22EF)(-?\d+)$/)){var n=t[1],r=t[2],o=t[3];if(n&&o){n=parseInt(n),o=parseInt(o);var a=[],d=n<o?1:-1;("-"==r||".."==r||"\u2025"==r)&&(o+=d);for(var s=n;s!=o;s+=d)a.push(s);return a}}return[]}t.exports.parse=function(e){var t=e.split(","),r=t.map(function(e){return n(e)});return 0===r.length?[]:1===r.length?Array.isArray(r[0])?r[0]:r:r.reduce(function(e,t){return Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),e.concat(t)})}},{}],58:[function(e,t){(function(n,r){function o(e){if("string"==typeof e&&/^(stream-)?magnet:/.test(e))return h(e);if("string"==typeof e&&(/^[a-f0-9]{40}$/i.test(e)||/^[a-z2-7]{32}$/i.test(e)))return h(`magnet:?xt=urn:btih:${e}`);if(r.isBuffer(e)&&20===e.length)return h(`magnet:?xt=urn:btih:${e.toString("hex")}`);if(r.isBuffer(e))return i(e);if(e&&e.infoHash)return e.infoHash=e.infoHash.toLowerCase(),e.announce||(e.announce=[]),"string"==typeof e.announce&&(e.announce=[e.announce]),e.urlList||(e.urlList=[]),e;throw new Error("Invalid torrent identifier")}function i(e){r.isBuffer(e)&&(e=c.decode(e)),l(e.info,"info"),l(e.info["name.utf-8"]||e.info.name,"info.name"),l(e.info["piece length"],"info['piece length']"),l(e.info.pieces,"info.pieces"),e.info.files?e.info.files.forEach(e=>{l("number"==typeof e.length,"info.files[0].length"),l(e["path.utf-8"]||e.path,"info.files[0].path")}):l("number"==typeof e.info.length,"info.length");const t={info:e.info,infoBuffer:c.encode(e.info),name:(e.info["name.utf-8"]||e.info.name).toString(),announce:[]};t.infoHash=g.sync(t.infoBuffer),t.infoHashBuffer=r.from(t.infoHash,"hex"),void 0!==e.info.private&&(t.private=!!e.info.private),e["creation date"]&&(t.created=new Date(1e3*e["creation date"])),e["created by"]&&(t.createdBy=e["created by"].toString()),r.isBuffer(e.comment)&&(t.comment=e.comment.toString()),Array.isArray(e["announce-list"])&&0<e["announce-list"].length?e["announce-list"].forEach(e=>{e.forEach(e=>{t.announce.push(e.toString())})}):e.announce&&t.announce.push(e.announce.toString()),r.isBuffer(e["url-list"])&&(e["url-list"]=0<e["url-list"].length?[e["url-list"]]:[]),t.urlList=(e["url-list"]||[]).map(e=>e.toString()),_(t.announce),_(t.urlList);const n=e.info.files||[e.info];t.files=n.map((e,r)=>{const o=[].concat(t.name,e["path.utf-8"]||e.path||[]).map(e=>e.toString());return{path:m.join.apply(null,[m.sep].concat(o)).slice(1),name:o[o.length-1],length:e.length,offset:n.slice(0,r).reduce(d,0)}}),t.length=n.reduce(d,0);const o=t.files[t.files.length-1];return t.pieceLength=e.info["piece length"],t.lastPieceLength=(o.offset+o.length)%t.pieceLength||t.pieceLength,t.pieces=s(e.info.pieces),t}function a(e){return"undefined"!=typeof Blob&&e instanceof Blob}function d(e,t){return e+t.length}function s(e){const t=[];for(let n=0;n<e.length;n+=20)t.push(e.slice(n,n+20).toString("hex"));return t}function l(e,t){if(!e)throw new Error(`Torrent is missing required field: ${t}`)}const c=e("bencode"),u=e("blob-to-buffer"),f=e("fs"),p=e("simple-get"),h=e("magnet-uri"),m=e("path"),g=e("simple-sha1"),_=e("uniq");t.exports=o,t.exports.remote=function(e,t){function r(e){try{i=o(e)}catch(e){return t(e)}i&&i.infoHash?t(null,i):t(new Error("Invalid torrent identifier"))}let i;if("function"!=typeof t)throw new Error("second argument must be a Function");try{i=o(e)}catch(e){}i&&i.infoHash?n.nextTick(()=>{t(null,i)}):a(e)?u(e,(e,n)=>e?t(new Error(`Error converting Blob: ${e.message}`)):void r(n)):"function"==typeof p&&/^https?:/.test(e)?p.concat({url:e,timeout:30000,headers:{"user-agent":"WebTorrent (https://webtorrent.io)"}},(e,n,o)=>e?t(new Error(`Error downloading torrent: ${e.message}`)):void r(o)):"function"==typeof f.readFile&&"string"==typeof e?f.readFile(e,(e,n)=>e?t(new Error("Invalid torrent identifier")):void r(n)):n.nextTick(()=>{t(new Error("Invalid torrent identifier"))})},t.exports.toMagnetURI=h.encode,t.exports.toTorrentFile=function(e){const t={info:e.info};return t["announce-list"]=(e.announce||[]).map(e=>(t.announce||(t.announce=e),e=r.from(e,"utf8"),[e])),t["url-list"]=e.urlList||[],void 0!==e.private&&(t.private=+e.private),e.created&&(t["creation date"]=0|e.created.getTime()/1e3),e.createdBy&&(t["created by"]=e.createdBy),e.comment&&(t.comment=e.comment),c.encode(t)};(()=>{r.alloc(0)})()}).call(this,e("_process"),e("buffer").Buffer)},{_process:61,bencode:11,"blob-to-buffer":19,buffer:26,fs:22,"magnet-uri":44,path:59,"simple-get":93,"simple-sha1":95,uniq:114}],59:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1,o;0<=r;r--)o=e[r],"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--);if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!=typeof e&&(e+="");var t=0,n=-1,r=!0,o;for(o=e.length-1;0<=o;--o)if(!(47===e.charCodeAt(o)))-1===n&&(r=!1,n=o+1);else if(!r){t=o+1;break}return-1===n?"":e.slice(t,n)}function o(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}n.resolve=function(){for(var n="",r=!1,a=arguments.length-1,d;-1<=a&&!r;a--){if(d=0<=a?arguments[a]:e.cwd(),"string"!=typeof d)throw new TypeError("Arguments to path.resolve must be strings");else if(!d)continue;n=d+"/"+n,r="/"===d.charAt(0)}return n=t(o(n.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(e){var r=n.isAbsolute(e),a="/"===i(e,-1);return e=t(o(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&a&&(e+="/"),(r?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(o(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),a=r(t.split("/")),d=s(o.length,a.length),l=d,c=0;c<d;c++)if(o[c]!==a[c]){l=c;break}for(var u=[],c=l;c<o.length;c++)u.push("..");return u=u.concat(a.slice(l)),u.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,a=e.length-1;1<=a;--a)if(t=e.charCodeAt(a),47!==t)o=!1;else if(!o){r=a;break}return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},n.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,a=0,d=e.length-1,s;0<=d;--d){if(s=e.charCodeAt(d),47===s){if(!o){n=d+1;break}continue}-1===r&&(o=!1,r=d+1),46===s?-1===t?t=d:1!==a&&(a=1):-1!==t&&(a=-1)}return-1===t||-1===r||0===a||1===a&&t===r-1&&t===n+1?"":e.slice(t,r)};var i=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:61}],60:[function(e,t){t.exports=function(e){return d(16384,0|1<<Math.log2(1024>e?1:e/1024)+.5)}},{}],61:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(n){try{return u.call(null,t,0)}catch(n){return u.call(this,t,0)}}}function i(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(n){try{return f.call(null,t)}catch(n){return f.call(this,t)}}}function a(){h&&g&&(h=!1,g.length?p=g.concat(p):m=-1,p.length&&d())}function d(){if(!h){var e=o(a);h=!0;for(var t=p.length;t;){for(g=p,p=[];++m<t;)g&&g[m].run();m=-1,t=p.length}g=null,h=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var c=t.exports={},u,f;(function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}})();var p=[],h=!1,m=-1,g;c.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||h||o(d)},s.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=l,c.addListener=l,c.once=l,c.off=l,c.removeListener=l,c.removeAllListeners=l,c.emit=l,c.prependListener=l,c.prependOnceListener=l,c.listeners=function(){return[]},c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],62:[function(e,t){(function(n){var r=e("once"),o=e("end-of-stream"),i=e("fs"),a=function(){},d=/^v?\.0/.test(n.version),s=function(e){return"function"==typeof e},l=function(e){return!!d&&!!i&&(e instanceof(i.ReadStream||a)||e instanceof(i.WriteStream||a))&&s(e.close)},c=function(e){return e.setHeader&&s(e.abort)},u=function(e,t,n,i){i=r(i);var d=!1;e.on("close",function(){d=!0}),o(e,{readable:t,writable:n},function(e){return e?i(e):void(d=!0,i())});var u=!1;return function(t){if(!d)return u?void 0:(u=!0,l(e)?e.close(a):c(e)?e.abort():s(e.destroy)?e.destroy():void i(t||new Error("stream was destroyed")))}},f=function(e){e()},p=function(e,t){return e.pipe(t)};t.exports=function(){var e=Array.prototype.slice.call(arguments),t=s(e[e.length-1]||a)&&e.pop()||a;if(Array.isArray(e[0])&&(e=e[0]),2>e.length)throw new Error("pump requires two streams per minimum");var n=e.map(function(o,a){var i=a<e.length-1;return u(o,i,0<a,function(e){r||(r=e),e&&n.forEach(f),i||(n.forEach(f),t(r))})}),r;return e.reduce(p)}}).call(this,e("_process"))},{_process:61,"end-of-stream":32,fs:21,once:56}],63:[function(e,t,n){(function(e){/*! https://mths.be/punycode v1.4.1 by @mathias */(function(i){function a(e){throw new RangeError(x[e])}function d(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";1<n.length&&(r=n[0]+"@",e=n[1]),e=e.replace(E,".");var o=e.split("."),i=d(o,t).join(".");return r+i}function c(e){for(var t=[],n=0,r=e.length,o,i;n<r;)o=e.charCodeAt(n++),55296<=o&&56319>=o&&n<r?(i=e.charCodeAt(n++),56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)):t.push(o);return t}function u(e){return d(e,function(e){var t="";return 65535<e&&(e-=65536,t+=S(55296|1023&e>>>10),e=56320|1023&e),t+=S(e),t}).join("")}function f(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:36}function p(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?v(e/700):e>>1,e+=v(e/t);455<e;r+=36)e=v(e/35);return v(r+36*e/(e+38))}function m(e){var r=[],o=e.length,d=0,s=128,l=72,c,p,m,g,_,b,y,E,x,S;for(p=e.lastIndexOf("-"),0>p&&(p=0),m=0;m<p;++m)128<=e.charCodeAt(m)&&a("not-basic"),r.push(e.charCodeAt(m));for(g=0<p?p+1:0;g<o;){for(_=d,b=1,y=36;;y+=36){if(g>=o&&a("invalid-input"),E=f(e.charCodeAt(g++)),(36<=E||E>v((2147483647-d)/b))&&a("overflow"),d+=E*b,x=y<=l?1:y>=l+26?26:y-l,E<x)break;S=36-x,b>v(2147483647/S)&&a("overflow"),b*=S}c=r.length+1,l=h(d-_,c,0==_),v(d/c)>2147483647-s&&a("overflow"),s+=v(d/c),d%=c,r.splice(d++,0,s)}return u(r)}function g(e){var r=[],o,i,d,s,l,u,f,g,_,b,y,w,E,x,C;for(e=c(e),w=e.length,o=128,i=0,l=72,u=0;u<w;++u)y=e[u],128>y&&r.push(S(y));for(d=s=r.length,s&&r.push("-");d<w;){for(f=2147483647,u=0;u<w;++u)y=e[u],y>=o&&y<f&&(f=y);for(E=d+1,f-o>v((2147483647-i)/E)&&a("overflow"),i+=(f-o)*E,o=f,u=0;u<w;++u)if(y=e[u],y<o&&2147483647<++i&&a("overflow"),y==o){for(g=i,_=36;;_+=36){if(b=_<=l?1:_>=l+26?26:_-l,g<b)break;C=g-b,x=36-b,r.push(S(p(b+C%x,0))),g=v(C/x)}r.push(S(p(g,0))),l=h(i,E,d==s),i=0,++d}++i,++o}return r.join("")}var _="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof t&&t&&!t.nodeType&&t,y="object"==typeof e&&e;(y.global===y||y.window===y||y.self===y)&&(i=y);var w=/^xn--/,k=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=r,S=o,C,I;if(C={version:"1.4.1",ucs2:{decode:c,encode:u},decode:m,encode:g,toASCII:function(e){return s(e,function(e){return k.test(e)?"xn--"+g(e):e})},toUnicode:function(e){return s(e,function(e){return w.test(e)?m(e.slice(4).toLowerCase()):e})}},"function"==typeof l&&"object"==typeof l.amd&&l.amd)l("punycode",function(){return C});else if(!(_&&b))i.punycode=C;else if(t.exports==_)b.exports=C;else for(I in C)C.hasOwnProperty(I)&&(_[I]=C[I])})(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],64:[function(e,t){'use strict';function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,o,a){t=t||"&",o=o||"=";var d={};if("string"!=typeof e||0===e.length)return d;var s=/\+/g;e=e.split(t);var l=1e3;a&&"number"==typeof a.maxKeys&&(l=a.maxKeys);var c=e.length;0<l&&c>l&&(c=l);for(var u=0;u<c;++u){var f=e[u].replace(s,"%20"),p=f.indexOf(o),h,m,g,_;0<=p?(h=f.substr(0,p),m=f.substr(p+1)):(h=f,m=""),g=decodeURIComponent(h),_=decodeURIComponent(m),n(d,g)?r(d[g])?d[g].push(_):d[g]=[d[g],_]:d[g]=_}return d};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],65:[function(e,t){'use strict';function n(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return"";}};t.exports=function(e,t,a,d){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?n(i(e),function(i){var d=encodeURIComponent(r(i))+a;return o(e[i])?n(e[i],function(e){return d+encodeURIComponent(r(e))}).join(t):d+encodeURIComponent(r(e[i]))}).join(t):d?encodeURIComponent(r(d))+a+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],66:[function(e,t,n){'use strict';n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":64,"./encode":65}],67:[function(e,t){let n;t.exports="function"==typeof queueMicrotask?queueMicrotask:e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},{}],68:[function(e,t){t.exports=function(e){var t=0;return function(){if(t===e.length)return null;var n=e.length-t,r=0|Math.random()*n,o=e[t+r],i=e[t];return e[t]=o,e[t+r]=i,t++,o}}},{}],69:[function(e,t){(function(n,r){'use strict';var o=e("safe-buffer").Buffer,i=r.crypto||r.msCrypto;t.exports=i&&i.getRandomValues?function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(e);if(0<e)if(65536<e)for(var a=0;a<e;a+=65536)i.getRandomValues(r.slice(a,a+65536));else i.getRandomValues(r);return"function"==typeof t?n.nextTick(function(){t(null,r)}):r}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{_process:61,"safe-buffer":91}],70:[function(e,t){const{Writable:n,PassThrough:r}=e("readable-stream");t.exports=class extends n{constructor(e,t={}){super(t),this.destroyed=!1,this._queue=[],this._position=e||0,this._cb=null,this._buffer=null,this._out=null}_write(e,t,n){let r=!0;for(;;){if(this.destroyed)return;if(0===this._queue.length)return this._buffer=e,void(this._cb=n);this._buffer=null;var o=this._queue[0];const t=d(o.start-this._position,0),i=o.end-this._position;if(t>=e.length)return this._position+=e.length,n(null);let a;if(i>e.length){this._position+=e.length,a=0===t?e:e.slice(t),r=o.stream.write(a)&&r;break}this._position+=i,a=0===t&&i===e.length?e:e.slice(t,i),r=o.stream.write(a)&&r,o.last&&o.stream.end(),e=e.slice(i),this._queue.shift()}r?n(null):o.stream.once("drain",n.bind(null,null))}slice(e){if(this.destroyed)return null;Array.isArray(e)||(e=[e]);const t=new r;return e.forEach((n,r)=>{this._queue.push({start:n.start,end:n.end,stream:t,last:r===e.length-1})}),this._buffer&&this._write(this._buffer,null,this._cb),t}destroy(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e))}}},{"readable-stream":85}],71:[function(e,t){'use strict';function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function r(e,t,r){function o(e,n,r){return"string"==typeof t?t:t(e,n,r)}r||(r=Error);var i=function(e){function t(t,n,r){return e.call(this,o(t,n,r))||this}return n(t,e),t}(r);i.prototype.name=r.name,i.prototype.code=e,s[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return e+""}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}function i(e,t,n){return e.substr(!n||0>n?0:+n,t.length)===t}function a(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}function d(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}var s={};r("ERR_INVALID_OPT_VALUE",function(e,t){return"The value \""+t+"\" is invalid for option \""+e+"\""},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,n){var r;"string"==typeof t&&i(t,"not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be";var s;if(a(e," argument"))s="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var l=d(e,".")?"property":"argument";s="The \"".concat(e,"\" ").concat(l," ").concat(r," ").concat(o(t,"type"))}return s+=". Received type ".concat(typeof n),s},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=s},{}],72:[function(e,t){(function(e){'use strict';var n=new Set;t.exports.emitExperimentalWarning=e.emitWarning?function(t){if(!n.has(t)){n.add(t),e.emitWarning(t+" is an experimental feature. This feature could change at any time","ExperimentalWarning")}}:function(){}}).call(this,e("_process"))},{_process:61}],73:[function(e,t){(function(n){'use strict';function r(e){return this instanceof r?void(d.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",o)))):new r(e)}function o(){this._writableState.ended||n.nextTick(i,this)}function i(e){e.end()}var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var d=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(r,d);for(var l=a(s.prototype),c=0,u;c<l.length;c++)u=l[c],r.prototype[u]||(r.prototype[u]=s.prototype[u]);Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,e("_process"))},{"./_stream_readable":75,"./_stream_writable":77,_process:61,inherits:39}],74:[function(e,t){'use strict';function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform");e("inherits")(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":76,inherits:39}],75:[function(e,t){(function(n,r){'use strict';function o(e){return U.from(e)}function i(e){return U.isBuffer(e)||e instanceof P}function a(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function d(t,n,r){T=T||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof T),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=D(this,t,"readableHighWaterMark",r),this.buffer=new M,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!Y&&(Y=e("string_decoder/").StringDecoder),this.decoder=new Y(t.encoding),this.encoding=t.encoding)}function s(t){if(T=T||e("./_stream_duplex"),!(this instanceof s))return new s(t);var n=this instanceof T;this._readableState=new d(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),A.call(this)}function l(e,t,n,r,i){N("readableAddChunk",t);var a=e._readableState;if(null===t)a.reading=!1,h(e,a);else{var d;if(i||(d=u(a,t)),d)e.emit("error",d);else if(!(a.objectMode||t&&0<t.length))r||(a.reading=!1,_(e,a));else if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===U.prototype||(t=o(t)),r)a.endEmitted?e.emit("error",new V):c(e,a,t,!0);else if(a.ended)e.emit("error",new W);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?c(e,a,t,!1):_(e,a)):c(e,a,t,!1)}}return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function c(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),_(e,t)}function u(e,t){var n;return i(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new F("chunk",["string","Buffer","Uint8Array"],t)),n}function f(e){return 8388608<=e?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=f(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function h(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?m(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,g(e)))}}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(N("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(g,e))}function g(e){var t=e._readableState;N("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,v(e)}function _(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(b,e,t))}function b(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(N("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function y(e){return function(){var t=e._readableState;N("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&R(e,"data")&&(t.flowing=!0,v(e))}}function w(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function k(e){N("readable nexttick read 0"),e.read(0)}function E(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(x,e,t))}function x(e,t){N("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;for(N("flow",t.flowing);t.flowing&&null!==e.read(););}function S(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function C(e){var t=e._readableState;N("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(I,t,e))}function I(e,t){N("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}t.exports=s;var T;s.ReadableState=d;var B=e("events").EventEmitter,R=function(e,t){return e.listeners(t).length},A=e("./internal/streams/stream"),U=e("buffer").Buffer,P=r.Uint8Array||function(){},O=e("util"),N;N=O&&O.debuglog?O.debuglog("stream"):function(){};var M=e("./internal/streams/buffer_list"),H=e("./internal/streams/destroy"),q=e("./internal/streams/state"),D=q.getHighWaterMark,j=e("../errors").codes,F=j.ERR_INVALID_ARG_TYPE,W=j.ERR_STREAM_PUSH_AFTER_EOF,z=j.ERR_METHOD_NOT_IMPLEMENTED,V=j.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,G=e("../experimentalWarning"),K=G.emitExperimentalWarning,Y,X;e("inherits")(s,A);var $=["error","close","destroy","pause","resume"];Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),s.prototype.destroy=H.destroy,s.prototype._undestroy=H.undestroy,s.prototype._destroy=function(e,t){t(e)},s.prototype.push=function(e,t){var n=this._readableState,r;return n.objectMode?r=!0:"string"==typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=U.from(e,t),t=""),r=!0),l(this,e,t,!1,r)},s.prototype.unshift=function(e){return l(this,e,null,!0,!1)},s.prototype.isPaused=function(){return!1===this._readableState.flowing},s.prototype.setEncoding=function(t){return Y||(Y=e("string_decoder/").StringDecoder),this._readableState.decoder=new Y(t),this._readableState.encoding=this._readableState.decoder.encoding,this};s.prototype.read=function(e){N("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return N("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):m(this),null;if(e=p(e,t),0===e&&t.ended)return 0===t.length&&C(this),null;var o=t.needReadable;N("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&(o=!0,N("length less than watermark",o)),t.ended||t.reading?(o=!1,N("reading or ended",o)):o&&(N("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=p(r,t)));var i;return i=0<e?S(e,t):null,null===i?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),r!==e&&t.ended&&C(this)),null!==i&&this.emit("data",i),i},s.prototype._read=function(){this.emit("error",new z("_read()"))},s.prototype.pipe=function(e,t){function r(e,t){N("onunpipe"),e===f&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,i())}function o(){N("onend"),e.end()}function i(){N("cleanup"),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("drain",g),e.removeListener("error",s),e.removeListener("unpipe",r),f.removeListener("end",o),f.removeListener("end",u),f.removeListener("data",d),_=!0,p.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&g()}function d(t){N("ondata");var n=e.write(t);N("dest.write",n),!1===n&&((1===p.pipesCount&&p.pipes===e||1<p.pipesCount&&-1!==L(p.pipes,e))&&!_&&(N("false write response, pause",p.awaitDrain),p.awaitDrain++),f.pause())}function s(t){N("onerror",t),u(),e.removeListener("error",s),0===R(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",c),u()}function c(){N("onfinish"),e.removeListener("close",l),u()}function u(){N("unpipe"),f.unpipe(e)}var f=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e);}p.pipesCount+=1,N("pipe count=%d opts=%j",p.pipesCount,t);var h=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,m=h?o:u;p.endEmitted?n.nextTick(m):f.once("end",m),e.on("unpipe",r);var g=y(f);e.on("drain",g);var _=!1;return f.on("data",d),a(e,"error",s),e.once("close",l),e.once("finish",c),e.emit("pipe",f),p.flowing||(N("pipe resume"),f.resume()),e},s.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<o;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var d=L(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},s.prototype.on=function(e,t){var r=A.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=0<this.listenerCount("readable"),!1!==o.flowing&&this.resume()):"readable"==e&&!o.endEmitted&&!o.readableListening&&(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,N("on readable",o.length,o.reading),o.length?m(this):!o.reading&&n.nextTick(k,this)),r},s.prototype.addListener=s.prototype.on,s.prototype.removeListener=function(e,t){var r=A.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(w,this),r},s.prototype.removeAllListeners=function(e){var t=A.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(w,this),t},s.prototype.resume=function(){var e=this._readableState;return e.flowing||(N("resume"),e.flowing=!e.readableListening,E(this,e)),e.paused=!1,this},s.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},s.prototype.wrap=function(e){var t=this,r=this._readableState,o=!1;for(var a in e.on("end",function(){if(N("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(n){if((N("wrapped data"),r.decoder&&(n=r.decoder.write(n)),!(r.objectMode&&(null===n||void 0===n)))&&(r.objectMode||n&&n.length)){var i=t.push(n);i||(o=!0,e.pause())}}),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<$.length;i++)e.on($[i],this.emit.bind(this,$[i]));return this._read=function(t){N("wrapped _read",t),o&&(o=!1,e.resume())},this},"function"==typeof Symbol&&(s.prototype[Symbol.asyncIterator]=function(){return K("Readable[Symbol.asyncIterator]"),void 0===X&&(X=e("./internal/streams/async_iterator")),X(this)}),Object.defineProperty(s.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(s.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(s.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),s._fromList=S,Object.defineProperty(s.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}})}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":71,"../experimentalWarning":72,"./_stream_duplex":73,"./internal/streams/async_iterator":78,"./internal/streams/buffer_list":79,"./internal/streams/destroy":80,"./internal/streams/state":83,"./internal/streams/stream":84,_process:61,buffer:26,events:33,inherits:39,"string_decoder/":106,util:21}],76:[function(e,t){'use strict';function n(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function r(e){return this instanceof r?void(u.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)):new r(e)}function o(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?i(this,null,null):this._flush(function(t,n){i(e,t,n)})}function i(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new c;if(e._transformState.transforming)throw new l;return e.push(null)}t.exports=r;var a=e("../errors").codes,d=a.ERR_METHOD_NOT_IMPLEMENTED,s=a.ERR_MULTIPLE_CALLBACK,l=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=a.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");e("inherits")(r,u),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){n(new d("_transform()"))},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},r.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":71,"./_stream_duplex":73,inherits:39}],77:[function(e,t){(function(n,r){'use strict';function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){C(t,e)}}function i(e){return B.from(e)}function a(e){return B.isBuffer(e)||e instanceof R}function d(){}function s(t,n,r){I=I||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof I),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=P(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){_(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(t){I=I||e("./_stream_duplex");var n=this instanceof I;return n||z.call(l,this)?void(this._writableState=new s(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),T.call(this)):new l(t)}function c(e,t){var r=new F;e.emit("error",r),n.nextTick(t,r)}function u(e,t,r,o){var i;return null===r?i=new j:"string"!=typeof r&&!t.objectMode&&(i=new N("chunk",["string","Buffer"],r)),!i||(e.emit("error",i),n.nextTick(o,i),!1)}function f(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=B.from(t,n)),t}function p(e,t,n,r,o,i){if(!n){var a=f(t,r,o);r!==a&&(n=!0,o="buffer",r=a)}var d=t.objectMode?1:r.length;t.length+=d;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,d,r,o,i);return s}function h(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new D("write")):n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function m(e,t,r,o,i){--t.pendingcb,r?(n.nextTick(i,o),n.nextTick(v,e,t),e._writableState.errorEmitted=!0,e.emit("error",o)):(i(o),e._writableState.errorEmitted=!0,e.emit("error",o),v(e,t))}function g(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function _(e,t){var r=e._writableState,o=r.sync,i=r.writecb;if("function"!=typeof i)throw new H;if(g(r),t)m(e,r,o,t,i);else{var a=k(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),o?n.nextTick(b,e,r,a,i):b(e,r,a,i)}}function b(e,t,n,r){n||y(e,t),t.pendingcb--,r(),v(e,t)}function y(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=Array(r),a=t.corkedRequestsFree;a.entry=n;for(var d=0,s=!0;n;)i[d]=n,n.isBuf||(s=!1),n=n.next,d+=1;i.allBuffers=s,h(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback,f=t.objectMode?1:l.length;if(h(e,t,!1,f,l,c,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),v(e,t)})}function x(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(E,e,t)))}function v(e,t){var n=k(t);return n&&(x(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function S(e,t,r){t.ending=!0,v(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function C(e,t,n){var r=e.entry;for(e.entry=null;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree.next=e}t.exports=l;var I;l.WritableState=s;var L={deprecate:e("util-deprecate")},T=e("./internal/streams/stream"),B=e("buffer").Buffer,R=r.Uint8Array||function(){},A=e("./internal/streams/destroy"),U=e("./internal/streams/state"),P=U.getHighWaterMark,O=e("../errors").codes,N=O.ERR_INVALID_ARG_TYPE,M=O.ERR_METHOD_NOT_IMPLEMENTED,H=O.ERR_MULTIPLE_CALLBACK,q=O.ERR_STREAM_CANNOT_PIPE,D=O.ERR_STREAM_DESTROYED,j=O.ERR_STREAM_NULL_VALUES,F=O.ERR_STREAM_WRITE_AFTER_END,W=O.ERR_UNKNOWN_ENCODING;e("inherits")(l,T),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:L.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var z;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!z.call(this,e)||!(this!==l)&&e&&e._writableState instanceof s}})):z=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new q)},l.prototype.write=function(e,t,n){var r=this._writableState,o=!1,s=!r.objectMode&&a(e);return s&&!B.isBuffer(e)&&(e=i(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":!t&&(t=r.defaultEncoding),"function"!=typeof n&&(n=d),r.ending?c(this,n):(s||u(this,r,e,n))&&(r.pendingcb++,o=p(this,r,s,e,t,n)),o},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&w(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new W(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(e,t,n){n(new M("_write()"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||S(this,r,n),this},Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=A.destroy,l.prototype._undestroy=A.undestroy,l.prototype._destroy=function(e,t){t(e)}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":71,"./_stream_duplex":73,"./internal/streams/destroy":80,"./internal/streams/state":83,"./internal/streams/stream":84,_process:61,buffer:26,inherits:39,"util-deprecate":119}],78:[function(e,t){(function(n){'use strict';function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return{value:e,done:t}}function i(e){var t=e[l];if(null!==t){var n=e[m].read();null!==n&&(e[p]=null,e[l]=null,e[c]=null,t(o(n,!1)))}}function a(e){n.nextTick(i,e)}function d(e,t){return function(n,r){e.then(function(){return t[f]?void n(o(void 0,!0)):void t[h](n,r)},r)}}var s=e("./end-of-stream"),l=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),f=Symbol("ended"),p=Symbol("lastPromise"),h=Symbol("handlePromise"),m=Symbol("stream"),g=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((b={get stream(){return this[m]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[f])return Promise.resolve(o(void 0,!0));if(this[m].destroyed)return new Promise(function(t,r){n.nextTick(function(){e[u]?r(e[u]):t(o(void 0,!0))})});var r=this[p],i;if(r)i=new Promise(d(r,this));else{var a=this[m].read();if(null!==a)return Promise.resolve(o(a,!1));i=new Promise(this[h])}return this[p]=i,i}},r(b,Symbol.asyncIterator,function(){return this}),r(b,"return",function(){var e=this;return new Promise(function(t,n){e[m].destroy(null,function(e){return e?void n(e):void t(o(void 0,!0))})})}),b),g),b;t.exports=function(e){var t=Object.create(_,(n={},r(n,m,{value:e,writable:!0}),r(n,l,{value:null,writable:!0}),r(n,c,{value:null,writable:!0}),r(n,u,{value:null,writable:!0}),r(n,f,{value:e._readableState.endEmitted,writable:!0}),r(n,h,{value:function(e,n){var r=t[m].read();r?(t[p]=null,t[l]=null,t[c]=null,e(o(r,!1))):(t[l]=e,t[c]=n)},writable:!0}),n)),n;return t[p]=null,s(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var n=t[c];return null!==n&&(t[p]=null,t[l]=null,t[c]=null,n(e)),void(t[u]=e)}var r=t[l];null!==r&&(t[p]=null,t[l]=null,t[c]=null,r(o(void 0,!0))),t[f]=!0}),e.on("readable",a.bind(null,t)),t}}).call(this,e("_process"))},{"./end-of-stream":81,_process:61}],79:[function(e,t){'use strict';function n(e){for(var t=1;t<arguments.length;t++){var n=null==arguments[t]?{}:arguments[t],o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){a.prototype.copy.call(e,t,n)}var i=e("buffer"),a=i.Buffer,d=e("util"),s=d.inspect,l=s&&s.custom||"inspect";t.exports=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},t.concat=function(e){if(0===this.length)return a.alloc(0);for(var t=a.allocUnsafe(e>>>0),n=this.head,r=0;n;)o(n.data,t,r),r+=n.data.length,n=n.next;return t},t.consume=function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):e===this.head.data.length?n=this.shift():n=t?this._getString(e):this._getBuffer(e),n},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,r=1,o=t.data;for(e-=o.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(o+=a===i.length?i:i.slice(0,e),e-=a,0===e){a===i.length?(++r,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=i.slice(a));break}++r}return this.length-=r,o},t._getBuffer=function(e){var t=a.allocUnsafe(e),r=this.head,o=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,d=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,d),e-=d,0===e){d===i.length?(++o,this.head=r.next?r.next:this.tail=null):(this.head=r,r.data=i.slice(d));break}++o}return this.length-=o,t},t[l]=function(e,t){return s(this,n({},t,{depth:0,customInspect:!1}))},e}()},{buffer:26,util:21}],80:[function(e,t){(function(e){'use strict';function n(e,t){o(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}t.exports={destroy:function(t,i){var a=this,d=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return d||s?(i?i(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&e.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!i&&t?(e.nextTick(n,a,t),a._writableState&&(a._writableState.errorEmitted=!0)):i?(e.nextTick(r,a),i(t)):e.nextTick(r,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}).call(this,e("_process"))},{_process:61}],81:[function(e,t){'use strict';function n(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];e.apply(this,r)}}}function r(){}function o(e){return e.setHeader&&"function"==typeof e.abort}function i(e,t,d){if("function"==typeof t)return i(e,null,t);t||(t={}),d=n(d||r);var s=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,c=function(){e.writable||f()},u=e._writableState&&e._writableState.finished,f=function(){l=!1,u=!0,s||d.call(e)},p=e._readableState&&e._readableState.endEmitted,h=function(){s=!1,p=!0,l||d.call(e)},m=function(t){d.call(e,t)},g=function(){var t;return s&&!p?(e._readableState&&e._readableState.ended||(t=new a),d.call(e,t)):l&&!u?(e._writableState&&e._writableState.ended||(t=new a),d.call(e,t)):void 0},_=function(){e.req.on("finish",f)};return o(e)?(e.on("complete",f),e.on("abort",g),e.req?_():e.on("request",_)):l&&!e._writableState&&(e.on("end",c),e.on("close",c)),e.on("end",h),e.on("finish",f),!1!==t.error&&e.on("error",m),e.on("close",g),function(){e.removeListener("complete",f),e.removeListener("abort",g),e.removeListener("request",_),e.req&&e.req.removeListener("finish",f),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",f),e.removeListener("end",h),e.removeListener("error",m),e.removeListener("close",g)}}var a=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=i},{"../../../errors":71}],82:[function(e,t){'use strict';function n(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}function r(e){if(e)throw e}function o(e){return e.setHeader&&"function"==typeof e.abort}function a(t,r,i,a){a=n(a);var d=!1;t.on("close",function(){d=!0}),p===void 0&&(p=e("./end-of-stream")),p(t,{readable:r,writable:i},function(e){return e?a(e):void(d=!0,a())});var s=!1;return function(e){if(!d)return s?void 0:(s=!0,o(t)?t.abort():"function"==typeof t.destroy?t.destroy():void a(e||new f("pipe")))}}function d(e){e()}function s(e,t){return e.pipe(t)}function l(e){return e.length?"function"==typeof e[e.length-1]?e.pop():r:r}var c=e("../../../errors").codes,u=c.ERR_MISSING_ARGS,f=c.ERR_STREAM_DESTROYED,p;t.exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new u("streams");var o=t.map(function(e,n){var s=n<t.length-1;return a(e,s,0<n,function(e){i||(i=e),e&&o.forEach(d),s||(o.forEach(d),r(i))})}),i;return t.reduce(s)}},{"../../../errors":71,"./end-of-stream":81}],83:[function(e,t){'use strict';function n(e,t,n){return null==e.highWaterMark?t?e[n]:null:e.highWaterMark}var o=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,i,a){var d=n(t,a,i);if(null!=d){if(!(isFinite(d)&&r(d)===d)||0>d){var s=a?i:"highWaterMark";throw new o(s,d)}return r(d)}return e.objectMode?16:16384}}},{"../../../errors":71}],84:[function(e,t){t.exports=e("events").EventEmitter},{events:33}],85:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":73,"./lib/_stream_passthrough.js":74,"./lib/_stream_readable.js":75,"./lib/_stream_transform.js":76,"./lib/_stream_writable.js":77,"./lib/internal/streams/end-of-stream.js":81,"./lib/internal/streams/pipeline.js":82}],86:[function(e,t,n){function r(e,t,n,r){function i(){return!("number"==typeof e.length&&e.length>n.maxBlobLength)||(l("File length too large for Blob URL approach: %d (max: %d)",e.length,n.maxBlobLength),v(new Error("File length too large for Blob URL approach: "+e.length+" (max: "+n.maxBlobLength+")")),!1)}function d(n){i()&&(I=t(n),o(e,function(e,t){return e?v(e):void(I.addEventListener("error",v),I.addEventListener("loadstart",s),I.addEventListener("canplay",p),I.src=t)}))}function s(){I.removeEventListener("loadstart",s),n.autoplay&&I.play()}function p(){I.removeEventListener("canplay",p),r(null,I)}function x(){o(e,function(e,n){return e?v(e):void(".pdf"===S?(I=t("object"),I.setAttribute("typemustmatch",!0),I.setAttribute("type","application/pdf"),I.setAttribute("data",n)):(I=t("iframe"),I.sandbox="allow-forms allow-scripts",I.src=n),r(null,I))})}function v(t){t.message="Error rendering file \""+e.name+"\": "+t.message,l(t.message),r(t)}var S=f.extname(e.name).toLowerCase(),C=0,I;0<=_.indexOf(S)?function(){function n(){l("Use `videostream` package for "+e.name),_(),I.addEventListener("error",c),I.addEventListener("loadstart",s),I.addEventListener("canplay",p),h(e,I)}function r(){l("Use MediaSource API for "+e.name),_(),I.addEventListener("error",f),I.addEventListener("loadstart",s),I.addEventListener("canplay",p);var t=new u(I),n=t.createWriteStream(a(e.name));e.createReadStream().pipe(n),C&&(I.currentTime=C)}function d(){l("Use Blob URL for "+e.name),_(),I.addEventListener("error",v),I.addEventListener("loadstart",s),I.addEventListener("canplay",p),o(e,function(e,t){return e?v(e):void(I.src=t,C&&(I.currentTime=C))})}function c(e){l("videostream error: fallback to MediaSource API: %o",e.message||e),I.removeEventListener("error",c),I.removeEventListener("canplay",p),r()}function f(e){l("MediaSource API error: fallback to Blob URL: %o",e.message||e);i()&&(I.removeEventListener("error",f),I.removeEventListener("canplay",p),d())}function _(){I||(I=t(b),I.addEventListener("progress",function(){C=I.currentTime}))}var b=0<=g.indexOf(S)?"video":"audio";E?0<=m.indexOf(S)?n():r():d()}():0<=b.indexOf(S)?d("video"):0<=y.indexOf(S)?d("audio"):0<=w.indexOf(S)?function(){I=t("img"),o(e,function(t,n){return t?v(t):void(I.src=n,I.alt=e.name,r(null,I))})}():0<=k.indexOf(S)?x():function(){function t(){c(n)?(l("File extension \"%s\" appears ascii, so will render.",S),x()):(l("File extension \"%s\" appears non-ascii, will not render.",S),r(new Error("Unsupported file type \""+S+"\": Cannot append to DOM")))}l("Unknown file extension \"%s\" - will attempt to render into iframe",S);var n="";e.createReadStream({start:0,end:1e3}).setEncoding("utf8").on("data",function(e){n+=e}).on("end",t).on("error",r)}()}function o(e,t){var r=f.extname(e.name).toLowerCase();p(e.createReadStream(),n.mime[r]).then(e=>t(null,e),e=>t(e))}function i(e){if(null==e)throw new Error("file cannot be null or undefined");if("string"!=typeof e.name)throw new Error("missing or invalid file.name property");if("function"!=typeof e.createReadStream)throw new Error("missing or invalid file.createReadStream property")}function a(e){var t=f.extname(e).toLowerCase();return{".m4a":"audio/mp4; codecs=\"mp4a.40.5\"",".m4b":"audio/mp4; codecs=\"mp4a.40.5\"",".m4p":"audio/mp4; codecs=\"mp4a.40.5\"",".m4v":"video/mp4; codecs=\"avc1.640029, mp4a.40.5\"",".mkv":"video/webm; codecs=\"avc1.640029, mp4a.40.5\"",".mp3":"audio/mpeg",".mp4":"video/mp4; codecs=\"avc1.640029, mp4a.40.5\"",".webm":"video/webm; codecs=\"vorbis, vp8\""}[t]}function d(e){null==e.autoplay&&(e.autoplay=!1),null==e.muted&&(e.muted=!1),null==e.controls&&(e.controls=!0),null==e.maxBlobLength&&(e.maxBlobLength=200000000)}function s(e,t){e.autoplay=!!t.autoplay,e.muted=!!t.muted,e.controls=!!t.controls}n.render=function(e,t,n,o){"function"==typeof n&&(o=n,n={}),n||(n={}),o||(o=function(){}),i(e),d(n),"string"==typeof t&&(t=document.querySelector(t)),r(e,function(r){if(t.nodeName!==r.toUpperCase()){var o=f.extname(e.name).toLowerCase();throw new Error("Cannot render \""+o+"\" inside a \""+t.nodeName.toLowerCase()+"\" element, expected \""+r+"\"")}return("video"===r||"audio"===r)&&s(t,n),t},n,o)},n.append=function(e,t,n,o){function a(e){var r=l(e);return s(r,n),t.appendChild(r),r}function l(e){var n=document.createElement(e);return t.appendChild(n),n}function c(e,t){e&&t&&t.remove(),o(e,t)}if("function"==typeof n&&(o=n,n={}),n||(n={}),o||(o=function(){}),i(e),d(n),"string"==typeof t&&(t=document.querySelector(t)),t&&("VIDEO"===t.nodeName||"AUDIO"===t.nodeName))throw new Error("Invalid video/audio node argument. Argument must be root element that video/audio tag will be appended to.");r(e,function(e){return"video"===e||"audio"===e?a(e):l(e)},n,c)},n.mime=e("./lib/mime.json");var l=e("debug")("render-media"),c=e("is-ascii"),u=e("mediasource"),f=e("path"),p=e("stream-to-blob-url"),h=e("videostream"),m=[".m4a",".m4b",".m4p",".m4v",".mp4"],g=[".m4v",".mkv",".mp4",".webm"],_=[].concat(g,[".m4a",".m4b",".m4p",".mp3"]),b=[".mov",".ogv"],y=[".aac",".oga",".ogg",".wav",".flac"],w=[".bmp",".gif",".jpeg",".jpg",".png",".svg"],k=[".css",".html",".js",".md",".pdf",".txt"],E="undefined"!=typeof window&&window.MediaSource},{"./lib/mime.json":87,debug:30,"is-ascii":40,mediasource:45,path:59,"stream-to-blob-url":103,videostream:121}],87:[function(e,t){t.exports={".3gp":"video/3gpp",".aac":"audio/aac",".aif":"audio/x-aiff",".aiff":"audio/x-aiff",".atom":"application/atom+xml",".avi":"video/x-msvideo",".bmp":"image/bmp",".bz2":"application/x-bzip2",".conf":"text/plain",".css":"text/css",".csv":"text/plain",".diff":"text/x-diff",".doc":"application/msword",".flv":"video/x-flv",".gif":"image/gif",".gz":"application/x-gzip",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".iso":"application/octet-stream",".jar":"application/java-archive",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/javascript",".json":"application/json",".less":"text/css",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/x-m4a",".m4b":"audio/mp4",".m4p":"audio/mp4",".m4v":"video/x-m4v",".manifest":"text/cache-manifest",".markdown":"text/x-markdown",".mathml":"application/mathml+xml",".md":"text/x-markdown",".mid":"audio/midi",".midi":"audio/midi",".mov":"video/quicktime",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4v":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"application/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".ps":"application/postscript",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".rdf":"application/rdf+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tbz":"application/x-bzip-compressed-tar",".text":"text/plain",".tif":"image/tiff",".tiff":"image/tiff",".torrent":"application/x-bittorrent",".ttf":"application/x-font-ttf",".txt":"text/plain",".wav":"audio/wav",".webm":"video/webm",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".xls":"application/vnd.ms-excel",".xml":"application/xml",".yaml":"text/yaml",".yml":"text/yaml",".zip":"application/zip"}},{}],88:[function(e,t){(function(e){t.exports=function(t,n,r){function o(t){function n(){r&&r(t,s),r=null}d?e.nextTick(n):n()}function a(e,n,r){if(s[e]=r,n&&(f=!0),0==--c||n)o(n);else if(!f&&p<l){var i;u?(i=u[p],p+=1,t[i](function(e,t){a(i,e,t)})):(i=p,p+=1,t[i](function(e,t){a(i,e,t)}))}}if("number"!=typeof n)throw new Error("second argument must be a Number");var d=!0,s,l,c,u,f;Array.isArray(t)?(s=[],c=l=t.length):(u=Object.keys(t),s={},c=l=u.length);var p=n;c?u?u.some(function(e,r){if(t[e](function(t,n){a(e,t,n)}),r===n-1)return!0}):t.some(function(e,t){if(e(function(e,n){a(t,e,n)}),t===n-1)return!0}):o(null),d=!1}}).call(this,e("_process"))},{_process:61}],89:[function(e,t){(function(e){t.exports=function(t,n){function r(t){function r(){n&&n(t,a),n=null}i?e.nextTick(r):r()}function o(e,t,n){a[e]=n,(0==--d||t)&&r(t)}var i=!0,a,d,s;Array.isArray(t)?(a=[],d=t.length):(s=Object.keys(t),a={},d=s.length),d?s?s.forEach(function(e){t[e](function(t,n){o(e,t,n)})}):t.forEach(function(e,t){e(function(e,n){o(t,e,n)})}):r(null),i=!1}}).call(this,e("_process"))},{_process:61}],90:[function(e,t,n){(function(e,r){"object"==typeof n&&"object"==typeof t?t.exports=r():"function"==typeof l&&l.amd?l([],r):"object"==typeof n?n.Rusha=r():e.Rusha=r()})("undefined"==typeof self?this:self,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(5),i=n(1),a=i.toHex,d=i.ceilHeapSize,l=n(6),c=function(e){for(e+=9;0<e%64;e+=1);return e},u=function(e,t){var n=new Uint8Array(e.buffer),r=t%4,o=t-r;switch(r){case 0:n[o+3]=0;case 1:n[o+2]=0;case 2:n[o+1]=0;case 3:n[o+0]=0;}for(var a=(t>>2)+1;a<e.length;a++)e[a]=0},f=function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[(-16&(t>>2)+2)+14]=0|n/536870912,e[(-16&(t>>2)+2)+15]=n<<3},p=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),o=new DataView(r.buffer);return o.setInt32(0,n[0],!1),o.setInt32(4,n[1],!1),o.setInt32(8,n[2],!1),o.setInt32(12,n[3],!1),o.setInt32(16,n[4],!1),r},h=function(){function e(t){if(r(this,e),t=t||65536,0<t%64)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=t,this._padMaxChunkLen=c(t),this._heap=new ArrayBuffer(d(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new o({Int32Array:Int32Array},{},this._heap)}return e.prototype._initState=function(e,t){this._offset=0;var n=new Int32Array(e,t+320,5);n[0]=1732584193,n[1]=-271733879,n[2]=-1732584194,n[3]=271733878,n[4]=-1009589776},e.prototype._padChunk=function(e,t){var n=c(e),r=new Int32Array(this._heap,0,n>>2);return u(r,e),f(r,e,t),n},e.prototype._write=function(e,t,n,r){l(e,this._h8,this._h32,t,n,r||0)},e.prototype._coreCall=function(e,t,n,r,o){var i=n;this._write(e,t,n),o&&(i=this._padChunk(n,r)),this._core.hash(i,this._padMaxChunkLen)},e.prototype.rawDigest=function(e){var t=e.byteLength||e.length||e.size||0;this._initState(this._heap,this._padMaxChunkLen);var n=0,r=this._maxChunkLen;for(n=0;t>n+r;n+=r)this._coreCall(e,n,r,t,!1);return this._coreCall(e,n,t-n,t,!0),p(this._heap,this._padMaxChunkLen)},e.prototype.digest=function(e){return a(this.rawDigest(e).buffer)},e.prototype.digestFromString=function(e){return this.digest(e)},e.prototype.digestFromBuffer=function(e){return this.digest(e)},e.prototype.digestFromArrayBuffer=function(e){return this.digest(e)},e.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},e.prototype.append=function(e){var t=0,n=e.byteLength||e.length||e.size||0,r=this._offset%this._maxChunkLen,o=void 0;for(this._offset+=n;t<n;)o=s(n-t,this._maxChunkLen-r),this._write(e,t,o,r),r+=o,t+=o,r===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),r=0);return this},e.prototype.getState=function(){var e=this._offset%this._maxChunkLen,t=void 0;if(!e){var n=new Int32Array(this._heap,this._padMaxChunkLen+320,5);t=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}else t=this._heap.slice(0);return{offset:this._offset,heap:t}},e.prototype.setState=function(e){if(this._offset=e.offset,20===e.heap.byteLength){var t=new Int32Array(this._heap,this._padMaxChunkLen+320,5);t.set(new Int32Array(e.heap))}else this._h32.set(new Int32Array(e.heap));return this},e.prototype.rawEnd=function(){var e=this._offset,t=e%this._maxChunkLen,n=this._padChunk(t,e);this._core.hash(n,this._padMaxChunkLen);var r=p(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),r},e.prototype.end=function(){return a(this.rawEnd().buffer)},e}();e.exports=h,e.exports._core=o},function(e){for(var t=Array(256),n=0;256>n;n++)t[n]=(16>n?"0":"")+n.toString(16);e.exports.toHex=function(e){for(var n=new Uint8Array(e),r=Array(e.byteLength),o=0;o<r.length;o++)r[o]=t[n[o]];return r.join("")},e.exports.ceilHeapSize=function(e){var t=0;if(65536>=e)return 65536;if(16777216>e)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t},e.exports.isDedicatedWorkerScope=function(e){var t="WorkerGlobalScope"in e&&e instanceof e.WorkerGlobalScope,n="SharedWorkerGlobalScope"in e&&e instanceof e.SharedWorkerGlobalScope,r="ServiceWorkerGlobalScope"in e&&e instanceof e.ServiceWorkerGlobalScope;return t&&!n&&!r}},function(e,t,n){e.exports=function(){var e=n(0),t=function(e,t,n){try{return n(null,e.digest(t))}catch(t){return n(t)}},r=function(e,t,n,o,i){var a=new self.FileReader;a.onloadend=function(){if(a.error)return i(a.error);var d=a.result;t+=a.result.byteLength;try{e.append(d)}catch(t){return void i(t)}t<o.size?r(e,t,n,o,i):i(null,e.end())},a.readAsArrayBuffer(o.slice(t,t+n))},o=!0;return self.onmessage=function(n){if(o){var i=n.data.data,a=n.data.file,d=n.data.id;if("undefined"!=typeof d&&(a||i)){var s=n.data.blockSize||4194304,l=new e(s);l.resetState();var c=function(e,t){e?self.postMessage({id:d,error:e.name}):self.postMessage({id:d,hash:t})};i&&t(l,i,c),a&&r(l,0,s,a,c)}}},function(){o=!1}}},function(e,t,n){var r=n(4),o=n(0),i=n(7),a=n(2),d=n(1),s=d.isDedicatedWorkerScope,l="undefined"!=typeof self&&s(self);o.disableWorkerBehaviour=l?a():function(){},o.createWorker=function(){var e=r(2),t=e.terminate;return e.terminate=function(){URL.revokeObjectURL(e.objectURL),t.call(e)},e},o.createHash=i,e.exports=o},function(e,t,n){function r(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw console.error(e),e};var r=t(t.s=ENTRY_MODULE);return r.default||r}function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function i(e,t,r){var i={};i[r]=[];var a=t.toString(),d=a.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!d)return i;for(var s=d[1],l=new RegExp("(\\\\n|\\W)"+o(s)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g"),c;c=l.exec(a);)"dll-reference"!==c[3]&&i[r].push(c[3]);for(l=new RegExp("\\("+o(s)+"\\(\"(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))\"\\)\\)\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");c=l.exec(a);)e[c[2]]||(i[r].push(c[1]),e[c[2]]=n(c[1]).m),i[c[2]]=i[c[2]]||[],i[c[2]].push(c[4]);return i}function a(e){var t=Object.keys(e);return t.reduce(function(t,n){return t||0<e[n].length},!1)}function d(e,t){for(var n={main:[t]},r={main:[]},o={main:{}};a(n);)for(var d=Object.keys(n),s=0;s<d.length;s++){var l=d[s],c=n[l],u=c.pop();if(o[l]=o[l]||{},!o[l][u]&&e[l][u]){o[l][u]=!0,r[l]=r[l]||[],r[l].push(u);for(var f=i(e,e[l][u],l),p=Object.keys(f),h=0;h<p.length;h++)n[p[h]]=n[p[h]]||[],n[p[h]]=n[p[h]].concat(f[p[h]])}}return r}e.exports=function(e,t){t=t||{};var o={main:n.m},i=t.all?{main:Object.keys(o)}:d(o,e),a="";Object.keys(i).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;i[e][t];)t++;i[e].push(t),o[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map(function(t){return""+JSON.stringify(t)+": "+o[e][t].toString()}).join(",")+"});\n"}),a=a+"("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map(function(e){return""+JSON.stringify(e)+": "+o.main[e].toString()}).join(",")+"})(self);";var s=new window.Blob([a],{type:"text/javascript"});if(t.bare)return s;var l=window.URL||window.webkitURL||window.mozURL||window.msURL,c=l.createObjectURL(s),u=new window.Worker(c);return u.objectURL=c,u}},function(e){e.exports=function(e,t,n){'use asm';var r=new e.Int32Array(n);return{hash:function(e,t){e|=0,t|=0;var n=0,o=0,i=0,a=0,d=0,s=0,l=0,c=0,u=0,f=0,p=0,h=0,m=0,g=0;for(i=0|r[t+320>>2],d=0|r[t+324>>2],l=0|r[t+328>>2],u=0|r[t+332>>2],p=0|r[t+336>>2],n=0;(0|n)<(0|e);n=0|n+64){for(a=i,s=d,c=l,f=u,h=p,o=0;64>(0|o);o=0|o+4)g=0|r[n+o>>2],m=0|(0|(i<<5|i>>>27)+(d&l|~d&u))+(0|(0|g+p)+1518500249),p=u,u=l,l=d<<30|d>>>2,d=i,i=m,r[e+o>>2]=g;for(o=0|e+64;(0|o)<(0|e+80);o=0|o+4)g=(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])<<1|(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])>>>31,m=0|(0|(i<<5|i>>>27)+(d&l|~d&u))+(0|(0|g+p)+1518500249),p=u,u=l,l=d<<30|d>>>2,d=i,i=m,r[o>>2]=g;for(o=0|e+80;(0|o)<(0|e+160);o=0|o+4)g=(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])<<1|(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])>>>31,m=0|(0|(i<<5|i>>>27)+(d^l^u))+(0|(0|g+p)+1859775393),p=u,u=l,l=d<<30|d>>>2,d=i,i=m,r[o>>2]=g;for(o=0|e+160;(0|o)<(0|e+240);o=0|o+4)g=(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])<<1|(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])>>>31,m=0|(0|(i<<5|i>>>27)+(d&l|d&u|l&u))+(0|(0|g+p)-1894007588),p=u,u=l,l=d<<30|d>>>2,d=i,i=m,r[o>>2]=g;for(o=0|e+240;(0|o)<(0|e+320);o=0|o+4)g=(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])<<1|(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])>>>31,m=0|(0|(i<<5|i>>>27)+(d^l^u))+(0|(0|g+p)-899497514),p=u,u=l,l=d<<30|d>>>2,d=i,i=m,r[o>>2]=g;i=0|i+a,d=0|d+s,l=0|l+c,u=0|u+f,p=0|p+h}r[t+320>>2]=i,r[t+324>>2]=d,r[t+328>>2]=l,r[t+332>>2]=u,r[t+336>>2]=p}}}},function(e){var t=this,n=void 0;"undefined"!=typeof self&&"undefined"!=typeof self.FileReaderSync&&(n=new self.FileReaderSync);var r=function(e,t,n,r,o,a){var d=a%4,s=(o+d)%4,l=o-s,c;switch(d){case 0:t[a]=e.charCodeAt(r+3);case 1:t[0|a+1-(d<<1)]=e.charCodeAt(r+2);case 2:t[0|a+2-(d<<1)]=e.charCodeAt(r+1);case 3:t[0|a+3-(d<<1)]=e.charCodeAt(r);}if(!(o<s+(4-d))){for(c=4-d;c<l;c=0|c+4)n[a+c>>2]=e.charCodeAt(r+c)<<24|e.charCodeAt(r+c+1)<<16|e.charCodeAt(r+c+2)<<8|e.charCodeAt(r+c+3);switch(s){case 3:t[0|a+l+1]=e.charCodeAt(r+l+2);case 2:t[0|a+l+2]=e.charCodeAt(r+l+1);case 1:t[0|a+l+3]=e.charCodeAt(r+l);}}},o=function(e,t,n,r,o,a){var d=a%4,s=(o+d)%4,l=o-s,c;switch(d){case 0:t[a]=e[r+3];case 1:t[0|a+1-(d<<1)]=e[r+2];case 2:t[0|a+2-(d<<1)]=e[r+1];case 3:t[0|a+3-(d<<1)]=e[r];}if(!(o<s+(4-d))){for(c=4-d;c<l;c=0|c+4)n[0|a+c>>2]=e[r+c]<<24|e[r+c+1]<<16|e[r+c+2]<<8|e[r+c+3];switch(s){case 3:t[0|a+l+1]=e[r+l+2];case 2:t[0|a+l+2]=e[r+l+1];case 1:t[0|a+l+3]=e[r+l];}}},i=function(e,t,r,o,a,d){var s=void 0,l=d%4,c=(a+l)%4,u=a-c,f=new Uint8Array(n.readAsArrayBuffer(e.slice(o,o+a)));switch(l){case 0:t[d]=f[3];case 1:t[0|d+1-(l<<1)]=f[2];case 2:t[0|d+2-(l<<1)]=f[1];case 3:t[0|d+3-(l<<1)]=f[0];}if(!(a<c+(4-l))){for(s=4-l;s<u;s=0|s+4)r[0|d+s>>2]=f[s]<<24|f[s+1]<<16|f[s+2]<<8|f[s+3];switch(c){case 3:t[0|d+u+1]=f[u+2];case 2:t[0|d+u+2]=f[u+1];case 1:t[0|d+u+3]=f[u];}}};e.exports=function(e,n,a,d,s,l){if("string"==typeof e)return r(e,n,a,d,s,l);if(e instanceof Array)return o(e,n,a,d,s,l);if(t&&t.Buffer&&t.Buffer.isBuffer(e))return o(e,n,a,d,s,l);if(e instanceof ArrayBuffer)return o(new Uint8Array(e),n,a,d,s,l);if(e.buffer instanceof ArrayBuffer)return o(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n,a,d,s,l);if(e instanceof Blob)return i(e,n,a,d,s,l);throw new Error("Unsupported data type.")}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=n(1),a=i.toHex,d=function(){function e(){r(this,e),this._rusha=new o,this._rusha.resetState()}return e.prototype.update=function(e){return this._rusha.append(e),this},e.prototype.digest=function e(t){var e=this._rusha.rawEnd().buffer;if(!t)return e;if("hex"===t)return a(e);throw new Error("unsupported digest encoding")},e}();e.exports=function(){return new d}}])})},{}],91:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return a(e,t,n)}var i=e("buffer"),a=i.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=i:(r(i,n),n.Buffer=o),o.prototype=Object.create(a.prototype),r(a,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0===t?r.fill(0):"string"==typeof n?r.fill(t,n):r.fill(t),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},{buffer:26}],92:[function(e,t){(function(e){t.exports=function(t,n){var r=[];t.on("data",function(e){r.push(e)}),t.once("end",function(){n&&n(null,e.concat(r)),n=null}),t.once("error",function(e){n&&n(e),n=null})}}).call(this,e("buffer").Buffer)},{buffer:26}],93:[function(e,t){(function(n){function r(e,t){if(e=Object.assign({maxRedirects:10},"string"==typeof e?{url:e}:e),t=s(t),e.url){const{hostname:t,port:n,protocol:r,auth:o,path:i}=c.parse(e.url);delete e.url,t||n||r||o?Object.assign(e,{hostname:t,port:n,protocol:r,auth:o,path:i}):e.path=i}const o={"accept-encoding":"gzip, deflate"};e.headers&&Object.keys(e.headers).forEach(t=>o[t.toLowerCase()]=e.headers[t]),e.headers=o;let f;e.body?f=e.json&&!u(e.body)?JSON.stringify(e.body):e.body:e.form&&(f="string"==typeof e.form?e.form:l.stringify(e.form),e.headers["content-type"]="application/x-www-form-urlencoded"),f&&(!e.method&&(e.method="POST"),!u(f)&&(e.headers["content-length"]=n.byteLength(f)),e.json&&!e.form&&(e.headers["content-type"]="application/json")),delete e.body,delete e.form,e.json&&(e.headers.accept="application/json"),e.method&&(e.method=e.method.toUpperCase());const p="https:"===e.protocol?d:a,h=p.request(e,n=>{if(!1!==e.followRedirects&&300<=n.statusCode&&400>n.statusCode&&n.headers.location)return e.url=n.headers.location,delete e.headers.host,n.resume(),"POST"===e.method&&[301,302].includes(n.statusCode)&&(e.method="GET",delete e.headers["content-length"],delete e.headers["content-type"]),0==e.maxRedirects--?t(new Error("too many redirects")):r(e,t);const o="function"==typeof i&&"HEAD"!==e.method;t(null,o?i(n):n)});return h.on("timeout",()=>{h.abort(),t(new Error("Request timed out"))}),h.on("error",t),u(f)?f.on("error",t).pipe(h):h.end(f),h}t.exports=r;const o=e("simple-concat"),i=e("decompress-response"),a=e("http"),d=e("https"),s=e("once"),l=e("querystring"),c=e("url"),u=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;r.concat=(e,t)=>r(e,(n,r)=>n?t(n):void o(r,(n,o)=>{if(n)return t(n);if(e.json)try{o=JSON.parse(o.toString())}catch(e){return t(e,r,o)}t(null,r,o)})),["get","post","put","patch","head","delete"].forEach(e=>{r[e]=(t,n)=>("string"==typeof t&&(t={url:t}),r(Object.assign({method:e.toUpperCase()},t),n))})}).call(this,e("buffer").Buffer)},{buffer:26,"decompress-response":21,http:99,https:36,once:56,querystring:66,"simple-concat":92,url:116}],94:[function(e,t){(function(n){function r(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function o(e,t){var n=new Error(e);return n.code=t,n}function i(e){console.warn(e)}var a=e("debug")("simple-peer"),d=e("get-browser-rtc"),s=e("randombytes"),l=e("readable-stream"),c=e("queue-microtask"),u=65536;class f extends l.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||f.channelConfig,this.config=Object.assign({},f.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5000,this.destroyed=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:d(),!this._wrtc)if("undefined"==typeof window)throw o("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT");else throw o("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void c(()=>this.destroy(o(e,"ERR_PC_CONSTRUCTOR")))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},this.initiator?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this.initiator&&this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw o("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(o(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(o("signal() called with invalid signal data","ERR_SIGNALING"))}_addIceCandidate(e){var t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?i("Ignoring unsupported ICE candidate."):this.destroy(o(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(o(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:t}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}addTrack(e,t){this._debug("addTrack()");var n=this._senderMap.get(e)||new Map,r=n.get(t);if(!r)r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation();else if(r.removed)throw o("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED");else throw o("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,t,n){this._debug("replaceTrack()");var r=this._senderMap.get(e),i=r?r.get(n):null;if(!i)throw o("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null==i.replaceTrack?this.destroy(o("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK")):i.replaceTrack(t)}removeTrack(e,t){this._debug("removeSender()");var n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw o("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(r):this.destroy(o(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}_needsNegotiation(){this._debug("_needsNegotiation");this._batchedNegotiation||(this._batchedNegotiation=!0,c(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):!this._isNegotiating&&(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}}_setupData(e){if(!e.channel)return this.destroy(o("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=u),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{this.destroy(o(e,"ERR_DATA_CHANNEL"))};var t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5000)}_read(){}_write(e,t,n){if(this.destroyed)return n(o("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(o(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>u?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=r(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success");this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(o(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(o(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=r(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(o(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(o(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(o("Connection failed.","ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(o("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(o("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{var r=[];n.forEach(e=>{r.push(t(e))}),e(null,r)},t=>e(t)):0<this._pc.getStats.length?this._pc.getStats(n=>{if(!this.destroyed){var r=[];n.result().forEach(e=>{var n={};e.names().forEach(t=>{n[t]=e.stat(t)}),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))}),e(null,r)}},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);var r={},i={},a={},d=!1;n.forEach(e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(r[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(i[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(a[e.id]=e)});const s=e=>{d=!0;var t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&s(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&s(e)}),!d&&(!Object.keys(a).length||Object.keys(i).length))return void setTimeout(e,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(o(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug("sent chunk from \"write before connect\"");var l=this._cb;this._cb=null,l(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>u)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&!this._firstStable&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=n.from(t)),this.push(t)}}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t});this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),c(()=>{this.emit("stream",t)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],a.apply(null,e)}}f.WEBRTC_SUPPORT=!!d(),f.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},f.channelConfig={},t.exports=f}).call(this,e("buffer").Buffer)},{buffer:26,debug:30,"get-browser-rtc":35,"queue-microtask":67,randombytes:69,"readable-stream":85}],95:[function(e,t){function n(e){return s.digest(e)}function r(e,t){return u?void("string"==typeof e&&(e=o(e)),u.digest({name:"sha-1"},e).then(function(e){t(i(new Uint8Array(e)))},function(){t(n(e))})):void("undefined"==typeof window?queueMicrotask(()=>t(n(e))):d(e,function(r,o){return r?void t(n(e)):void t(o)}))}function o(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n}function i(e){for(var t=e.length,n=[],r=0,o;r<t;r++)o=e[r],n.push((o>>>4).toString(16)),n.push((15&o).toString(16));return n.join("")}var a=e("rusha"),d=e("./rusha-worker-sha1"),s=new a,l="undefined"==typeof window?self:window,c=l.crypto||l.msCrypto||{},u=c.subtle||c.webkitSubtle;try{u.digest({name:"sha-1"},new Uint8Array).catch(function(){u=!1})}catch(e){u=!1}t.exports=r,t.exports.sync=n},{"./rusha-worker-sha1":96,rusha:90}],96:[function(e,t){function n(){i=o.createWorker(),a=1,d={},i.onmessage=function(t){var e=t.data.id,n=d[e];delete d[e],null==t.data.error?n(null,t.data.hash):n(new Error("Rusha worker error: "+t.data.error))}}function r(e,t){i||n(),d[a]=t,i.postMessage({id:a,data:e}),a+=1}var o=e("rusha"),i,a,d;t.exports=r},{rusha:90}],97:[function(e,t){(function(n){const r=e("debug")("simple-websocket"),o=e("randombytes"),i=e("readable-stream"),a=e("queue-microtask"),d=e("ws"),s="function"==typeof d?d:WebSocket,l=65536;class c extends i.Duplex{constructor(e={}){if("string"==typeof e&&(e={url:e}),e=Object.assign({allowHalfOpen:!1},e),super(e),null==e.url&&null==e.socket)throw new Error("Missing required `url` or `socket` option");if(null!=e.url&&null!=e.socket)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=o(4).toString("hex").slice(0,7),this._debug("new websocket: %o",e),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,e.socket)this.url=e.socket.url,this._ws=e.socket,this.connected=e.socket.readyState===s.OPEN;else{this.url=e.url;try{this._ws="function"==typeof d?new s(e.url,e):new s(e.url)}catch(e){return void a(()=>this.destroy(e))}}this._ws.binaryType="arraybuffer",this._ws.onopen=()=>{this._onOpen()},this._ws.onmessage=e=>{this._onMessage(e)},this._ws.onclose=()=>{this._onClose()},this._ws.onerror=()=>{this.destroy(new Error("connection error to "+this.url))},this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}send(e){this._ws.send(e)}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._ws){const e=this._ws,t=()=>{e.onclose=null};if(e.readyState===s.CLOSED)t();else try{e.onclose=t,e.close()}catch(e){t()}e.onopen=null,e.onmessage=null,e.onerror=()=>{}}if(this._ws=null,e){if("undefined"!=typeof DOMException&&e instanceof DOMException){const t=e.code;e=new Error(e.message),e.code=t}this.emit("error",e)}this.emit("close"),t()}}_read(){}_write(e,t,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(e){return this.destroy(e)}"function"!=typeof d&&this._ws.bufferedAmount>l?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?e():this.once("connect",e)}}_onMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=n.from(t)),this.push(t)}_onOpen(){if(!(this.connected||this.destroyed)){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(e)}this._chunk=null,this._debug("sent chunk from \"write before connect\"");const e=this._cb;this._cb=null,e(null)}"function"!=typeof d&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_onInterval(){if(this._cb&&this._ws&&!(this._ws.bufferedAmount>l)){this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);const e=this._cb;this._cb=null,e(null)}}_onClose(){this.destroyed||(this._debug("on close"),this.destroy())}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)}}c.WEBSOCKET_SUPPORT=!!s,t.exports=c}).call(this,e("buffer").Buffer)},{buffer:26,debug:30,"queue-microtask":67,randombytes:69,"readable-stream":85,ws:21}],98:[function(e,t){var n=1,r=65535,o=4,i=function(){n=n+1&r},a;t.exports=function(e){a||(a=setInterval(i,0|1e3/o),a.unref&&a.unref());var t=o*(e||5),d=[0],s=1,l=n-1&r;return function(e){var i=n-l&r;for(i>t&&(i=t),l=n;i--;)s===t&&(s=0),d[s]=d[0===s?t-1:s-1],s++;e&&(d[s-1]+=e);var a=d[s-1],c=d.length<t?0:d[s===t?0:s];return d.length<o?a:(a-c)*o/d.length}}},{}],99:[function(e,t,n){(function(t){var r=e("./lib/request"),o=e("./lib/response"),i=e("xtend"),a=e("builtin-status-codes"),d=e("url"),s=n;s.request=function(e,n){e="string"==typeof e?d.parse(e):i(e);var o=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||o,s=e.hostname||e.host,l=e.port,c=e.path||"/";s&&-1!==s.indexOf(":")&&(s="["+s+"]"),e.url=(s?a+"//"+s:"")+(l?":"+l:"")+c,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var u=new r(e);return n&&u.on("response",n),u},s.get=function(e,t){var n=s.request(e,t);return n.end(),n},s.ClientRequest=r,s.IncomingMessage=o.IncomingMessage,s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.globalAgent=new s.Agent,s.STATUS_CODES=a,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./lib/request":101,"./lib/response":102,"builtin-status-codes":27,url:116,xtend:123}],100:[function(e,t,n){(function(e){function t(){if(i!==void 0)return i;if(e.XMLHttpRequest){i=new e.XMLHttpRequest;try{i.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(t){i=null}}else i=null;return i}function r(e){var n=t();if(!n)return!1;try{return n.responseType=e,n.responseType===e}catch(t){}return!1}function o(e){return"function"==typeof e}n.fetch=o(e.fetch)&&o(e.ReadableStream),n.writableStream=o(e.WritableStream),n.abortController=o(e.AbortController);var i;n.arraybuffer=n.fetch||r("arraybuffer"),n.msstream=!n.fetch&&r("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&r("moz-chunked-arraybuffer"),n.overrideMimeType=n.fetch||!!t()&&o(t().overrideMimeType),i=null}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],101:[function(e,t){(function(n,r,o){function i(e,t){return d.fetch&&t?"fetch":d.mozchunkedarraybuffer?"moz-chunked-arraybuffer":d.msstream?"ms-stream":d.arraybuffer&&e?"arraybuffer":"text"}function a(e){try{var t=e.status;return null!==t&&0!==t}catch(t){return!1}}var d=e("./capability"),s=e("inherits"),l=e("./response"),c=e("readable-stream"),u=l.IncomingMessage,f=l.readyStates,p=t.exports=function(e){var t=this;c.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+o.from(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(n){t.setHeader(n,e.headers[n])});var n=!0,r;if("disable-fetch"===e.mode||"requestTimeout"in e&&!d.abortController)n=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!d.overrideMimeType;else if(!e.mode||"default"===e.mode||"prefer-fast"===e.mode)r=!0;else throw new Error("Invalid value for opts.mode");t._mode=i(r,n),t._fetchTimer=null,t.on("finish",function(){t._onFinish()})};s(p,c.Writable),p.prototype.setHeader=function(e,t){var n=this,r=e.toLowerCase();-1!==h.indexOf(r)||(n._headers[r]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},p.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,o=e._headers,i=null;"GET"!==t.method&&"HEAD"!==t.method&&(i=new Blob(e._body,{type:(o["content-type"]||{}).value||""}));var a=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,n=o[e].value;Array.isArray(n)?n.forEach(function(e){a.push([t,e])}):a.push([t,n])}),"fetch"===e._mode){var s=null;if(d.abortController){var l=new AbortController;s=l.signal,e._fetchAbortController=l,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=r.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))}r.fetch(e._opts.url,{method:e._opts.method,headers:a,body:i||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:s}).then(function(t){e._fetchResponse=t,e._connect()},function(t){r.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var c=e._xhr=new r.XMLHttpRequest;try{c.open(e._opts.method,e._opts.url,!0)}catch(t){return void n.nextTick(function(){e.emit("error",t)})}"responseType"in c&&(c.responseType=e._mode),"withCredentials"in c&&(c.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(c.timeout=t.requestTimeout,c.ontimeout=function(){e.emit("requestTimeout")}),a.forEach(function(e){c.setRequestHeader(e[0],e[1])}),e._response=null,c.onreadystatechange=function(){switch(c.readyState){case f.LOADING:case f.DONE:e._onXHRProgress();}},"moz-chunked-arraybuffer"===e._mode&&(c.onprogress=function(){e._onXHRProgress()}),c.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{c.send(i)}catch(t){return void n.nextTick(function(){e.emit("error",t)})}}}},p.prototype._onXHRProgress=function(){var e=this;!a(e._xhr)||e._destroyed||(!e._response&&e._connect(),e._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new u(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},p.prototype._write=function(e,t,n){var r=this;r._body.push(e),n()},p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=!0,r.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},p.prototype.end=function(e,t,n){var r=this;"function"==typeof e&&(n=e,e=void 0),c.Writable.prototype.end.call(r,e,t,n)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var h=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("buffer").Buffer)},{"./capability":100,"./response":102,_process:61,buffer:26,inherits:39,"readable-stream":85}],102:[function(e,t,n){(function(t,r,o){var i=e("./capability"),a=e("inherits"),d=e("readable-stream"),s=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=n.IncomingMessage=function(e,n,a,s){var l=this;if(d.Readable.call(l),l._mode=a,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",function(){t.nextTick(function(){l.emit("close")})}),"fetch"===a){function e(){u.read().then(function(t){return l._destroyed?void 0:t.done?(r.clearTimeout(s),void l.push(null)):void(l.push(o.from(t.value)),e())}).catch(function(e){r.clearTimeout(s),l._destroyed||l.emit("error",e)})}if(l._fetchResponse=n,l.url=n.url,l.statusCode=n.status,l.statusMessage=n.statusText,n.headers.forEach(function(e,t){l.headers[t.toLowerCase()]=e,l.rawHeaders.push(t,e)}),i.writableStream){var c=new WritableStream({write:function(e){return new Promise(function(t,n){l._destroyed?n():l.push(o.from(e))?t():l._resumeFetch=t})},close:function(){r.clearTimeout(s),l._destroyed||l.push(null)},abort:function(e){l._destroyed||l.emit("error",e)}});try{return void n.body.pipeTo(c).catch(function(e){r.clearTimeout(s),l._destroyed||l.emit("error",e)})}catch(t){}}var u=n.body.getReader();e()}else{l._xhr=e,l._pos=0,l.url=e.responseURL,l.statusCode=e.status,l.statusMessage=e.statusText;var f=e.getAllResponseHeaders().split(/\r?\n/);if(f.forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===l.headers[n]&&(l.headers[n]=[]),l.headers[n].push(t[2])):void 0===l.headers[n]?l.headers[n]=t[2]:l.headers[n]+=", "+t[2],l.rawHeaders.push(t[1],t[2])}}),l._charset="x-user-defined",!i.overrideMimeType){var p=l.rawHeaders["mime-type"];if(p){var h=p.match(/;\s*charset=([^;])(;|$)/);h&&(l._charset=h[1].toLowerCase())}l._charset||(l._charset="utf-8")}}};a(l,d.Readable),l.prototype._read=function(){var e=this,t=e._resumeFetch;t&&(e._resumeFetch=null,t())},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text":if(n=t.responseText,n.length>e._pos){var a=n.substr(e._pos);if("x-user-defined"===e._charset){for(var d=o.alloc(a.length),l=0;l<a.length;l++)d[l]=255&a.charCodeAt(l);e.push(d)}else e.push(a,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==s.DONE||!t.response)break;n=t.response,e.push(o.from(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==s.LOADING||!n)break;e.push(o.from(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==s.LOADING)break;var c=new r.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(o.from(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(n);}e._xhr.readyState===s.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("buffer").Buffer)},{"./capability":100,_process:61,buffer:26,inherits:39,"readable-stream":85}],103:[function(e,t){t.exports=async function(e,t){const r=await n(e,t),o=URL.createObjectURL(r);return o};const n=e("stream-to-blob")},{"stream-to-blob":104}],104:[function(e,t){t.exports=function(e,t){if(null!=t&&"string"!=typeof t)throw new Error("Invalid mimetype, expected string.");return new Promise((n,r)=>{const o=[];e.on("data",e=>o.push(e)).once("end",()=>{const e=null==t?new Blob(o):new Blob(o,{type:t});n(e)}).once("error",r)})}},{}],105:[function(e,t){(function(n){var r=e("once");t.exports=function(e,t,o){o=r(o);var i=n.alloc(t),a=0;e.on("data",function(e){e.copy(i,a),a+=e.length}).on("end",function(){o(null,i)}).on("error",o)}}).call(this,e("buffer").Buffer)},{buffer:26,once:56}],106:[function(e,t,n){'use strict';function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0;}}function o(e){var t=r(e);if("string"!=typeof t&&(g.isEncoding===_||!_(e)))throw new Error("Unknown encoding: "+e);return t||e}function i(e){this.encoding=o(e);var t;switch(this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=f,this.end=p,t=3;break;default:return this.write=h,void(this.end=m);}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(t)}function a(e){if(127>=e)return 0;return 6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function d(e,t,n){var r=t.length-1;if(r<n)return 0;var o=a(t[r]);return 0<=o?(0<o&&(e.lastNeed=o-1),o):--r<n||-2===o?0:(o=a(t[r]),0<=o)?(0<o&&(e.lastNeed=o-2),o):--r<n||-2===o?0:(o=a(t[r]),0<=o?(0<o&&(2===o?o=0:e.lastNeed=o-3),o):0)}function s(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\uFFFD";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"\uFFFD";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"\uFFFD"}}function l(e){var t=this.lastTotal-this.lastNeed,n=s(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length):n}function c(e,t){if(0==(e.length-t)%2){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}var g=e("safe-buffer").Buffer,_=g.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}};n.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t},i.prototype.text=function(e,t){var n=d(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length)}},{"safe-buffer":91}],107:[function(e,t,n){var r=e("./thirty-two");n.encode=r.encode,n.decode=r.decode},{"./thirty-two":108}],108:[function(e,t,n){(function(e){'use strict';function t(e){var t=r(e.length/5);return 0==e.length%5?t:t+1}var o=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];n.encode=function(n){e.isBuffer(n)||(n=new e(n));for(var r=0,o=0,a=0,d=0,s=new e(8*t(n));r<n.length;){var l=n[r];3<a?(d=l&255>>a,a=(a+5)%8,d=d<<a|(r+1<n.length?n[r+1]:0)>>8-a,r++):(d=31&l>>8-(a+5),a=(a+5)%8,0===a&&r++),s[o]="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charCodeAt(d),o++}for(r=o;r<s.length;r++)s[r]=61;return s},n.decode=function(t){var n=0,r=0,d=0,s;e.isBuffer(t)||(t=new e(t));for(var l=new e(a(5*t.length/8)),c=0;c<t.length&&!(61===t[c]);c++){var u=t[c]-48;if(u<o.length)r=o[u],3>=n?(n=(n+5)%8,0===n?(s|=r,l[d]=s,d++,s=0):s|=255&r<<8-n):(n=(n+5)%8,s|=255&r>>>n,l[d]=s,d++,s=255&r<<8-n);else throw new Error("Invalid input - it is not base32 encoded string")}return l.slice(0,d)}}).call(this,e("buffer").Buffer)},{buffer:26}],109:[function(e,t){var n=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,o=0;o<r;o++)t[o]=e[o];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:26}],110:[function(e,t){(function(n){const o=e("debug")("torrent-discovery"),i=e("bittorrent-dht/client"),a=e("events").EventEmitter,d=e("run-parallel"),s=e("bittorrent-tracker/client");t.exports=class extends a{constructor(e){if(super(),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!n.browser&&!e.port)throw new Error("Option `port` is required");this.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),this.infoHash="string"==typeof e.infoHash?e.infoHash.toLowerCase():e.infoHash.toString("hex"),this._port=e.port,this._userAgent=e.userAgent,this.destroyed=!1,this._announce=e.announce||[],this._intervalMs=e.intervalMs||900000,this._trackerOpts=null,this._dhtAnnouncing=!1,this._dhtTimeout=!1,this._internalDHT=!1,this._onWarning=e=>{this.emit("warning",e)},this._onError=e=>{this.emit("error",e)},this._onDHTPeer=(e,t)=>{t.toString("hex")!==this.infoHash||this.emit("peer",`${e.host}:${e.port}`,"dht")},this._onTrackerPeer=e=>{this.emit("peer",e,"tracker")},this._onTrackerAnnounce=()=>{this.emit("trackerAnnounce")};const t=(e,t)=>{const n=new i(t);return n.on("warning",this._onWarning),n.on("error",this._onError),n.listen(e),this._internalDHT=!0,n};!1===e.tracker?this.tracker=null:e.tracker&&"object"==typeof e.tracker?(this._trackerOpts=Object.assign({},e.tracker),this.tracker=this._createTracker()):this.tracker=this._createTracker(),this.dht=!1===e.dht||"function"!=typeof i?null:e.dht&&"function"==typeof e.dht.addNode?e.dht:e.dht&&"object"==typeof e.dht?t(e.dhtPort,e.dht):t(e.dhtPort),this.dht&&(this.dht.on("peer",this._onDHTPeer),this._dhtAnnounce())}updatePort(e){e===this._port||(this._port=e,this.dht&&this._dhtAnnounce(),this.tracker&&(this.tracker.stop(),this.tracker.destroy(()=>{this.tracker=this._createTracker()})))}complete(e){this.tracker&&this.tracker.complete(e)}destroy(e){if(!this.destroyed){this.destroyed=!0,clearTimeout(this._dhtTimeout);const t=[];this.tracker&&(this.tracker.stop(),this.tracker.removeListener("warning",this._onWarning),this.tracker.removeListener("error",this._onError),this.tracker.removeListener("peer",this._onTrackerPeer),this.tracker.removeListener("update",this._onTrackerAnnounce),t.push(e=>{this.tracker.destroy(e)})),this.dht&&this.dht.removeListener("peer",this._onDHTPeer),this._internalDHT&&(this.dht.removeListener("warning",this._onWarning),this.dht.removeListener("error",this._onError),t.push(e=>{this.dht.destroy(e)})),d(t,e),this.dht=null,this.tracker=null,this._announce=null}}_createTracker(){const e=Object.assign({},this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),t=new s(e);return t.on("warning",this._onWarning),t.on("error",this._onError),t.on("peer",this._onTrackerPeer),t.on("update",this._onTrackerAnnounce),t.setInterval(this._intervalMs),t.start(),t}_dhtAnnounce(){this._dhtAnnouncing||(o("dht announce"),this._dhtAnnouncing=!0,clearTimeout(this._dhtTimeout),this.dht.announce(this.infoHash,this._port,e=>{this._dhtAnnouncing=!1,o("dht announce complete"),e&&this.emit("warning",e),this.emit("dhtAnnounce"),this.destroyed||(this._dhtTimeout=setTimeout(()=>{this._dhtAnnounce()},this._intervalMs+r(Math.random()*this._intervalMs/5)),this._dhtTimeout.unref&&this._dhtTimeout.unref())}))}}}).call(this,e("_process"))},{_process:61,"bittorrent-dht/client":21,"bittorrent-tracker/client":15,debug:30,events:33,"run-parallel":89}],111:[function(e,t){(function(e){const n=16384;class r{constructor(e){this.length=e,this.missing=e,this.sources=null,this._chunks=a(e/n),this._remainder=e%n||n,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1}chunkLength(e){return e===this._chunks-1?this._remainder:n}chunkLengthRemaining(e){return this.length-e*n}chunkOffset(e){return e*n}reserve(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1}reserveRemaining(){if(!this.init())return-1;if(this._reservations<this._chunks){const e=this._reservations;return this._reservations=this._chunks,e}return-1}cancel(e){this.init()&&this._cancellations.push(e)}cancelRemaining(e){this.init()&&(this._reservations=e)}get(e){return this.init()?this._buffer[e]:null}set(e,t,r){if(!this.init())return!1;const o=t.length,i=a(o/n);for(let o=0;o<i;o++)if(!this._buffer[e+o]){const i=o*n,a=t.slice(i,i+n);this._buffered++,this._buffer[e+o]=a,this.missing-=a.length,this.sources.includes(r)||this.sources.push(r)}return this._buffered===this._chunks}flush(){if(!this._buffer||this._chunks!==this._buffered)return null;const t=e.concat(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,t}init(){return!this._flushed&&(!!this._buffer||(this._buffer=Array(this._chunks),this._cancellations=[],this.sources=[],!0))}}Object.defineProperty(r,"BLOCK_LENGTH",{value:16384}),t.exports=r}).call(this,e("buffer").Buffer)},{buffer:26}],112:[function(e,t){(function(n){var r=e("is-typedarray").strict;t.exports=function(e){if(r(e)){var t=n.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return n.from(e)}}).call(this,e("buffer").Buffer)},{buffer:26,"is-typedarray":42}],113:[function(e,t,o){var i=e("buffer-alloc"),a=n(2,32);o.encodingLength=function(){return 8},o.encode=function(e,t,n){t||(t=i(8)),n||(n=0);var o=r(e/a);return t.writeUInt32BE(o,n),t.writeUInt32BE(e-o*a,n+4),t},o.decode=function(e,t){t||(t=0);var n=e.readUInt32BE(t),r=e.readUInt32BE(t+4);return n*a+r},o.encode.bytes=8,o.decode.bytes=8},{"buffer-alloc":24}],114:[function(e,t){"use strict";function n(e,t){for(var n=1,r=e.length,o=e[0],d=e[0],s=1;s<r;++s)if(d=o,o=e[s],t(o,d)){if(s===n){n++;continue}e[n++]=o}return e.length=n,e}function r(e){for(var t=1,n=e.length,r=e[0],o=e[0],d=1;d<n;++d,o=r)if(o=r,r=e[d],r!==o){if(d===t){t++;continue}e[t++]=r}return e.length=t,e}t.exports=function(e,t,o){return 0===e.length?e:t?(o||e.sort(t),n(e,t)):(o||e.sort(),r(e))}},{}],115:[function(e,t){t.exports=function(e,t){if(!(t>=e.length||0>t)){var n=e.pop();if(t<e.length){var r=e[t];return e[t]=n,r}return n}}},{}],116:[function(e,t,n){'use strict';function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&d.isObject(e)&&e instanceof r)return e;var o=new r;return o.parse(e,t,n),o}var a=e("punycode"),d=e("./util");n.parse=o,n.resolve=function(e,t){return o(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},n.format=function(e){return d.isString(e)&&(e=o(e)),e instanceof r?e.format():r.prototype.format.call(e)},n.Url=r;var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),h=["'"].concat(p),m=["%","/","?",";","#"].concat(h),g=["/","?","#"],_=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=e("querystring");r.prototype.parse=function(e,t,n){if(!d.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#",u=e.split(o),v=/\\/g;u[0]=u[0].replace(v,"/"),e=u.join(o);var S=e;if(S=S.trim(),!n&&1===e.split("#").length){var C=f.exec(S);if(C)return this.path=S,this.href=S,this.pathname=C[1],C[2]?(this.search=C[2],this.query=t?x.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var I=c.exec(S);if(I){I=I[0];var L=I.toLowerCase();this.protocol=L,S=S.substr(I.length)}if(n||I||S.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===S.substr(0,2);T&&!(I&&w[I])&&(S=S.substr(2),this.slashes=!0)}if(!w[I]&&(T||I&&!E[I])){for(var B=-1,R=0,A;R<g.length;R++)A=S.indexOf(g[R]),-1!==A&&(-1===B||A<B)&&(B=A);var U,P;P=-1===B?S.lastIndexOf("@"):S.lastIndexOf("@",B),-1!==P&&(U=S.slice(0,P),S=S.slice(P+1),this.auth=decodeURIComponent(U)),B=-1;for(var R=0,A;R<m.length;R++)A=S.indexOf(m[R]),-1!==A&&(-1===B||A<B)&&(B=A);-1===B&&(B=S.length),this.host=S.slice(0,B),S=S.slice(B),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var N=this.hostname.split(/\./),R=0,M=N.length,H;R<M;R++)if(H=N[R],H&&!H.match(_)){for(var q="",D=0,F=H.length;D<F;D++)q+=127<H.charCodeAt(D)?"x":H[D];if(!q.match(_)){var k=N.slice(0,R),W=N.slice(R+1),z=H.match(b);z&&(k.push(z[1]),W.unshift(z[2])),W.length&&(S="/"+W.join(".")+S),this.hostname=k.join(".");break}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),O||(this.hostname=a.toASCII(this.hostname));var V=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+V,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==S[0]&&(S="/"+S))}if(!y[L])for(var R=0,M=h.length,K;R<M;R++)if(K=h[R],-1!==S.indexOf(K)){var Y=encodeURIComponent(K);Y===K&&(Y=escape(K)),S=S.split(K).join(Y)}var X=S.indexOf("#");-1!==X&&(this.hash=S.substr(X),S=S.slice(0,X));var $=S.indexOf("?");if(-1===$?t&&(this.search="",this.query={}):(this.search=S.substr($),this.query=S.substr($+1),t&&(this.query=x.parse(this.query)),S=S.slice(0,$)),S&&(this.pathname=S),E[L]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var V=this.pathname||"",Q=this.search||"";this.path=V+Q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(i=x.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||E[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):!o&&(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(d.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,o=Object.keys(this),a=0,l;a<o.length;a++)l=o[a],n[l]=this[l];if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0,f;u<c.length;u++)f=c[u],"protocol"!==f&&(n[f]=e[f]);return E[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!E[e.protocol]){for(var h=Object.keys(e),m=0,g;m<h.length;m++)g=h[m],n[g]=e[g];return n.href=n.format(),n}if(n.protocol=e.protocol,!e.host&&!w[e.protocol]){for(var _=(e.pathname||"").split("/");_.length&&!(e.host=_.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==_[0]&&_.unshift(""),2>_.length&&_.unshift(""),n.pathname=_.join("/")}else n.pathname=e.pathname;if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var b=n.pathname||"",p=n.search||"";n.path=b+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=y||s||n.host&&e.pathname,S=x,C=n.pathname&&n.pathname.split("/")||[],_=e.pathname&&e.pathname.split("/")||[],I=n.protocol&&!E[n.protocol];if(I&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===_[0]?_[0]=e.host:_.unshift(e.host)),e.host=null),x=x&&(""===_[0]||""===C[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,C=_;else if(_.length)C||(C=[]),C.pop(),C=C.concat(_),n.search=e.search,n.query=e.query;else if(!d.isNullOrUndefined(e.search)){if(I){n.hostname=n.host=C.shift();var L=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@");L&&(n.auth=L.shift(),n.host=n.hostname=L.shift())}return n.search=e.search,n.query=e.query,d.isNull(n.pathname)&&d.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!C.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var T=C.slice(-1)[0],B=(n.host||e.host||1<C.length)&&("."===T||".."===T)||""===T,R=0,A=C.length;0<=A;A--)T=C[A],"."===T?C.splice(A,1):".."===T?(C.splice(A,1),R++):R&&(C.splice(A,1),R--);if(!x&&!S)for(;R--;R)C.unshift("..");x&&""!==C[0]&&(!C[0]||"/"!==C[0].charAt(0))&&C.unshift(""),B&&"/"!==C.join("/").substr(-1)&&C.push("");var U=""===C[0]||C[0]&&"/"===C[0].charAt(0);if(I){n.hostname=n.host=U?"":C.length?C.shift():"";var L=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@");L&&(n.auth=L.shift(),n.host=n.hostname=L.shift())}return x=x||n.host&&C.length,x&&!U&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),d.isNull(n.pathname)&&d.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":117,punycode:63,querystring:66}],117:[function(e,t){'use strict';t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],118:[function(e,t){(function(n){const{EventEmitter:r}=e("events"),o=e("bencode"),i=e("bitfield"),d=e("debug")("ut_metadata"),s=e("simple-sha1"),l=1E3,c=16384;t.exports=e=>{class t extends r{constructor(t){super(),this._wire=t,this._fetching=!1,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._bitfield=new i(0,{grow:l}),n.isBuffer(e)&&this.setMetadata(e)}onHandshake(e,t,n){this._infoHash=e}onExtendedHandshake(e){return e.m&&e.m.ut_metadata?e.metadata_size?"number"!=typeof e.metadata_size||1E7<e.metadata_size||0>=e.metadata_size?this.emit("warning",new Error("Peer gave invalid metadata size")):void(this._metadataSize=e.metadata_size,this._numPieces=a(this._metadataSize/c),this._remainingRejects=2*this._numPieces,this._requestPieces()):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))}onMessage(e){let t,n;try{const r=e.toString(),i=r.indexOf("ee")+2;t=o.decode(r.substring(0,i)),n=e.slice(i)}catch(e){return}switch(t.msg_type){case 0:this._onRequest(t.piece);break;case 1:this._onData(t.piece,n,t.total_size);break;case 2:this._onReject(t.piece);}}fetch(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())}cancel(){this._fetching=!1}setMetadata(e){if(this._metadataComplete)return!0;d("set metadata");try{const t=o.decode(e).info;t&&(e=o.encode(t))}catch(e){}return!(this._infoHash&&this._infoHash!==s.sync(e))&&(this.cancel(),this.metadata=e,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",o.encode({info:o.decode(this.metadata)})),!0)}_send(e,t){let r=o.encode(e);n.isBuffer(t)&&(r=n.concat([r,t])),this._wire.extended("ut_metadata",r)}_request(e){this._send({msg_type:0,piece:e})}_data(e,t,n){const r={msg_type:1,piece:e};"number"==typeof n&&(r.total_size=n),this._send(r,t)}_reject(e){this._send({msg_type:2,piece:e})}_onRequest(e){if(!this._metadataComplete)return void this._reject(e);const t=e*c;let n=t+c;n>this._metadataSize&&(n=this._metadataSize);const r=this.metadata.slice(t,n);this._data(e,r,this._metadataSize)}_onData(e,t,n){t.length>c||!this._fetching||(t.copy(this.metadata,e*c),this._bitfield.set(e),this._checkDone())}_onReject(e){0<this._remainingRejects&&this._fetching?(this._request(e),this._remainingRejects-=1):this.emit("warning",new Error("Peer sent \"reject\" too much"))}_requestPieces(){if(this._fetching){this.metadata=n.alloc(this._metadataSize);for(let e=0;e<this._numPieces;e++)this._request(e)}}_checkDone(){let e=!0;for(let t=0;t<this._numPieces;t++)if(!this._bitfield.get(t)){e=!1;break}if(e){const e=this.setMetadata(this.metadata);e||this._failedMetadata()}}_failedMetadata(){this._bitfield=new i(0,{grow:l}),this._remainingRejects-=this._numPieces,0<this._remainingRejects?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))}}return t.prototype.name="ut_metadata",t}}).call(this,e("buffer").Buffer)},{bencode:11,bitfield:13,buffer:26,debug:30,events:33,"simple-sha1":95}],119:[function(e,t){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()}t.exports=function(e,t){function r(){if(!o){if(n("throwDeprecation"))throw new Error(t);else n("traceDeprecation")?console.trace(t):console.warn(t);o=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var o=!1;return r}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],120:[function(e,t){(function(n){function o(){return{version:0,flags:0,entries:[]}}const i=e("binary-search"),a=e("events"),d=e("mp4-stream"),s=e("mp4-box-encoding"),l=e("range-slice-stream");class c{constructor(e,t){this._entries=e,this._countName=t||"count",this._index=0,this._offset=0,this.value=this._entries[0]}inc(){this._offset++,this._offset>=this._entries[this._index][this._countName]&&(this._index++,this._offset=0),this.value=this._entries[this._index]}}t.exports=class extends a{constructor(e){super(),this._tracks=[],this._file=e,this._decoder=null,this._findMoov(0)}_findMoov(e){this._decoder&&this._decoder.destroy();let t=0;this._decoder=d.decode();const n=this._file.createReadStream({start:e});n.pipe(this._decoder);const r=o=>{"moov"===o.type?(this._decoder.removeListener("box",r),this._decoder.decode(e=>{n.destroy();try{this._processMoov(e)}catch(e){e.message=`Cannot parse mp4 file: ${e.message}`,this.emit("error",e)}})):o.length<4096?(t+=o.length,this._decoder.ignore()):(this._decoder.removeListener("box",r),t+=o.length,n.destroy(),this._decoder.destroy(),this._findMoov(e+t))};this._decoder.on("box",r)}_processMoov(e){const t=e.traks;this._tracks=[],this._hasVideo=!1,this._hasAudio=!1;for(let n=0;n<t.length;n++){const i=t[n],a=i.mdia.minf.stbl,d=a.stsd.entries[0],s=i.mdia.hdlr.handlerType;let l,u;if("vide"===s&&"avc1"===d.type){if(this._hasVideo)continue;this._hasVideo=!0,l="avc1",d.avcC&&(l+=`.${d.avcC.mimeCodec}`),u=`video/mp4; codecs="${l}"`}else if("soun"===s&&"mp4a"===d.type){if(this._hasAudio)continue;this._hasAudio=!0,l="mp4a",d.esds&&d.esds.mimeCodec&&(l+=`.${d.esds.mimeCodec}`),u=`audio/mp4; codecs="${l}"`}else continue;const f=[];let p=0,h=0,m=0,g=0,_=0,b=0;const y=new c(a.stts.entries);let w=null;a.ctts&&(w=new c(a.ctts.entries));for(let e=0;;){var r=a.stsc.entries[_];const t=a.stsz.entries[p],n=y.value.duration,o=w?w.value.compositionOffset:0;let i=!0;a.stss&&(i=a.stss.entries[e]===p+1);const d=a.stco||a.co64;if(f.push({size:t,duration:n,dts:b,presentationOffset:o,sync:i,offset:g+d.entries[m]}),p++,p>=a.stsz.entries.length)break;if(h++,g+=t,h>=r.samplesPerChunk){h=0,g=0,m++;const e=a.stsc.entries[_+1];e&&m+1>=e.firstChunk&&_++}b+=n,y.inc(),w&&w.inc(),i&&e++}i.mdia.mdhd.duration=0,i.tkhd.duration=0;const k=r.sampleDescriptionId,E={type:"moov",mvhd:e.mvhd,traks:[{tkhd:i.tkhd,mdia:{mdhd:i.mdia.mdhd,hdlr:i.mdia.hdlr,elng:i.mdia.elng,minf:{vmhd:i.mdia.minf.vmhd,smhd:i.mdia.minf.smhd,dinf:i.mdia.minf.dinf,stbl:{stsd:a.stsd,stts:o(),ctts:o(),stsc:o(),stsz:o(),stco:o(),stss:o()}}}}],mvex:{mehd:{fragmentDuration:e.mvhd.duration},trexs:[{trackId:i.tkhd.trackId,defaultSampleDescriptionIndex:k,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}};this._tracks.push({fragmentSequence:1,trackId:i.tkhd.trackId,timeScale:i.mdia.mdhd.timeScale,samples:f,currSample:null,currTime:null,moov:E,mime:u})}if(0===this._tracks.length)return void this.emit("error",new Error("no playable tracks"));e.mvhd.duration=0,this._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};const i=s.encode(this._ftyp),a=this._tracks.map(e=>{const t=s.encode(e.moov);return{mime:e.mime,init:n.concat([i,t])}});this.emit("ready",a)}seek(e){if(!this._tracks)throw new Error("Not ready yet; wait for 'ready' event");this._fileStream&&(this._fileStream.destroy(),this._fileStream=null);let t=-1;if(this._tracks.map((n,r)=>{n.outStream&&n.outStream.destroy(),n.inStream&&(n.inStream.destroy(),n.inStream=null);const o=n.outStream=d.encode(),i=this._generateFragment(r,e);if(!i)return o.finalize();(-1===t||i.ranges[0].start<t)&&(t=i.ranges[0].start);const a=e=>{o.destroyed||o.box(e.moof,t=>{if(t)return this.emit("error",t);if(!o.destroyed){const t=n.inStream.slice(e.ranges);t.pipe(o.mediaData(e.length,e=>{if(e)return this.emit("error",e);if(!o.destroyed){const e=this._generateFragment(r);return e?void a(e):o.finalize()}}))}})};a(i)}),0<=t){const e=this._fileStream=this._file.createReadStream({start:t});this._tracks.forEach(n=>{n.inStream=new l(t,{highWaterMark:1e7}),e.pipe(n.inStream)})}return this._tracks.map(e=>e.outStream)}_findSampleBefore(e,t){const n=this._tracks[e],o=r(n.timeScale*t);let a=i(n.samples,o,(e,n)=>{const t=e.dts+e.presentationOffset;return t-n});for(-1===a?a=0:0>a&&(a=-a-2);!n.samples[a].sync;)a--;return a}_generateFragment(e,t){const n=this._tracks[e];let r;if(r=void 0===t?n.currSample:this._findSampleBefore(e,t),r>=n.samples.length)return null;const o=n.samples[r].dts;let i=0;const a=[];for(var d=r;d<n.samples.length;d++){const e=n.samples[d];if(e.sync&&e.dts-o>=n.timeScale*1)break;i+=e.size;const t=a.length-1;0>t||a[t].end!==e.offset?a.push({start:e.offset,end:e.offset+e.size}):a[t].end+=e.size}return n.currSample=d,{moof:this._generateMoof(e,r,d),ranges:a,length:i}}_generateMoof(e,t,n){const r=this._tracks[e],o=[];let i=0;for(let a=t;a<n;a++){const e=r.samples[a];0>e.presentationOffset&&(i=1),o.push({sampleDuration:e.duration,sampleSize:e.size,sampleFlags:e.sync?33554432:16842752,sampleCompositionTimeOffset:e.presentationOffset})}const a={type:"moof",mfhd:{sequenceNumber:r.fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:r.trackId},tfdt:{baseMediaDecodeTime:r.samples[t].dts},trun:{flags:3841,dataOffset:8,entries:o,version:i}}]};return a.trafs[0].trun.dataOffset+=s.encodingLength(a),a}}}).call(this,e("buffer").Buffer)},{"binary-search":12,buffer:26,events:33,"mp4-box-encoding":49,"mp4-stream":52,"range-slice-stream":70}],121:[function(e,t){function n(e,t,o={}){return this instanceof n?void(this.detailedError=null,this._elem=t,this._elemWrapper=new r(t),this._waitingFired=!1,this._trackMeta=null,this._file=e,this._tracks=null,"none"!==this._elem.preload&&this._createMuxer(),this._onError=()=>{this.detailedError=this._elemWrapper.detailedError,this.destroy()},this._onWaiting=()=>{this._waitingFired=!0,this._muxer?this._tracks&&this._pump():this._createMuxer()},t.autoplay&&(t.preload="auto"),t.addEventListener("waiting",this._onWaiting),t.addEventListener("error",this._onError)):(console.warn("don't invoked VideoStream without 'new'"),new n(e,t,o))}const r=e("mediasource"),o=e("pump"),i=e("./mp4-remuxer");n.prototype={_createMuxer(){this._muxer=new i(this._file),this._muxer.on("ready",e=>{this._tracks=e.map(e=>{const t=this._elemWrapper.createWriteStream(e.mime);t.on("error",e=>{this._elemWrapper.error(e)});const n={muxed:null,mediaSource:t,initFlushed:!1,onInitFlushed:null};return t.write(e.init,e=>{n.initFlushed=!0,n.onInitFlushed&&n.onInitFlushed(e)}),n}),(this._waitingFired||"auto"===this._elem.preload)&&this._pump()}),this._muxer.on("error",e=>{this._elemWrapper.error(e)})},_pump(){const e=this._muxer.seek(this._elem.currentTime,!this._tracks);this._tracks.forEach((t,n)=>{const r=()=>{t.muxed&&(t.muxed.destroy(),t.mediaSource=this._elemWrapper.createWriteStream(t.mediaSource),t.mediaSource.on("error",e=>{this._elemWrapper.error(e)})),t.muxed=e[n],o(t.muxed,t.mediaSource)};t.initFlushed?r():t.onInitFlushed=e=>e?void this._elemWrapper.error(e):void r()})},destroy(){this.destroyed||(this.destroyed=!0,this._elem.removeEventListener("waiting",this._onWaiting),this._elem.removeEventListener("error",this._onError),this._tracks&&this._tracks.forEach(e=>{e.muxed&&e.muxed.destroy()}),this._elem.src="")}},t.exports=n},{"./mp4-remuxer":120,mediasource:45,pump:62}],122:[function(e,t){function n(e,t){function r(){for(var t=Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),o=t[t.length-1];return"function"==typeof r&&r!==o&&Object.keys(o).forEach(function(e){r[e]=o[e]}),r}if(e&&t)return n(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}t.exports=n},{}],123:[function(e,t){t.exports=function(){for(var e={},t=0,r;t<arguments.length;t++)for(var o in r=arguments[t],r)n.call(r,o)&&(e[o]=r[o]);return e};var n=Object.prototype.hasOwnProperty},{}],124:[function(e,t){t.exports={version:"0.107.17"}},{}],125:[function(e,t){(function(n,r,o){function i(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}function a(e){return"undefined"!=typeof FileList&&e instanceof FileList}const{EventEmitter:d}=e("events"),s=e("simple-concat"),l=e("create-torrent"),c=e("debug")("webtorrent"),u=e("bittorrent-dht/client"),f=e("load-ip-set"),p=e("run-parallel"),h=e("parse-torrent"),m=e("path"),g=e("simple-peer"),_=e("randombytes"),b=e("speedometer"),y=e("./lib/tcp-pool"),w=e("./lib/torrent"),k=e("./package.json").version,E=k.replace(/\d*./g,e=>`0${e%100}`.slice(-2)).slice(0,4);class x extends d{constructor(e={}){super(),this.peerId="string"==typeof e.peerId?e.peerId:o.isBuffer(e.peerId)?e.peerId.toString("hex"):o.from(`-WW${E}-`+_(9).toString("base64")).toString("hex"),this.peerIdBuffer=o.from(this.peerId,"hex"),this.nodeId="string"==typeof e.nodeId?e.nodeId:o.isBuffer(e.nodeId)?e.nodeId.toString("hex"):_(20).toString("hex"),this.nodeIdBuffer=o.from(this.nodeId,"hex"),this._debugId=this.peerId.toString("hex").substring(0,7),this.destroyed=!1,this.listening=!1,this.torrentPort=e.torrentPort||0,this.dhtPort=e.dhtPort||0,this.tracker=e.tracker===void 0?{}:e.tracker,this.torrents=[],this.maxConns=+e.maxConns||55,this._debug("new webtorrent (peerId %s, nodeId %s, port %s)",this.peerId,this.nodeId,this.torrentPort),this.tracker&&("object"!=typeof this.tracker&&(this.tracker={}),e.rtcConfig&&(console.warn("WebTorrent: opts.rtcConfig is deprecated. Use opts.tracker.rtcConfig instead"),this.tracker.rtcConfig=e.rtcConfig),e.wrtc&&(console.warn("WebTorrent: opts.wrtc is deprecated. Use opts.tracker.wrtc instead"),this.tracker.wrtc=e.wrtc),r.WRTC&&!this.tracker.wrtc&&(this.tracker.wrtc=r.WRTC)),"function"==typeof y?this._tcpPool=new y(this):n.nextTick(()=>{this._onListening()}),this._downloadSpeed=b(),this._uploadSpeed=b(),!1!==e.dht&&"function"==typeof u?(this.dht=new u(Object.assign({},{nodeId:this.nodeId},e.dht)),this.dht.once("error",e=>{this._destroy(e)}),this.dht.once("listening",()=>{const e=this.dht.address();e&&(this.dhtPort=e.port)}),this.dht.setMaxListeners(0),this.dht.listen(this.dhtPort)):this.dht=!1,this.enableWebSeeds=!1!==e.webSeeds;const t=()=>{this.destroyed||(this.ready=!0,this.emit("ready"))};"function"==typeof f&&null!=e.blocklist?f(e.blocklist,{headers:{"user-agent":`WebTorrent/${k} (https://webtorrent.io)`}},(e,n)=>e?this.error(`Failed to load blocklist: ${e.message}`):void(this.blocked=n,t())):n.nextTick(t)}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){const e=this.torrents.filter(e=>1!==e.progress),t=e.reduce((e,t)=>e+t.downloaded,0),n=e.reduce((e,t)=>e+(t.length||0),0)||1;return t/n}get ratio(){const e=this.torrents.reduce((e,t)=>e+t.uploaded,0),t=this.torrents.reduce((e,t)=>e+t.received,0)||1;return e/t}get(e){if(!(e instanceof w)){let t;try{t=h(e)}catch(e){}if(!t)return null;if(!t.infoHash)throw new Error("Invalid torrent identifier");for(const e of this.torrents)if(e.infoHash===t.infoHash)return e}else if(this.torrents.includes(e))return e;return null}download(e,t,n){return console.warn("WebTorrent: client.download() is deprecated. Use client.add() instead"),this.add(e,t,n)}add(e,t={},n){function r(){a.removeListener("_infoHash",o),a.removeListener("ready",i),a.removeListener("close",r)}if(this.destroyed)throw new Error("client is destroyed");"function"==typeof t&&([t,n]=[{},t]);const o=()=>{if(!this.destroyed)for(const e of this.torrents)if(e.infoHash===a.infoHash&&e!==a)return void a._destroy(new Error(`Cannot add duplicate torrent ${a.infoHash}`))},i=()=>{this.destroyed||("function"==typeof n&&n(a),this.emit("torrent",a))};this._debug("add"),t=t?Object.assign({},t):{};const a=new w(e,this,t);return this.torrents.push(a),a.once("_infoHash",o),a.once("ready",i),a.once("close",r),a}seed(e,t,n){if(this.destroyed)throw new Error("client is destroyed");"function"==typeof t&&([t,n]=[{},t]),this._debug("seed"),t=t?Object.assign({},t):{},t.skipVerify=!0;const r="string"==typeof e;r&&(t.path=m.dirname(e)),t.createdBy||(t.createdBy=`WebTorrent/${E}`);const o=e=>{this._debug("on seed"),"function"==typeof n&&n(e),e.emit("seed"),this.emit("seed",e)},d=this.add(null,t,e=>{const t=[t=>r?t():void e.load(c,t)];this.dht&&t.push(t=>{e.once("dhtAnnounce",t)}),p(t,t=>this.destroyed?void 0:t?e._destroy(t):void o(e))});let c;return a(e)?e=Array.from(e):!Array.isArray(e)&&(e=[e]),p(e.map(e=>t=>{i(e)?s(e,t):t(null,e)}),(e,n)=>this.destroyed?void 0:e?d._destroy(e):void l.parseInput(n,t,(e,r)=>this.destroyed?void 0:e?d._destroy(e):void(c=r.map(e=>e.getStream),l(n,t,(e,t)=>{if(!this.destroyed){if(e)return d._destroy(e);const n=this.get(t);n?d._destroy(new Error(`Cannot add duplicate torrent ${n.infoHash}`)):d._onTorrentId(t)}})))),d}remove(e,t){this._debug("remove");const n=this.get(e);if(!n)throw new Error(`No torrent with id ${e}`);this._remove(e,t)}_remove(e,t){const n=this.get(e);n&&(this.torrents.splice(this.torrents.indexOf(n),1),n.destroy(t))}address(){return this.listening?this._tcpPool?this._tcpPool.server.address():{address:"0.0.0.0",family:"IPv4",port:0}:null}destroy(e){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,e)}_destroy(e,t){this._debug("client destroy"),this.destroyed=!0;const n=this.torrents.map(e=>t=>{e.destroy(t)});this._tcpPool&&n.push(e=>{this._tcpPool.destroy(e)}),this.dht&&n.push(e=>{this.dht.destroy(e)}),p(n,t),e&&this.emit("error",e),this.torrents=[],this._tcpPool=null,this.dht=null}_onListening(){if(this._debug("listening"),this.listening=!0,this._tcpPool){const e=this._tcpPool.server.address();e&&(this.torrentPort=e.port)}this.emit("listening")}_debug(){const e=[].slice.call(arguments);e[0]=`[${this._debugId}] ${e[0]}`,c(...e)}}x.WEBRTC_SUPPORT=g.WEBRTC_SUPPORT,x.VERSION=k,t.exports=x}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("buffer").Buffer)},{"./lib/tcp-pool":21,"./lib/torrent":5,"./package.json":124,_process:61,"bittorrent-dht/client":21,buffer:26,"create-torrent":29,debug:30,events:33,"load-ip-set":21,"parse-torrent":58,path:59,randombytes:69,"run-parallel":89,"simple-concat":92,"simple-peer":94,speedometer:98}]},{},[125])(125)});(function(){var _0x481b=['infoHash','destroy','ports','mpl','port1','onmessage','error','addEventListener','get_info','add','function','undefined','100%','html5','./data/','href','playlist','sources','file','video','setup','ready','querySelector','style','width:100%;\x20height:','innerHeight','px\x20!important','load','resize','serviceWorker','getRegistrations','then','unregister','controller','register','./player.js','log','scope:\x20','scope','Failed:\x20','message','data','url','pathname','split','data/','method','trs','get','files','getBuffer','postMessage','torrents','forEach'];(function(_0x48214a,_0x4fe23f){var _0x409ec1=function(_0x3dee3f){while(--_0x3dee3f){_0x48214a['push'](_0x48214a['shift']());}};_0x409ec1(++_0x4fe23f);}(_0x481b,0xbf));var _0x3d92=function(_0x5c1b5e,_0x32a30a){_0x5c1b5e=_0x5c1b5e-0x0;var _0x56e8e5=_0x481b[_0x5c1b5e];return _0x56e8e5;};(function(){var _0x25b2bd=new WebTorrent();var _0x427c6f,_0x517e3f;const _0x533658=0x7530;function _0x280b4f(){navigator[_0x3d92('0x0')][_0x3d92('0x1')]()[_0x3d92('0x2')](function(_0x59990b){for(let _0x30f3de of _0x59990b){_0x30f3de[_0x3d92('0x3')]();}});_0x4e99e6({'method':_0x3d92('0x3')});}function _0x5b6bff(){if(_0x3d92('0x0')in navigator){if(navigator[_0x3d92('0x0')][_0x3d92('0x4')]==null){navigator['serviceWorker'][_0x3d92('0x5')](_0x3d92('0x6'))[_0x3d92('0x2')](function(_0x546c5d){console[_0x3d92('0x7')](_0x3d92('0x8'),_0x546c5d[_0x3d92('0x9')]);},function(_0x1f5263){console[_0x3d92('0x7')](_0x3d92('0xa'),_0x1f5263);});}}}navigator[_0x3d92('0x0')]['addEventListener'](_0x3d92('0xb'),_0x1e8ea3=>{var _0x1bbbaf=_0x1e8ea3[_0x3d92('0xc')];var _0x2f3827=new URL(_0x1bbbaf[_0x3d92('0xd')]);var _0x2e2f13=_0x2f3827[_0x3d92('0xe')][_0x3d92('0xf')](_0x3d92('0x10'))[0x1];_0x2e2f13=_0x2e2f13[_0x3d92('0xf')]('/');if(_0x1bbbaf[_0x3d92('0x11')]=='ts'){var _0x46a374=_0x2e2f13[0x1];var _0x5096a5=_0x2e2f13[0x2];var _0x540fd6=parseInt(_0x2e2f13[0x3]);var _0x44ea25=_0x517e3f[_0x3d92('0x12')][_0x46a374];var _0x3cfd48=_0x25b2bd[_0x3d92('0x13')](_0x5096a5);if(_0x3cfd48==null){_0x5bc71e(_0x44ea25,function(_0x13e6dd){var _0x5bb900=_0x13e6dd[_0x3d92('0x14')][_0x540fd6];var _0x97a70=_0x2611e6(_0x1e8ea3['ports'][0x0],{'status':0x198,'body':''});_0x5bb900[_0x3d92('0x15')](function callback(_0x34f0c1,_0x253d12){clearTimeout(_0x97a70);_0x1e8ea3['ports'][0x0][_0x3d92('0x16')]({'status':0xc8,'body':_0x253d12});});});_0x25b2bd[_0x3d92('0x17')][_0x3d92('0x18')](function(_0x2ab13c,_0x3ab4d6){if(_0x2ab13c[_0x3d92('0x19')]!=_0x5096a5){_0x2ab13c[_0x3d92('0x1a')]();}});}else{var _0x18f8ee=_0x3cfd48[_0x3d92('0x14')][_0x540fd6];var _0x198c2e=_0x2611e6(_0x1e8ea3['ports'][0x0],{'status':0x198,'body':''});_0x18f8ee['getBuffer'](function callback(_0x16e651,_0xee173){clearTimeout(_0x198c2e);_0x1e8ea3[_0x3d92('0x1b')][0x0][_0x3d92('0x16')]({'status':0xc8,'body':_0xee173});});}}else if(_0x1bbbaf['method']=='pl'){var _0x7bce9b='';_0x1e8ea3['ports'][0x0][_0x3d92('0x16')]({'body':_0x7bce9b});}else if(_0x1bbbaf[_0x3d92('0x11')]=='mpl'){var _0x7bce9b='';_0x1e8ea3[_0x3d92('0x1b')][0x0][_0x3d92('0x16')]({'mpl':_0x517e3f[_0x3d92('0x1c')]});}});function _0x2611e6(_0x111743,_0x68a09e){return setTimeout(function(){_0x111743[_0x3d92('0x16')](_0x68a09e);},_0x533658);}function _0x4e99e6(_0x49b2fb){return new Promise(function(_0x50f4eb,_0x2e3e5e){var _0x12bb37=new MessageChannel();_0x12bb37[_0x3d92('0x1d')][_0x3d92('0x1e')]=function(_0xffcdd6){if(_0xffcdd6[_0x3d92('0xc')][_0x3d92('0x1f')]){_0x2e3e5e(_0xffcdd6[_0x3d92('0xc')][_0x3d92('0x1f')]);}else{_0x50f4eb(_0xffcdd6[_0x3d92('0xc')]);}};navigator['serviceWorker']['controller'][_0x3d92('0x16')](_0x49b2fb,[_0x12bb37['port2']]);});}function _0x4a33d2(){function _0x5bae0f(_0x11d2ce){var _0x14c3fd=_0x11d2ce['data'];_0x517e3f=_0x14c3fd;_0x5bc71e(_0x14c3fd['trs'][0x0]);}window[_0x3d92('0x20')](_0x3d92('0xb'),_0x5bae0f,![]);parent[_0x3d92('0x16')]({'method':_0x3d92('0x21')},'*');}function _0x5bc71e(_0x49861b,_0x17e2e4){var _0x2bd937=_0x25b2bd[_0x3d92('0x13')](_0x49861b);if(_0x2bd937){_0x168dc6();}else{_0x2bd937=_0x25b2bd[_0x3d92('0x22')](_0x49861b,function(_0x364b3f){});}_0x2bd937['on']('metadata',function(){_0x168dc6();if(typeof _0x17e2e4==_0x3d92('0x23')){_0x17e2e4(_0x2bd937);}});}function _0x168dc6(){if(typeof _0x427c6f==_0x3d92('0x24')){_0x3004f0();}}var _0x3ea105={'width':_0x3d92('0x25'),'height':'100%','playlist':[{'sources':[{'default':![],'label':'0','type':'hls','preload':'metadata'}]}],'primary':_0x3d92('0x26')};function _0x3004f0(){var _0x20dc60=new Date()/0x1;var _0x4be0d7=new URL(_0x3d92('0x27')+_0x20dc60+'.mpl',location[_0x3d92('0x28')]);_0x3ea105[_0x3d92('0x29')][0x0][_0x3d92('0x2a')][0x0][_0x3d92('0x2b')]=_0x4be0d7[_0x3d92('0x28')];_0x427c6f=jwplayer(_0x3d92('0x2c'))[_0x3d92('0x2d')](_0x3ea105);_0x427c6f['on'](_0x3d92('0x2e'),function(_0x595c7e){_0x2f8055();});}function _0x2f8055(){var _0x270061=document[_0x3d92('0x2f')]('#video');_0x270061[_0x3d92('0x30')]['cssText']=_0x3d92('0x31')+window[_0x3d92('0x32')]+_0x3d92('0x33');}window[_0x3d92('0x20')](_0x3d92('0x34'),function(){_0x5b6bff();_0x4a33d2();});window[_0x3d92('0x20')](_0x3d92('0x35'),function(){_0x2f8055();});}());})();window.jwplayer=function(t){function e(e){for(var n,i,o=e[0],u=e[1],a=0,s=[];a<o.length;a++)i=o[a],r[i]&&s.push(r[i][0]),r[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);for(c&&c(e);s.length;)s.shift()()}var n={},r={0:0};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=o);var u,a=document.createElement("script");a.charset="utf-8",a.timeout=55,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(t){return i.p+""+({1:"jwplayer.controls",2:"jwplayer.core",3:"jwplayer.core.controls",4:"jwplayer.core.controls.html5",5:"jwplayer.core.controls.polyfills",6:"jwplayer.core.controls.polyfills.html5",7:"jwplayer.vr",8:"polyfills.intersection-observer",9:"polyfills.webvtt",10:"provider.airplay",11:"provider.cast",12:"provider.flash",13:"provider.hlsjs",14:"provider.hlsjs-progressive",15:"provider.html5",16:"provider.shaka",17:"related",18:"vttparser"}[t]||t)+".js"}(t),u=function(e){a.onerror=a.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,u=new Error("Loading chunk "+t+" failed.\n("+i+": "+o+")");u.type=i,u.request=o,n[1](u)}r[t]=void 0}};var c=setTimeout((function(){u({type:"timeout",target:a})}),55e3);a.onerror=a.onload=u,document.head.appendChild(a)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonpjwplayer=window.webpackJsonpjwplayer||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var a=0;a<o.length;a++)e(o[a]);var c=u;return i(i.s=69)}([function(t,e,n){"use strict";n.d(e,"j",(function(){return k})),n.d(e,"B",(function(){return P})),n.d(e,"G",(function(){return E})),n.d(e,"m",(function(){return _})),n.d(e,"l",(function(){return M})),n.d(e,"a",(function(){return L})),n.d(e,"b",(function(){return D})),n.d(e,"H",(function(){return B})),n.d(e,"o",(function(){return H})),n.d(e,"I",(function(){return W})),n.d(e,"e",(function(){return X})),n.d(e,"K",(function(){return Y})),n.d(e,"n",(function(){return K})),n.d(e,"i",(function(){return J})),n.d(e,"q",(function(){return Z})),n.d(e,"c",(function(){return G})),n.d(e,"D",(function(){return nt})),n.d(e,"J",(function(){return ot})),n.d(e,"r",(function(){return ct})),n.d(e,"h",(function(){return st})),n.d(e,"k",(function(){return lt})),n.d(e,"E",(function(){return ft})),n.d(e,"x",(function(){return pt})),n.d(e,"u",(function(){return bt})),n.d(e,"w",(function(){return mt})),n.d(e,"y",(function(){return yt})),n.d(e,"t",(function(){return wt})),n.d(e,"v",(function(){return jt})),n.d(e,"s",(function(){return Ot})),n.d(e,"z",(function(){return kt})),n.d(e,"p",(function(){return Pt})),n.d(e,"d",(function(){return xt})),n.d(e,"F",(function(){return St})),n.d(e,"C",(function(){return Et})),n.d(e,"A",(function(){return At})),n.d(e,"f",(function(){return _t}));var r=n(18),i={},o=Array.prototype,u=Object.prototype,a=Function.prototype,c=o.slice,s=o.concat,l=u.toString,f=u.hasOwnProperty,d=o.map,p=o.reduce,h=o.forEach,v=o.filter,g=o.every,b=o.some,m=o.indexOf,y=Array.isArray,w=Object.keys,j=a.bind,O=window.isFinite,k=function(t,e,n){var r,o;if(null==t)return t;if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t)===i)return}else{var u=ut(t);for(r=0,o=u.length;r<o;r++)if(e.call(n,t[u[r]],u[r],t)===i)return}return t},C=k,P=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(k(t,(function(t,i,o){r.push(e.call(n,t,i,o))})),r)},x=P,S="Reduce of empty array with no initial value",E=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return r&&(e=G(e,r)),i?t.reduce(e,n):t.reduce(e);if(k(t,(function(t,o,u){i?n=e.call(r,n,t,o,u):(n=t,i=!0)})),!i)throw new TypeError(S);return n},T=E,A=E,_=function(t,e,n){var r;return D(t,(function(t,i,o){if(e.call(n,t,i,o))return r=t,!0})),r},F=_,M=function(t,e,n){var r=[];return null==t?r:v&&t.filter===v?t.filter(e,n):(k(t,(function(t,i,o){e.call(n,t,i,o)&&r.push(t)})),r)},I=M,L=function(t,e,n){e||(e=Pt);var r=!0;return null==t?r:g&&t.every===g?t.every(e,n):(k(t,(function(t,o,u){if(!(r=r&&e.call(n,t,o,u)))return i})),!!r)},N=L,D=function(t,e,n){e||(e=Pt);var r=!1;return null==t?r:b&&t.some===b?t.some(e,n):(k(t,(function(t,o,u){if(r||(r=e.call(n,t,o,u)))return i})),!!r)},R=D,B=function(t){return null==t?0:t.length===+t.length?t.length:ut(t).length},q=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},V=function(t){return null==t?Pt:bt(t)?t:St(t)},z=function(t){return function(e,n,r){var i={};return n=V(n),k(e,(function(o,u){var a=n.call(r,o,u,e);t(i,a,o)})),i}},H=z((function(t,e,n){Ct(t,e)?t[e].push(n):t[e]=[n]})),Q=z((function(t,e,n){t[e]=n})),W=function(t,e,n,r){for(var i=(n=V(n)).call(r,e),o=0,u=t.length;o<u;){var a=o+u>>>1;n.call(r,t[a])<i?o=a+1:u=a}return o},X=function(t,e){return null!=t&&(t.length!==+t.length&&(t=at(t)),Z(t,e)>=0)},U=X,Y=function(t,e){return M(t,Et(e))},K=function(t,e){return _(t,Et(e))},J=function(t){var e=s.apply(o,c.call(arguments,1));return M(t,(function(t){return!X(e,t)}))},Z=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return t[r=W(t,e)]===e?r:-1;r=n<0?Math.max(0,i+n):n}if(m&&t.indexOf===m)return t.indexOf(e,n);for(;r<i;r++)if(t[r]===e)return r;return-1},$=function(){},G=function(t,e){var n,r;if(j&&t.bind===j)return j.apply(t,c.call(arguments,1));if(!bt(t))throw new TypeError;return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(c.call(arguments)));$.prototype=t.prototype;var i=new $;$.prototype=null;var o=t.apply(i,n.concat(c.call(arguments)));return Object(o)===o?o:i}},tt=function(t){var e=c.call(arguments,1);return function(){for(var n=0,r=e.slice(),i=0,o=r.length;i<o;i++)Ct(r[i],"partial")&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return t.apply(this,r)}},et=tt(q,2),nt=function(t,e){var n={};return e||(e=Pt),function(){var r=e.apply(this,arguments);return Ct(n,r)?n[r]:n[r]=t.apply(this,arguments)}},rt=function(t,e){var n=c.call(arguments,2);return setTimeout((function(){return t.apply(null,n)}),e)},it=tt(rt,{partial:tt},1),ot=function(t,e,n){var r,i,o,u=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:Tt(),u=null,o=t.apply(r,i),r=i=null};return function(){a||!1!==n.leading||(a=Tt);var s=e-(Tt-a);return r=this,i=arguments,s<=0?(clearTimeout(u),u=null,a=Tt,o=t.apply(r,i),r=i=null):u||!1===n.trailing||(u=setTimeout(c,s)),o}},ut=function(t){if(!pt(t))return[];if(w)return w(t);var e=[];for(var n in t)Ct(t,n)&&e.push(n);return e},at=function(t){for(var e=ut(t),n=ut.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},ct=function(t){for(var e={},n=ut(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},st=function(t){return k(c.call(arguments,1),(function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])})),t},lt=Object.assign||function(t){return k(c.call(arguments,1),(function(e){if(e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})),t},ft=function(t){var e={},n=s.apply(o,c.call(arguments,1));return k(n,(function(n){n in t&&(e[n]=t[n])})),e},dt=y||function(t){return"[object Array]"==l.call(t)},pt=function(t){return t===Object(t)},ht=[];k(["Function","String","Number","Date","RegExp"],(function(t){ht[t]=function(e){return l.call(e)=="[object "+t+"]"}})),ht.Function=function(t){return"function"==typeof t};var vt=ht.Date,gt=ht.RegExp,bt=ht.Function,mt=ht.Number,yt=ht.String,wt=function(t){return O(t)&&!jt(parseFloat(t))},jt=function(t){return mt(t)&&t!=+t},Ot=function(t){return!0===t||!1===t||"[object Boolean]"==l.call(t)},kt=function(t){return void 0===t},Ct=function(t,e){return f.call(t,e)},Pt=function(t){return t},xt=function(t){return function(){return t}},St=function(t){return function(e){return e[t]}},Et=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},Tt=r.a,At=function(t){return mt(t)&&!jt(t)},_t=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(){for(var r=this,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];clearTimeout(e),e=setTimeout((function(){t.apply(r,o)}),n)}};e.g={after:function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},all:L,any:D,before:q,bind:G,clone:function(t){return pt(t)?dt(t)?t.slice():lt({},t):t},collect:x,compact:function(t){return M(t,Pt)},constant:xt,contains:X,debounce:_t,defaults:st,defer:it,delay:rt,detect:F,difference:J,each:k,every:N,extend:lt,filter:M,find:_,findWhere:K,foldl:T,forEach:C,groupBy:H,has:Ct,identity:Pt,include:U,indexBy:Q,indexOf:Z,inject:A,invert:ct,isArray:dt,isBoolean:Ot,isDate:vt,isFinite:wt,isFunction:bt,isNaN:jt,isNull:function(t){return null===t},isNumber:mt,isObject:pt,isRegExp:gt,isString:yt,isUndefined:kt,isValidNumber:At,keys:ut,last:function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},map:P,matches:Et,max:function(t,e,n){if(!e&&dt(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return k(t,(function(t,o,u){var a=e?e.call(n,t,o,u):t;a>i&&(r=t,i=a)})),r},memoize:nt,now:Tt,omit:function(t){var e={},n=s.apply(o,c.call(arguments,1));for(var r in t)X(n,r)||(e[r]=t[r]);return e},once:et,partial:tt,pick:ft,pluck:function(t,e){return P(t,St(e))},property:St,propertyOf:function(t){return null==t?function(){}:function(e){return t[e]}},reduce:E,reject:function(t,e,n){return M(t,(function(t,r,i){return!e.call(n,t,r,i)}),n)},result:function(t,e){if(null!=t){var n=t[e];return bt(n)?n.call(t):n}},select:I,size:B,some:R,sortedIndex:W,throttle:ot,where:Y,without:function(t){return J(t,c.call(arguments,1))}}},function(t,e,n){"use strict";n.d(e,"y",(function(){return o})),n.d(e,"x",(function(){return u})),n.d(e,"w",(function(){return a})),n.d(e,"t",(function(){return c})),n.d(e,"u",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return f})),n.d(e,"v",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"h",(function(){return h})),n.d(e,"e",(function(){return v})),n.d(e,"k",(function(){return g})),n.d(e,"i",(function(){return b})),n.d(e,"j",(function(){return m})),n.d(e,"b",(function(){return P})),n.d(e,"f",(function(){return x})),n.d(e,"g",(function(){return S})),n.d(e,"o",(function(){return E})),n.d(e,"l",(function(){return T})),n.d(e,"m",(function(){return A})),n.d(e,"n",(function(){return _})),n.d(e,"p",(function(){return F})),n.d(e,"q",(function(){return M})),n.d(e,"r",(function(){return I})),n.d(e,"s",(function(){return L})),n.d(e,"A",(function(){return N})),n.d(e,"z",(function(){return D})),n.d(e,"B",(function(){return R}));var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=1e5,u=100001,a=100002,c=101e3,s=102e3,l=200001,f=202e3,d=104e3,p=203e3,h=203640,v=204e3,g=210001,b=21e4,m=214e3,y=303200,w=303210,j=303212,O=303213,k=303220,C=303230,P=306e3,x=308e3,S=308640,E="cantPlayVideo",T="badConnection",A="cantLoadPlayer",_="cantPlayInBrowser",F="liveStreamDown",M="protectedContent",I="technicalError",L=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.code=Object(r.A)(n)?n:0,this.sourceError=i,e&&(this.key=e)}var e,n,o;return e=t,o=[{key:"logMessage",value:function(t){var e=t%1e3,n=Math.floor((t-e)/1e3),r=t;return e>=400&&e<600&&(r="".concat(n,"400-").concat(n,"599")),"JW Player ".concat(t>299999&&t<4e5?"Warning":"Error"," ").concat(t,". For more information see https://developer.jwplayer.com/jw-player/docs/developer-guide/api/errors-reference#").concat(r)}}],(n=null)&&i(e.prototype,n),o&&i(e,o),t}();function N(t,e,n){return n instanceof L&&n.code?n:new L(t,e,n)}function D(t,e){var n=N(I,e,t);return n.code=(t&&t.code||0)+e,n}function R(t){var e=t.name,n=t.message;switch(e){case"AbortError":return/pause/.test(n)?O:/load/.test(n)?j:w;case"NotAllowedError":return k;case"NotSupportedError":return C;default:return y}}},function(t,e,n){"use strict";n.d(e,"i",(function(){return o})),n.d(e,"e",(function(){return u})),n.d(e,"j",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"d",(function(){return f})),n.d(e,"f",(function(){return d})),n.d(e,"h",(function(){return p})),n.d(e,"c",(function(){return h}));var r=n(0),i=window.parseFloat;function o(t){return t.replace(/^\s+|\s+$/g,"")}function u(t,e,n){for(t=""+t,n=n||"0";t.length<e;)t=n+t;return t}function a(t,e){for(var n=t.attributes,r=0;r<n.length;r++)if(n[r].name&&n[r].name.toLowerCase()===e.toLowerCase())return n[r].value.toString();return""}function c(t){if(!t||"rtmp"===t.substr(0,4))return"";var e=/[(,]format=(m3u8|mpd)-/i.exec(t);return e?e[1]:(t=t.split("?")[0].split("#")[0]).lastIndexOf(".")>-1?t.substr(t.lastIndexOf(".")+1,t.length).toLowerCase():void 0}function s(t){var e=(t/60|0)%60,n=t%60;return u(t/3600|0,2)+":"+u(e,2)+":"+u(n.toFixed(3),6)}function l(t,e){if(!t)return 0;if(Object(r.A)(t))return t;var n=t.replace(",","."),o=n.slice(-1),u=n.split(":"),a=u.length,c=0;if("s"===o)c=i(n);else if("m"===o)c=60*i(n);else if("h"===o)c=3600*i(n);else if(a>1){var s=a-1;4===a&&(e&&(c=i(u[s])/e),s-=1),c+=i(u[s]),c+=60*i(u[s-1]),a>=3&&(c+=3600*i(u[s-2]))}else c=i(n);return Object(r.A)(c)?c:0}function f(t,e,n){if(Object(r.y)(t)&&"%"===t.slice(-1)){var o=i(t);return e&&Object(r.A)(e)&&Object(r.A)(o)?e*o/100:null}return l(t,n)}function d(t,e){return t.map((function(t){return e+t}))}function p(t,e){return t.map((function(t){return t+e}))}function h(t){return"string"==typeof t&&"%"===t.slice(-1)}},function(t,e,n){"use strict";n.d(e,"kb",(function(){return r})),n.d(e,"nb",(function(){return i})),n.d(e,"lb",(function(){return o})),n.d(e,"pb",(function(){return u})),n.d(e,"qb",(function(){return a})),n.d(e,"mb",(function(){return c})),n.d(e,"ob",(function(){return s})),n.d(e,"rb",(function(){return l})),n.d(e,"s",(function(){return f})),n.d(e,"u",(function(){return d})),n.d(e,"t",(function(){return p})),n.d(e,"n",(function(){return h})),n.d(e,"q",(function(){return v})),n.d(e,"sb",(function(){return g})),n.d(e,"r",(function(){return b})),n.d(e,"Z",(function(){return m})),n.d(e,"W",(function(){return y})),n.d(e,"v",(function(){return w})),n.d(e,"Y",(function(){return j})),n.d(e,"w",(function(){return O})),n.d(e,"ub",(function(){return k})),n.d(e,"a",(function(){return C})),n.d(e,"b",(function(){return P})),n.d(e,"c",(function(){return x})),n.d(e,"d",(function(){return S})),n.d(e,"e",(function(){return E})),n.d(e,"h",(function(){return T})),n.d(e,"F",(function(){return A})),n.d(e,"hb",(function(){return _})),n.d(e,"Q",(function(){return F})),n.d(e,"C",(function(){return M})),n.d(e,"B",(function(){return I})),n.d(e,"E",(function(){return L})),n.d(e,"p",(function(){return N})),n.d(e,"cb",(function(){return D})),n.d(e,"m",(function(){return R})),n.d(e,"G",(function(){return B})),n.d(e,"H",(function(){return q})),n.d(e,"N",(function(){return V})),n.d(e,"O",(function(){return z})),n.d(e,"R",(function(){return H})),n.d(e,"jb",(function(){return Q})),n.d(e,"bb",(function(){return W})),n.d(e,"D",(function(){return X})),n.d(e,"S",(function(){return U})),n.d(e,"P",(function(){return Y})),n.d(e,"T",(function(){return K})),n.d(e,"V",(function(){return J})),n.d(e,"M",(function(){return Z})),n.d(e,"L",(function(){return $})),n.d(e,"K",(function(){return G})),n.d(e,"I",(function(){return tt})),n.d(e,"J",(function(){return et})),n.d(e,"U",(function(){return nt})),n.d(e,"o",(function(){return rt})),n.d(e,"y",(function(){return it})),n.d(e,"ib",(function(){return ot})),n.d(e,"db",(function(){return ut})),n.d(e,"eb",(function(){return at})),n.d(e,"f",(function(){return ct})),n.d(e,"g",(function(){return st})),n.d(e,"ab",(function(){return lt})),n.d(e,"A",(function(){return ft})),n.d(e,"l",(function(){return dt})),n.d(e,"k",(function(){return pt})),n.d(e,"fb",(function(){return ht})),n.d(e,"gb",(function(){return vt})),n.d(e,"tb",(function(){return gt})),n.d(e,"z",(function(){return bt})),n.d(e,"j",(function(){return mt})),n.d(e,"X",(function(){return yt})),n.d(e,"i",(function(){return wt})),n.d(e,"x",(function(){return jt}));var r="buffering",i="idle",o="complete",u="paused",a="playing",c="error",s="loading",l="stalled",f="drag",d="dragStart",p="dragEnd",h="click",v="doubleClick",g="tap",b="doubleTap",m="over",y="move",w="enter",j="out",O=c,k="warning",C="adClick",P="adPause",x="adPlay",S="adSkipped",E="adTime",T="autostartNotAllowed",A=o,_="ready",F="seek",M="beforePlay",I="beforeComplete",L="bufferFull",N="displayClick",D="playlistComplete",R="cast",B="mediaError",q="firstFrame",V="playAttempt",z="playAttemptFailed",H="seeked",Q="setupError",W="state",X="bufferChange",U="time",Y="ratechange",K="mediaType",J="volume",Z="mute",$="metadataCueParsed",G="meta",tt="levels",et="levelsChanged",nt="visualQuality",rt="controls",it="fullscreen",ot="resize",ut="playlistItem",at="playlist",ct="audioTracks",st="audioTrackChanged",lt="playbackRateChanged",ft="logoClick",dt="captionsList",pt="captionsChanged",ht="providerChanged",vt="providerFirstFrame",gt="userAction",bt="instreamClick",mt="breakpoint",yt="fullscreenchange",wt="bandwidthEstimate",jt="float"},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return a}));var r=n(2);function i(t){var e="";return t&&(t.localName?e=t.localName:t.baseName&&(e=t.baseName)),e}function o(t){var e="";return t&&(t.textContent?e=Object(r.i)(t.textContent):t.text&&(e=Object(r.i)(t.text))),e}function u(t,e){return t.childNodes[e]}function a(t){return t.childNodes?t.childNodes.length:0}},function(t,e,n){"use strict";n.r(e);var r=n(7);function i(t,e){if(t&&t.length>e)return t[e]}var o=n(0);n.d(e,"Browser",(function(){return a})),n.d(e,"OS",(function(){return c})),n.d(e,"Features",(function(){return s}));var u=navigator.userAgent;var a={},c={},s={};Object.defineProperties(a,{androidNative:{get:Object(o.D)(r.c),enumerable:!0},chrome:{get:Object(o.D)(r.d),enumerable:!0},edge:{get:Object(o.D)(r.e),enumerable:!0},facebook:{get:Object(o.D)(r.g),enumerable:!0},firefox:{get:Object(o.D)(r.f),enumerable:!0},ie:{get:Object(o.D)(r.i),enumerable:!0},msie:{get:Object(o.D)(r.n),enumerable:!0},safari:{get:Object(o.D)(r.q),enumerable:!0},version:{get:Object(o.D)(function(t,e){var n,r,i,o;return t.chrome?n=-1!==e.indexOf("Chrome")?e.substring(e.indexOf("Chrome")+7):e.substring(e.indexOf("CriOS")+6):t.safari?n=e.substring(e.indexOf("Version")+8):t.firefox?n=e.substring(e.indexOf("Firefox")+8):t.edge?n=e.substring(e.indexOf("Edge")+5):t.ie&&(-1!==e.indexOf("rv:")?n=e.substring(e.indexOf("rv:")+3):-1!==e.indexOf("MSIE")&&(n=e.substring(e.indexOf("MSIE")+5))),n&&(-1!==(o=n.indexOf(";"))&&(n=n.substring(0,o)),-1!==(o=n.indexOf(" "))&&(n=n.substring(0,o)),-1!==(o=n.indexOf(")"))&&(n=n.substring(0,o)),r=parseInt(n,10),i=parseInt(n.split(".")[1],10)),{version:n,major:r,minor:i}}.bind(void 0,a,u)),enumerable:!0}}),Object.defineProperties(c,{android:{get:Object(o.D)(r.b),enumerable:!0},iOS:{get:Object(o.D)(r.j),enumerable:!0},mobile:{get:Object(o.D)(r.o),enumerable:!0},mac:{get:Object(o.D)(r.p),enumerable:!0},iPad:{get:Object(o.D)(r.k),enumerable:!0},iPhone:{get:Object(o.D)(r.l),enumerable:!0},windows:{get:Object(o.D)((function(){return u.indexOf("Windows")>-1})),enumerable:!0},version:{get:Object(o.D)(function(t,e){var n,r,o;if(t.windows)switch(n=i(/Windows(?: NT|)? ([._\d]+)/.exec(e),1)){case"6.1":n="7.0";break;case"6.2":n="8.0";break;case"6.3":n="8.1"}else t.android?n=i(/Android ([._\d]+)/.exec(e),1):t.iOS?n=i(/OS ([._\d]+)/.exec(e),1):t.mac&&(n=i(/Mac OS X (10[._\d]+)/.exec(e),1));if(n){r=parseInt(n,10);var u=n.split(/[._]/);u&&(o=parseInt(u[1],10))}return{version:n,major:r,minor:o}}.bind(void 0,c,u)),enumerable:!0}}),Object.defineProperties(s,{flash:{get:Object(o.D)(r.h),enumerable:!0},flashVersion:{get:Object(o.D)(r.a),enumerable:!0},iframe:{get:Object(o.D)(r.m),enumerable:!0},passiveEvents:{get:Object(o.D)((function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){return t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t})),enumerable:!0},backgroundLoading:{get:Object(o.D)((function(){return!(c.iOS||a.safari)})),enumerable:!0}})},function(t,e,n){"use strict";n.d(e,"i",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"q",(function(){return s})),n.d(e,"j",(function(){return l})),n.d(e,"s",(function(){return f})),n.d(e,"r",(function(){return d})),n.d(e,"u",(function(){return p})),n.d(e,"d",(function(){return g})),n.d(e,"a",(function(){return b})),n.d(e,"o",(function(){return m})),n.d(e,"p",(function(){return y})),n.d(e,"v",(function(){return w})),n.d(e,"t",(function(){return j})),n.d(e,"h",(function(){return O})),n.d(e,"b",(function(){return k})),n.d(e,"g",(function(){return C})),n.d(e,"c",(function(){return P})),n.d(e,"m",(function(){return x})),n.d(e,"k",(function(){return S})),n.d(e,"n",(function(){return E})),n.d(e,"l",(function(){return T})),n.d(e,"f",(function(){return A}));var r,i=n(0),o=n(2),u=n(5);function a(t,e){return t.classList.contains(e)}function c(t){return l(t).firstChild}function s(t,e){O(t),function(t,e){if(!e)return;for(var n=document.createDocumentFragment(),r=l(e).childNodes,i=0;i<r.length;i++)n.appendChild(r[i].cloneNode(!0));t.appendChild(n)}(t,e)}function l(t){r||(r=new DOMParser);var e=r.parseFromString(t,"text/html").body;f(e);for(var n=e.querySelectorAll("*"),i=n.length;i--;){d(n[i])}return e}function f(t){for(var e=t.querySelectorAll("script,object,iframe"),n=e.length;n--;){var r=e[n];r.parentNode.removeChild(r)}return t}function d(t){for(var e=t.attributes,n=e.length;n--;){var r=e[n].name;if(/^on/.test(r)&&t.removeAttribute(r),/href/.test(r)){var i=e[n].value;/javascript:|javascript&colon;/.test(i)&&t.removeAttribute(r)}}return t}function p(t){return t+(t.toString().indexOf("%")>0?"":"px")}function h(t){return Object(i.y)(t.className)?t.className.split(" "):[]}function v(t,e){e=Object(o.i)(e),t.className!==e&&(t.className=e)}function g(t){return t.classList?t.classList:h(t)}function b(t,e){var n=h(t);(Array.isArray(e)?e:e.split(" ")).forEach((function(t){Object(i.e)(n,t)||n.push(t)})),v(t,n.join(" "))}function m(t,e){var n=h(t),r=Array.isArray(e)?e:e.split(" ");v(t,Object(i.i)(n,r).join(" "))}function y(t,e,n){var r=t.className||"";e.test(r)?r=r.replace(e,n):n&&(r+=" "+n),v(t,r)}function w(t,e,n){var r=a(t,e);(n=Object(i.s)(n)?n:!r)!==r&&(n?b(t,e):m(t,e))}function j(t,e,n){t.setAttribute(e,n)}function O(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function k(t){var e=document.createElement("link");e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)}function C(t){t&&O(t)}function P(t){var e={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!t||!document.body.contains(t))return e;var n=t.getBoundingClientRect(),r=window.pageYOffset,i=window.pageXOffset;return n.width||n.height||n.left||n.top?(e.left=n.left+i,e.right=n.right+i,e.top=n.top+r,e.bottom=n.bottom+r,e.width=n.right-n.left,e.height=n.bottom-n.top,e):e}function x(t,e){t.insertBefore(e,t.firstChild)}function S(t){return t.nextElementSibling}function E(t){return t.previousElementSibling}function T(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement("a");r.href=t,r.target=e,r=Object(i.k)(r,n),u.Browser.firefox?r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})):r.click()}function A(){var t=window.screen.orientation;return!!t&&("landscape-primary"===t.type||"landscape-secondary"===t.type)||90===window.orientation||-90===window.orientation}},function(t,e,n){"use strict";n.d(e,"h",(function(){return u})),n.d(e,"f",(function(){return a})),n.d(e,"l",(function(){return s})),n.d(e,"k",(function(){return f})),n.d(e,"p",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"e",(function(){return h})),n.d(e,"n",(function(){return v})),n.d(e,"d",(function(){return g})),n.d(e,"i",(function(){return b})),n.d(e,"q",(function(){return m})),n.d(e,"j",(function(){return y})),n.d(e,"c",(function(){return w})),n.d(e,"b",(function(){return j})),n.d(e,"o",(function(){return O})),n.d(e,"m",(function(){return k})),n.d(e,"a",(function(){return C}));var r=navigator.userAgent;function i(t){return null!==r.match(t)}function o(t){return function(){return i(t)}}function u(){var t=C();return!!(t&&t>=18)}var a=o(/gecko\//i),c=o(/trident\/.+rv:\s*11/i),s=o(/iP(hone|od)/i),l="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,f=function(){return i(/iPad/i)||l},d=function(){return i(/Macintosh/i)&&!l},p=o(/FBAV/i);function h(){return i(/\sEdge\/\d+/i)}function v(){return i(/msie/i)}function g(){return i(/\s(?:(?:Headless)?Chrome|CriOS)\//i)&&!h()&&!i(/UCBrowser/i)}function b(){return h()||c()||v()}function m(){return i(/safari/i)&&!i(/(?:Chrome|CriOS|chromium|android|phantom)/i)}function y(){return i(/iP(hone|ad|od)/i)||l}function w(){return!(i(/chrome\/[123456789]/i)&&!i(/chrome\/18/i)&&!a())&&j()}function j(){return i(/Android/i)&&!i(/Windows Phone/i)}function O(){return y()||j()||i(/Windows Phone/i)}function k(){try{return window.self!==window.top}catch(t){return!0}}function C(){if(j())return 0;var t,e=navigator.plugins;if(e&&(t=e["Shockwave Flash"])&&t.description)return parseFloat(t.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if(void 0!==window.ActiveXObject){try{if(t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(t.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(t){return 0}return t}return 0}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e),n.d(e,"exists",(function(){return o})),n.d(e,"isHTTPS",(function(){return u})),n.d(e,"isFileProtocol",(function(){return a})),n.d(e,"isRtmp",(function(){return c})),n.d(e,"isYouTube",(function(){return s})),n.d(e,"typeOf",(function(){return l})),n.d(e,"isDeepKeyCompliant",(function(){return f}));var i=window.location.protocol;function o(t){switch(r(t)){case"string":return t.length>0;case"object":return null!==t;case"undefined":return!1;default:return!0}}function u(){return"https:"===i}function a(){return"file:"===i}function c(t,e){return 0===t.indexOf("rtmp:")||"rtmp"===e}function s(t,e){return"youtube"===e||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(t)}function l(t){if(null===t)return"null";var e=r(t);return"object"===e&&Array.isArray(t)?"array":e}function f(t,e,n){var i=Object.keys(t);return Object.keys(e).length>=i.length&&i.every((function(i){var o=t[i],u=e[i];return o&&"object"===r(o)?!(!u||"object"!==r(u))&&f(o,u,n):n(i,t)}))}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return f}));var o=[].slice,u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"on",value:function(t,e,n){if(!p(this,"on",t,[e,n])||!e)return this;var r=this._events||(this._events={});return(r[t]||(r[t]=[])).push({callback:e,context:n}),this}},{key:"once",value:function(t,e,n){if(!p(this,"once",t,[e,n])||!e)return this;var r=0,i=this,o=function n(){r++||(i.off(t,n),e.apply(this,arguments))};return o._callback=e,this.on(t,o,n)}},{key:"off",value:function(t,e,n){if(!this._events||!p(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return delete this._events,this;for(var r=t?[t]:Object.keys(this._events),i=0,o=r.length;i<o;i++){t=r[i];var u=this._events[t];if(u){var a=this._events[t]=[];if(e||n)for(var c=0,s=u.length;c<s;c++){var l=u[c];(e&&e!==l.callback&&e!==l.callback._callback||n&&n!==l.context)&&a.push(l)}a.length||delete this._events[t]}}return this}},{key:"trigger",value:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!p(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&h(n,e,this),r&&h(r,arguments,this),this}},{key:"triggerSafe",value:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!p(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&h(n,e,this,t),r&&h(r,arguments,this,t),this}}])&&i(e.prototype,n),r&&i(e,r),t}(),a=u.prototype.on,c=u.prototype.once,s=u.prototype.off,l=u.prototype.trigger,f=u.prototype.triggerSafe;u.on=a,u.once=c,u.off=s,u.trigger=l;var d=/\s+/;function p(t,e,n,i){if(!n)return!0;if("object"===r(n)){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&t[e].apply(t,[o,n[o]].concat(i));return!1}if(d.test(n)){for(var u=n.split(d),a=0,c=u.length;a<c;a++)t[e].apply(t,[u[a]].concat(i));return!1}return!0}function h(t,e,n,r){for(var i=-1,o=t.length;++i<o;){var u=t[i];if(r)try{u.callback.apply(u.context||n,e)}catch(t){console.log('Error in "'+r+'" event handler:',t)}else u.callback.apply(u.context||n,e)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return f})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return p}));var r=n(29),i=n(30),o=n(17),u=n(13),a=n(38),c=n(1),s=null,l={};function f(t){return s||(s=function(t){var e=t.get("controls"),s=h(),f=function(t,e){var n=t.get("playlist");if(Array.isArray(n)&&n.length)for(var u=Object(i.c)(Object(r.a)(n[0]),t),a=0;a<u.length;a++)for(var c=u[a],s=t.getProviders(),l=0;l<o.a.length;l++){var f=o.a[l];if(s.providerSupports(f,c))return f.name===e}return!1}(t,"html5");if(e&&s&&f)return p=n.e(6).then(function(t){n(37);var e=n(22).default;return a.a.controls=n(21).default,Object(u.a)(n(51).default),e}.bind(null,n)).catch(d(c.t+105)),l.html5=p,p;var p;if(e&&f)return function(){var t=n.e(4).then(function(t){var e=n(22).default;return a.a.controls=n(21).default,Object(u.a)(n(51).default),e}.bind(null,n)).catch(d(c.t+104));return l.html5=t,t}();if(e&&s)return n.e(5).then(function(t){n(37);var e=n(22).default;return a.a.controls=n(21).default,e}.bind(null,n)).catch(d(c.t+103));if(e)return n.e(3).then(function(t){var e=n(22).default;return a.a.controls=n(21).default,e}.bind(null,n)).catch(d(c.t+102));return(h()?n.e(8).then(function(t){return n(37)}.bind(null,n)).catch(d(c.t+120)):Promise.resolve()).then((function(){return n.e(2).then(function(t){return n(22).default}.bind(null,n)).catch(d(c.t+101))}))}(t)),s}function d(t,e){return function(){throw new c.s(c.m,t,e)}}function p(t,e){return function(){throw new c.s(null,t,e)}}function h(){var t=window.IntersectionObserverEntry;return!(t&&"IntersectionObserver"in window&&"intersectionRatio"in t.prototype)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return p})),n.d(e,"c",(function(){return h}));var r=n(2),i=n(41),o=n.n(i);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a,c=o.a.clear;function s(t,e,n,r){n=n||"all-players";var i="";if("object"===u(e)){var a=document.createElement("div");l(a,e);var c=a.style.cssText;Object.prototype.hasOwnProperty.call(e,"content")&&c&&(c="".concat(c,' content: "').concat(e.content,'";')),r&&c&&(c=c.replace(/;/g," !important;")),i="{"+c+"}"}else"string"==typeof e&&(i=e);""!==i&&"{}"!==i?o.a.style([[t,t+i]],n):o.a.clear(n,t)}function l(t,e){if(null!=t){var n;void 0===t.length&&(t=[t]);var r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=d(n,e[n]));for(var i=0;i<t.length;i++){var o=t[i],u=void 0;if(null!=o)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(u=f(n),o.style[u]!==r[n]&&(o.style[u]=r[n]))}}}function f(t){t=t.split("-");for(var e=1;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join("")}function d(t,e){return""===e||null==e?"":"string"==typeof e&&isNaN(e)?/png|gif|jpe?g/i.test(e)&&e.indexOf("url")<0?"url("+e+")":e:0===e||"z-index"===t||"opacity"===t?""+e:/color/i.test(t)?"#"+Object(r.e)(e.toString(16).replace(/^0x/i,""),6):Math.ceil(e)+"px"}function p(t,e){l(t,{transform:e,webkitTransform:e,msTransform:e,mozTransform:e,oTransform:e})}function h(t,e){var n="rgb",r=void 0!==e&&100!==e;if(r&&(n+="a"),!a){var i=document.createElement("canvas");i.height=1,i.width=1,a=i.getContext("2d")}t?isNaN(parseInt(t,16))||(t="#"+t):t="#000000",a.clearRect(0,0,1,1),a.fillStyle=t,a.fillRect(0,0,1,1);var o=a.getImageData(0,0,1,1).data;return n+="("+o[0]+", "+o[1]+", "+o[2],r&&(n+=", "+e/100),n+")"}},function(t,e,n){"use strict";n.r(e),n.d(e,"getAbsolutePath",(function(){return o})),n.d(e,"isAbsolutePath",(function(){return u})),n.d(e,"parseXML",(function(){return a})),n.d(e,"serialize",(function(){return c})),n.d(e,"parseDimension",(function(){return s})),n.d(e,"timeFormat",(function(){return l}));var r=n(8),i=n(0);function o(t,e){if(Object(r.exists)(e)||(e=document.location.href),Object(r.exists)(t)){if(u(t))return t;var n,i=e.substring(0,e.indexOf("://")+3),o=e.substring(i.length,e.indexOf("/",i.length+1));if(0===t.indexOf("/"))n=t.split("/");else{var a=e.split("?")[0];n=(a=a.substring(i.length+o.length+1,a.lastIndexOf("/"))).split("/").concat(t.split("/"))}for(var c=[],s=0;s<n.length;s++)n[s]&&Object(r.exists)(n[s])&&"."!==n[s]&&(".."===n[s]?c.pop():c.push(n[s]));return i+o+"/"+c.join("/")}}function u(t){return/^(?:(?:https?|file):)?\/\//.test(t)}function a(t){var e=null;try{(e=(new window.DOMParser).parseFromString(t,"text/xml")).querySelector("parsererror")&&(e=null)}catch(t){}return e}function c(t){if(void 0===t)return null;if("string"==typeof t&&t.length<6){var e=t.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if(!Object(i.v)(Number(t))&&!Object(i.v)(parseFloat(t)))return Number(t)}return t}function s(t){return"string"==typeof t?""===t?0:t.lastIndexOf("%")>-1?t:parseInt(t.replace("px",""),10):t}function l(t,e){if(t<=0&&!e||Object(i.v)(parseInt(t)))return"00:00";var n=t<0?"-":"";t=Math.abs(t);var r=Math.floor(t/3600),o=Math.floor((t-3600*r)/60),u=Math.floor(t%60);return n+(r?r+":":"")+(o<10?"0":"")+o+":"+(u<10?"0":"")+u}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(33),i=n(17),o=n(57),u=n(0);function a(t){var e=t.getName().name;if(!r.a[e]){if(!Object(u.m)(i.a,Object(u.C)({name:e}))){if(!Object(u.u)(t.supports))throw new Error("Tried to register a provider with an invalid object");i.a.unshift({name:e,supports:t.supports})}Object(u.h)(t.prototype,o.a),r.a[e]=t}}},function(t,e,n){"use strict";n.d(e,"j",(function(){return p})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return v})),n.d(e,"e",(function(){return b})),n.d(e,"g",(function(){return y})),n.d(e,"h",(function(){return w})),n.d(e,"c",(function(){return j})),n.d(e,"f",(function(){return k})),n.d(e,"i",(function(){return C})),n.d(e,"a",(function(){return P}));var r=n(0),i=n(7),o=n(28),u=n(8),a=n(40),c={},s={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish",el:"Greek",fi:"Finnish",id:"Indonesian",ko:"Korean",th:"Thai",vi:"Vietnamese"},l=Object(r.r)(s);function f(t){var e=d(t),n=e.indexOf("_");return-1===n?e:e.substring(0,n)}function d(t){return t.toLowerCase().replace("-","_")}function p(t){return t?Object.keys(t).reduce((function(e,n){return e[d(n)]=t[n],e}),{}):{}}function h(t){if(t)return 3===t.length?t:s[f(t)]||t}function v(t){return l[t]||""}function g(t){var e=t.querySelector("html");return e?e.getAttribute("lang"):null}function b(){var t=g(document);if(!t&&Object(i.m)())try{t=g(window.top.document)}catch(t){}return t||navigator.language||"en"}var m=["ar","da","de","el","es","fi","fr","he","id","it","ja","ko","nl","no","oc","pt","ro","ru","sl","sv","th","tr","vi","zh"];function y(t){return 8207===t.charCodeAt(0)||/^[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(t)}function w(t){return m.indexOf(f(t))>=0}function j(t,e,n){return Object(r.k)({},function(t){var e=t.advertising,n=t.related,i=t.sharing,o=t.abouttext,u=Object(r.k)({},t.localization);e&&(u.advertising=u.advertising||{},O(u.advertising,e,"admessage"),O(u.advertising,e,"cuetext"),O(u.advertising,e,"loadingAd"),O(u.advertising,e,"podmessage"),O(u.advertising,e,"skipmessage"),O(u.advertising,e,"skiptext"));"string"==typeof u.related?u.related={heading:u.related}:u.related=u.related||{};n&&O(u.related,n,"autoplaymessage");i&&(u.sharing=u.sharing||{},O(u.sharing,i,"heading"),O(u.sharing,i,"copied"));o&&O(u,t,"abouttext");var a=u.close||u.nextUpClose;a&&(u.close=a);return u}(t),e[f(n)],e[d(n)])}function O(t,e,n){var r=t[n]||e[n];r&&(t[n]=r)}function k(t){return Object(u.isDeepKeyCompliant)(a.a,t,(function(t,e){return"string"==typeof e[t]}))}function C(t,e){var n=c[e];if(!n){var r="".concat(t,"translations/").concat(f(e),".json");c[e]=n=new Promise((function(t,n){Object(o.a)({url:r,oncomplete:t,onerror:function(t,r,i,o){c[e]=null,n(o)},responseType:"json"})}))}return n}function P(t,e){var n=Object(r.k)({},t,e);return x(n,"errors",t,e),x(n,"related",t,e),x(n,"sharing",t,e),x(n,"advertising",t,e),x(n,"shortcuts",t,e),n}function x(t,e,n,i){t[e]=Object(r.k)({},n[e],i[e])}},function(t,e,n){"use strict";e.a=[]},function(t,e,n){"use strict";e.a={debug:!1}},function(t,e,n){"use strict";var r=n(27),i=n(5),o=n(23),u=n(0),a=n(8),c=n(36),s=Object(u.m)(r.a,Object(u.C)({name:"html5"})),l=s.supports;function f(t){var e=window.MediaSource;return Object(u.a)(t,(function(t){return!!e&&!!e.isTypeSupported&&e.isTypeSupported(t)}))}function d(t){if(t.drm)return!1;var e=t.file.indexOf(".m3u8")>-1,n="hls"===t.type||"m3u8"===t.type;if(!e&&!n)return!1;var r=i.Browser.chrome||i.Browser.firefox||i.Browser.edge||i.Browser.ie&&11===i.Browser.version.major,o=i.OS.android&&!1===t.hlsjsdefault,u=i.Browser.safari&&!!t.safarihlsjs;return f(t.mediaTypes||['video/mp4;codecs="avc1.4d400d,mp4a.40.2"'])&&(r||u)&&!o}s.supports=function(t,e){var n=l.apply(this,arguments);if(n&&t.drm&&"hls"===t.type){var r=Object(o.a)(e),i=r("drm");if(i&&t.drm.fairplay){var u=window.WebKitMediaKeys;return u&&u.isTypeSupported&&u.isTypeSupported("com.apple.fps.1_0","video/mp4")}return i}return n},r.a.push({name:"shaka",supports:function(t){return!(t.drm&&!Object(c.a)(t.drm))&&(!(!window.HTMLVideoElement||!window.MediaSource)&&(f(t.mediaTypes)&&("dash"===t.type||"mpd"===t.type||(t.file||"").indexOf("mpd-time-csf")>-1)))}}),r.a.unshift({name:"hlsjs",supports:function(t){return d(t)}}),r.a.unshift({name:"hlsjsProgressive",supports:function(t){return t._hlsjsProgressive&&d(t)}}),r.a.push({name:"flash",supports:function(t){if(!i.Features.flash||t.drm)return!1;var e=t.type;return"hls"===e||"m3u8"===e||!Object(a.isRtmp)(t.file,e)&&["flv","f4v","mov","m4a","m4v","mp4","aac","f4a","mp3","mpeg","smil"].indexOf(e)>-1}}),e.a=r.a},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=Date.now||function(){return(new Date).getTime()}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),i=function(t){return t.replace(/^(.*\/)?([^-]*)-?.*\.(js)$/,"$2")};function o(t){var e=305e3;if(!t)return e;switch(i(t)){case"jwpsrv":e=305001;break;case"googima":e=305002;break;case"vast":e=305003;break;case"freewheel":e=305004;break;case"dai":e=305005;break;case"gapro":e=305006}return e}function u(t,e,n){var i=t.name,o=document.createElement("div");o.id=n.id+"_"+i,o.className="jw-plugin jw-reset";var u=Object(r.k)({},e),a=t.getNewInstance(n,u,o);return n.addPlugin(i,a),a}},function(t,e,n){"use strict";n.r(e),n.d(e,"getScriptPath",(function(){return o})),n.d(e,"repo",(function(){return u})),n.d(e,"versionCheck",(function(){return a})),n.d(e,"loadFrom",(function(){return c}));var r=n(31),i=n(8),o=function(t){for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n++){var r=e[n].src;if(r){var i=r.lastIndexOf("/"+t);if(i>=0)return r.substr(0,i+1)}}return""},u=function(){var t="//ssl.p.jwpcdn.com/player/v/8.11.10/",e=Object(i.isFileProtocol)()?"https:":"";return"".concat(e).concat(t)},a=function(t){var e=("0"+t).split(/\W/),n=r.a.split(/\W/),i=parseFloat(e[0]),o=parseFloat(n[0]);return!(i>o)&&!(i===o&&parseFloat("0"+e[1])>parseFloat(n[1]))},c=function(){return u()}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r="free",i="starter",o="business",u="premium",a="enterprise",c="developer",s="platinum",l="ads",f="unlimited",d="trial",p="invalid";function h(t){var e={setup:[r,i,o,u,a,c,l,f,d,s],drm:[a,c,l,f,d],ads:[l,f,d,s,a,c,o],jwpsrv:[r,i,o,u,a,c,l,d,s,p],discovery:[l,a,c,d,f]};return function(n){return e[n]&&e[n].indexOf(t)>-1}}},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(3),u={},a=45e3,c=2,s=3;function l(t){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=t,e}function f(t,e){var n=document.createElement("script");return n.type="text/javascript",n.charset="utf-8",n.async=!0,n.timeout=e||a,n.src=t,n}var d=function(t,e,n){var r=this,i=0;function d(t){i=c,r.trigger(o.w,t).off()}function p(t){i=s,r.trigger(o.lb,t).off()}this.getStatus=function(){return i},this.load=function(){var r=u[t];return 0!==i?r:(r&&r.then(p).catch(d),i=1,r=new Promise((function(r,i){var o=(e?l:f)(t,n),u=function(){o.onerror=o.onload=null,clearTimeout(s)},c=function(t){u(),d(t),i(t)},s=setTimeout((function(){c(new Error("Network timeout ".concat(t)))}),a);o.onerror=function(){c(new Error("Failed to load ".concat(t)))},o.onload=function(t){u(),p(t),r(t)};var h=document.getElementsByTagName("head")[0]||document.documentElement;h.insertBefore(o,h.firstChild)})),u[t]=r,r)}};Object(r.k)(d.prototype,i.a),e.a=d},function(t,e,n){"use strict";var r=n(1),i=n(19);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=function(){this.load=function(t,e,n,u){return n&&"object"===o(n)?Promise.all(Object.keys(n).filter((function(t){return t})).map((function(o){var a=n[o];return e.setupPlugin(o).then((function(e){if(!u.attributes._destroyed)return Object(i.a)(e,a,t)})).catch((function(t){return e.removePlugin(o),t.code?t:new r.s(null,Object(i.c)(o),t)}))}))):Promise.resolve()}},a=n(58),c=n(47),s={},l=function(){},f=l.prototype;f.setupPlugin=function(t){var e=this.getPlugin(t);return e?(e.url!==t&&Object(c.a)('JW Plugin "'.concat(Object(i.b)(t),'" already loaded from "').concat(e.url,'". Ignoring "').concat(t,'."')),e.promise):this.addPlugin(t).load()},f.addPlugin=function(t){var e=Object(i.b)(t),n=s[e];return n||(n=new a.a(t),s[e]=n),n},f.getPlugin=function(t){return s[Object(i.b)(t)]},f.removePlugin=function(t){delete s[Object(i.b)(t)]},f.getPlugins=function(){return s};var d=l;n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return v}));var p=new d,h=function(t,e,n){var r=p.addPlugin(t);r.js||r.registerPlugin(t,e,n)};function v(t,e){var n=t.get("plugins");return window.jwplayerPluginJsonp=h,(t.pluginLoader=t.pluginLoader||new u).load(e,p,n,t).then((function(e){if(!t.attributes._destroyed)return delete window.jwplayerPluginJsonp,e}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(48),i=n(23),o=n(45),u=n(1),a=100013;e.b=function(t){var e,n,c;try{var s=Object(r.a)(t||"",Object(o.a)("NDh2aU1Cb0NHRG5hcDFRZQ==")).split("/");if("pro"===(e=s[0])&&(e="premium"),Object(i.a)(e)("setup")||(e="invalid"),s.length>2){n=s[1];var l=parseInt(s[2]);l>0&&(c=new Date).setTime(l)}}catch(t){e="invalid"}this.edition=function(){return e},this.token=function(){return n},this.expiration=function(){return c},this.duration=function(){return c?c.getTime()-(new Date).getTime():0},this.error=function(){var r;return void 0===t?r=100011:"invalid"!==e&&n?this.duration()<0&&(r=a):r=100012,r?new u.s(u.m,r):null}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var r=n(65),i=n(8),o=n(39),u={aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"},a=[{name:"html5",supports:c}];function c(t){if(!1===Object(r.a)(t))return!1;if(!o.a.canPlayType)return!1;var e=t.file,n=t.type;if(Object(i.isRtmp)(e,n))return!1;var a=t.mimeType||u[n];if(!a)return!1;var c=t.mediaTypes;return c&&c.length&&(a=[a].concat(c.slice()).join("; ")),!!o.a.canPlayType(a)}e.a=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(0),i=n(12),o=n(8),u=n(1),a=1,c=2,s=3,l=4,f=5,d=6,p=7,h=601,v=602,g=611,b=function(){};function m(t,e,n,h){var O;t===Object(t)&&(t=(h=t).url);var k=Object(r.k)({xhr:null,url:t,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:e||b,onerror:n||b,mimeType:h&&!h.responseType?"text/xml":"",requireValidXML:!1,responseType:h&&h.plainText?"text":"",useDomParser:!1,requestFilter:null},h),C=function(t,e){return function(t,n){var i=t.currentTarget||e.xhr;if(clearTimeout(e.timeoutId),e.retryWithoutCredentials&&e.xhr.withCredentials)return y(i),void m(Object(r.k)({},e,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1}));!n&&i.status>=400&&i.status<600&&(n=i.status),w(e,n?u.o:u.r,n||d,t)}}(0,k);if("XMLHttpRequest"in window){if(O=k.xhr=k.xhr||new window.XMLHttpRequest,"function"==typeof k.requestFilter){var P;try{P=k.requestFilter({url:t,xhr:O})}catch(t){return C(t,f),O}P&&"open"in P&&"send"in P&&(O=k.xhr=P)}O.onreadystatechange=function(t){return function(e){var n=e.currentTarget||t.xhr;if(4===n.readyState){clearTimeout(t.timeoutId);var a=n.status;if(a>=400)return void w(t,u.o,a<600?a:d);if(200===a)return function(t){return function(e){var n=e.currentTarget||t.xhr;if(clearTimeout(t.timeoutId),t.responseType){if("json"===t.responseType)return function(t,e){if(!t.response||"string"==typeof t.response&&'"'!==t.responseText.substr(1))try{t=Object(r.k)({},t,{response:JSON.parse(t.responseText)})}catch(t){return void w(e,u.o,g,t)}return e.oncomplete(t)}(n,t)}else{var o,a=n.responseXML;if(a)try{o=a.firstChild}catch(t){}if(a&&o)return j(n,a,t);if(t.useDomParser&&n.responseText&&!a&&(a=Object(i.parseXML)(n.responseText))&&a.firstChild)return j(n,a,t);if(t.requireValidXML)return void w(t,u.o,v)}t.oncomplete(n)}}(t)(e);0===a&&Object(o.isFileProtocol)()&&!/^[a-z][a-z0-9+.-]*:/.test(t.url)&&w(t,u.o,p)}}}(k),O.onerror=C,"overrideMimeType"in O?k.mimeType&&O.overrideMimeType(k.mimeType):k.useDomParser=!0;try{t=t.replace(/#.*$/,""),O.open("GET",t,!0)}catch(t){return C(t,s),O}if(k.responseType)try{O.responseType=k.responseType}catch(t){}k.timeout&&(k.timeoutId=setTimeout((function(){y(O),w(k,u.r,a)}),k.timeout),O.onabort=function(){clearTimeout(k.timeoutId)});try{k.withCredentials&&"withCredentials"in O&&(O.withCredentials=!0),O.send()}catch(t){C(t,l)}return O}w(k,u.r,c)}function y(t){t.onload=null,t.onprogress=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()}function w(t,e,n,r){t.onerror(e,t.url,t.xhr,new u.s(e,n,r))}function j(t,e,n){var i=e.documentElement;if(!n.requireValidXML||"parsererror"!==i.nodeName&&!i.getElementsByTagName("parsererror").length)return t.responseXML||(t=Object(r.k)({},t,{responseXML:e})),n.oncomplete(t);w(n,u.o,h)}},function(t,e,n){"use strict";var r=n(0),i=n(34),o=function(t){if(t&&t.file)return Object(r.k)({},{kind:"captions",default:!1},t)},u=Array.isArray;e.a=function(t){u((t=t||{}).tracks)||delete t.tracks;var e=Object(r.k)({},{sources:[],tracks:[],minDvrWindow:120,dvrSeekLimit:25},t);e.dvrSeekLimit<5&&(e.dvrSeekLimit=5),e.sources!==Object(e.sources)||u(e.sources)||(e.sources=[Object(i.a)(e.sources)]),u(e.sources)&&0!==e.sources.length||(t.levels?e.sources=t.levels:e.sources=[Object(i.a)(t)]);for(var n=0;n<e.sources.length;n++){var a=e.sources[n];if(a){var c=a.default;a.default=!!c&&"true"===c.toString(),e.sources[n].label||(e.sources[n].label=n.toString()),e.sources[n]=Object(i.a)(e.sources[n])}}return e.sources=e.sources.filter((function(t){return!!t})),u(e.tracks)||(e.tracks=[]),u(e.captions)&&(e.tracks=e.tracks.concat(e.captions),delete e.captions),e.tracks=e.tracks.map(o).filter((function(t){return!!t})),e}},function(t,e,n){"use strict";var r=n(0),i={none:!0,metadata:!0,auto:!0};function o(t,e){return i[t]?t:i[e]?e:"metadata"}var u=n(29),a=n(34),c=n(42),s=n(1);n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"c",(function(){return p}));function l(t,e,n){var i=Object(r.k)({},n);return delete i.playlist,t.map((function(t){return d(e,t,i)})).filter((function(t){return!!t}))}function f(t){if(!Array.isArray(t)||0===t.length)throw new s.s(s.o,630)}function d(t,e,n){var i=t.getProviders(),u=t.get("preload"),a=Object(r.k)({},e);if(a.preload=o(e.preload,u),a.allSources=h(e,t),a.sources=v(a.allSources,i),a.sources.length)return a.file=a.sources[0].file,a.feedData=n,a}var p=function(t,e){return v(h(t,e),e.getProviders())};function h(t,e){var n=e.attributes,r=t.sources,i=t.allSources,u=t.preload,c=t.drm,s=g(t.withCredentials,n.withCredentials);return(i||r).map((function(t){if(t!==Object(t))return null;b(t,n,"androidhls"),b(t,n,"hlsjsdefault"),b(t,n,"safarihlsjs"),b(t,n,"_hlsjsProgressive"),t.preload=o(t.preload,u);var e=t.drm||c||n.drm;e&&(t.drm=e);var r=g(t.withCredentials,s);return void 0!==r&&(t.withCredentials=r),Object(a.a)(t)})).filter((function(t){return!!t}))}function v(t,e){e&&e.choose||(e=new c.a);var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e.choose(r).providerToCheck;if(i)return{type:r.type,provider:i}}return null}(t,e);if(!n)return[];var r=n.provider,i=n.type;return t.filter((function(t){return t.type===i&&e.providerSupports(r,t)}))}function g(t,e){return void 0===t?e:t}function b(t,e,n){n in e&&(t[n]=e[n])}e.a=function(t){return(Array.isArray(t)?t:[t]).map(u.a)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="8.11.10+commercial_v8-11-10.367.commercial.671069e.hlsjs..hlsjsprogressive..jwplayer.830efe7.dai.45542e3.freewheel.55a1d47.googima.3980c02.vast.8967c9c.analytics.8958e48.gapro.141397a"},function(t,e,n){"use strict";var r=n(0),i=n(18),o=window.performance||{timing:{}},u=o.timing.navigationStart||Object(i.a)();function a(){return u+o.now()}"now"in o||(o.now=function(){return Object(i.a)()-u});e.a=function(){var t={},e={},n={},i={};return{start:function(e){t[e]=a(),n[e]=n[e]+1||1},end:function(n){if(t[n]){var r=a()-t[n];delete t[n],e[n]=e[n]+r||r}},dump:function(){var o=Object(r.k)({},e);for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var c=a()-t[u];o[u]=o[u]+c||c}return{counts:Object(r.k)({},n),sums:o,events:Object(r.k)({},i)}},tick:function(t){i[t]=a()},clear:function(t){delete i[t]},between:function(t,e){return i[e]&&i[t]?i[e]-i[t]:null}}}},function(t,e,n){"use strict";e.a={}},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(2);e.a=function(t){if(t&&t.file){var e=Object(r.k)({},{default:!1},t);e.file=Object(o.i)(""+e.file);var n=/^[^/]+\/(?:x-)?([^/]+)$/;if(n.test(e.type)&&(e.mimeType=e.type,e.type=e.type.replace(n,"$1")),Object(i.isYouTube)(e.file)?e.type="youtube":Object(i.isRtmp)(e.file)?e.type="rtmp":e.type||(e.type=Object(o.a)(e.file)),e.type){switch(e.type){case"m3u8":case"vnd.apple.mpegurl":e.type="hls";break;case"dash+xml":e.type="dash";break;case"m4a":e.type="aac";break;case"smil":e.type="rtmp"}return Object.keys(e).forEach((function(t){""===e[t]&&delete e[t]})),e}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return _}));var r=n(5),i=n(3),o=n(9),u=n(18),a=n(6);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h,v,g="ontouchstart"in window,b="PointerEvent"in window&&!r.OS.android,m=!(b||g&&r.OS.mobile),y="window",w="keydown",j=r.Features.passiveEvents,O=!!j&&{passive:!0},k=6,C=300,P=500,x=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=l(this,d(e).call(this));var i=!(n=n||{}).preventScrolling;return r.directSelect=!!n.directSelect,r.dragged=!1,r.enableDoubleTap=!1,r.el=t,r.handlers={},r.options={},r.lastClick=0,r.lastStart=0,r.passive=i,r.pointerId=null,r.startX=0,r.startY=0,r.event=null,r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,t),n=e,(r=[{key:"on",value:function(t,n,r){return E(t)&&(this.handlers[t]||A[t](this)),f(d(e.prototype),"on",this).call(this,t,n,r)}},{key:"off",value:function(t,n,r){var i=this;if(E(t))M(this,t);else if(!t){var o=this.handlers;Object.keys(o).forEach((function(t){M(i,t)}))}return f(d(e.prototype),"off",this).call(this,t,n,r)}},{key:"destroy",value:function(){this.off(),b&&I(this),this.el=null}}])&&s(n.prototype,r),i&&s(n,i),e}(o.a),S=/\s+/;function E(t){return t&&!(S.test(t)||"object"===c(t))}function T(t){if(!t.handlers.init){var e=t.el,n=t.passive,r=!!j&&{passive:n},o=function(i){if(Object(a.o)(e,"jw-tab-focus"),!function(t){if("which"in t)return 3===t.which;if("button"in t)return 2===t.button;return!1}(i)){var o=i.target,l=i.type;if(!t.directSelect||o===e){var f=D(i),d=f.pageX,p=f.pageY;if(t.dragged=!1,t.lastStart=Object(u.a)(),t.startX=d,t.startY=p,M(t,y),"pointerdown"===l&&i.isPrimary){if(!n){var h=i.pointerId;t.pointerId=h,e.setPointerCapture(h)}F(t,y,"pointermove",c,r),F(t,y,"pointercancel",s),F(t,y,"pointerup",s),"BUTTON"===e.tagName&&e.focus()}else"mousedown"===l?(F(t,y,"mousemove",c,r),F(t,y,"mouseup",s)):"touchstart"===l&&(F(t,y,"touchmove",c,r),F(t,y,"touchcancel",s),F(t,y,"touchend",s),n||R(i))}}},c=function(e){if(t.dragged)N(t,i.s,e);else{var r=D(e),o=r.pageX,u=r.pageY,a=o-t.startX,c=u-t.startY;a*a+c*c>k*k&&(N(t,i.u,e),t.dragged=!0,N(t,i.s,e))}n||"touchmove"!==e.type||R(e)},s=function(n){if(clearTimeout(h),t.el)if(I(t),M(t,y),t.dragged)t.dragged=!1,N(t,i.t,n);else if(-1===n.type.indexOf("cancel")&&e.contains(n.target)){if(Object(u.a)()-t.lastStart>P)return;var r="pointerup"===n.type||"pointercancel"===n.type,o="mouseup"===n.type||r&&"mouse"===n.pointerType;!function(t,e,n){if(t.enableDoubleTap)if(Object(u.a)()-t.lastClick<C){var r=n?i.q:i.r;N(t,r,e),t.lastClick=0}else t.lastClick=Object(u.a)()}(t,n,o),o?N(t,i.n,n):(N(t,i.sb,n),"touchend"!==n.type||j||R(n))}};b?F(t,"init","pointerdown",o,r):(m&&F(t,"init","mousedown",o,r),F(t,"init","touchstart",o,r)),v||(v=new x(document).on("interaction")),F(t,"init","blur",(function(){Object(a.o)(e,"jw-tab-focus")})),F(t,"init","focus",(function(){v.event&&v.event.type===w&&Object(a.a)(e,"jw-tab-focus")}))}}var A={drag:function(t){T(t)},dragStart:function(t){T(t)},dragEnd:function(t){T(t)},click:function(t){T(t)},tap:function(t){T(t)},doubleTap:function(t){t.enableDoubleTap=!0,T(t)},doubleClick:function(t){t.enableDoubleTap=!0,T(t)},longPress:function(t){if(r.OS.iOS){var e=function(){clearTimeout(h)};F(t,"longPress","touchstart",(function(n){e(),h=setTimeout((function(){N(t,"longPress",n)}),P)})),F(t,"longPress","touchmove",e),F(t,"longPress","touchcancel",e),F(t,"longPress","touchend",e)}else t.el.oncontextmenu=function(e){return N(t,"longPress",e),!1}},focus:function(t){F(t,"focus","focus",(function(e){L(t,"focus",e)}))},blur:function(t){F(t,"blur","blur",(function(e){L(t,"blur",e)}))},over:function(t){(b||m)&&F(t,i.Z,b?"pointerover":"mouseover",(function(e){"touch"!==e.pointerType&&N(t,i.Z,e)}))},out:function(t){if(b){var e=t.el;F(t,i.Y,"pointerout",(function(n){if("touch"!==n.pointerType&&"x"in n){var r=document.elementFromPoint(n.x,n.y);e.contains(r)||N(t,i.Y,n)}}))}else m&&F(t,i.Y,"mouseout",(function(e){N(t,i.Y,e)}))},move:function(t){(b||m)&&F(t,i.W,b?"pointermove":"mousemove",(function(e){"touch"!==e.pointerType&&N(t,i.W,e)}))},enter:function(t){F(t,i.v,w,(function(e){"Enter"!==e.key&&13!==e.keyCode||(e.stopPropagation(),L(t,i.v,e))}))},keydown:function(t){F(t,w,w,(function(e){L(t,w,e)}),!1)},gesture:function(t){var e=function(e){return N(t,"gesture",e)};F(t,"gesture","click",e),F(t,"gesture",w,e)},interaction:function(t){var e=function(e){t.event=e};F(t,"interaction","mousedown",e,!0),F(t,"interaction",w,e,!0)}};function _(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}function F(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:O,o=t.handlers[e],u=t.options[e];if(o||(o=t.handlers[e]={},u=t.options[e]={}),o[n])throw new Error("".concat(e," ").concat(n," already registered"));o[n]=r,u[n]=i;var a=t.el;(e===y?_(a):a).addEventListener(n,r,i)}function M(t,e){var n=t.el,r=t.handlers,i=t.options,o=e===y?_(n):n,u=r[e],a=i[e];u&&(Object.keys(u).forEach((function(t){var e=a[t];"boolean"==typeof e?o.removeEventListener(t,u[t],e):o.removeEventListener(t,u[t])})),r[e]=null,i[e]=null)}function I(t){var e=t.el;null!==t.pointerId&&(e.releasePointerCapture(t.pointerId),t.pointerId=null)}function L(t,e,n){var r=t.el,i=n.target;t.trigger(e,{type:e,sourceEvent:n,currentTarget:r,target:i})}function N(t,e,n){var r=function(t,e,n){var r,i=e.target,o=e.touches,u=e.changedTouches,a=e.pointerType;o||u?(r=o&&o.length?o[0]:u[0],a=a||"touch"):(r=e,a=a||"mouse");var c=r,s=c.pageX,l=c.pageY;return{type:t,pointerType:a,pageX:s,pageY:l,sourceEvent:e,currentTarget:n,target:i}}(e,n,t.el);t.trigger(e,r)}function D(t){return 0===t.type.indexOf("touch")?(t.originalEvent||t).changedTouches[0]:t}function R(t){t.preventDefault&&t.preventDefault()}},function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return f}));var r,i=n(23),o=[{configName:"clearkey",keyName:"org.w3.clearkey"},{configName:"widevine",keyName:"com.widevine.alpha"},{configName:"playready",keyName:"com.microsoft.playready"}],u=[],a={};function c(t){return t.some((function(t){return!!t.drm||t.sources.some((function(t){return!!t.drm}))}))}function s(t){return r||((navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||window.MSMediaKeys)&&Object(i.a)(t)("drm")?(o.forEach((function(t){var e,n,r=(e=t.keyName,n=[{initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.4d401e"'}],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}]}],navigator.requestMediaKeySystemAccess?navigator.requestMediaKeySystemAccess(e,n):new Promise((function(t,n){var r;try{r=new window.MSMediaKeys(e)}catch(t){return void n(t)}t(r)}))).then((function(){a[t.configName]=!0})).catch((function(){a[t.configName]=!1}));u.push(r)})),r=Promise.all(u)):Promise.resolve())}function l(t){return a[t]}function f(t){if(r)return Object.keys(t).some((function(t){return l(t)}))}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u}));var r=n(10),i=null,o={};function u(){return i||(i=n.e(1).then(function(t){var e=n(21).default;return o.controls=e,e}.bind(null,n)).catch((function(){i=null,Object(r.c)(301130)()}))),i}},function(t,e,n){"use strict";var r=document.createElement("video");e.a=r},function(t,e,n){"use strict";e.a={advertising:{admessage:"This ad will end in xx",cuetext:"Advertisement",displayHeading:"Advertisement",loadingAd:"Loading ad",podmessage:"Ad __AD_POD_CURRENT__ of __AD_POD_LENGTH__.",skipmessage:"Skip ad in xx",skiptext:"Skip"},airplay:"AirPlay",audioTracks:"Audio Tracks",auto:"Auto",buffer:"Loading",cast:"Chromecast",cc:"Closed Captions",close:"Close",errors:{badConnection:"This video cannot be played because of a problem with your internet connection.",cantLoadPlayer:"Sorry, the video player failed to load.",cantPlayInBrowser:"The video cannot be played in this browser.",cantPlayVideo:"This video file cannot be played.",errorCode:"Error Code",liveStreamDown:"The live stream is either down or has ended.",protectedContent:"There was a problem providing access to protected content.",technicalError:"This video cannot be played because of a technical error."},exitFullscreen:"Exit Fullscreen",fullscreen:"Fullscreen",hd:"Quality",liveBroadcast:"Live",logo:"Logo",mute:"Mute",next:"Next",nextUp:"Next Up",notLive:"Not Live",off:"Off",pause:"Pause",play:"Play",playback:"Play",playbackRates:"Playback Rates",player:"Video Player",poweredBy:"Powered by",prev:"Previous",related:{autoplaymessage:"Next up in xx",heading:"More Videos"},replay:"Replay",rewind:"Rewind 10 Seconds",settings:"Settings",sharing:{copied:"Copied",email:"Email",embed:"Embed",heading:"Share",link:"Link"},slider:"Seek",stop:"Stop",unmute:"Unmute",videoInfo:"About This Video",volume:"Volume",volumeSlider:"Volume",shortcuts:{playPause:"Play/Pause",volumeToggle:"Mute/Unmute",fullscreenToggle:"Fullscreen/Exit Fullscreen",seekPercent:"Seek %",keyboardShortcuts:"Keyboard Shortcuts",increaseVolume:"Increase Volume",decreaseVolume:"Decrease Volume",seekForward:"Seek Forward",seekBackward:"Seek Backward",spacebar:"SPACE",captionsToggle:"Captions On/Off"}}},function(t,e){var n,r,i={},o={},u=(n=function(){return document.head||document.getElementsByTagName("head")[0]},function(){return void 0===r&&(r=n.apply(this,arguments)),r});function a(t){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-jwplayer-id",t),function(t){u().appendChild(t)}(e),e}function c(t,e){var n,r,i,u=o[t];u||(u=o[t]={element:a(t),counter:0});var c=u.counter++;return n=u.element,i=function(){f(n,c,"")},(r=function(t){f(n,c,t)})(e.css),function(t){if(t){if(t.css===e.css&&t.media===e.media)return;r((e=t).css)}else i()}}t.exports={style:function(t,e){!function(t,e){for(var n=0;n<e.length;n++){var r=e[n],o=(i[t]||{})[r.id];if(o){for(var u=0;u<o.parts.length;u++)o.parts[u](r.parts[u]);for(;u<r.parts.length;u++)o.parts.push(c(t,r.parts[u]))}else{var a=[];for(u=0;u<r.parts.length;u++)a.push(c(t,r.parts[u]));i[t]=i[t]||{},i[t][r.id]={id:r.id,parts:a}}}}(e,function(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],u=i[1],a=i[2],c={css:u,media:a};n[o]?n[o].parts.push(c):e.push(n[o]={id:o,parts:[c]})}return e}(t))},clear:function(t,e){var n=i[t];if(!n)return;if(e){var r=n[e];if(r)for(var o=0;o<r.parts.length;o+=1)r.parts[o]();return}for(var u=Object.keys(n),a=0;a<u.length;a+=1)for(var c=n[u[a]],s=0;s<c.parts.length;s+=1)c.parts[s]();delete i[t]}};var s,l=(s=[],function(t,e){return s[t]=e,s.filter(Boolean).join("\n")});function f(t,e,n){if(t.styleSheet)t.styleSheet.cssText=l(e,n);else{var r=document.createTextNode(n),i=t.childNodes[e];i?t.replaceChild(r,i):t.appendChild(r)}}},function(t,e,n){"use strict";var r=n(0),i=n(17),o=n(13),u=n(33),a=n(10);function c(t){this.config=t||{}}var s={html5:function(){return n.e(15).then(function(t){var e=n(51).default;return Object(o.a)(e),e}.bind(null,n)).catch(Object(a.b)(152))}};Object(r.k)(c.prototype,{load:function(t){var e=s[t],n=function(){return Promise.reject(new Error("Failed to load media"))};return e?e().then((function(){var e=u.a[t];return e||n()})):n()},providerSupports:function(t,e){return t.supports(e)},choose:function(t){if(t===Object(t))for(var e=i.a.length,n=0;n<e;n++){var r=i.a[n];if(this.providerSupports(r,t))return{priority:e-n-1,name:r.name,type:t.type,providerToCheck:r,provider:u.a[r.name]}}return{}}});var l,f=c;Object(r.k)(s,{shaka:function(){return n.e(16).then(function(t){var e=n(161).default;return Object(o.a)(e),e}.bind(null,n)).catch(Object(a.b)(154))},hlsjs:function(){return n.e(13).then(function(t){var e=n(156).default;return e.setEdition&&e.setEdition(l),Object(o.a)(e),e}.bind(null,n)).catch(Object(a.b)(153))},flash:function(){return n.e(12).then(function(t){var e=n(163).default;return Object(o.a)(e),e}.bind(null,n)).catch(Object(a.b)(151))},hlsjsProgressive:function(){return n.e(14).then(function(t){var e=n(157).default;return e.setEdition(l),Object(o.a)(e),e}.bind(null,n)).catch(Object(a.b)(155))}}),f.prototype.providerSupports=function(t,e){return l=this.config.edition,t.supports(e,l)};e.a=f},function(t,e,n){"use strict";var r=function(t,e,n,r){var i=r?"(".concat(n,": ").concat(r,")").replace(/\s+/g,"&nbsp;"):"";return'<div id="'.concat(t,'" class="jw-error jw-reset">')+'<div class="jw-error-msg jw-info-overlay jw-reset"><style>'+'[id="'.concat(t,'"].jw-error{background:#000;overflow:hidden;position:relative}')+'[id="'.concat(t,'"] .jw-error-msg{top:50%;left:50%;position:absolute;transform:translate(-50%,-50%)}')+'[id="'.concat(t,'"] .jw-error-text{text-align:start;color:#FFF;font:14px/1.35 Arial,Helvetica,sans-serif}')+'</style><div class="jw-icon jw-reset"></div><div class="jw-info-container jw-reset">'+'<div class="jw-error-text jw-reset-text" dir="auto">'.concat(e||"",'<span class="jw-break jw-reset"></span>').concat(i,"</div>")+"</div></div></div>"},i=n(6),o=n(11);function u(t,e){var n=e.message,u=e.code,a=r(t.get("id"),n,t.get("localization").errors.errorCode,u),c=t.get("width"),s=t.get("height"),l=Object(i.e)(a);return Object(o.d)(l,{width:c.toString().indexOf("%")>0?c:"".concat(c,"px"),height:s.toString().indexOf("%")>0?s:"".concat(s,"px")}),l}n.d(e,"a",(function(){return u}))},function(t,e,n){"use strict";function r(t){return t.slice&&"px"===t.slice(-2)&&(t=t.slice(0,-2)),t}function i(t,e){if(-1===e.toString().indexOf("%"))return 0;if("string"!=typeof t||!t)return 0;if(/^\d*\.?\d+%$/.test(t))return t;var n=t.indexOf(":");if(-1===n)return 0;var r=parseFloat(t.substr(0,n)),i=parseFloat(t.substr(n+1));return r<=0||i<=0?0:i/r*100+"%"}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=window.atob},function(t,e,n){"use strict";var r=n(4),i=n(2);function o(t){for(var e=[],n=0;n<Object(r.c)(t);n++){var i=t.childNodes[n];"jwplayer"===i.prefix&&"mediatypes"===Object(r.b)(i).toLowerCase()&&e.push(Object(r.d)(i))}return e}var u=function t(e,n){var u,a,c=[];for(var s=0;s<Object(r.c)(e);s++){var l=e.childNodes[s];if("media"===l.prefix){if(!Object(r.b)(l))continue;switch(Object(r.b)(l).toLowerCase()){case"content":if(Object(i.j)(l,"duration")&&(n.duration=Object(i.g)(Object(i.j)(l,"duration"))),Object(i.j)(l,"url")){n.sources||(n.sources=[]);var f={file:Object(i.j)(l,"url"),type:Object(i.j)(l,"type"),width:Object(i.j)(l,"width"),label:Object(i.j)(l,"label")},d=o(l);d.length&&(f.mediaTypes=d),n.sources.push(f)}Object(r.c)(l)>0&&(n=t(l,n));break;case"title":n.title=Object(r.d)(l);break;case"description":n.description=Object(r.d)(l);break;case"guid":n.mediaid=Object(r.d)(l);break;case"thumbnail":n.image||(n.image=Object(i.j)(l,"url"));break;case"group":t(l,n);break;case"subtitle":var p={};p.file=Object(i.j)(l,"url"),p.kind="captions",Object(i.j)(l,"lang").length>0&&(p.label=(u=Object(i.j)(l,"lang"),a=void 0,(a={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"})[u]?a[u]:u)),c.push(p)}}}n.hasOwnProperty("tracks")||(n.tracks=[]);for(var h=0;h<c.length;h++)n.tracks.push(c[h]);return n},a=n(12),c=function(t,e){for(var n="default",o=[],u=[],c=0;c<t.childNodes.length;c++){var s=t.childNodes[c];if("jwplayer"===s.prefix){var l=Object(r.b)(s);"source"===l?(delete e.sources,o.push({file:Object(i.j)(s,"file"),default:Object(i.j)(s,n),label:Object(i.j)(s,"label"),type:Object(i.j)(s,"type")})):"track"===l?(delete e.tracks,u.push({file:Object(i.j)(s,"file"),default:Object(i.j)(s,n),kind:Object(i.j)(s,"kind"),label:Object(i.j)(s,"label")})):(e[l]=Object(a.serialize)(Object(r.d)(s)),"file"===l&&e.sources&&delete e.sources)}e.file||(e.file=e.link)}if(o.length){e.sources=[];for(var f=0;f<o.length;f++)o[f].file.length>0&&(o[f][n]="true"===o[f][n],o[f].label.length||delete o[f].label,e.sources.push(o[f]))}if(u.length){e.tracks=[];for(var d=0;d<u.length;d++)u[d].file.length>0&&(u[d][n]="true"===u[d][n],u[d].kind=u[d].kind.length?u[d].kind:"captions",u[d].label.length||delete u[d].label,e.tracks.push(u[d]))}return e},s=n(29);function l(t){var e=[];e.feedData={};for(var n=0;n<Object(r.c)(t);n++){var i=Object(r.a)(t,n);if("channel"===Object(r.b)(i).toLowerCase())for(var o=0;o<Object(r.c)(i);o++){var u=Object(r.a)(i,o),a=Object(r.b)(u).toLowerCase();"item"===a?e.push(f(u)):a&&(e.feedData[a]=Object(r.d)(u))}}return e}function f(t){for(var e={},n=0;n<t.childNodes.length;n++){var o=t.childNodes[n],a=Object(r.b)(o);if(a)switch(a.toLowerCase()){case"enclosure":e.file=Object(i.j)(o,"url");break;case"title":e.title=Object(r.d)(o);break;case"guid":e.mediaid=Object(r.d)(o);break;case"pubdate":e.date=Object(r.d)(o);break;case"description":e.description=Object(r.d)(o);break;case"link":e.link=Object(r.d)(o);break;case"category":e.tags?e.tags+=Object(r.d)(o):e.tags=Object(r.d)(o)}}return new s.a(c(t,u(t,e)))}n.d(e,"a",(function(){return l}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof console.log?console.log.bind(console):function(){}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(45);function i(t){for(var e=new Array(Math.ceil(t.length/4)),n=0;n<e.length;n++)e[n]=t.charCodeAt(4*n)+(t.charCodeAt(4*n+1)<<8)+(t.charCodeAt(4*n+2)<<16)+(t.charCodeAt(4*n+3)<<24);return e}function o(t,e){if(t=String(t),e=String(e),0===t.length)return"";for(var n,o,u,a=i(Object(r.a)(t)),c=i((n=e,unescape(encodeURIComponent(n))).slice(0,16)),s=a.length,l=a[s-1],f=a[0],d=2654435769*Math.floor(6+52/s);d;){u=d>>>2&3;for(var p=s-1;p>=0;p--)o=((l=a[p>0?p-1:s-1])>>>5^f<<2)+(f>>>3^l<<4)^(d^f)+(c[3&p^u]^l),f=a[p]-=o;d-=2654435769}return function(t){try{return decodeURIComponent(escape(t))}catch(e){return t}}(function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(255&t[n],t[n]>>>8&255,t[n]>>>16&255,t[n]>>>24&255);return e.join("")}(a).replace(/\0+$/,""))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var r=window.requestAnimationFrame||function(t){return setTimeout(t,17)},i=window.cancelAnimationFrame||clearTimeout},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var r={audioMode:!1,flashBlocked:!1,item:0,itemMeta:{},playbackRate:1,playRejected:!1,state:n(3).nb,itemReady:!1,controlsEnabled:!1},i={position:0,duration:0,buffer:0,currentTime:0}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t,e,n){return Math.max(Math.min(t,n),e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=12;function i(){try{var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return t.getRandomValues(new Uint32Array(1))[0].toString(36)}catch(t){}return Math.random().toString(36).slice(2,9)}function o(t){for(var e="";e.length<t;)e+=i();return e.slice(0,t)}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return c}));var c=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,u(e).call(this))).attributes=Object.create(null),t}var n,r,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(r=[{key:"addAttributes",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.add(n,t[n])}))}},{key:"add",value:function(t,e){var n=this;Object.defineProperty(this,t,{get:function(){return n.attributes[t]},set:function(e){return n.set(t,e)},enumerable:!1}),this.attributes[t]=e}},{key:"get",value:function(t){return this.attributes[t]}},{key:"set",value:function(t,e){if(this.attributes[t]!==e){var n=this.attributes[t];this.attributes[t]=e,this.trigger("change:"+t,this,e,n)}}},{key:"clone",value:function(){var t={},e=this.attributes;if(e)for(var n in e)t[n]=e[n];return t}},{key:"change",value:function(t,e,n){this.on("change:"+t,e,n);var r=this.get(t);return e.call(n,this,r,r),this}}])&&i(n.prototype,r),c&&i(n,c),e}(n(9).a)},function(t,e,n){"use strict";function r(t,e,n){var r=[],i={};function o(){for(;r.length>0;){var e=r.shift(),n=e.command,o=e.args;(i[n]||t[n]).apply(t,o)}}e.forEach((function(e){var u=t[e];i[e]=u,t[e]=function(){var t=Array.prototype.slice.call(arguments,0);n()?r.push({command:e,args:t}):(o(),u&&u.apply(this,t))}})),Object.defineProperty(this,"queue",{enumerable:!0,get:function(){return r}}),this.flush=o,this.empty=function(){r.length=0},this.off=function(){e.forEach((function(e){var n=i[e];n&&(t[e]=n,delete i[e])}))},this.destroy=function(){this.off(),this.empty()}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=4,i=2,o=1},function(t,e,n){"use strict";var r=n(3),i=function(){},o=function(){return!1},u={name:"default"},a={supports:o,play:i,pause:i,preload:i,load:i,stop:i,volume:i,mute:i,seek:i,resize:i,remove:i,destroy:i,setVisibility:i,setFullscreen:i,getFullscreen:o,supportsFullscreen:o,getContainer:i,setContainer:i,getName:function(){return u},getQualityLevels:i,getCurrentQuality:i,setCurrentQuality:i,getAudioTracks:i,getCurrentAudioTrack:i,setCurrentAudioTrack:i,getSeekRange:function(){return{start:0,end:this.getDuration()}},setPlaybackRate:i,getPlaybackRate:function(){return 1},getBandwidthEstimate:function(){return null},getLiveLatency:function(){return null},setControls:i,attachMedia:i,detachMedia:i,init:i,setState:function(t){this.state=t,this.trigger(r.bb,{newstate:t})},sendMediaType:function(t){var e=t[0],n=e.type,i=e.mimeType,o="aac"===n||"mp3"===n||"mpeg"===n||i&&0===i.indexOf("audio/");this.trigger(r.T,{mediaType:o?"audio":"video"})}};e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(24),o=n(12),u=n(2),a=n(1),c=n(19),s=0,l=1,f=function(t){if("string"==typeof t){var e=(t=t.split("?")[0]).indexOf("://");if(e>0)return s;var n=t.indexOf("/"),r=Object(u.a)(t);return!(e<0&&n<0)||r&&isNaN(r)?l:2}};var d=function(t){this.url=t,this.promise_=null};Object.defineProperties(d.prototype,{promise:{get:function(){return this.promise_||this.load()},set:function(){}}}),Object(r.k)(d.prototype,{load:function(){var t=this,e=this.promise_;if(!e){if(2===f(this.url))e=Promise.resolve(this);else{var n=new i.a(function(t){switch(f(t)){case s:return t;case l:return Object(o.getAbsolutePath)(t,window.location.href)}}(this.url));this.loader=n,e=n.load().then((function(){return t}))}this.promise_=e}return e},registerPlugin:function(t,e,n){this.name=t,this.target=e,this.js=n},getNewInstance:function(t,e,n){var r=this.js;if("function"!=typeof r)throw new a.s(null,Object(c.c)(this.url)+100);var i=new r(t,e,n);return i.addToPlayer=function(){var e=t.getContainer().querySelector(".jw-overlays");e&&(n.left=e.style.left,n.top=e.style.top,e.appendChild(n),i.displayArea=e)},i.resizeHandler=function(){var t=i.displayArea;t&&i.resize(t.clientWidth,t.clientHeight)},i}}),e.a=d},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(4),u=n(46),a=n(28),c=n(9),s=n(1);e.a=function(){var t=Object(r.k)(this,c.a);function e(e){try{var a,c=e.responseXML?e.responseXML.childNodes:null,l="";if(c){for(var f=0;f<c.length&&8===(l=c[f]).nodeType;f++);if("xml"===Object(o.b)(l)&&(l=l.nextSibling),"rss"===Object(o.b)(l)){var d=Object(u.a)(l);a=Object(r.k)({playlist:d},d.feedData)}}if(!a)try{var p=JSON.parse(e.responseText);if(Array.isArray(p))a={playlist:p};else{if(!Array.isArray(p.playlist))throw Error("Playlist is not an array");a=p}}catch(t){throw new s.s(s.o,621,t)}t.trigger(i.eb,a)}catch(t){n(t)}}function n(e){e.code||(e=new s.s(s.o,0)),t.trigger(i.w,e)}this.load=function(t){Object(a.a)(t,e,(function(t,e,r,i){n(i)}))},this.destroy=function(){this.off()}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return u}));var r=n(56);function i(){for(var t=r.c,e=[],n=[],i=0;i<t;i++){var a=u();e.push(a),n.push(a),o(a)}var c=n.shift(),s=n.shift(),l=!1;return{primed:function(){return l},prime:function(){e.forEach(o),l=!0},played:function(){l=!0},getPrimedElement:function(){return n.length?n.shift():null},getAdElement:function(){return c},getTestElement:function(){return s},clean:function(t){if(t.src){t.removeAttribute("src");try{t.load()}catch(t){}}},recycle:function(t){t&&!n.some((function(e){return e===t}))&&(this.clean(t),n.push(t))},syncVolume:function(t){var n=Math.min(Math.max(0,t/100),1);e.forEach((function(t){t.volume=n}))},syncMute:function(t){e.forEach((function(e){e.muted=t}))}}}function o(t){t.src||t.load()}function u(t){var e=document.createElement("video");return e.className="jw-video jw-reset",e.setAttribute("tabindex","-1"),e.setAttribute("disableRemotePlayback",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),t&&Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])})),e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0);function i(t,e){return Object(r.k)({},e,{prime:function(){t.src||t.load()},getPrimedElement:function(){return t},clean:function(){e.clean(t)},recycle:function(){e.clean(t)}})}},function(t,e,n){"use strict";e.a="hidden"in document?function(){return!document.hidden}:"webkitHidden"in document?function(){return!document.webkitHidden}:function(){return!0}},function(t,e,n){"use strict";function r(t){return(t=t||window.event)&&/^(?:mouse|pointer|touch|gesture|click|key)/.test(t.type)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(0),i=n(55),o=n(44),u=n(20),a=n(12),c=n(5),s=n(40),l=n(14),f={autoPause:{viewability:!1,pauseAds:!1},autostart:!1,bandwidthEstimate:null,bitrateSelection:null,castAvailable:!1,controls:!0,cues:[],defaultPlaybackRate:1,displaydescription:!0,displaytitle:!0,displayPlaybackLabel:!1,enableShortcuts:!0,height:360,intl:{},language:"en",liveTimeout:null,localization:s.a,mute:!1,nextUpDisplay:!0,playbackRateControls:!1,playbackRates:[.5,1,1.25,1.5,2],renderCaptionsNatively:!1,repeat:!1,stretching:"uniform",volume:90,width:640};var d=function(t,e){var i=Object(r.k)({},(window.jwplayer||{}).defaults,e,t);!function(t){Object.keys(t).forEach((function(e){"id"!==e&&(t[e]=Object(a.serialize)(t[e]))}))}(i);var d=i.forceLocalizationDefaults?f.language:Object(l.e)(),p=Object(l.j)(i.intl);i.localization=Object(l.a)(s.a,Object(l.c)(i,p,d));var h=Object(r.k)({},f,i);"."===h.base&&(h.base=Object(u.getScriptPath)("jwplayer.js")),h.base=(h.base||Object(u.loadFrom)()).replace(/\/?$/,"/"),n.p=h.base,h.width=Object(o.b)(h.width),h.height=Object(o.b)(h.height),h.aspectratio=Object(o.a)(h.aspectratio,h.width),h.volume=Object(r.A)(h.volume)?Math.min(Math.max(0,h.volume),100):f.volume,h.mute=!!h.mute,h.language=d,h.intl=p;var v=i.autoPause;v&&(h.autoPause.viewability=!("viewability"in v)||!!v.viewability);var g=h.playbackRateControls;if(g){var b=h.playbackRates;Array.isArray(g)&&(b=g),(b=b.filter((function(t){return Object(r.w)(t)&&t>=.25&&t<=4})).map((function(t){return Math.round(100*t)/100}))).indexOf(1)<0&&b.push(1),b.sort(),h.playbackRateControls=!0,h.playbackRates=b}(!h.playbackRateControls||h.playbackRates.indexOf(h.defaultPlaybackRate)<0)&&(h.defaultPlaybackRate=1),h.playbackRate=h.defaultPlaybackRate,h.aspectratio||delete h.aspectratio;var m=h.playlist;if(m)Array.isArray(m.playlist)&&(h.feedData=m,h.playlist=m.playlist);else{var y=Object(r.E)(h,["title","description","type","mediaid","image","images","file","sources","tracks","preload","duration"]);h.playlist=[y]}h.qualityLabels=h.qualityLabels||h.hlslabels,delete h.duration;var w=h.liveTimeout;null!==w&&(Object(r.A)(w)?0!==w&&(w=Math.max(30,w)):w=null,h.liveTimeout=w);var j,O,k=parseFloat(h.bandwidthEstimate),C=parseFloat(h.bitrateSelection);return h.bandwidthEstimate=Object(r.A)(k)?k:(j=h.defaultBandwidthEstimate,O=parseFloat(j),Object(r.A)(O)?Math.max(O,1):f.bandwidthEstimate),h.bitrateSelection=Object(r.A)(C)?C:f.bitrateSelection,h.backgroundLoading=Object(r.s)(h.backgroundLoading)?h.backgroundLoading:c.Features.backgroundLoading,h},p=n(8),h=n(26),v=n(23),g="__CONTEXTUAL__";function b(t,e){var n=t.querySelector(e);if(n)return n.getAttribute("content")}var m=n(66),y=n.n(m);function w(t){return"string"==typeof t&&/^\/\/(?:content\.jwplatform|cdn\.jwplayer)\.com\//.test(t)}function j(t){return"https:"+t}function O(t){var e="file:"===window.location.protocol?"https:":"",n={jwpsrv:"//ssl.p.jwpcdn.com/player/v/8.11.10/jwpsrv.js",dai:"//ssl.p.jwpcdn.com/player/plugins/dai/v/0.4.9/dai.js",vast:"//ssl.p.jwpcdn.com/player/plugins/vast/v/8.7.9/vast.js",googima:"//ssl.p.jwpcdn.com/player/plugins/googima/v/8.7.9/googima.js",freewheel:"//ssl.p.jwpcdn.com/player/plugins/freewheel/v/2.2.7/freewheel.js",gapro:"//ssl.p.jwpcdn.com/player/plugins/gapro/v/2.1.5/gapro.js"}[t];return n?e+n:""}function k(t,e,n){e&&(t[e.client||O(n)]=e,delete e.client)}var C=function(t,e){var i,o=d(t,e),a=o.key||window.jwplayer&&window.jwplayer.key,c=new h.b(a),s=c.edition();if("free"===c.edition()&&(o=Object(r.k)({skin:{active:"#ff0046",timeslider:{progress:"none"}},logo:{position:"control-bar",file:y.a}},f,Object(r.E)(o,["analytics","aspectratio","base","file","height","playlist","sources","width"]))),o.key=a,o.edition=s,o.error=c.error(),o.generateSEOMetadata=o.generateSEOMetadata||!1,"unlimited"===s){var l=Object(u.getScriptPath)("jwplayer.js");if(!l)throw new Error("Error setting up player: Could not locate jwplayer.js script tag");n.p=l}if(o.flashplayer=function(t){var e=t.flashplayer;e||(e=(Object(u.getScriptPath)("jwplayer.js")||t.base)+"jwplayer.flash.swf");"http:"===window.location.protocol&&(e=e.replace(/^https/,"http"));return e}(o),o.plugins=function(t){var e=Object(r.k)({},t.plugins),n=Object(v.a)(t.edition);if(n("ads")){var i=Object(r.k)({},t.advertising),o=i.client;if(o){var u=O(o)||o;e[u]=i,delete i.client}}if(n("jwpsrv")){var a=t.analytics;a!==Object(a)&&(a={}),k(e,a,"jwpsrv")}k(e,t.ga,"gapro");var c=t.related,s=!n("discovery")||c!==Object(c),l=!c||"none"!==c.displayMode,f=c||{},d=void 0===f.oncomplete?"none":f.oncomplete,p=f.autoplaytimer;!1===d||t.repeat?d="hide":"none"===d&&(p=0);var h="autoplay"===d&&p<=0||"none"===d;return t.related=Object(r.k)({},c,{disableRelated:s,showButton:l,oncomplete:d,autoplaytimer:p,shouldAutoAdvance:h}),e}(o),o.ab&&(o.ab=function(t){var e=t.ab;e.clone&&(e=e.clone());return Object.keys(e.tests).forEach((function(n){e.tests[n].forEach((function(e){e.addConfig&&e.addConfig(t,e.selection)}))})),e}(o)),i=o.playlist,Object(r.y)(i)&&i.indexOf(g)>-1&&(o.playlist=function(t,e){var n=(t.querySelector("title")||{}).textContent,r=b(t,'meta[property="og:title"]'),i=encodeURIComponent(r||n||""),o=b(t,'meta[property="og:description"]')||b(t,'meta[name="description"]');return o&&(i+="&page_description="+encodeURIComponent(o)),e.replace(g,i)}(document,o.playlist),o.contextual=!0),Object(p.isFileProtocol)()){var m=o,C=m.playlist,P=m.related;w(C)&&(o.playlist=j(C)),P&&w(P.file)&&(P.file=j(P.file))}return o},P=n(10),x=n(25),S=n(3),E=n(59),T=n(30),A=n(24),_=n(1);function F(t){var e=t.get("playlist");return new Promise((function(n,r){if("string"!=typeof e){var i=t.get("feedData")||{};return M(t,e,i),n()}var o=new E.a;o.on(S.eb,(function(e){var r=e.playlist;delete e.playlist,M(t,r,e),n()})),o.on(S.w,(function(e){M(t,[],{}),r(Object(_.z)(e,_.u))})),o.load(e)}))}function M(t,e,n){var r=t.attributes;r.playlist=Object(T.a)(e),r.feedData=n}function I(t){return t.attributes._destroyed}var L=n(36);function N(t){return B(t)?Promise.resolve():F(t).then((function(){if(t.get("drm")||Object(L.b)(t.get("playlist")))return Object(L.d)(t.get("edition"))})).then((function(){return F(e=t).then((function(){if(!I(e)){var t=Object(T.b)(e.get("playlist"),e);e.attributes.playlist=t;try{Object(T.e)(t)}catch(t){throw t.code+=_.u,t}var n=e.getProviders(),r=n.choose(t[0].sources[0]),i=r.provider,o=r.name;return"function"==typeof i?i:P.a.html5&&"html5"===o?P.a.html5:n.load(o).catch((function(t){throw Object(_.z)(t,_.v)}))}}));var e}))}function D(t,e){var n=[R(t)];return B(t)||n.push(Promise.resolve()),Promise.all(n)}function R(t){var e=t.attributes,n=e.error;if(n&&n.code===h.a){var r=e.pid,i=e.ph,o=new h.b(e.key);if(i>0&&i<4&&r&&o.duration()>-7776e6)return new A.a("//content.jwplatform.com/libraries/".concat(r,".js")).load().then((function(){var t=window.jwplayer.defaults.key,n=new h.b(t);n.error()||n.token()!==o.token()||(e.key=t,e.edition=n.edition(),e.error=n.error())})).catch((function(){}))}return Promise.resolve()}function B(t){var e=t.get("advertising");return!(!e||!e.outstream)}var q=function(t){var e=t.get("skin")?t.get("skin").url:void 0;if("string"==typeof e&&!function(t){for(var e=document.styleSheets,n=0,r=e.length;n<r;n++)if(e[n].href===t)return!0;return!1}(e)){return new A.a(e,!0).load().catch((function(t){return t}))}return Promise.resolve()},V=function(t){var e=t.attributes,n=e.language,r=e.base,i=e.setupConfig,o=e.intl,u=Object(l.c)(i,o,n);return!Object(l.h)(n)||Object(l.f)(u)?Promise.resolve():new Promise((function(i){return Object(l.i)(r,n).then((function(n){var r=n.response;if(!I(t)){if(!r)throw new _.s(null,_.g);e.localization=Object(l.a)(r,u),i()}})).catch((function(t){i(t.code===_.g?t:Object(_.z)(t,_.f))}))}))};var z=function(t){var e;this.start=function(n){var r=Object(x.a)(t,n),i=Promise.all([Object(P.d)(t),r,N(t),D(t),q(t),V(t)]),o=new Promise((function(t,n){e=setTimeout((function(){n(new _.s(_.m,_.x))}),6e4);var r=function(){clearTimeout(e),setTimeout(t,6e4)};i.then(r).catch(r)}));return Promise.race([i,o]).catch((function(t){var e=function(){throw t};return r.then(e).catch(e)})).then((function(t){return function(t){if(!t||!t.length)return{core:null,warnings:[]};var e=t.reduce((function(t,e){return t.concat(e)}),[]).filter((function(t){return t&&t.code}));return{core:t[0],warnings:e}}(t)}))},this.destroy=function(){clearTimeout(e),t.set("_destroyed",!0),t=null}},H=n(42),Q=n(32),W=n(16),X={removeItem:function(){}};try{X=window.localStorage||X}catch(t){}function U(t,e){this.namespace=t,this.items=e}Object(r.k)(U.prototype,{getAllItems:function(){var t=this;return this.items.reduce((function(e,n){var r=X["".concat(t.namespace,".").concat(n)];return r&&(e[n]=Object(a.serialize)(r)),e}),{})},track:function(t){var e=this;this.items.forEach((function(n){t.on("change:".concat(n),(function(t,r){try{X["".concat(e.namespace,".").concat(n)]=r}catch(t){W.a.debug&&console.error(t)}}))}))},clear:function(){var t=this;this.items.forEach((function(e){X.removeItem("".concat(t.namespace,".").concat(e))}))}});var Y=U,K=n(54),J=n(50),Z=n(9),$=n(43),G=n(60),tt=n(61),et=n(35);n(67),n(68);n.d(e,"b",(function(){return ot}));var nt=function(t){this._events={},this.modelShim=new K.a,this.modelShim._qoeItem=new Q.a,this.mediaShim={},this.setup=new z(this.modelShim),this.currentContainer=this.originalContainer=t,this.apiQueue=new i.a(this,["load","play","pause","seek","stop","playlistItem","playlistNext","playlistPrev","next","preload","setConfig","setCurrentAudioTrack","setCurrentCaptions","setCurrentQuality","setFullscreen","addButton","removeButton","castToggle","setMute","setVolume","setPlaybackRate","addCues","setCues","setPlaylistItem","resize","setCaptions","setControls"],(function(){return!0}))};function rt(t,e){e&&e.code&&(e.sourceError&&console.error(e.sourceError),console.error(_.s.logMessage(e.code)))}function it(t){t&&t.code&&console.warn(_.s.logMessage(t.code))}function ot(t,e){if(!document.body.contains(t.currentContainer)){var n=document.getElementById(t.get("id"));n&&(t.currentContainer=n)}t.currentContainer.parentElement&&t.currentContainer.parentElement.replaceChild(e,t.currentContainer),t.currentContainer=e}Object(r.k)(nt.prototype,{on:Z.a.on,once:Z.a.once,off:Z.a.off,trigger:Z.a.trigger,init:function(t,e){var n=this,i=this.modelShim,o=new Y("jwplayer",["volume","mute","captionLabel","bandwidthEstimate","bitrateSelection","qualityLabel","enableShortcuts"]),u=o&&o.getAllItems();i.attributes=i.attributes||{},Object(r.k)(this.mediaShim,J.a);var a=t,c=C(Object(r.k)({},t),u);c.id=e.id,c.setupConfig=a,Object(r.k)(i.attributes,c,J.b),i.getProviders=function(){return new H.a(c)},i.setProvider=function(){};var s=Object(G.b)();i.get("backgroundLoading")||(s=Object(tt.a)(s.getPrimedElement(),s));var l=new et.a(Object(et.b)(this.originalContainer)).once("gesture",(function(){s.prime(),n.preload(),l.destroy()}));return i.on("change:errorEvent",rt),this.setup.start(e).then((function(t){var u=t.core;if(!u)throw Object(_.z)(null,_.w);if(n.setup){n.on(S.ub,it),t.warnings.forEach((function(t){n.trigger(S.ub,t)}));var a=n.modelShim.clone();if(a.error)throw a.error;var c=n.apiQueue.queue.slice(0);n.apiQueue.destroy(),Object(r.k)(n,u.prototype),n.setup(a,e,n.originalContainer,n._events,c,s);var l=n._model;return i.off("change:errorEvent",rt),l.on("change:errorEvent",rt),o.track(l),n.updatePlaylist(l.get("playlist"),l.get("feedData")).catch((function(t){throw Object(_.z)(t,_.u)}))}})).then((function(){n.setup&&n.playerReady()})).catch((function(t){n.setup&&function(t,e,n){Promise.resolve().then((function(){var r=Object(_.A)(_.r,_.y,n),i=t._model||t.modelShim;r.message=r.message||i.get("localization").errors[r.key],delete r.key;var o=i.get("contextual");if(!o){var u=Object($.a)(t,r);$.a.cloneIcon&&u.querySelector(".jw-icon").appendChild($.a.cloneIcon("error")),ot(t,u)}i.set("errorEvent",r),i.set("state",S.mb),t.trigger(S.jb,r),o&&e.remove()}))}(n,e,t)}))},playerDestroy:function(){this.apiQueue&&this.apiQueue.destroy(),this.setup&&this.setup.destroy(),this.currentContainer!==this.originalContainer&&ot(this,this.originalContainer),this.off(),this._events=this._model=this.modelShim=this.apiQueue=this.setup=null},getContainer:function(){return this.currentContainer},get:function(t){if(this.modelShim)return t in this.mediaShim?this.mediaShim[t]:this.modelShim.get(t)},getItemQoe:function(){return this.modelShim._qoeItem},getConfig:function(){return Object(r.k)({},this.modelShim.attributes,this.mediaShim)},getCurrentCaptions:function(){return this.get("captionsIndex")},getWidth:function(){return this.get("containerWidth")},getHeight:function(){return this.get("containerHeight")},getMute:function(){return this.get("mute")},getProvider:function(){return this.get("provider")},getState:function(){return this.get("state")},getAudioTracks:function(){return null},getCaptionsList:function(){return null},getQualityLevels:function(){return null},getVisualQuality:function(){return null},getCurrentQuality:function(){return-1},getCurrentAudioTrack:function(){return-1},getSafeRegion:function(){return{x:0,y:0,width:0,height:0}},isBeforeComplete:function(){return!1},isBeforePlay:function(){return!1},createInstream:function(){return null},skipAd:function(){},attachMedia:function(){},detachMedia:function(){}});e.a=nt},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(5);function i(t){return"hls"===t.type&&r.OS.android?!1!==t.androidhls&&(!r.Browser.firefox&&parseFloat(r.OS.version.version)>=4.4):null}},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 29.3" class="jw-svg-icon jw-svg-icon-watermark" focusable="false"><path d="M37,16.68c0,2.4-.59,3.43-2.4,3.43a5.75,5.75,0,0,1-3.38-1.23v3.58a7.39,7.39,0,0,0,3.67,1c3.67,0,5.73-1.91,5.73-6.32V5.86H37Z"></path><polygon points="58.33 17.61 55.39 6.01 52.55 6.01 49.52 17.61 46.73 6.01 43.06 6.01 47.56 23.29 50.89 23.29 53.92 11.88 56.96 23.29 60.24 23.29 64.74 6.01 61.17 6.01 58.33 17.61"></polygon><path d="M73.84,6H67.47V23.29h2.2v-6.9h4.17c3.47,0,5.77-1.77,5.77-5.19S77.31,6,73.84,6Zm0,8.47H69.72V8h4.12c2.3,0,3.57,1.22,3.62,3.28C77.46,13.21,76.19,14.48,73.84,14.48Z"></path><path d="M99.2,6l-6,15.27H85V6H82.8V23.29H94.7l2-5.19h7.09l2,5.19H108L101.26,6ZM97.39,16.14l2.84-7.39L103,16.14Z"></path><polygon points="113.98 14.18 108.99 6.01 106.59 6.01 112.81 16.14 112.81 23.29 115.01 23.29 115.01 16.14 121.33 6.01 118.98 6.01 113.98 14.18"></polygon><polygon points="123.14 23.29 134.1 23.29 134.1 21.28 125.29 21.28 125.29 15.41 133.32 15.41 133.32 13.45 125.29 13.45 125.29 7.97 134.1 7.97 134.1 6.01 123.14 6.01 123.14 23.29"></polygon><path d="M144.86,15.85c2.74-.39,4.41-2,4.41-4.85,0-3.23-2.26-5-5.73-5h-6.32V23.29h2.22V16h3.08l4.94,7.29H150Zm-5.42-1.71V8h4.06c2.3,0,3.62,1.17,3.62,3.08s-1.32,3.09-3.62,3.09Z"></path><path d="M27.63.09a1,1,0,0,0-1.32.48c-.24.51-6.35,15.3-6.35,15.3-.2.46-.33.41-.33-.07,0,0,0-5.15,0-9.39,0-2.31-1.12-3.61-2.73-3.88A3.12,3.12,0,0,0,14.83,3a4.57,4.57,0,0,0-1.5,1.79c-.48.94-3.47,9.66-3.47,9.66-.16.46-.31.44-.31,0,0,0-.09-3.76-.18-4.64-.13-1.36-.44-3.59-2.2-3.7S4.77,8,4.36,9.24c-.29.84-1.65,5.35-1.65,5.35l-.2.46h0c-.06.24-.17.24-.24,0l-.11-.42Q2,14,1.74,13.31a1.71,1.71,0,0,0-.33-.66.83.83,0,0,0-.88-.22.82.82,0,0,0-.53.69,4.22,4.22,0,0,0,.07.79,29,29,0,0,0,1,4.6,1.31,1.31,0,0,0,1.8.66,3.43,3.43,0,0,0,1.24-1.81c.33-.81,2-5.48,2-5.48.18-.46.31-.44.29,0,0,0-.09,4.57-.09,6.64a13.11,13.11,0,0,0,.28,2.93,2.41,2.41,0,0,0,.82,1.27,2,2,0,0,0,1.41.4,2,2,0,0,0,.7-.24,3.15,3.15,0,0,0,.79-.71,12.52,12.52,0,0,0,1.26-2.11c.81-1.6,2.92-6.58,2.92-6.58.2-.46.33-.41.33.07,0,0-.26,8.36-.26,11.55a6.39,6.39,0,0,0,.44,2.33,2.8,2.8,0,0,0,1.45,1.61A2.57,2.57,0,0,0,18.79,29a3.76,3.76,0,0,0,1.28-1.32,15.12,15.12,0,0,0,1.07-2.31c.64-1.65,1.17-3.33,1.7-5s5-17.65,5.28-19a1.79,1.79,0,0,0,0-.46A1,1,0,0,0,27.63.09Z"></path></svg>'},function(t,e,n){"use strict";var r,i=n(62),o=n(5),u=n(6),a=[],c=[],s=[],l={},f="screen"in window&&"orientation"in window.screen,d=o.OS.android&&o.Browser.chrome,p=!1;function h(t,e){for(var n=e.length;n--;){var r=e[n];if(t.target===r.getContainer()){r.setIntersection(t);break}}}function v(){a.forEach((function(t){var e=t.model;if(!(e.get("audioMode")||!e.get("controls")||e.get("visibility")<.75)){var n=e.get("state"),r=Object(u.f)();!r&&"paused"===n&&t.api.getFullscreen()?t.api.setFullscreen(!1):"playing"===n&&t.api.setFullscreen(r)}}))}function g(){a.forEach((function(t){t.model.set("activeTab",Object(i.a)())}))}function b(t,e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function m(t){s.forEach((function(e){e(t)}))}document.addEventListener("visibilitychange",g),document.addEventListener("webkitvisibilitychange",g),d&&f&&window.screen.orientation.addEventListener("change",v),window.addEventListener("beforeunload",(function(){document.removeEventListener("visibilitychange",g),document.removeEventListener("webkitvisibilitychange",g),window.removeEventListener("scroll",m),d&&f&&window.screen.orientation.removeEventListener("change",v)})),e.a={add:function(t){a.push(t)},remove:function(t){b(t,a)},addScrollHandler:function(t){p||(p=!0,window.addEventListener("scroll",m)),s.push(t)},removeScrollHandler:function(t){var e=s.indexOf(t);-1!==e&&s.splice(e,1)},addWidget:function(t){c.push(t)},removeWidget:function(t){b(t,c)},size:function(){return a.length},observe:function(t){var e;e=window.IntersectionObserver,r||(r=new e((function(t){if(t&&t.length)for(var e=t.length;e--;){var n=t[e];h(n,a),h(n,c)}}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]})),l[t.id]||(l[t.id]=!0,r.observe(t))},unobserve:function(t){r&&l[t.id]&&(delete l[t.id],r.unobserve(t))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(0),i=n(49),o=n(6),u=n(11);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=[],s=-1;function l(){Object(i.a)(s),s=Object(i.b)((function(){c.forEach((function(t){t.view.updateBounds();var e=t.view.model.get("containerWidth");t.resized=t.width!==e,t.width=e})),c.forEach((function(t){t.contractElement.scrollLeft=2*t.width})),c.forEach((function(t){Object(u.d)(t.expandChild,{width:t.width+1}),t.resized&&t.view.model.get("visibility")&&t.view.updateStyles()})),c.forEach((function(t){t.expandElement.scrollLeft=t.width+1})),c.forEach((function(t){t.resized&&t.view.checkResized()}))}))}var f=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a={display:"block",position:"absolute",top:0,left:0},s={width:"100%",height:"100%"},f=Object(o.e)('<div style="opacity:0;visibility:hidden;overflow:hidden;"><div><div style="height:1px;"></div></div><div class="jw-contract-trigger"></div></div>'),d=f.firstChild,p=d.firstChild,h=d.nextSibling;Object(u.d)([d,h],Object(r.k)({overflow:"auto"},a,s)),Object(u.d)(f,Object(r.k)({},a,s)),this.expandElement=d,this.expandChild=p,this.contractElement=h,this.hiddenElement=f,this.element=e,this.view=n,this.model=i,this.width=0,this.resized=!1,e.firstChild?e.insertBefore(f,e.firstChild):e.appendChild(f),e.addEventListener("scroll",l,!0),c.push(this),l()}var e,n,i;return e=t,(n=[{key:"destroy",value:function(){if(this.view){var t=c.indexOf(this);-1!==t&&c.splice(t,1),this.element.removeEventListener("scroll",l,!0),this.element.removeChild(this.hiddenElement),this.view=this.model=null}}}])&&a(e.prototype,n),i&&a(e,i),t}()},function(t,e,n){"use strict";n.r(e);var r=n(0),i=setTimeout;function o(){}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void s(e.promise,t)}c(e.promise,r)}else(1===t._state?c:s)(e.promise,t._value)}))):t._deferreds.push(e)}function c(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof u)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void d((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){s(t,e)}var r,i}function s(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&u._immediateFn((function(){t._handled||u._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t((function(t){n||(n=!0,c(e,t))}),(function(t){n||(n=!0,s(e,t))}))}catch(t){if(n)return;n=!0,s(e,t)}}u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){var n=new this.constructor(o);return a(this,new f(t,e,n)),n},u.prototype.finally=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))},u.all=function(t){return new u((function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,(function(e){o(t,e)}),n)}r[t]=u,0==--i&&e(r)}catch(t){n(t)}}for(var u=0;u<r.length;u++)o(u,r[u])}))},u.resolve=function(t){return t&&"object"==typeof t&&t.constructor===u?t:new u((function(e){e(t)}))},u.reject=function(t){return new u((function(e,n){n(t)}))},u.race=function(t){return new u((function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)}))},u._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){i(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=u;window.Promise||(window.Promise=p);var h=n(20),v=n(15),g=n(17),b=n(13),m={availableProviders:g.a,registerProvider:b.a},y=n(25);m.registerPlugin=function(t,e,n){"jwpsrv"!==t&&Object(y.b)(t,e,n)};var w=m,j=n(31),O=n(16),k=n(5),C=n(64),P=n(3),x=n(32),S=n(9),E=n(8),T=n(12),A=n(2);function _(t,e){this.name=t,this.message=e.message||e.toString(),this.error=e}var F=n(7),M=n(6),I=n(11),L=n(28),N=n(52),D=n(47),R=n(53);var B=Object(r.k)({},T,E,h,{addClass:M.a,hasClass:M.i,removeClass:M.o,replaceClass:M.p,toggleClass:M.v,classList:M.d,styleDimension:M.u,createElement:M.e,emptyElement:M.h,addStyleSheet:M.b,bounds:M.c,openLink:M.l,replaceInnerHtml:M.q,css:I.b,clearCss:I.a,style:I.d,transform:I.e,getRgba:I.c,ajax:L.a,crossdomain:function(t){var e=document.createElement("a"),n=document.createElement("a");e.href=location.href;try{return n.href=t,n.href=n.href,e.protocol+"//"+e.host!=n.protocol+"//"+n.host}catch(t){}return!0},tryCatch:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(O.a.debug)return t.apply(e||this,n);try{return t.apply(e||this,n)}catch(e){return new _(t.name,e)}},Error:_,Timer:x.a,log:D.a,genId:R.b,between:N.a,foreach:function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},flashVersion:F.a,isIframe:F.m,indexOf:r.q,trim:A.i,pad:A.e,extension:A.a,hms:A.b,seconds:A.g,prefix:A.f,suffix:A.h,noop:function(){}}),q=0;function V(t,e){var n=new C.a(e);return n.on(P.hb,(function(e){t._qoe.tick("ready"),e.setupTime=t._qoe.between("setup","ready")})),n.on("all",(function(e,n){t.trigger(e,n)})),n}function z(t,e){var n=t.plugins;Object.keys(n).forEach((function(t){delete n[t]})),e.get("setupConfig")&&t.trigger("remove"),t.off(),e.playerDestroy(),e.getContainer().removeAttribute("data-jwplayer-id")}function H(t){var e=++q,n=t.id||"player-".concat(e),i=new x.a,o={},u=V(this,t);i.tick("init"),t.setAttribute("data-jwplayer-id",n),Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n}},uniqueId:{enumerable:!0,get:function(){return e}},plugins:{enumerable:!0,get:function(){return o}},_qoe:{enumerable:!0,get:function(){return i}},version:{enumerable:!0,get:function(){return j.a}},Events:{enumerable:!0,get:function(){return S.a}},utils:{enumerable:!0,get:function(){return B}},_:{enumerable:!0,get:function(){return r.g}}}),Object(r.k)(this,{_events:{},setup:function(e){return i.clear("ready"),i.tick("setup"),z(this,u),(u=V(this,t)).init(e,this),this.on(e.events,null,this)},remove:function(){return function(t){for(var e=v.a.length;e--;)if(v.a[e].uniqueId===t.uniqueId){v.a.splice(e,1);break}}(this),z(this,u),this},qoe:function(){var t=u.getItemQoe();return{setupTime:this._qoe.between("setup","ready"),firstFrame:t.getFirstFrame?t.getFirstFrame():null,player:this._qoe.dump(),item:t.dump()}},addCues:function(t){return Array.isArray(t)&&u.addCues(t),this},getAudioTracks:function(){return u.getAudioTracks()},getBuffer:function(){return u.get("buffer")},getCaptions:function(){return u.get("captions")},getCaptionsList:function(){return u.getCaptionsList()},getConfig:function(){return u.getConfig()},getContainer:function(){return u.getContainer()},getControls:function(){return u.get("controls")},getCues:function(){return u.get("cues")},getCurrentAudioTrack:function(){return u.getCurrentAudioTrack()},getCurrentCaptions:function(){return u.getCurrentCaptions()},getCurrentQuality:function(){return u.getCurrentQuality()},getCurrentTime:function(){return u.get("currentTime")},getDuration:function(){return u.get("duration")},getEnvironment:function(){return k},getFullscreen:function(){return u.get("fullscreen")},getHeight:function(){return u.getHeight()},getItemMeta:function(){return u.get("itemMeta")||{}},getMute:function(){return u.getMute()},getPlaybackRate:function(){return u.get("playbackRate")},getPlaylist:function(){return u.get("playlist")},getPlaylistIndex:function(){return u.get("item")},getPlaylistItem:function(t){if(!B.exists(t))return u.get("playlistItem");var e=this.getPlaylist();return e?e[t]:null},getPosition:function(){return u.get("position")},getProvider:function(){return u.getProvider()},getQualityLevels:function(){return u.getQualityLevels()},getSafeRegion:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return u.getSafeRegion(t)},getState:function(){return u.getState()},getStretching:function(){return u.get("stretching")},getViewable:function(){return u.get("viewable")},getVisualQuality:function(){return u.getVisualQuality()},getVolume:function(){return u.get("volume")},getWidth:function(){return u.getWidth()},setCaptions:function(t){return u.setCaptions(t),this},setConfig:function(t){return u.setConfig(t),this},setControls:function(t){return u.setControls(t),this},setCurrentAudioTrack:function(t){u.setCurrentAudioTrack(t)},setCurrentCaptions:function(t){u.setCurrentCaptions(t)},setCurrentQuality:function(t){u.setCurrentQuality(t)},setFullscreen:function(t){return u.setFullscreen(t),this},setMute:function(t){return u.setMute(t),this},setPlaybackRate:function(t){return u.setPlaybackRate(t),this},setPlaylistItem:function(t,e){return u.setPlaylistItem(t,e),this},setCues:function(t){return Array.isArray(t)&&u.setCues(t),this},setVolume:function(t){return u.setVolume(t),this},load:function(t,e){return u.load(t,e),this},play:function(t){return u.play(t),this},pause:function(t){return u.pause(t),this},playToggle:function(t){switch(this.getState()){case P.qb:case P.kb:return this.pause(t);default:return this.play(t)}},seek:function(t,e){return u.seek(t,e),this},playlistItem:function(t,e){return u.playlistItem(t,e),this},playlistNext:function(t){return u.playlistNext(t),this},playlistPrev:function(t){return u.playlistPrev(t),this},next:function(t){return u.next(t),this},castToggle:function(){return u.castToggle(),this},createInstream:function(){return u.createInstream()},stop:function(){return u.stop(),this},resize:function(t,e){return u.resize(t,e),this},addButton:function(t,e,n,r,i){return u.addButton(t,e,n,r,i),this},removeButton:function(t){return u.removeButton(t),this},attachMedia:function(){return u.attachMedia(),this},detachMedia:function(){return u.detachMedia(),this},isBeforeComplete:function(){return u.isBeforeComplete()},isBeforePlay:function(){return u.isBeforePlay()}})}Object(r.k)(H.prototype,{on:function(t,e,n){return S.c.call(this,t,e,n)},once:function(t,e,n){return S.d.call(this,t,e,n)},off:function(t,e,n){return S.b.call(this,t,e,n)},trigger:function(t,e){return(e=r.g.isObject(e)?Object(r.k)({},e):{}).type=t,O.a.debug?S.e.call(this,t,e):S.f.call(this,t,e)},getPlugin:function(t){return this.plugins[t]},addPlugin:function(t,e){this.plugins[t]=e,this.on("ready",e.addToPlayer),e.resize&&this.on("resize",e.resizeHandler)},registerPlugin:function(t,e,n){Object(y.b)(t,e,n)},getAdBlock:function(){return!1},playAd:function(t){},pauseAd:function(t){},skipAd:function(){}}),n.p=Object(h.loadFrom)();var Q=function(t){var e,n;if(t?"string"==typeof t?(e=W(t))||(n=document.getElementById(t)):"number"==typeof t?e=v.a[t]:t.nodeType&&(e=W((n=t).id||n.getAttribute("data-jwplayer-id"))):e=v.a[0],e)return e;if(n){var r=new H(n);return v.a.push(r),r}return{registerPlugin:y.b}};function W(t){for(var e=0;e<v.a.length;e++)if(v.a[e].id===t)return v.a[e];return null}function X(t){Object.defineProperties(t,{api:{get:function(){return w},set:function(){}},version:{get:function(){return j.a},set:function(){}},debug:{get:function(){return O.a.debug},set:function(t){O.a.debug=!!t}}})}X(Q);var U=Q,Y=n(35),K=n(26),J=n(24),Z=n(48),$=n(46),G=n(39),tt=r.g.extend,et={};et._=r.g,et.utils=Object(r.k)(B,{key:K.b,extend:tt,scriptloader:J.a,rssparser:{parse:$.a},tea:Z.a,UI:Y.a}),et.utils.css.style=et.utils.style,et.vid=G.a;var nt=et,rt=n(63),it=/^(?:on(?:ce)?|off|trigger)$/;function ot(t){var e={};ut(this,t,t,e),ut(this,t,H.prototype,e)}function ut(t,e,n,r){var i=Object.keys(n);i.forEach((function(o){"function"==typeof n[o]&&"Events"!==o?t[o]=function t(e,n,r,i,o){return function(){var u=Array.prototype.slice.call(arguments),a=u[0],c=n._trackCallQueue||(n._trackCallQueue=[]),s=it.test(r),l=s&&u[1]&&u[1]._callback,f=o.edition||at(n,o,"edition"),d="free"===f;if(d){var p=["addButton","addCues","detachMedia","load","next","pause","play","playlistItem","playlistNext","playlistPrev","playToggle","resize","seek","setCaptions","setConfig","setControls","setCues","setFullscreen","setMute","setPlaybackRate","setPlaylistItem","setVolume","stop"];if(p.indexOf(r)>-1)return ct(r),e;var h=["createInstream","setCurrentAudioTrack","setCurrentCaptions","setCurrentQuality"];if(h.indexOf(r)>-1)return ct(r),null}if(l||c.push([r,a]),s)return ft(n,c),n[r].apply(e,u);st(r,u);var v=n[r].apply(n,u);return"remove"===r?n.off.call(e):"setup"===r&&(n.off.call(e),n.off(a.events,null,n),n.on.call(e,a.events,null,e),n.on("all",(function(r,u){if("ready"===r){var a=Object.keys(n).filter((function(t){return"_"!==t[0]&&-1===i.indexOf(t)&&"function"==typeof n[t]})),s=i.concat(a);a.forEach((function(r){e[r]=t(e,n,r,s,o)}))}n.trigger.call(e,r,u),ft(n,c)}))),ft(n,c),v===n?e:v}}(t,e,o,i,r):"_events"===o?t._events={}:Object.defineProperty(t,o,{enumerable:!0,get:function(){return n[o]}})}))}function at(t,e,n){var r=t.getConfig()[n];return e[n]=r,r}function ct(t){console.warn("The API method jwplayer().".concat(t,"() is disabled in the free edition of JW Player."))}function st(t,e){var n={reason:Object(rt.a)()?"interaction":"external"};switch(t){case"play":case"pause":case"playToggle":case"playlistNext":case"playlistPrev":case"next":e[0]=n;break;case"seek":case"playlistItem":e[1]=n}}function lt(t,e,n){try{var r=function(t,e){switch(t){case"setup":return!!e;case"getSafeRegion":case"pauseAd":case"setControls":case"setFullscreen":case"setMute":return!!e===e?e:void 0;case"setPlaylistItem":case"getPlaylistItem":return(0|e)===e?e:void 0;case"setPlaybackRate":case"setVolume":return Number(e);case"setConfig":return Object.keys(Object(e)).join(",");case"on":case"once":case"off":case"trigger":case"getPlugin":case"addPlugin":case"registerPlugin":return""+e}return null}(e,n);t.trackExternalAPIUsage(e,r)}catch(t){O.a.debug&&console.warn(t)}}function ft(t,e){if(e.length){var n=t.getPlugin("jwpsrv");n&&n.trackExternalAPIUsage&&(e.forEach((function(t){lt(n,t[0],t[1])})),e.length=0)}}var dt=window;Object(r.k)(U,nt);var pt=function(t){var e=U(t);return e.uniqueId?e._publicApi||(e._publicApi=new ot(e)):e};Object(r.k)(pt,nt),X(pt),"function"==typeof dt.define&&dt.define.amd&&dt.define([],(function(){return pt}));var ht=pt;dt.jwplayer&&(ht=dt.jwplayer);e.default=ht}]).default;var jwDefaults = {
  "aspectratio": "16:9",
  "autostart": true,
  "controls": true,
  "displaydescription": true,
  "displaytitle": true,
  "flashplayer": "//ssl.p.jwpcdn.com/player/v/8.11.10/jwplayer.flash.swf",
  "height": 260,
  "key": "Hsc43uzKIhi6HaQNs5xzEgnXm+cMgsOpsmqH34LHfQ25/sVcY3hT96/iSysUFg+y",
  "mute": false,
  "ph": 1,
  "pid": "wr6i4gal",
  "playbackRateControls": false,
  "preload": "metadata",
  "repeat": false,
  "stagevideo": false,
  "stretching": "uniform",
  "width": "100%"
};jwplayer.defaults = jwDefaults;(window.webpackJsonpjwplayer=window.webpackJsonpjwplayer||[]).push([[3,1,2],Array(21).concat([function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"facebook",(function(){return Zt})),n.d(i,"twitter",(function(){return Yt})),n.d(i,"linkedin",(function(){return Qt})),n.d(i,"pinterest",(function(){return Xt})),n.d(i,"reddit",(function(){return Jt})),n.d(i,"tumblr",(function(){return Kt})),n.d(i,"email",(function(){return $t})),n.d(i,"link",(function(){return Gt})),n.d(i,"embed",(function(){return en}));var o=n(5),a=n(3),r=n(9),s=n(52),l=n(6),c=n(18),u=n(35),d=n(73),p=function(e,t,n,i){var o=document.createElement("div");o.className="jw-icon jw-icon-inline jw-button-color jw-reset "+e,o.setAttribute("role","button"),o.setAttribute("tabindex","0"),n&&o.setAttribute("aria-label",n),o.style.display="none";var a=new u.a(o).on("click tap enter",t||function(){});return i&&Array.prototype.forEach.call(i,(function(e){"string"==typeof e?o.appendChild(Object(d.a)(e)):o.appendChild(e)})),{ui:a,element:function(){return o},toggle:function(e){e?this.show():this.hide()},show:function(){o.style.display=""},hide:function(){o.style.display="none"}}},w=n(0),f=n(70),h=n(82),j=n(11),g=n(12);function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=function(e){var t=Object(l.c)(e),n=window.pageXOffset;return n&&o.OS.android&&document.body.parentElement.getBoundingClientRect().left>=0&&(t.left-=n,t.right-=n),t},v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(w.k)(this,r.a),this.className=t+" jw-background-color jw-reset",this.orientation=n}var t,n,i;return t=e,(n=[{key:"setup",value:function(){this.el=Object(l.e)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="'.concat(e," ").concat(t,' jw-reset" aria-hidden="true">')+'<div class="jw-slider-container jw-reset"><div class="jw-rail jw-reset"></div><div class="jw-buffer jw-reset"></div><div class="jw-progress jw-reset"></div><div class="jw-knob jw-reset"></div></div></div>'}(this.className,"jw-slider-"+this.orientation)),this.elementRail=this.el.getElementsByClassName("jw-slider-container")[0],this.elementBuffer=this.el.getElementsByClassName("jw-buffer")[0],this.elementProgress=this.el.getElementsByClassName("jw-progress")[0],this.elementThumb=this.el.getElementsByClassName("jw-knob")[0],this.ui=new u.a(this.element(),{preventScrolling:!0}).on("dragStart",this.dragStart,this).on("drag",this.dragMove,this).on("dragEnd",this.dragEnd,this).on("click tap",this.tap,this)}},{key:"dragStart",value:function(){this.trigger("dragStart"),this.railBounds=m(this.elementRail)}},{key:"dragEnd",value:function(e){this.dragMove(e),this.trigger("dragEnd")}},{key:"dragMove",value:function(e){var t,n,i=this.railBounds=this.railBounds?this.railBounds:m(this.elementRail);return n="horizontal"===this.orientation?(t=e.pageX)<i.left?0:t>i.right?100:100*Object(s.a)((t-i.left)/i.width,0,1):(t=e.pageY)>=i.bottom?0:t<=i.top?100:100*Object(s.a)((i.height-(t-i.top))/i.height,0,1),this.render(n),this.update(n),!1}},{key:"tap",value:function(e){this.railBounds=m(this.elementRail),this.dragMove(e)}},{key:"limit",value:function(e){return e}},{key:"update",value:function(e){this.trigger("update",{percentage:e})}},{key:"render",value:function(e){e=Math.max(0,Math.min(e,100)),"horizontal"===this.orientation?(this.elementThumb.style.left=e+"%",this.elementProgress.style.width=e+"%"):(this.elementThumb.style.bottom=e+"%",this.elementProgress.style.height=e+"%")}},{key:"updateBuffer",value:function(e){this.elementBuffer.style.width=e+"%"}},{key:"element",value:function(){return this.el}}])&&b(t.prototype,n),i&&b(t,i),e}(),y=function(e,t){e&&t&&(e.setAttribute("aria-label",t),e.setAttribute("role","button"),e.setAttribute("tabindex","0"))};function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var x=function(){function e(t,n,i,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(w.k)(this,r.a),this.el=document.createElement("div");var s="jw-icon jw-icon-tooltip "+t+" jw-button-color jw-reset";i||(s+=" jw-hidden"),y(this.el,n),this.el.className=s,this.tooltip=document.createElement("div"),this.tooltip.className="jw-overlay jw-reset",this.openClass="jw-open",this.componentType="tooltip",this.el.appendChild(this.tooltip),o&&o.length>0&&Array.prototype.forEach.call(o,(function(e){"string"==typeof e?a.el.appendChild(Object(d.a)(e)):a.el.appendChild(e)}))}var t,n,i;return t=e,(n=[{key:"addContent",value:function(e){this.content&&this.removeContent(),this.content=e,this.tooltip.appendChild(e)}},{key:"removeContent",value:function(){this.content&&(this.tooltip.removeChild(this.content),this.content=null)}},{key:"hasContent",value:function(){return!!this.content}},{key:"element",value:function(){return this.el}},{key:"openTooltip",value:function(e){this.isOpen||(this.trigger("open-"+this.componentType,e,{isOpen:!0}),this.isOpen=!0,Object(l.v)(this.el,this.openClass,this.isOpen))}},{key:"closeTooltip",value:function(e){this.isOpen&&(this.trigger("close-"+this.componentType,e,{isOpen:!1}),this.isOpen=!1,Object(l.v)(this.el,this.openClass,this.isOpen))}},{key:"toggleOpenState",value:function(e){this.isOpen?this.closeTooltip(e):this.openTooltip(e)}}])&&k(t.prototype,n),i&&k(t,i),e}(),O=n(28),C=n(72);function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var M=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=t,this.text=n,this.el=document.createElement("div"),this.el.className="jw-cue jw-reset"}var t,n,i;return t=e,(n=[{key:"align",value:function(e){if("%"===this.time.toString().slice(-1))this.pct=this.time;else{var t=this.time/e*100;this.pct=t+"%"}this.el.style.left=this.pct}}])&&S(t.prototype,n),i&&S(t,i),e}(),T={loadChapters:function(e){Object(O.a)(e,this.chaptersLoaded.bind(this),this.chaptersFailed,{plainText:!0})},chaptersLoaded:function(e){var t=Object(C.a)(e.responseText);if(Array.isArray(t)){var n=this._model.get("cues").concat(t);this._model.set("cues",n)}},chaptersFailed:function(){},addCue:function(e){this.cues.push(new M(e.begin,e.text))},drawCues:function(){var e=this,t=this._model.get("duration");!t||t<=0||this.cues.forEach((function(n){n.align(t),n.el.addEventListener("mouseover",(function(){e.activeCue=n})),n.el.addEventListener("mouseout",(function(){e.activeCue=null})),e.elementRail.appendChild(n.el)}))},resetCues:function(){this.cues.forEach((function(e){e.el.parentNode&&e.el.parentNode.removeChild(e.el)})),this.cues=[]}};function E(e){this.begin=e.begin,this.end=e.end,this.img=e.text}var _={loadThumbnails:function(e){e&&(this.vttPath=e.split("?")[0].split("/").slice(0,-1).join("/"),this.individualImage=null,Object(O.a)(e,this.thumbnailsLoaded.bind(this),this.thumbnailsFailed.bind(this),{plainText:!0}))},thumbnailsLoaded:function(e){var t=Object(C.a)(e.responseText);Array.isArray(t)&&(t.forEach((function(e){this.thumbnails.push(new E(e))}),this),this.drawCues())},thumbnailsFailed:function(){},chooseThumbnail:function(e){var t=Object(w.I)(this.thumbnails,{end:e},Object(w.F)("end"));t>=this.thumbnails.length&&(t=this.thumbnails.length-1);var n=this.thumbnails[t].img;return n.indexOf("://")<0&&(n=this.vttPath?this.vttPath+"/"+n:n),n},loadThumbnail:function(e){var t=this.chooseThumbnail(e),n={margin:"0 auto",backgroundPosition:"0 0"};if(t.indexOf("#xywh")>0)try{var i=/(.+)#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(t);t=i[1],n.backgroundPosition=-1*i[2]+"px "+-1*i[3]+"px",n.width=i[4],this.timeTip.setWidth(+n.width),n.height=i[5]}catch(e){return}else this.individualImage||(this.individualImage=new Image,this.individualImage.onload=Object(w.c)((function(){this.individualImage.onload=null,this.timeTip.image({width:this.individualImage.width,height:this.individualImage.height}),this.timeTip.setWidth(this.individualImage.width)}),this),this.individualImage.src=t);return n.backgroundImage='url("'+t+'")',n},showThumbnail:function(e){this._model.get("containerWidth")<=420||this.thumbnails.length<1||this.timeTip.image(this.loadThumbnail(e))},resetThumbnails:function(){this.timeTip.image({backgroundImage:"",width:0,height:0}),this.thumbnails=[]}};function A(e,t,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function I(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}function R(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(){return z(this,t),R(this,V(t).apply(this,arguments))}return H(t,e),I(t,[{key:"setup",value:function(){this.text=document.createElement("span"),this.text.className="jw-text jw-reset",this.img=document.createElement("div"),this.img.className="jw-time-thumb jw-reset",this.containerWidth=0,this.textLength=0,this.dragJustReleased=!1;var e=document.createElement("div");e.className="jw-time-tip jw-reset",e.appendChild(this.img),e.appendChild(this.text),this.addContent(e)}},{key:"image",value:function(e){Object(j.d)(this.img,e)}},{key:"update",value:function(e){this.text.textContent=e}},{key:"getWidth",value:function(){return this.containerWidth||this.setWidth(),this.containerWidth}},{key:"setWidth",value:function(e){e?this.containerWidth=e+16:this.tooltip&&(this.containerWidth=Object(l.c)(this.container).width+16)}},{key:"resetWidth",value:function(){this.containerWidth=0}}]),t}(x);var q=function(e){function t(e,n,i){var o;return z(this,t),(o=R(this,V(t).call(this,"jw-slider-time","horizontal")))._model=e,o._api=n,o.timeUpdateKeeper=i,o.timeTip=new N("jw-tooltip-time",null,!0),o.timeTip.setup(),o.cues=[],o.seekThrottled=Object(w.J)(o.performSeek,400),o.mobileHoverDistance=5,o.setup(),o}return H(t,e),I(t,[{key:"setup",value:function(){var e=this;A(V(t.prototype),"setup",this).apply(this,arguments),this._model.on("change:duration",this.onDuration,this).on("change:cues",this.updateCues,this).on("seeked",(function(){e._model.get("scrubbing")||e.updateAriaText()})).change("position",this.onPosition,this).change("buffer",this.onBuffer,this).change("streamType",this.onStreamType,this),this._model.player.change("playlistItem",this.onPlaylistItem,this);var n=this.el;Object(l.t)(n,"tabindex","0"),Object(l.t)(n,"role","slider"),Object(l.t)(n,"aria-label",this._model.get("localization").slider),n.removeAttribute("aria-hidden"),this.elementRail.appendChild(this.timeTip.element()),this.ui=(this.ui||new u.a(n)).on("move drag",this.showTimeTooltip,this).on("dragEnd out",this.hideTimeTooltip,this).on("click",(function(){return n.focus()})).on("focus",this.updateAriaText,this)}},{key:"update",value:function(e){this.seekTo=e,this.seekThrottled(),A(V(t.prototype),"update",this).apply(this,arguments)}},{key:"dragStart",value:function(){this._model.set("scrubbing",!0),A(V(t.prototype),"dragStart",this).apply(this,arguments)}},{key:"dragEnd",value:function(){A(V(t.prototype),"dragEnd",this).apply(this,arguments),this._model.set("scrubbing",!1)}},{key:"onBuffer",value:function(e,t){this.updateBuffer(t)}},{key:"onPosition",value:function(e,t){this.updateTime(t,e.get("duration"))}},{key:"onDuration",value:function(e,t){this.updateTime(e.get("position"),t),Object(l.t)(this.el,"aria-valuemin",0),Object(l.t)(this.el,"aria-valuemax",t),this.drawCues()}},{key:"onStreamType",value:function(e,t){this.streamType=t}},{key:"updateTime",value:function(e,t){var n=0;if(t)if("DVR"===this.streamType){var i=this._model.get("dvrSeekLimit"),o=t+i;n=(o-(e+i))/o*100}else"VOD"!==this.streamType&&this.streamType||(n=e/t*100);this.render(n)}},{key:"onPlaylistItem",value:function(e,t){this.reset();var n=e.get("cues");!this.cues.length&&n.length&&this.updateCues(null,n);var i=t.tracks;Object(w.j)(i,(function(e){e&&e.kind&&"thumbnails"===e.kind.toLowerCase()?this.loadThumbnails(e.file):e&&e.kind&&"chapters"===e.kind.toLowerCase()&&this.loadChapters(e.file)}),this)}},{key:"performSeek",value:function(){var e,t=this.seekTo,n=this._model.get("duration");if(0===n)this._api.play({reason:"interaction"});else if("DVR"===this.streamType){var i=this._model.get("seekRange")||{start:0},o=this._model.get("dvrSeekLimit");e=i.start+(-n-o)*t/100,this._api.seek(e,{reason:"interaction"})}else e=t/100*n,this._api.seek(Math.min(e,n-.25),{reason:"interaction"})}},{key:"showTimeTooltip",value:function(e){var t=this,n=this._model.get("duration");if(0!==n){var i,o=this._model.get("containerWidth"),a=Object(l.c)(this.elementRail),r=e.pageX?e.pageX-a.left:e.x,c=(r=Object(s.a)(r,0,a.width))/a.width,u=n*c;if(n<0)u=(n+=this._model.get("dvrSeekLimit"))-(u=n*c);if("touch"===e.pointerType&&(this.activeCue=this.cues.reduce((function(e,n){return Math.abs(r-parseInt(n.pct)/100*a.width)<t.mobileHoverDistance?n:e}),void 0)),this.activeCue)i=this.activeCue.text;else{i=Object(g.timeFormat)(u,!0),n<0&&u>-1&&(i="Live")}var d=this.timeTip;d.update(i),this.textLength!==i.length&&(this.textLength=i.length,d.resetWidth()),this.showThumbnail(u),Object(l.a)(d.el,"jw-open");var p=d.getWidth(),w=a.width/100,f=o-a.width,h=0;p>f&&(h=(p-f)/(200*w));var b=100*Math.min(1-h,Math.max(h,c)).toFixed(3);Object(j.d)(d.el,{left:b+"%"})}}},{key:"hideTimeTooltip",value:function(){Object(l.o)(this.timeTip.el,"jw-open")}},{key:"updateCues",value:function(e,t){var n=this;this.resetCues(),t&&t.length&&(t.forEach((function(e){n.addCue(e)})),this.drawCues())}},{key:"updateAriaText",value:function(){var e=this._model;if(!e.get("seeking")){var t=e.get("position"),n=e.get("duration"),i=Object(g.timeFormat)(t);"DVR"!==this.streamType&&(i+=" of ".concat(Object(g.timeFormat)(n)));var o=this.el;document.activeElement!==o&&(this.timeUpdateKeeper.textContent=i),Object(l.t)(o,"aria-valuenow",t),Object(l.t)(o,"aria-valuetext",i)}}},{key:"reset",value:function(){this.resetThumbnails(),this.timeTip.resetWidth(),this.textLength=0}}]),t}(v);Object(w.k)(q.prototype,T,_);var F=q;function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(e,n,i){var o;Z(this,t);var a="jw-slider-volume";return"vertical"===e&&(a+=" jw-volume-tip"),(o=Y(this,X(t).call(this,a,e))).setup(),o.element().classList.remove("jw-background-color"),Object(l.t)(i,"tabindex","0"),Object(l.t)(i,"aria-label",n),Object(l.t)(i,"aria-orientation",e),Object(l.t)(i,"aria-valuemin",0),Object(l.t)(i,"aria-valuemax",100),Object(l.t)(i,"role","slider"),o.uiOver=new u.a(i).on("click",(function(){})),o}return J(t,e),t}(v),G=function(e){function t(e,n,i,o,a){var r;Z(this,t),(r=Y(this,X(t).call(this,n,i,!0,o)))._model=e,r.horizontalContainer=a;var s=e.get("localization").volumeSlider;return r.horizontalSlider=new $("horizontal",s,a,Q(r)),r.verticalSlider=new $("vertical",s,r.tooltip,Q(r)),a.appendChild(r.horizontalSlider.element()),r.addContent(r.verticalSlider.element()),r.verticalSlider.on("update",(function(e){this.trigger("update",e)}),Q(r)),r.horizontalSlider.on("update",(function(e){this.trigger("update",e)}),Q(r)),r.horizontalSlider.uiOver.on("keydown",(function(e){var t=e.sourceEvent;switch(t.keyCode){case 37:t.stopPropagation(),r.trigger("adjustVolume",-10);break;case 39:t.stopPropagation(),r.trigger("adjustVolume",10)}})),r.ui=new u.a(r.el,{directSelect:!0}).on("click enter",r.toggleValue,Q(r)).on("tap",r.toggleOpenState,Q(r)),r.addSliderHandlers(r.ui),r.addSliderHandlers(r.horizontalSlider.uiOver),r.addSliderHandlers(r.verticalSlider.uiOver),r.onAudioMode(null,e.get("audioMode")),r._model.on("change:audioMode",r.onAudioMode,Q(r)),r._model.on("change:volume",r.onVolume,Q(r)),r}var n,i,o;return J(t,e),n=t,(i=[{key:"onAudioMode",value:function(e,t){var n=t?0:-1;Object(l.t)(this.horizontalContainer,"tabindex",n)}},{key:"addSliderHandlers",value:function(e){var t=this.openSlider,n=this.closeSlider;e.on("over",t,this).on("out",n,this).on("focus",t,this).on("blur",n,this)}},{key:"openSlider",value:function(e){U(X(t.prototype),"openTooltip",this).call(this,e),Object(l.v)(this.horizontalContainer,this.openClass,!0)}},{key:"closeSlider",value:function(e){U(X(t.prototype),"closeTooltip",this).call(this,e),Object(l.v)(this.horizontalContainer,this.openClass,!1),this.horizontalContainer.blur()}},{key:"toggleValue",value:function(){this.trigger("toggleValue")}},{key:"destroy",value:function(){this.horizontalSlider.uiOver.destroy(),this.verticalSlider.uiOver.destroy(),this.ui.destroy()}}])&&D(n.prototype,i),o&&D(n,o),t}(x);function ee(e,t,n,i,o){var a=document.createElement("div");a.className="jw-reset-text jw-tooltip jw-tooltip-".concat(t),a.setAttribute("dir","auto");var r=document.createElement("div");r.className="jw-text",a.appendChild(r),e.appendChild(a);var s={dirty:!!n,opened:!1,text:n,open:function(){s.touchEvent||(c(!0),i&&i())},close:function(){s.touchEvent||(c(!1),o&&o())},setText:function(e){e!==s.text&&(s.text=e,s.dirty=!0),s.opened&&c(!0)}},c=function(e){e&&s.dirty&&(Object(l.q)(r,s.text),s.dirty=!1),s.opened=e,Object(l.v)(a,"jw-open",e)};return e.addEventListener("mouseover",s.open),e.addEventListener("focus",s.open),e.addEventListener("blur",s.close),e.addEventListener("mouseout",s.close),e.addEventListener("touchstart",(function(){s.touchEvent=!0}),{passive:!0}),s}var te=n(53);function ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ie(e,t){var n=document.createElement("div");return n.className="jw-icon jw-icon-inline jw-text jw-reset "+e,t&&Object(l.t)(n,"role",t),n}function oe(e){var t=document.createElement("div");return t.className="jw-reset ".concat(e),t}function ae(e,t){if(o.Browser.safari){var n=p("jw-icon-airplay jw-off",e,t.airplay,Object(f.b)("airplay-off,airplay-on"));return ee(n.element(),"airplay",t.airplay),n}if(o.Browser.chrome&&window.chrome){var i=document.createElement("google-cast-launcher");Object(l.t)(i,"tabindex","-1"),i.className+=" jw-reset";var a=p("jw-icon-cast",null,t.cast);a.ui.off();var r=a.element();return r.style.cursor="pointer",r.appendChild(i),a.button=i,ee(r,"chromecast",t.cast),a}}function re(e,t){return e.filter((function(e){return!t.some((function(t){return t.id+t.btnClass===e.id+e.btnClass&&e.callback===t.callback}))}))}var se=function(e,t){t.forEach((function(t){t.element&&(t=t.element()),e.appendChild(t)}))},le=function(){function e(t,n,i){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(w.k)(this,r.a),this._api=t,this._model=n,this._isMobile=o.OS.mobile,this._volumeAnnouncer=i.querySelector(".jw-volume-update");var c,d,h,j=n.get("localization"),g=new F(n,t,i.querySelector(".jw-time-update")),b=this.menus=[];this.ui=[];var m="",v=j.volume;if(this._isMobile){if(!(n.get("sdkplatform")||o.OS.iOS&&o.OS.version.major<10)){var y=Object(f.b)("volume-0,volume-100");h=p("jw-icon-volume",(function(){t.setMute()}),v,y)}}else{(d=document.createElement("div")).className="jw-horizontal-volume-container";var k=(c=new G(n,"jw-icon-volume",v,Object(f.b)("volume-0,volume-50,volume-100"),d)).element();b.push(c),Object(l.t)(k,"role","button"),n.change("mute",(function(e,t){var n=t?j.unmute:j.mute;Object(l.t)(k,"aria-label",n)}),this)}var x=p("jw-icon-next",(function(){t.next({feedShownId:m,reason:"interaction"})}),j.next,Object(f.b)("next")),O=p("jw-icon-settings jw-settings-submenu-button",(function(e){s.trigger("settingsInteraction","quality",!0,e)}),j.settings,Object(f.b)("settings"));Object(l.t)(O.element(),"aria-haspopup","true");var C=p("jw-icon-cc jw-settings-submenu-button",(function(e){s.trigger("settingsInteraction","captions",!1,e)}),j.cc,Object(f.b)("cc-off,cc-on"));Object(l.t)(C.element(),"aria-haspopup","true");var S=p("jw-text-live",(function(){s.goToLiveEdge()}),j.liveBroadcast);S.element().textContent=j.liveBroadcast;var M,T,E,_=this.elements={alt:(M="jw-text-alt",T="status",E=document.createElement("span"),E.className="jw-text jw-reset "+M,T&&Object(l.t)(E,"role",T),E),play:p("jw-icon-playback",(function(){t.playToggle({reason:"interaction"})}),j.play,Object(f.b)("play,pause,stop")),rewind:p("jw-icon-rewind",(function(){s.rewind()}),j.rewind,Object(f.b)("rewind")),live:S,next:x,elapsed:ie("jw-text-elapsed","timer"),countdown:ie("jw-text-countdown","timer"),time:g,duration:ie("jw-text-duration","timer"),mute:h,volumetooltip:c,horizontalVolumeContainer:d,cast:ae((function(){t.castToggle()}),j),fullscreen:p("jw-icon-fullscreen",(function(){t.setFullscreen()}),j.fullscreen,Object(f.b)("fullscreen-off,fullscreen-on")),spacer:oe("jw-spacer"),buttonContainer:oe("jw-button-container"),settingsButton:O,captionsButton:C},A=ee(C.element(),"captions",j.cc),P=function(e){var t=e.get("captionsList")[e.get("captionsIndex")],n=j.cc;t&&"Off"!==t.label&&(n=t.label),A.setText(n)},z=ee(_.play.element(),"play",j.play);this.setPlayText=function(e){z.setText(e)};var L=_.next.element(),I=ee(L,"next",j.nextUp,(function(){var e=n.get("nextUp");m=Object(te.b)(te.a),s.trigger("nextShown",{mode:e.mode,ui:"nextup",itemsShown:[e],feedData:e.feedData,reason:"hover",feedShownId:m})}),(function(){m=""}));Object(l.t)(L,"dir","auto"),ee(_.rewind.element(),"rewind",j.rewind),ee(_.settingsButton.element(),"settings",j.settings);var R=ee(_.fullscreen.element(),"fullscreen",j.fullscreen),V=[_.play,_.rewind,_.next,_.volumetooltip,_.mute,_.horizontalVolumeContainer,_.alt,_.live,_.elapsed,_.countdown,_.duration,_.spacer,_.cast,_.captionsButton,_.settingsButton,_.fullscreen].filter((function(e){return e})),H=[_.time,_.buttonContainer].filter((function(e){return e}));this.el=document.createElement("div"),this.el.className="jw-controlbar jw-reset",se(_.buttonContainer,V),se(this.el,H);var B=n.get("logo");if(B&&"control-bar"===B.position&&this.addLogo(B),_.play.show(),_.fullscreen.show(),_.mute&&_.mute.show(),n.change("volume",this.onVolume,this),n.change("mute",(function(e,t){s.renderVolume(t,e.get("volume"))}),this),n.change("state",this.onState,this),n.change("duration",this.onDuration,this),n.change("position",this.onElapsed,this),n.change("fullscreen",(function(e,t){var n=s.elements.fullscreen.element();Object(l.v)(n,"jw-off",t);var i=e.get("fullscreen")?j.exitFullscreen:j.fullscreen;R.setText(i),Object(l.t)(n,"aria-label",i)}),this),n.change("streamType",this.onStreamTypeChange,this),n.change("dvrLive",(function(e,t){var n=j.liveBroadcast,i=j.notLive,o=s.elements.live.element(),a=!1===t;Object(l.v)(o,"jw-dvr-live",a),Object(l.t)(o,"aria-label",a?i:n),o.textContent=n}),this),n.change("altText",this.setAltText,this),n.change("customButtons",this.updateButtons,this),n.on("change:captionsIndex",P,this),n.on("change:captionsList",P,this),n.change("nextUp",(function(e,t){m=Object(te.b)(te.a);var n=j.nextUp;t&&t.title&&(n+=": ".concat(t.title)),I.setText(n),_.next.toggle(!!t)}),this),n.change("audioMode",this.onAudioMode,this),_.cast&&(n.change("castAvailable",this.onCastAvailable,this),n.change("castActive",this.onCastActive,this)),_.volumetooltip&&(_.volumetooltip.on("update",(function(e){var t=e.percentage;this._api.setVolume(t)}),this),_.volumetooltip.on("toggleValue",(function(){this._api.setMute()}),this),_.volumetooltip.on("adjustVolume",(function(e){this.trigger("adjustVolume",e)}),this)),_.cast&&_.cast.button){var N=_.cast.ui.on("click tap enter",(function(e){"click"!==e.type&&_.cast.button.click(),this._model.set("castClicked",!0)}),this);this.ui.push(N)}var q=new u.a(_.duration).on("click tap enter",(function(){if("DVR"===this._model.get("streamType")){var e=this._model.get("position"),t=this._model.get("dvrSeekLimit");this._api.seek(Math.max(-t,e),{reason:"interaction"})}}),this);this.ui.push(q);var D=new u.a(this.el).on("click tap drag",(function(){this.trigger(a.tb)}),this);this.ui.push(D),b.forEach((function(e){e.on("open-tooltip",s.closeMenus,s)}))}var t,n,i;return t=e,(n=[{key:"onVolume",value:function(e,t){this.renderVolume(e.get("mute"),t)}},{key:"renderVolume",value:function(e,t){var n=this.elements.mute,i=this.elements.volumetooltip;if(n&&(Object(l.v)(n.element(),"jw-off",e),Object(l.v)(n.element(),"jw-full",!e)),i){var o=e?0:t,a=i.element();i.verticalSlider.render(o),i.horizontalSlider.render(o);var r=i.tooltip,s=i.horizontalContainer;Object(l.v)(a,"jw-off",e),Object(l.v)(a,"jw-full",t>=75&&!e),Object(l.t)(r,"aria-valuenow",o),Object(l.t)(s,"aria-valuenow",o);var c="Volume ".concat(o,"%");Object(l.t)(r,"aria-valuetext",c),Object(l.t)(s,"aria-valuetext",c),document.activeElement!==r&&document.activeElement!==s&&(this._volumeAnnouncer.textContent=c)}}},{key:"onCastAvailable",value:function(e,t){this.elements.cast.toggle(t)}},{key:"onCastActive",value:function(e,t){this.elements.fullscreen.toggle(!t),this.elements.cast.button&&Object(l.v)(this.elements.cast.button,"jw-off",!t)}},{key:"onElapsed",value:function(e,t){var n,i,o=e.get("duration");if("DVR"===e.get("streamType")){var a=Math.ceil(t),r=this._model.get("dvrSeekLimit");n=i=a>=-r?"":"-"+Object(g.timeFormat)(-(t+r)),e.set("dvrLive",a>=-r)}else n=Object(g.timeFormat)(t),i=Object(g.timeFormat)(o-t);this.elements.elapsed.textContent=n,this.elements.countdown.textContent=i}},{key:"onDuration",value:function(e,t){this.elements.duration.textContent=Object(g.timeFormat)(Math.abs(t))}},{key:"onAudioMode",value:function(e,t){var n=this.elements.time.element();t?this.elements.buttonContainer.insertBefore(n,this.elements.elapsed):Object(l.m)(this.el,n)}},{key:"element",value:function(){return this.el}},{key:"setAltText",value:function(e,t){this.elements.alt.textContent=t}},{key:"closeMenus",value:function(e){this.menus.forEach((function(t){e&&e.target===t.el||t.closeTooltip(e)}))}},{key:"rewind",value:function(){var e,t=0,n=this._model.get("currentTime");n?e=n-10:(e=this._model.get("position")-10,"DVR"===this._model.get("streamType")&&(t=this._model.get("duration"))),this._api.seek(Math.max(e,t),{reason:"interaction"})}},{key:"onState",value:function(e,t){var n=e.get("localization"),i=n.play;this.setPlayText(i),t===a.qb&&("LIVE"!==e.get("streamType")?(i=n.pause,this.setPlayText(i)):(i=n.stop,this.setPlayText(i))),Object(l.t)(this.elements.play.element(),"aria-label",i)}},{key:"onStreamTypeChange",value:function(e,t){var n="LIVE"===t,i="DVR"===t;this.elements.rewind.toggle(!n),this.elements.live.toggle(n||i),Object(l.t)(this.elements.live.element(),"tabindex",n?"-1":"0"),this.elements.duration.style.display=i?"none":"",this.onDuration(e,e.get("duration")),this.onState(e,e.get("state"))}},{key:"addLogo",value:function(e){var t=this.elements.buttonContainer,n=new h.a(e.file,this._model.get("localization").logo,(function(){e.link&&Object(l.l)(e.link,"_blank",{rel:"noreferrer"})}),"logo","jw-logo-button");e.link||Object(l.t)(n.element(),"tabindex","-1"),t.insertBefore(n.element(),t.querySelector(".jw-spacer").nextSibling)}},{key:"goToLiveEdge",value:function(){if("DVR"===this._model.get("streamType")){var e=Math.min(this._model.get("position"),-1),t=this._model.get("dvrSeekLimit");this._api.seek(Math.max(-t,e),{reason:"interaction"}),this._api.play({reason:"interaction"})}}},{key:"updateButtons",value:function(e,t,n){if(t){var i,o,a=this.elements.buttonContainer;t!==n&&n?(i=re(t,n),o=re(n,t),this.removeButtons(a,o)):i=t;for(var r=i.length-1;r>=0;r--){var s=i[r],l=new h.a(s.img,s.tooltip,s.callback,s.id,s.btnClass);s.tooltip&&ee(l.element(),s.id,s.tooltip);var c=void 0;"related"===l.id?c=this.elements.settingsButton.element():"share"===l.id?c=a.querySelector('[button="related"]')||this.elements.settingsButton.element():(c=this.elements.spacer.nextSibling)&&"logo"===c.getAttribute("button")&&(c=c.nextSibling),a.insertBefore(l.element(),c)}}}},{key:"removeButtons",value:function(e,t){for(var n=t.length;n--;){var i=e.querySelector('[button="'.concat(t[n].id,'"]'));i&&e.removeChild(i)}}},{key:"toggleCaptionsButtonState",value:function(e){var t=this.elements.captionsButton;t&&Object(l.v)(t.element(),"jw-off",!e)}},{key:"destroy",value:function(){var e=this;this._model.off(null,null,this),Object.keys(this.elements).forEach((function(t){var n=e.elements[t];n&&"function"==typeof n.destroy&&e.elements[t].destroy()})),this.ui.forEach((function(e){e.destroy()})),this.ui=[]}}])&&ne(t.prototype,n),i&&ne(t,i),e}(),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="jw-display-icon-container jw-display-icon-'.concat(e,' jw-reset">')+'<div class="jw-icon jw-icon-'.concat(e,' jw-button-color jw-reset" role="button" tabindex="0" aria-label="').concat(t,'"></div>')+"</div>"},ue=function(e){return'<div class="jw-display jw-reset"><div class="jw-display-container jw-reset"><div class="jw-display-controls jw-reset">'+ce("rewind",e.rewind)+ce("display",e.playback)+ce("next",e.next)+"</div></div></div>"};function de(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var pe=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=i.querySelector(".jw-icon");this.el=i,this.ui=new u.a(o).on("click tap enter",(function(){var e=t.get("position"),i=t.get("duration"),o=e-10,a=0;"DVR"===t.get("streamType")&&(a=i),n.seek(Math.max(o,a))}))}var t,n,i;return t=e,(n=[{key:"element",value:function(){return this.el}}])&&de(t.prototype,n),i&&de(t,i),e}();function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function he(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(e,n,i){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=he(this,je(t).call(this));var a=e.get("localization"),r=i.querySelector(".jw-icon");if(o.icon=r,o.el=i,o.ui=new u.a(r).on("click tap enter",(function(e){o.trigger(e.type)})),e.on("change:state",(function(e,t){var n;switch(t){case"buffering":n=a.buffer;break;case"playing":n=a.pause;break;case"idle":case"paused":n=a.playback;break;case"complete":n=a.replay;break;default:n=""}""!==n?r.setAttribute("aria-label",n):r.removeAttribute("aria-label")})),e.get("displayPlaybackLabel")){var s=o.icon.getElementsByClassName("jw-idle-icon-text")[0];s||(s=Object(l.e)('<div class="jw-idle-icon-text">'.concat(a.playback,"</div>")),Object(l.a)(o.icon,"jw-idle-label"),o.icon.appendChild(s))}return o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,e),n=t,(i=[{key:"element",value:function(){return this.el}}])&&fe(n.prototype,i),o&&fe(n,o),t}(r.a);function me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ve=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=i.querySelector(".jw-icon");this.ui=new u.a(o).on("click tap enter",(function(){n.next({reason:"interaction"})})),t.change("nextUp",(function(e,t){i.style.visibility=t?"":"hidden"})),this.el=i}var t,n,i;return t=e,(n=[{key:"element",value:function(){return this.el}}])&&me(t.prototype,n),i&&me(t,i),e}();function ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ke=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=Object(l.e)(ue(t.get("localization")));var i=this.el.querySelector(".jw-display-controls"),o={};xe("rewind",Object(f.b)("rewind"),pe,i,o,t,n),xe("display",Object(f.b)("play,pause,buffer,replay"),be,i,o,t,n),xe("next",Object(f.b)("next"),ve,i,o,t,n),this.container=i,this.buttons=o}var t,n,i;return t=e,(n=[{key:"element",value:function(){return this.el}},{key:"destroy",value:function(){var e=this.buttons;Object.keys(e).forEach((function(t){e[t].ui&&e[t].ui.destroy()}))}}])&&ye(t.prototype,n),i&&ye(t,i),e}();function xe(e,t,n,i,o,a,r){var s=i.querySelector(".jw-display-icon-".concat(e)),l=i.querySelector(".jw-icon-".concat(e));t.forEach((function(e){l.appendChild(e)})),o[e]=new n(a,r,s)}var Oe=n(2);function Ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Se=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(w.k)(this,r.a),this._model=t,this._api=n,this._playerElement=i,this.localization=t.get("localization"),this.state="tooltip",this.enabled=!1,this.shown=!1,this.feedShownId="",this.closeUi=null,this.tooltipUi=null,this.reset()}var t,n,i;return t=e,(n=[{key:"setup",value:function(e){this.container=e.createElement("div"),this.container.className="jw-nextup-container jw-reset";var t=Object(l.e)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return'<div class="jw-nextup jw-background-color jw-reset"><div class="jw-nextup-tooltip jw-reset"><div class="jw-nextup-thumbnail jw-reset"></div><div class="jw-nextup-body jw-reset">'+'<div class="jw-nextup-header jw-reset">'.concat(e,"</div>")+'<div class="jw-nextup-title jw-reset-text" dir="auto">'.concat(t,"</div>")+'<div class="jw-nextup-duration jw-reset">'.concat(n,"</div>")+"</div></div>"+'<button type="button" class="jw-icon jw-nextup-close jw-reset" aria-label="'.concat(i,'"></button>')+"</div>"}());t.querySelector(".jw-nextup-close").appendChild(Object(f.a)("close")),this.addContent(t),this.closeButton=this.content.querySelector(".jw-nextup-close"),this.closeButton.setAttribute("aria-label",this.localization.close),this.tooltip=this.content.querySelector(".jw-nextup-tooltip");var n=this._model,i=n.player;this.enabled=!1,n.on("change:nextUp",this.onNextUp,this),i.change("duration",this.onDuration,this),i.change("position",this.onElapsed,this),i.change("streamType",this.onStreamType,this),i.change("state",(function(e,t){"complete"===t&&this.toggle(!1)}),this),this.closeUi=new u.a(this.closeButton,{directSelect:!0}).on("click tap enter",(function(){this.nextUpSticky=!1,this.toggle(!1)}),this),this.tooltipUi=new u.a(this.tooltip).on("click tap",this.click,this)}},{key:"loadThumbnail",value:function(e){return this.nextUpImage=new Image,this.nextUpImage.onload=function(){this.nextUpImage.onload=null}.bind(this),this.nextUpImage.src=e,{backgroundImage:'url("'+e+'")'}}},{key:"click",value:function(){var e=this.feedShownId;this.reset(),this._api.next({feedShownId:e,reason:"interaction"})}},{key:"toggle",value:function(e,t){if(this.enabled&&(Object(l.v)(this.container,"jw-nextup-sticky",!!this.nextUpSticky),this.shown!==e)){this.shown=e,Object(l.v)(this.container,"jw-nextup-container-visible",e),Object(l.v)(this._playerElement,"jw-flag-nextup",e);var n=this._model.get("nextUp");e&&n?(this.feedShownId=Object(te.b)(te.a),this.trigger("nextShown",{mode:n.mode,ui:"nextup",itemsShown:[n],feedData:n.feedData,reason:t,feedShownId:this.feedShownId})):this.feedShownId=""}}},{key:"setNextUpItem",value:function(e){var t=this;setTimeout((function(){if(t.thumbnail=t.content.querySelector(".jw-nextup-thumbnail"),Object(l.v)(t.content,"jw-nextup-thumbnail-visible",!!e.image),e.image){var n=t.loadThumbnail(e.image);Object(j.d)(t.thumbnail,n)}t.header=t.content.querySelector(".jw-nextup-header"),t.header.textContent=Object(l.e)(t.localization.nextUp).textContent,t.title=t.content.querySelector(".jw-nextup-title");var i=e.title;t.title.textContent=i?Object(l.e)(i).textContent:"";var o=e.duration;o&&(t.duration=t.content.querySelector(".jw-nextup-duration"),t.duration.textContent="number"==typeof o?Object(g.timeFormat)(o):o)}),500)}},{key:"onNextUp",value:function(e,t){this.reset(),t||(t={showNextUp:!1}),this.enabled=!(!t.title&&!t.image),this.enabled&&(t.showNextUp||(this.nextUpSticky=!1,this.toggle(!1)),this.setNextUpItem(t))}},{key:"onDuration",value:function(e,t){if(t){var n=e.get("nextupoffset"),i=-10;n&&(i=Object(Oe.d)(n,t)),i<0&&(i+=t),Object(Oe.c)(n)&&t-5<i&&(i=t-5),this.offset=i}}},{key:"onElapsed",value:function(e,t){var n=this.nextUpSticky;if(this.enabled&&!1!==n){var i=t>=this.offset;i&&void 0===n?(this.nextUpSticky=i,this.toggle(i,"time")):!i&&n&&this.reset()}}},{key:"onStreamType",value:function(e,t){"VOD"!==t&&(this.nextUpSticky=!1,this.toggle(!1))}},{key:"element",value:function(){return this.container}},{key:"addContent",value:function(e){this.content&&this.removeContent(),this.content=e,this.container.appendChild(e)}},{key:"removeContent",value:function(){this.content&&(this.container.removeChild(this.content),this.content=null)}},{key:"reset",value:function(){this.nextUpSticky=void 0,this.toggle(!1)}},{key:"destroy",value:function(){this.off(),this._model.off(null,null,this),this.closeUi&&this.closeUi.destroy(),this.tooltipUi&&this.tooltipUi.destroy()}}])&&Ce(t.prototype,n),i&&Ce(t,i),e}(),Me=function(e,t){var n=e.featured,i=e.showLogo,o=e.type;return e.logo=i?'<span class="jw-rightclick-logo jw-reset"></span>':"",'<li class="jw-reset jw-rightclick-item '.concat(n?"jw-featured":"",'">').concat(Te[o](e,t),"</li>")},Te={link:function(e){var t=e.link,n=e.title,i=e.logo;return'<a href="'.concat(t||"",'" class="jw-rightclick-link jw-reset-text" target="_blank" rel="noreferrer" dir="auto">').concat(i).concat(n||"","</a>")},info:function(e,t){return'<button type="button" class="jw-reset-text jw-rightclick-link jw-info-overlay-item" dir="auto">'.concat(t.videoInfo,"</button>")},share:function(e,t){return'<button type="button" class="jw-reset-text jw-rightclick-link jw-share-item" dir="auto">'.concat(t.sharing.heading,"</button>")},keyboardShortcuts:function(e,t){return'<button type="button" class="jw-reset-text jw-rightclick-link jw-shortcuts-item" dir="auto">'.concat(t.shortcuts.keyboardShortcuts,"</button>")}},Ee=n(31),_e=n(7),Ae=n(14);function Pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ze={free:0,pro:1,premium:2,ads:3,invalid:4,enterprise:6,trial:7,platinum:8,starter:9,business:10,developer:11};function Le(e){var t=Object(l.e)(e),n=t.querySelector(".jw-rightclick-logo");return n&&n.appendChild(Object(f.a)("jwplayer-logo")),t}function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ve(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(e,t,n){return(He="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Be(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ve(this,Be(t).apply(this,arguments))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,e),n=t,(i=[{key:"buildArray",value:function(){var e=this.model,n=He(Be(t.prototype),"buildArray",this).call(this),i=e.get("localization").abouttext,o=n.items;if(i){for(var a,r,s=0;s<o.length;s++)if(o[s].featured){r=o[s],a=s;break}if(r){r.showLogo=!1;var l={title:i,type:"link",link:e.get("aboutlink")||r.link};o[a]=l}}return this.shareHandler&&o.unshift({type:"share"}),n}},{key:"enableSharing",value:function(e){var t=this;this.shareHandler=function(){t.mouseOverContext=!1,t.hideMenu(),e()}}},{key:"addHideMenuHandlers",value:function(){He(Be(t.prototype),"addHideMenuHandlers",this).call(this);var e=this.el.querySelector(".jw-share-item");e&&e.addEventListener("click",this.shareHandler)}},{key:"removeHideMenuHandlers",value:function(){if(He(Be(t.prototype),"removeHideMenuHandlers",this).call(this),this.el){var e=this.el.querySelector(".jw-share-item");e&&e.removeEventListener("click",this.shareHandler)}}}])&&Re(n.prototype,i),o&&Re(n,o),t}(function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.infoOverlay=t,this.shortcutsTooltip=n}var t,n,i;return t=e,(n=[{key:"buildArray",value:function(){var e=Ee.a.split("+")[0],t=this.model,n=t.get("edition"),i=t.get("localization").poweredBy,o='<span class="jw-reset">JW Player '.concat(e,"</span>"),a={items:[{type:"info"},{title:Object(Ae.g)(i)?"".concat(o," ").concat(i):"".concat(i," ").concat(o),type:"link",featured:!0,showLogo:!0,link:"https://jwplayer.com/learn-more?e=".concat(ze[n])}]},r=t.get("provider"),s=a.items;if(r&&r.name.indexOf("flash")>=0){var l="Flash Version "+Object(_e.a)();s.push({title:l,type:"link",link:"http://www.adobe.com/software/flash/about/"})}return this.shortcutsTooltip&&s.splice(s.length-1,0,{type:"keyboardShortcuts"}),a}},{key:"rightClick",value:function(e){if(this.lazySetup(),this.mouseOverContext)return!1;this.hideMenu(),this.showMenu(e),this.addHideMenuHandlers()}},{key:"getOffset",value:function(e){var t=Object(l.c)(this.wrapperElement),n=e.pageX-t.left,i=e.pageY-t.top;return this.model.get("touchMode")&&(i-=100),{x:n,y:i}}},{key:"showMenu",value:function(e){var t=this,n=this.getOffset(e);return this.el.style.left=n.x+"px",this.el.style.top=n.y+"px",this.outCount=0,Object(l.a)(this.playerContainer,"jw-flag-rightclick-open"),Object(l.a)(this.el,"jw-open"),clearTimeout(this._menuTimeout),this._menuTimeout=setTimeout((function(){return t.hideMenu()}),3e3),!1}},{key:"hideMenu",value:function(e){e&&this.el&&this.el.contains(e.target)||(Object(l.o)(this.playerContainer,"jw-flag-rightclick-open"),Object(l.o)(this.el,"jw-open"))}},{key:"lazySetup",value:function(){var e,t,n,i,o=this,a=(e=this.buildArray(),t=this.model.get("localization"),n=e.items,i=(void 0===n?[]:n).map((function(e){return Me(e,t)})),'<div class="jw-rightclick jw-reset">'+'<ul class="jw-rightclick-list jw-reset">'.concat(i.join(""),"</ul>")+"</div>");if(this.el){if(this.html!==a){this.html=a;var r=Le(a);Object(l.h)(this.el);for(var s=r.childNodes.length;s--;)this.el.appendChild(r.firstChild)}}else this.html=a,this.el=Le(this.html),this.wrapperElement.appendChild(this.el),this.hideMenuHandler=function(e){return o.hideMenu(e)},this.overHandler=function(){o.mouseOverContext=!0},this.outHandler=function(e){o.mouseOverContext=!1,e.relatedTarget&&!o.el.contains(e.relatedTarget)&&++o.outCount>1&&o.hideMenu()},this.infoOverlayHandler=function(){o.mouseOverContext=!1,o.hideMenu(),o.infoOverlay.open()},this.shortcutsTooltipHandler=function(){o.mouseOverContext=!1,o.hideMenu(),o.shortcutsTooltip.open()}}},{key:"setup",value:function(e,t,n){this.wrapperElement=n,this.model=e,this.mouseOverContext=!1,this.playerContainer=t,this.ui=new u.a(n).on("longPress",this.rightClick,this)}},{key:"addHideMenuHandlers",value:function(){this.removeHideMenuHandlers(),this.wrapperElement.addEventListener("touchstart",this.hideMenuHandler),document.addEventListener("touchstart",this.hideMenuHandler),o.OS.mobile||(this.wrapperElement.addEventListener("click",this.hideMenuHandler),document.addEventListener("click",this.hideMenuHandler),this.el.addEventListener("mouseover",this.overHandler),this.el.addEventListener("mouseout",this.outHandler)),this.el.querySelector(".jw-info-overlay-item").addEventListener("click",this.infoOverlayHandler),this.shortcutsTooltip&&this.el.querySelector(".jw-shortcuts-item").addEventListener("click",this.shortcutsTooltipHandler)}},{key:"removeHideMenuHandlers",value:function(){this.wrapperElement&&(this.wrapperElement.removeEventListener("click",this.hideMenuHandler),this.wrapperElement.removeEventListener("touchstart",this.hideMenuHandler)),this.el&&(this.el.querySelector(".jw-info-overlay-item").removeEventListener("click",this.infoOverlayHandler),this.el.removeEventListener("mouseover",this.overHandler),this.el.removeEventListener("mouseout",this.outHandler),this.shortcutsTooltip&&this.el.querySelector(".jw-shortcuts-item").removeEventListener("click",this.shortcutsTooltipHandler)),document.removeEventListener("click",this.hideMenuHandler),document.removeEventListener("touchstart",this.hideMenuHandler)}},{key:"destroy",value:function(){clearTimeout(this._menuTimeout),this.removeHideMenuHandlers(),this.el&&(this.hideMenu(),this.hideMenuHandler=null,this.el=null),this.wrapperElement&&(this.wrapperElement.oncontextmenu=null,this.wrapperElement=null),this.model&&(this.model=null),this.ui&&(this.ui.destroy(),this.ui=null)}}])&&Pe(t.prototype,n),i&&Pe(t,i),e}()),Fe=function(){return'<div class="jw-reset jw-settings-menu" role="menu" aria-expanded="false"><div class="jw-reset jw-settings-topbar" role="menubar"></div></div>'};function De(e){var t=document.getElementsByClassName("jw-icon-settings")[0];if(t){var n="Right"===e?Object(l.k)(t):Object(l.n)(t);n&&n.focus()}}var Ue=function(e){Object.keys(e).forEach((function(t){e[t].deactivate()}))},We=function(e){return'<div class="jw-reset jw-settings-submenu jw-settings-submenu-'.concat(e,'" role="menu" aria-expanded="false">')+"</div>"};var Ze=function(e){e.forEach((function(e){e.deactivate()}))},Ye=function(e){return'<button type="button" class="jw-reset-text jw-settings-content-item" role="menuitemradio" aria-checked="false" dir="auto">'+"".concat(e)+"</button>"};function Qe(e,t,n){var i,o=Object(l.e)(Ye(t)),a=new u.a(o).on("click tap enter",(function(e){n(e)})),r={activate:function(){Object(l.v)(o,"jw-settings-item-active",!0),o.setAttribute("aria-checked","true"),i=!0},deactivate:function(){Object(l.v)(o,"jw-settings-item-active",!1),o.setAttribute("aria-checked","false"),i=!1},element:function(){return o},uiElement:function(){return a},destroy:function(){this.deactivate(),a.destroy()}};return Object.defineProperty(r,"active",{enumerable:!0,get:function(){return i}}),r}var Xe="audioTracks",Je="captions",Ke="quality",$e="playbackRates",Ge=Ke,et=function(e,t,n,i,o){var a=e.getSubmenu(t);if(a)a.replaceContent(n);else{var r=p("jw-settings-".concat(t),(function(n){e.activateSubmenu(t,!1,n&&"enter"!==n.type),a.element().children[0].focus()}),t,[i]),s=r.element();s.setAttribute("role","menuitemradio"),s.setAttribute("aria-checked","false"),s.setAttribute("aria-label",o),(a=function(e,t,n){var i,o=[],a=Object(l.e)(We(e)),r=t.element();r.setAttribute("name",e),r.className+=" jw-submenu-"+e,t.show();var s=function(e,t){e?e.focus():void 0!==t&&o[t].element().focus()},c=function(e){var t=Object(l.k)(r),n=Object(l.n)(r),i=Object(l.k)(e.target),a=Object(l.n)(e.target),c=e.key.replace(/(Arrow|ape)/,"");switch(c){case"Tab":s(e.shiftKey?n:t);break;case"Left":s(n||Object(l.n)(document.getElementsByClassName("jw-icon-settings")[0]));break;case"Up":s(a,o.length-1);break;case"Right":s(t);break;case"Down":s(i,0)}e.preventDefault(),"Esc"!==c&&e.stopPropagation()},u={addContent:function(e){e&&(e.forEach((function(e){a.appendChild(e.element()),e.element().setAttribute("tabindex","-1"),e.element().addEventListener("keydown",c)})),o=e)},replaceContent:function(e){u.removeContent(),this.addContent(e)},removeContent:function(){o.forEach((function(e){e.element().removeEventListener("keydown",c)})),Object(l.h)(a),o=[]},getItems:function(){return o},activate:function(){Object(l.v)(a,"jw-settings-submenu-active",!0),a.setAttribute("aria-expanded","true"),r.setAttribute("aria-checked","true"),i=!0},deactivate:function(){Object(l.v)(a,"jw-settings-submenu-active",!1),a.setAttribute("aria-expanded","false"),r.setAttribute("aria-checked","false"),i=!1},activateItem:function(e){var t=o[e];t&&!t.active&&(Ze(o),t.activate())},element:function(){return a},destroy:function(){o&&(o.forEach((function(e){e.destroy()})),this.removeContent())}};return Object.defineProperties(u,{name:{enumerable:!0,get:function(){return e}},active:{enumerable:!0,get:function(){return i}},categoryButtonElement:{enumerable:!0,get:function(){return r}},isDefault:{enumerable:!0,get:function(){return n}}}),u}(t,r,t===Ge)).addContent(n),"ontouchstart"in window||ee(s,t,o),e.addSubmenu(a)}return a};function tt(e){e.removeSubmenu(Je)}function nt(e){e.removeSubmenu(Xe)}function it(e){e.removeSubmenu(Ke)}function ot(e){e.removeSubmenu($e)}function at(e,t,n){var i=e.elements.settingsButton,o=function(e,t,n){var i,o=function(e){/jw-(settings|video|nextup-close|sharing-link|share-item)/.test(e.target.className)||h.close()},a=null,r={},s=Object(l.e)(Fe()),c=new u.a(s).on("keydown",(function(e){var t=e.sourceEvent,n=e.target,i=Object(l.k)(n),o=Object(l.n)(n),a=t.key.replace(/(Arrow|ape)/,"");switch(a){case"Esc":h.close(e);break;case"Left":o?o.focus():(h.close(),De(a));break;case"Right":i&&d.element()&&n!==d.element()&&i.focus();break;case"Up":case"Down":h.activateSubmenu(n.getAttribute("name"),"Up"===a)}if(t.stopPropagation(),/13|27|32|37|38|39|40/.test(t.keyCode))return t.preventDefault(),!1})),d=p("jw-settings-close",(function(e){h.close(e)}),n.close,[Object(f.a)("close")]);d.ui.on("keydown",(function(e){var t=e.sourceEvent,n=t.key.replace(/(Arrow|ape)/,"");("Enter"===n||"Right"===n||"Tab"===n&&!t.shiftKey)&&h.close(t),"Right"===n&&De(t.key)})),d.show();var w=s.querySelector(".jw-settings-topbar");w.appendChild(d.element());var h={ui:c,closeButton:d,open:function(t,n){(e(i=!0,n),s.setAttribute("aria-expanded","true"),document.addEventListener("click",o),t&&n&&"enter"===n.type)?a.categoryButtonElement.focus():a.element().firstChild.focus()},close:function(t){e(i=!1,t),a=null,Ue(r),s.setAttribute("aria-expanded","false"),document.removeEventListener("click",o)},toggle:function(){i?this.close():this.open()},addSubmenu:function(e){if(e){var n=e.name;if(r[n]=e,e.isDefault)Object(l.m)(w,e.categoryButtonElement),e.categoryButtonElement.addEventListener("keydown",(function(e){9===e.keyCode&&e.shiftKey&&h.close(e)}));else{var i=w.querySelector(".jw-submenu-sharing");w.insertBefore(e.categoryButtonElement,i||d.element())}s.appendChild(e.element()),t.show()}},getSubmenu:function(e){return r[e]},getSubmenuNames:function(){return Object.keys(r)},removeSubmenu:function(e){var n=r[e];n&&n.element().parentNode===s&&(s.removeChild(n.element()),w.removeChild(n.categoryButtonElement),n.destroy(),delete r[e],Object.keys(r).length||(this.close(),t.hide()))},activateSubmenu:function(e,t){var n=r[e];n&&(n.active||(Ue(r),n.activate(),a=n),(t?n.element().lastChild:n.element().firstChild).focus())},activateFirstSubmenu:function(e){var t=Object.keys(r)[0];this.activateSubmenu(t,!1,e)},element:function(){return s},destroy:function(){this.close(),this.ui.destroy(),this.closeButton.ui.destroy(),Object(l.h)(s)}};return Object.defineProperties(h,{visible:{enumerable:!0,get:function(){return i}}}),h}(t,{hide:function(){return i.hide()},show:function(){return i.show()}},n);return e.on("settingsInteraction",(function(e,t,n){var i=o.getSubmenu(e),a=n&&"enter"!==n.type,r=Object(w.f)(o.open,10);(i||t)&&(o.visible?t||i.active?o.close():o.activateSubmenu(e,!1,a):(i?o.activateSubmenu(e,!1,a):o.activateFirstSubmenu(a),r(t,n)))})),o}function rt(e,t,n,i){var o=n.player,a=function(t,n){var i=e.getSubmenu(t);i&&i.activateItem(n)},r=function(t,n){!n||n.length<=1?nt(e):function(e,t,n,i,o){var a=t.map((function(t,i){return Qe(t.name,t.name,(function(t){n(i),e.close(t)}))}));et(e,Xe,a,Object(f.a)("audio-tracks"),o).activateItem(i)}(e,n,(function(e){return i.setCurrentAudioTrack(e)}),o.get("currentAudioTrack"),o.get("localization").audioTracks)},s=function(n,a){if(!a||a.length<=1)it(e);else{var r=o.get("localization"),s=r.hd,l=r.auto;!function(e,t,n,i,o,a){var r=t.map((function(t,i){var o=t.label;return"Auto"===o&&0===i&&(o="".concat(a,'&nbsp;<span class="jw-reset jw-auto-label"></span>')),Qe(t.label,o,(function(t){n(i),e.close(t)}))}));et(e,Ke,r,Object(f.a)("quality-100"),o).activateItem(i)}(e,a,(function(e){return i.setCurrentQuality(e)}),o.get("currentLevel"),s,l)}!function(e,t){var n=e.getSubmenuNames(),i=n.length>1||n.some((function(e){return"quality"===e||"playbackRates"===e}));t.elements.settingsButton.toggle(i)}(e,t)},l=function(t,n){o.get("supportsPlaybackRate")&&"LIVE"!==o.get("streamType")&&o.get("playbackRateControls")&&n.length>1?function(e,t,n,i,o){var a=t.map((function(t){return Qe(0,Object(Ae.g)(o)?"x"+t:t+"x",(function(i){n(t),e.close(i)}))}));et(e,$e,a,Object(f.a)("playback-rate"),o).activateItem(i)}(e,n,(function(e){return i.setPlaybackRate(e)}),n.indexOf(o.get("playbackRate")),o.get("localization").playbackRates):ot(e)},c=function(e,t,n){var i=o.get("levels");if(i&&"Auto"===i[0].label){var a=t.getItems()[0].element().querySelector(".jw-auto-label"),r=i[e.index]||{label:""};a.textContent=n?"":r.label}};o.change("levels",s,e),o.on("change:currentLevel",(function(t,n){var i=e.getSubmenu("quality"),r=o.get("visualQuality");r&&i&&c(r.level,i,n),a("quality",n)}),e),o.change("audioTracks",r,e),o.on("change:currentAudioTrack",(function(e,t){a("audioTracks",t)}),e),o.on("change:playlistItem",(function(){tt(e),t.elements.captionsButton.hide(),e.visible&&e.close()})),o.change("captionsList",(function(n,a){var r=t.elements.captionsButton;if(!a||a.length<=1)return tt(e),void r.hide();var s=o.get("localization"),l=s.cc,c=s.off;!function(e,t,n,i,o,a){var r=t.map((function(t,i){var o=t.label;return"Off"!==o&&"off"!==t.id||0!==i||(o=a),Qe(t.id,o,(function(t){n(i),e.close(t)}))}));et(e,Je,r,Object(f.a)("cc-off"),o).activateItem(i)}(e,a,(function(e){return i.setCurrentCaptions(e)}),o.get("captionsIndex"),l,c),t.toggleCaptionsButtonState(!!o.get("captionsIndex")),r.show()}),e),o.change("captionsIndex",(function(n,i){var o=e.getSubmenu("captions");o&&(o.activateItem(i),t.toggleCaptionsButtonState(!!i))}),e),o.change("playbackRates",l,e),o.change("playbackRate",(function(e,t){var n=o.get("playbackRates");n&&a("playbackRates",n.indexOf(t))}),e),o.on("change:playbackRateControls",(function(){l(0,o.get("playbackRates"))})),o.on("change:visualQuality",(function(t,n){var i=e.getSubmenu("quality");n&&i&&c(n.level,i,o.get("currentLevel"))})),o.on("change:castActive",(function(t,n,i){n!==i&&(n?(nt(e),it(e),ot(e)):(r(0,o.get("audioTracks")),s(0,o.get("levels")),l(0,o.get("playbackRates"))))}),e),o.on("change:streamType",(function(){l(0,o.get("playbackRates"))}),e)}var st=n(80),lt=n(43),ct=n(15),ut=function(e,t,n,i){var o=Object(l.e)('<div class="jw-reset jw-info-overlay jw-modal"><div class="jw-reset jw-info-container"><div class="jw-reset-text jw-info-title" dir="auto"></div><div class="jw-reset-text jw-info-duration" dir="auto"></div><div class="jw-reset-text jw-info-description" dir="auto"></div></div><div class="jw-reset jw-info-clientid"></div></div>'),r=!1,s=null,c=!1,u=function(e){/jw-info/.test(e.target.className)||w.close()},d=function(){var i,a,s,c,u,d=p("jw-info-close",(function(){w.close()}),t.get("localization").close,[Object(f.a)("close")]);d.show(),Object(l.m)(o,d.element()),a=o.querySelector(".jw-info-title"),s=o.querySelector(".jw-info-duration"),c=o.querySelector(".jw-info-description"),u=o.querySelector(".jw-info-clientid"),t.change("playlistItem",(function(e,t){var n=t.description,i=t.title;Object(l.q)(c,n||""),Object(l.q)(a,i||"Unknown Title")})),t.change("duration",(function(e,n){var i="";switch(t.get("streamType")){case"LIVE":i="Live";break;case"DVR":i="DVR";break;default:n&&(i=Object(g.timeFormat)(n))}s.textContent=i}),w),u.textContent=(i=n.getPlugin("jwpsrv"))&&"function"==typeof i.doNotTrackUser&&i.doNotTrackUser()?"":"Client ID: ".concat(function(){try{return window.localStorage.jwplayerLocalId}catch(e){return"none"}}()),e.appendChild(o),r=!0};var w={open:function(){r||d(),document.addEventListener("click",u),c=!0;var e=t.get("state");e===a.qb&&n.pause("infoOverlayInteraction"),s=e,i(!0)},close:function(){document.removeEventListener("click",u),c=!1,t.get("state")===a.pb&&s===a.qb&&n.play("infoOverlayInteraction"),s=null,i(!1)},destroy:function(){this.close(),t.off(null,null,this)}};return Object.defineProperties(w,{visible:{enumerable:!0,get:function(){return c}}}),w};var dt=function(e,t,n){var i,o=!1,r=null,s=n.get("localization").shortcuts,c=Object(l.e)(function(e,t){var n=e.map((function(e){return'<div class="jw-shortcuts-row jw-reset">'+'<span class="jw-shortcuts-description jw-reset">'.concat(e.description,"</span>")+'<span class="jw-shortcuts-key jw-reset">'.concat(e.key,"</span>")+"</div>"})).join("");return'<div class="jw-shortcuts-tooltip jw-modal jw-reset" title="'.concat(t,'">')+'<span class="jw-hidden" id="jw-shortcuts-tooltip-explanation">Press shift question mark to access a list of keyboard shortcuts</span><div class="jw-reset jw-shortcuts-container"><div class="jw-reset jw-shortcuts-header">'+'<span class="jw-reset jw-shortcuts-title">'.concat(t,"</span>")+'<button role="switch" class="jw-reset jw-switch" data-jw-switch-enabled="Enabled" data-jw-switch-disabled="Disabled"><span class="jw-reset jw-switch-knob"></span></button></div><div class="jw-reset jw-shortcuts-tooltip-list"><div class="jw-shortcuts-tooltip-descriptions jw-reset">'+"".concat(n)+"</div></div></div></div>"}(function(e){var t=e.playPause,n=e.volumeToggle,i=e.fullscreenToggle,o=e.seekPercent,a=e.increaseVolume,r=e.decreaseVolume,s=e.seekForward,l=e.seekBackward;return[{key:e.spacebar,description:t},{key:"↑",description:a},{key:"↓",description:r},{key:"→",description:s},{key:"←",description:l},{key:"c",description:e.captionsToggle},{key:"f",description:i},{key:"m",description:n},{key:"0-9",description:o}]}(s),s.keyboardShortcuts)),u={reason:"settingsInteraction"},d=c.querySelector(".jw-switch"),w=function(){d.setAttribute("aria-checked",n.get("enableShortcuts")),d.addEventListener("click",g),Object(l.a)(c,"jw-open"),r=n.get("state"),c.querySelector(".jw-shortcuts-close").focus(),document.addEventListener("click",j),o=!0,t.pause(u)},h=function(){d.removeEventListener("click",g),Object(l.o)(c,"jw-open"),document.removeEventListener("click",j),e.focus(),o=!1,r===a.qb&&t.play(u)},j=function(e){/jw-shortcuts|jw-switch/.test(e.target.className)||h()},g=function(e){var t=e.currentTarget,i="true"!==t.getAttribute("aria-checked");t.setAttribute("aria-checked",i),n.set("enableShortcuts",i)};return i=p("jw-shortcuts-close",(function(){h()}),n.get("localization").close,[Object(f.a)("close")]),Object(l.m)(c,i.element()),i.show(),e.appendChild(c),{el:c,close:h,open:w,toggleVisibility:function(){o?h():w()}}},pt=function(e){return'<div class="jw-float-icon jw-icon jw-button-color jw-reset" aria-label='.concat(e,' tabindex="0">')+"</div>"};function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ht(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=ht(this,jt(t).call(this))).element=Object(l.e)(pt(n)),i.element.appendChild(Object(f.a)("close")),i.ui=new u.a(i.element,{directSelect:!0}).on("click tap enter",(function(){i.trigger(a.tb)})),e.appendChild(i.element),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(t,e),n=t,(i=[{key:"destroy",value:function(){this.element&&(this.ui.destroy(),this.element.parentNode.removeChild(this.element),this.element=null)}}])&&ft(n.prototype,i),o&&ft(n,o),t}(r.a);function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yt(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(124);var Ot=o.OS.mobile?4e3:2e3,Ct=[27];lt.a.cloneIcon=f.a,ct.a.forEach((function(e){if(e.getState()===a.mb){var t=e.getContainer().querySelector(".jw-error-msg .jw-icon");t&&!t.hasChildNodes()&&t.appendChild(lt.a.cloneIcon("error"))}}));var St=function(){return{reason:"interaction"}},Mt=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=yt(this,kt(t).call(this))).activeTimeout=-1,i.inactiveTime=0,i.context=e,i.controlbar=null,i.displayContainer=null,i.backdrop=null,i.enabled=!0,i.instreamState=null,i.keydownCallback=null,i.keyupCallback=null,i.blurCallback=null,i.mute=null,i.nextUpToolTip=null,i.playerContainer=n,i.wrapperElement=n.querySelector(".jw-wrapper"),i.rightClickMenu=null,i.settingsMenu=null,i.shortcutsTooltip=null,i.showing=!1,i.muteChangeCallback=null,i.unmuteCallback=null,i.logo=null,i.div=null,i.dimensions={},i.infoOverlay=null,i.userInactiveTimeout=function(){var e=i.inactiveTime-Object(c.a)();i.inactiveTime&&e>16?i.activeTimeout=setTimeout(i.userInactiveTimeout,e):i.playerContainer.querySelector(".jw-tab-focus")?i.resetActiveTimeout():i.userInactive()},i}var n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(t,e),n=t,(i=[{key:"resetActiveTimeout",value:function(){clearTimeout(this.activeTimeout),this.activeTimeout=-1,this.inactiveTime=0}},{key:"enable",value:function(e,t){var n=this,i=this.context.createElement("div");i.className="jw-controls jw-reset",this.div=i;var r=this.context.createElement("div");r.className="jw-controls-backdrop jw-reset",this.backdrop=r,this.logo=this.playerContainer.querySelector(".jw-logo");var c=t.get("touchMode");if(!this.displayContainer){var u=new ke(t,e);u.buttons.display.on("click tap enter",(function(){n.trigger(a.p),n.userActive(1e3),e.playToggle(St()),t.get("isFloating")?n.wrapperElement.focus():n.playerContainer.focus()})),this.div.appendChild(u.element()),this.displayContainer=u}this.infoOverlay=new ut(i,t,e,(function(e){Object(l.v)(n.div,"jw-info-open",e),e&&n.div.querySelector(".jw-info-close").focus()})),o.OS.mobile||(this.shortcutsTooltip=new dt(this.wrapperElement,e,t)),this.rightClickMenu=new qe(this.infoOverlay,this.shortcutsTooltip),c?(Object(l.a)(this.playerContainer,"jw-flag-touch"),this.rightClickMenu.setup(t,this.playerContainer,this.wrapperElement)):t.change("flashBlocked",(function(e,t){t?n.rightClickMenu.destroy():n.rightClickMenu.setup(e,n.playerContainer,n.wrapperElement)}),this);var d=t.get("floating");if(d){var w=new bt(i,t.get("localization").close);w.on(a.tb,(function(){return n.trigger("dismissFloating",{doNotForward:!0})})),!1!==d.dismissible&&Object(l.a)(this.playerContainer,"jw-floating-dismissible")}var h=this.controlbar=new le(e,t,this.playerContainer.querySelector(".jw-hidden-accessibility"));if(h.on(a.tb,(function(){return n.userActive()})),h.on("nextShown",(function(e){this.trigger("nextShown",e)}),this),h.on("adjustVolume",y,this),t.get("nextUpDisplay")&&!h.nextUpToolTip){var j=new Se(t,e,this.playerContainer);j.on("all",this.trigger,this),j.setup(this.context),h.nextUpToolTip=j,this.div.appendChild(j.element())}this.div.appendChild(h.element());var g=null,b=this.settingsMenu=at(h,(function(i,o){var r=t.get("state"),s={reason:"settingsInteraction"},c="keydown"===(o&&o.sourceEvent||o||{}).type;Object(l.v)(n.div,"jw-settings-open",i),Object(st.a)(t.get("containerWidth"))<2&&(i&&r===a.qb?e.pause(s):i||r!==a.pb||g!==a.qb||e.play(s));var u=i||c?0:Ot;n.userActive(u),g=r;var d=n.controlbar.elements.settingsButton;!i&&d&&(c?d.element().focus():o&&(t.get("isFloating")?n.wrapperElement:n.playerContainer).focus())}),t.get("localization"));rt(b,h,t,e),o.OS.mobile?this.div.appendChild(b.element()):(this.playerContainer.setAttribute("aria-describedby","jw-shortcuts-tooltip-explanation"),this.div.insertBefore(b.element(),h.element()));var m=function(t){if(t.get("autostartMuted")){var i=function(){return n.unmuteAutoplay(e,t)},a=function(e,t){t||i()};o.OS.mobile&&(n.mute=p("jw-autostart-mute jw-off",i,t.get("localization").unmute,[Object(f.a)("volume-0")]),n.mute.show(),n.div.appendChild(n.mute.element())),h.renderVolume(!0,t.get("volume")),Object(l.a)(n.playerContainer,"jw-flag-autostart"),t.on("change:autostartFailed",i,n),t.on("change:autostartMuted change:mute",a,n),n.muteChangeCallback=a,n.unmuteCallback=i}};function v(n){var i=0,o=t.get("duration"),a=t.get("position");if("DVR"===t.get("streamType")){var r=t.get("dvrSeekLimit");i=o,o=Math.max(a,-r)}var l=Object(s.a)(a+n,i,o);e.seek(l,St())}function y(n){var i=Object(s.a)(t.get("volume")+n,0,100);e.setVolume(i)}t.once("change:autostartMuted",m),m(t);var k=function(i){if(i.ctrlKey||i.metaKey)return!0;var o=!n.settingsMenu.visible,a=!0===t.get("enableShortcuts"),r=n.instreamState;if(a||-1!==Ct.indexOf(i.keyCode)){switch(i.keyCode){case 27:if(t.get("fullscreen"))e.setFullscreen(!1),n.playerContainer.blur(),n.userInactive();else{var s=e.getPlugin("related");s&&s.close({type:"escape"})}n.rightClickMenu.el&&n.rightClickMenu.hideMenuHandler(),n.infoOverlay.visible&&n.infoOverlay.close(),n.shortcutsTooltip&&n.shortcutsTooltip.close();break;case 13:case 32:if(document.activeElement.classList.contains("jw-switch")&&32===i.keyCode)return!0;e.playToggle(St());break;case 37:!r&&o&&v(-5);break;case 39:!r&&o&&v(5);break;case 38:o&&y(10);break;case 40:o&&y(-10);break;case 67:var l=e.getCaptionsList().length;if(l){var c=(e.getCurrentCaptions()+1)%l;e.setCurrentCaptions(c)}break;case 77:e.setMute();break;case 70:e.setFullscreen();break;case 191:n.shortcutsTooltip&&n.shortcutsTooltip.toggleVisibility();break;default:if(i.keyCode>=48&&i.keyCode<=59){var u=(i.keyCode-48)/10*t.get("duration");e.seek(u,St())}}return/13|32|37|38|39|40/.test(i.keyCode)?(i.preventDefault(),!1):void 0}};this.playerContainer.addEventListener("keydown",k),this.keydownCallback=k;var x=function(e){if(9===e.keyCode){var t=n.playerContainer.contains(e.target)?0:Ot;n.userActive(t)}};this.playerContainer.addEventListener("keyup",x),this.keyupCallback=x;var O=function(e){var t=e.relatedTarget||document.querySelector(":focus");t&&(n.playerContainer.contains(t)||n.userInactive())};this.playerContainer.addEventListener("blur",O,!0),this.blurCallback=O;var C=function e(){"jw-shortcuts-tooltip-explanation"===n.playerContainer.getAttribute("aria-describedby")&&n.playerContainer.removeAttribute("aria-describedby"),n.playerContainer.removeEventListener("blur",e,!0)};this.shortcutsTooltip&&(this.playerContainer.addEventListener("blur",C,!0),this.onRemoveShortcutsDescription=C),this.userActive(),this.addControls(),this.addBackdrop(),t.set("controlsEnabled",!0)}},{key:"addControls",value:function(){this.wrapperElement.appendChild(this.div)}},{key:"disable",value:function(e){var t=this.nextUpToolTip,n=this.settingsMenu,i=this.infoOverlay,o=this.controlbar,a=this.rightClickMenu,r=this.playerContainer,s=this.div;clearTimeout(this.activeTimeout),this.activeTimeout=-1,this.off(),e.off(null,null,this),e.set("controlsEnabled",!1),s.parentNode&&(Object(l.o)(r,"jw-flag-touch"),s.parentNode.removeChild(s)),o&&o.destroy(),a&&a.destroy(),this.keydownCallback&&r.removeEventListener("keydown",this.keydownCallback),this.keyupCallback&&r.removeEventListener("keyup",this.keyupCallback),this.blurCallback&&r.removeEventListener("blur",this.blurCallback),this.onRemoveShortcutsDescription&&r.removeEventListener("blur",this.onRemoveShortcutsDescription),this.displayContainer&&this.displayContainer.destroy(),t&&t.destroy(),n&&(n.destroy(),s.removeChild(n.element())),i&&i.destroy(),this.removeBackdrop()}},{key:"controlbarHeight",value:function(){return this.dimensions.cbHeight||(this.dimensions.cbHeight=this.controlbar.element().clientHeight),this.dimensions.cbHeight}},{key:"element",value:function(){return this.div}},{key:"resize",value:function(){this.dimensions={}}},{key:"unmuteAutoplay",value:function(e,t){var n=!t.get("autostartFailed"),i=t.get("mute");n?i=!1:t.set("playOnViewable",!1),this.muteChangeCallback&&(t.off("change:autostartMuted change:mute",this.muteChangeCallback),this.muteChangeCallback=null),this.unmuteCallback&&(t.off("change:autostartFailed",this.unmuteCallback),this.unmuteCallback=null),t.set("autostartFailed",void 0),t.set("autostartMuted",void 0),e.setMute(i),this.controlbar.renderVolume(i,t.get("volume")),this.mute&&this.mute.hide(),Object(l.o)(this.playerContainer,"jw-flag-autostart"),this.userActive()}},{key:"mouseMove",value:function(e){var t=this.controlbar.element().contains(e.target),n=this.controlbar.nextUpToolTip&&this.controlbar.nextUpToolTip.element().contains(e.target),i=this.logo&&this.logo.contains(e.target),o=t||n||i?0:Ot;this.userActive(o)}},{key:"userActive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;e>0?(this.inactiveTime=Object(c.a)()+e,-1===this.activeTimeout&&(this.activeTimeout=setTimeout(this.userInactiveTimeout,e))):this.resetActiveTimeout(),this.showing||(Object(l.o)(this.playerContainer,"jw-flag-user-inactive"),this.showing=!0,this.trigger("userActive"))}},{key:"userInactive",value:function(){clearTimeout(this.activeTimeout),this.activeTimeout=-1,this.settingsMenu.visible||(this.inactiveTime=0,this.showing=!1,Object(l.a)(this.playerContainer,"jw-flag-user-inactive"),this.trigger("userInactive"))}},{key:"addBackdrop",value:function(){var e=this.instreamState?this.div:this.wrapperElement.querySelector(".jw-captions");this.wrapperElement.insertBefore(this.backdrop,e)}},{key:"removeBackdrop",value:function(){var e=this.backdrop.parentNode;e&&e.removeChild(this.backdrop)}},{key:"setupInstream",value:function(){this.instreamState=!0,this.userActive(),this.addBackdrop(),this.settingsMenu&&this.settingsMenu.close(),Object(l.o)(this.playerContainer,"jw-flag-autostart"),this.controlbar.elements.time.element().setAttribute("tabindex","-1")}},{key:"destroyInstream",value:function(e){this.instreamState=null,this.addBackdrop(),e.get("autostartMuted")&&Object(l.a)(this.playerContainer,"jw-flag-autostart"),this.controlbar.elements.time.element().setAttribute("tabindex","0")}}])&&vt(n.prototype,i),r&&vt(n,r),t}(r.a),Tt=n(126),Et=n.n(Tt),_t=n(127),At=n.n(_t),Pt=n(128),zt=n.n(Pt),Lt=n(129),It=n.n(Lt),Rt=n(130),Vt=n.n(Rt),Ht=n(131),Bt=n.n(Ht),Nt=n(132),qt=n.n(Nt),Ft=n(133),Dt=n.n(Ft),Ut=n(134),Wt=n.n(Ut),Zt={label:"facebook",src:"http://www.facebook.com/sharer/sharer.php?u=[URL]",svg:Et.a,jwsource:"fb"},Yt={label:"twitter",src:"http://twitter.com/intent/tweet?url=[URL]",svg:Bt.a,jwsource:"twi"},Qt={label:"linkedin",src:"https://www.linkedin.com/cws/share?url=[URL]",svg:At.a,jwsource:"lkn"},Xt={label:"pinterest",src:"http://pinterest.com/pin/create/button/?url=[URL]",svg:zt.a,jwsource:"pin"},Jt={label:"reddit",src:"http://www.reddit.com/submit?url=[URL]",svg:It.a,jwsource:"rdt"},Kt={label:"tumblr",src:"http://tumblr.com/widgets/share/tool?canonicalUrl=[URL]",svg:Vt.a,jwsource:"tbr"},$t={label:"email",src:"mailto:?body=[URL]",svg:qt.a,jwsource:"em"},Gt={label:"link",svg:Dt.a,jwsource:"cl"},en={label:"embed",svg:Wt.a,jwsource:"ceb"},tn=n(84),nn=n.n(tn),on=!1,an=function(e,t,o,a){Object(w.k)(this,r.a);var s,c,u=this,d="jw-settings-sharing",p=[Zt,Yt,$t];function f(e,t){var n=e.indexOf("MEDIAID");return n>0&&t?e.replace("MEDIAID",t):-1===n?e:void 0}function h(e){o.trigger("settingsInteraction","sharing",!1,e)}function j(){var n=e.getPlaylistItem(),i=p.filter((function(e){return"link"===e.label}))[0];s=function(e){var n=window.location.toString();if(window.top!==window&&(n=document.referrer),t.link){var i=f(t.link,e);n=i||n}return n}(n.mediaid),i?-1===i.src.indexOf(s)&&(i.src=s):p.push(Object(w.k)({src:g(s,Gt.jwsource)},Gt));var o=p.filter((function(e){return"embed"===e.label}));c=function(e){var n=null;if(t.code){var i=f(t.code,e);n=i||n}return n}(n.mediaid)||t.code,o[0]?o[0].src=decodeURIComponent(c):t.code&&p.push(Object(w.k)({src:decodeURIComponent(c)},en))}function g(e,t){var n=/([?&]jwsource)=?[^&]*/;if(n.test(e))return e.replace(n,"$1=".concat(t));var i=-1===e.indexOf("?")?"?":"&";return"".concat(e).concat(i,"jwsource=").concat(t)}function b(e){u.trigger("click",{method:e})}return function(){if(Array.isArray(t.sites)){var n=[];Object(w.j)(t.sites,(function(e){Object(w.y)(e)&&i[e]?n.push(i[e]):Object(w.x)(e)&&n.push(e)})),p=n}e.addButton(nn.a,a,h,"share",d)}(),this.getShareMethods=function(){return j(),p},this.getHeading=function(){return a},this.onSubmenuToggle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"interaction";e&&!on&&(on=!0,n(135)),u.trigger(e?"open":"close",{visible:e,method:t})},this.action=function(t){var n=p[t].label;"embed"!==n&&"link"!==n?function(t){var n=t.src;if(Object(w.u)(n))n(s);else if(null!=n){var i=encodeURIComponent(g(s,t.jwsource||"share")),o=n.replace(/\[URL\]/gi,i);n===o&&(o=n+i),e.pause({reason:"sharing"}),Object(l.l)(o,"_blank",{rel:"noreferrer"}),window.focus()}b(t.label)}(p[t]):b(n)},this.open=function(){o.trigger("sharingApi",!0)},this.close=function(){o.trigger("sharingApi",!1)},this},rn=function(e,t){var n=Object(l.e)('<div class="jw-skip jw-reset" tabindex="0" role="button"><span class="jw-text jw-skiptext jw-reset"></span><span class="jw-icon jw-icon-inline jw-skip-icon jw-reset"></span></div>');n.querySelector(".jw-icon").appendChild(Object(f.a)("next")),this.el=n,this.skiptext=this.el.querySelector(".jw-skiptext"),this.skipUI=new u.a(this.el).on("click tap enter",this.skipAd,this),this.model=e,this.skipMessage=e.get("skipText")||"",this.skipMessageCountdown=e.get("skipMessage")||"",this.waitTime=Object(Oe.d)(e.get("skipOffset")),e.change("duration",(function(n,i){i&&(this.waitTime||(this.waitTime=Object(Oe.d)(n.get("skipOffset"),i)),this.el.parentNode!==t&&this.waitTime+2<i&&(e.change("position",(function(e,t){var n=this.waitTime-(t||0);n>0?this.updateMessage(this.skipMessageCountdown.replace(/(\b)xx(s?\b)/gi,"$1".concat(Math.ceil(n),"$2"))):null!==this.waitTime&&(this.updateMessage(this.skipMessage),this.skippable=!0,Object(l.a)(this.el,"jw-skippable"))}),this),t.appendChild(this.el)))}),this)};Object(w.k)(rn.prototype,r.a,{updateMessage:function(e){Object(l.q)(this.skiptext,e),this.el.setAttribute("aria-label",e)},skipAd:function(){this.skippable&&(this.skipUI.off(),this.trigger(a.d))},destroy:function(){this.model.off(null,null,this),this.skipUI&&this.skipUI.destroy(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}});var sn=rn,ln=function(e,t,n){this.api=e,this.playerElement=t,this.wrapperElement=n};Object(w.k)(ln.prototype,{setup:function(e){var t=this;this.element=Object(l.e)(function(e){return'<div class="jw-dismiss-icon jw-icon jw-reset" aria-label='.concat(e,' tabindex="0">')+"</div>"}(e)),this.element.appendChild(Object(f.a)("close")),this.ui=new u.a(this.element).on("click tap enter",(function(){t.api.remove()}),this),this.wrapperElement.insertBefore(this.element,this.wrapperElement.firstChild),Object(l.a)(this.playerElement,"jw-flag-top")},destroy:function(){this.element&&(this.ui.destroy(),this.wrapperElement.removeChild(this.element),this.element=null)}});var cn=ln,un=function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",r=a?'<img src="'.concat(a,'" class="jw-svg-icon"/>'):o;return"link"===e||"embed"===e?'<div class="jw-reset jw-settings-content-item jw-sharing-copy"><button class="jw-reset jw-sharing-link" aria-checked="false" type="button" role="button">'+"".concat(r," ").concat(i||e)+'</button><textarea readonly="true" class="jw-reset jw-sharing-textarea">'+"".concat(t)+"</textarea>"+'<div class="jw-reset jw-tooltip jw-tooltip-sharing-'.concat(i||e,'">')+'<div class="jw-text">'.concat(n,"</div>")+"</div></div>":'<button class="jw-reset jw-settings-content-item jw-sharing-link" aria-checked="false" type="button" role="button">'+"".concat(r," ").concat(i||e)+"</button>"};var dn="sharing";function pn(e,t,n,i,o,a){var r=t.map((function(e,t){return function(e,t,n){var i=Object(l.e)(un(e.label,e.src,t,e.displayText,e.svg,e.icon)),o=new u.a(i).on("click tap enter",(function(){a.activate(),n()}));!function(e,t){if(!e||!t)return;e.setAttribute("aria-label",t),e.setAttribute("role","button"),e.setAttribute("tabindex","0")}(i,e.label);var a={activate:function(){if("embed"===e.label||"link"===e.label){var t=i.querySelector(".jw-sharing-textarea");if(t.select(),document.execCommand("copy")){var n=t.nextSibling;Object(l.a)(n,"jw-open"),setTimeout((function(){Object(l.o)(n,"jw-open")}),1e3)}else window.prompt("Copy the text below",e.src);t.blur()}},deactivate:function(){},element:function(){return i},destroy:function(){o.destroy()}};return Object.defineProperty(a,"active",{enumerable:!0,get:function(){return!1}}),a}(e,n,(function(){i(t)}))})),s=et(e,dn,r,nn.a,a);Object(l.a)(s.element(),"jw-sharing-menu");var c=s.activate,d=s.deactivate;s.activate=function(){s.active||(c(),o(!0))},s.deactivate=function(){s.active&&(d(),o(!1))}}var wn=Mt.prototype.disable,fn=Mt.prototype.enable;t.default=function(e,t){var n=new Mt(e,t),i=function(){r&&(r.destroy(),r=null)},o=null,r=null,s=null;n.disable=function(e){wn.call(n,e),s&&(s.destroy(),s=null)},n.enable=function(e,u){fn.call(n,e,u),u.change("instream",(function(){i()})),u.change("skipButton",(function(t,o){i(),o&&(r=new sn(t,n.div)).on(a.d,(function(){t.set("skipButton",!1),e.skipAd()}))}));var d=u.get("localization"),p=u.get("advertising");p&&p.outstream&&p.dismissible&&(s=new cn(e,t,t.querySelector(".jw-top"))).setup(d.close);var w=u.get("sharing");if(!o&&w){var f=this.controlbar,h=this.settingsMenu,j=d.sharing;o=new an(e,w,f,j.heading),e.addPlugin("sharing",o),u.change("playlistItem",(function(){var e=o.getShareMethods().map((function(e){var t=j[e.label];return t&&(e.displayText=t),e}));h.removeSubmenu("sharing"),pn(h,e,j.copied,o.action,c,o.getHeading())})),function(e,t){e.on("sharingApi",(function(e){var n=t.getSubmenu("sharing");n&&(l=!0,e&&!n.active?(t.activateSubmenu("sharing"),t.open(),o.onSubmenuToggle(!0,"api")):!e&&n.active&&(t.close(),o.onSubmenuToggle(!1,"api")))}))}(f,h),this.rightClickMenu.enableSharing(o.open)}};var l=!1;var c=function(e){l?l=!1:o.onSubmenuToggle(e)};return n}},function(e,t,n){"use strict";n.r(t);var i=n(36),o=n(10),a=n(3),r=n(0),s=n(15),l=n(64),c=n(44);var u=n(55),d=n(59),p=n(30),w=n(29),f=n(56),h=n(2),j=n(9),g=n(42);function b(e){var t=!1;return{async:function(){var n=this,i=arguments;return Promise.resolve().then((function(){if(!t)return e.apply(n,i)}))},cancel:function(){t=!0},cancelled:function(){return t}}}var m=n(1);function v(e){return function(t,n){var i=e.mediaModel,o=Object(r.k)({},n,{type:t});switch(t){case a.T:if(i.get(a.T)===n.mediaType)return;i.set(a.T,n.mediaType);break;case a.U:return void i.set(a.U,Object(r.k)({},n));case a.M:if(n[t]===e.model.getMute())return;break;case a.bb:n.newstate===a.nb&&(e.thenPlayPromise.cancel(),i.srcReset());var s=i.attributes.mediaState;i.attributes.mediaState=n.newstate,i.trigger("change:mediaState",i,n.newstate,s);break;case a.F:return e.beforeComplete=!0,e.trigger(a.B,o),void(e.attached&&!e.background&&e._playbackComplete());case a.G:i.get("setup")?(e.thenPlayPromise.cancel(),i.srcReset()):(t=a.ub,o.code+=1e5);break;case a.K:o.metadataType||(o.metadataType="unknown");var l=n.duration;Object(r.A)(l)&&(i.set("seekRange",n.seekRange),i.set("duration",l));break;case a.D:i.set("buffer",n.bufferPercent);case a.S:i.set("seekRange",n.seekRange),i.set("position",n.position),i.set("currentTime",n.currentTime);var c=n.duration;Object(r.A)(c)&&i.set("duration",c),t===a.S&&Object(r.w)(e.item.starttime)&&delete e.item.starttime;break;case a.R:var u=e.mediaElement;u&&u.paused&&i.set("mediaState","paused");break;case a.I:i.set(a.I,n.levels);case a.J:var d=n.currentQuality,p=n.levels;d>-1&&p.length>1&&i.set("currentLevel",parseInt(d));break;case a.f:i.set(a.f,n.tracks);case a.g:var w=n.currentTrack,f=n.tracks;w>-1&&f.length>0&&w<f.length&&i.set("currentAudioTrack",parseInt(w))}e.trigger(t,o)}}var y=n(5),k=n(54),x=n(50);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function T(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){var e;return C(this,t),(e=T(this,E(t).call(this))).providerController=null,e._provider=null,e.addAttributes({mediaModel:new L}),e}return _(t,e),M(t,[{key:"setup",value:function(e){return e=e||{},this._normalizeConfig(e),Object(r.k)(this.attributes,e,x.b),this.providerController=new g.a(this.getConfiguration()),this.setAutoStart(),this}},{key:"getConfiguration",value:function(){var e=this.clone(),t=e.mediaModel.attributes;return Object.keys(x.a).forEach((function(n){e[n]=t[n]})),e.instreamMode=!!e.instream,delete e.instream,delete e.mediaModel,e}},{key:"persistQualityLevel",value:function(e,t){var n=t[e]||{},i=n.label,o=Object(r.A)(n.bitrate)?n.bitrate:null;this.set("bitrateSelection",o),this.set("qualityLabel",i)}},{key:"setActiveItem",value:function(e){var t=this.get("playlist")[e];this.resetItem(t),this.attributes.playlistItem=null,this.set("item",e),this.set("minDvrWindow",t.minDvrWindow),this.set("dvrSeekLimit",t.dvrSeekLimit),this.set("playlistItem",t)}},{key:"setMediaModel",value:function(e){this.mediaModel&&this.mediaModel!==e&&this.mediaModel.off(),e=e||new L,this.set("mediaModel",e),function(e){var t=e.get("mediaState");e.trigger("change:mediaState",e,t,t)}(e)}},{key:"destroy",value:function(){this.attributes._destroyed=!0,this.off(),this._provider&&(this._provider.off(null,null,this),this._provider.destroy())}},{key:"getVideo",value:function(){return this._provider}},{key:"setFullscreen",value:function(e){(e=!!e)!==this.get("fullscreen")&&this.set("fullscreen",e)}},{key:"getProviders",value:function(){return this.providerController}},{key:"setVolume",value:function(e){if(Object(r.A)(e)){var t=Math.min(Math.max(0,e),100);this.set("volume",t);var n=0===t;n!==this.getMute()&&this.setMute(n)}}},{key:"getMute",value:function(){return this.get("autostartMuted")||this.get("mute")}},{key:"setMute",value:function(e){if(void 0===e&&(e=!this.getMute()),this.set("mute",!!e),!e){var t=Math.max(10,this.get("volume"));this.set("autostartMuted",!1),this.setVolume(t)}}},{key:"setStreamType",value:function(e){this.set("streamType",e),"LIVE"===e&&this.setPlaybackRate(1)}},{key:"setProvider",value:function(e){this._provider=e,z(this,e)}},{key:"resetProvider",value:function(){this._provider=null,this.set("provider",void 0)}},{key:"setPlaybackRate",value:function(e){Object(r.w)(e)&&(e=Math.max(Math.min(e,4),.25),"LIVE"===this.get("streamType")&&(e=1),this.set("defaultPlaybackRate",e),this._provider&&this._provider.setPlaybackRate&&this._provider.setPlaybackRate(e))}},{key:"persistCaptionsTrack",value:function(){var e=this.get("captionsTrack");e?this.set("captionLabel",e.name):this.set("captionLabel","Off")}},{key:"setVideoSubtitleTrack",value:function(e,t){this.set("captionsIndex",e),e&&t&&e<=t.length&&t[e-1].data&&this.set("captionsTrack",t[e-1])}},{key:"persistVideoSubtitleTrack",value:function(e,t){this.setVideoSubtitleTrack(e,t),this.persistCaptionsTrack()}},{key:"setAutoStart",value:function(e){void 0!==e&&this.set("autostart",e);var t=y.OS.mobile&&this.get("autostart");this.set("playOnViewable",t||"viewable"===this.get("autostart"))}},{key:"resetItem",value:function(e){var t=e?Object(h.g)(e.starttime):0,n=e?Object(h.g)(e.duration):0,i=this.mediaModel;this.set("playRejected",!1),this.attributes.itemMeta={},i.set("position",t),i.set("currentTime",0),i.set("duration",n)}},{key:"persistBandwidthEstimate",value:function(e){Object(r.A)(e)&&this.set("bandwidthEstimate",e)}},{key:"_normalizeConfig",value:function(e){var t=e.floating;t&&t.disabled&&delete e.floating}}]),t}(k.a),z=function(e,t){e.set("provider",t.getName()),!0===e.get("instreamMode")&&(t.instreamMode=!0),-1===t.getName().name.indexOf("flash")&&(e.set("flashThrottle",void 0),e.set("flashBlocked",!1)),e.setPlaybackRate(e.get("defaultPlaybackRate")),e.set("supportsPlaybackRate",t.supportsPlaybackRate),e.set("playbackRate",t.getPlaybackRate()),e.set("renderCaptionsNatively",t.renderNatively)};var L=function(e){function t(){var e;return C(this,t),(e=T(this,E(t).call(this))).addAttributes({mediaState:a.nb}),e}return _(t,e),M(t,[{key:"srcReset",value:function(){Object(r.k)(this.attributes,{setup:!1,started:!1,preloaded:!1,visualQuality:null,buffer:0,currentTime:0})}}]),t}(k.a),I=P;function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){function t(e,n){var i,o,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=H(t).call(this),(i=!a||"object"!==R(a)&&"function"!=typeof a?B(o):a).attached=!0,i.beforeComplete=!1,i.item=null,i.mediaModel=new L,i.model=n,i.provider=e,i.providerListener=new v(B(i)),i.thenPlayPromise=b((function(){})),(r=B(i)).provider.on("all",r.providerListener,r),i.eventQueue=new u.a(B(i),["trigger"],(function(){return!i.attached||i.background})),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,e),n=t,(i=[{key:"play",value:function(e){var t=this.item,n=this.model,i=this.mediaModel,o=this.provider;if(e||(e=n.get("playReason")),n.set("playRejected",!1),i.get("setup"))return o.play()||Promise.resolve();i.set("setup",!0);var a=this._loadAndPlay(t,o);return i.get("started")?a:this._playAttempt(a,e)}},{key:"stop",value:function(){var e=this.provider;this.beforeComplete=!1,e.stop()}},{key:"pause",value:function(){this.provider.pause()}},{key:"preload",value:function(){var e=this.item,t=this.mediaModel,n=this.provider;!e||e&&"none"===e.preload||!this.attached||this.setup||this.preloaded||(t.set("preloaded",!0),n.preload(e))}},{key:"destroy",value:function(){var e=this.provider,t=this.mediaModel;this.off(),t.off(),e.off(),this.eventQueue.destroy(),this.detach(),e.getContainer()&&e.remove(),delete e.instreamMode,this.provider=null,this.item=null}},{key:"attach",value:function(){var e=this.model,t=this.provider;e.setPlaybackRate(e.get("defaultPlaybackRate")),t.attachMedia(),this.attached=!0,this.eventQueue.flush(),this.beforeComplete&&this._playbackComplete()}},{key:"detach",value:function(){var e=this.provider;this.thenPlayPromise.cancel();var t=e.detachMedia();return this.attached=!1,t}},{key:"_playAttempt",value:function(e,t){var n=this,i=this.item,o=this.mediaModel,s=this.model,l=this.provider,c=l?l.video:null;return this.trigger(a.N,{item:i,playReason:t}),(c?c.paused:s.get(a.bb)!==a.qb)||s.set(a.bb,a.kb),e.then((function(){o.get("setup")&&(o.set("started",!0),o===s.mediaModel&&function(e){var t=e.get("mediaState");e.trigger("change:mediaState",e,t,t)}(o))})).catch((function(e){if(n.item&&o===s.mediaModel){if(s.set("playRejected",!0),c&&c.paused){if(c.src===location.href)return n._loadAndPlay(i,l);o.set("mediaState",a.pb)}var u=Object(r.k)(new m.s(null,Object(m.B)(e),e),{error:e,item:i,playReason:t});throw delete u.key,n.trigger(a.O,u),e}}))}},{key:"_playbackComplete",value:function(){var e=this.item,t=this.provider;e&&delete e.starttime,this.beforeComplete=!1,t.setState(a.lb),this.trigger(a.F,{})}},{key:"_loadAndPlay",value:function(){var e=this.item,t=this.provider,n=t.load(e);if(n){var i=b((function(){return t.play()||Promise.resolve()}));return this.thenPlayPromise=i,n.then(i.async)}return t.play()||Promise.resolve()}},{key:"audioTrack",get:function(){return this.provider.getCurrentAudioTrack()},set:function(e){this.provider.setCurrentAudioTrack(e)}},{key:"quality",get:function(){return this.provider.getCurrentQuality()},set:function(e){this.provider.setCurrentQuality(e)}},{key:"audioTracks",get:function(){return this.provider.getAudioTracks()}},{key:"background",get:function(){var e=this.container,t=this.provider;return!!this.attached&&!!t.video&&(!e||e&&!e.contains(t.video))},set:function(e){var t=this.container,n=this.provider;n.video?t&&(e?this.background||(this.thenPlayPromise.cancel(),this.pause(),t.removeChild(n.video),this.container=null):(this.eventQueue.flush(),this.beforeComplete&&this._playbackComplete())):e?this.detach():this.attach()}},{key:"container",get:function(){return this.provider.getContainer()},set:function(e){this.provider.setContainer(e)}},{key:"mediaElement",get:function(){return this.provider.video}},{key:"preloaded",get:function(){return this.mediaModel.get("preloaded")}},{key:"qualities",get:function(){return this.provider.getQualityLevels()}},{key:"setup",get:function(){return this.mediaModel.get("setup")}},{key:"started",get:function(){return this.mediaModel.get("started")}},{key:"activeItem",set:function(e){var t=this.mediaModel=new L,n=e?Object(h.g)(e.starttime):0,i=e?Object(h.g)(e.duration):0,o=t.attributes;t.srcReset(),o.position=n,o.duration=i,this.item=e,this.provider.init(e)}},{key:"controls",set:function(e){this.provider.setControls(e)}},{key:"mute",set:function(e){this.provider.mute(e)}},{key:"position",set:function(e){var t=this.provider;this.model.get("scrubbing")&&t.fastSeek?t.fastSeek(e):t.seek(e)}},{key:"subtitles",set:function(e){this.provider.setSubtitlesTrack&&this.provider.setSubtitlesTrack(e)}},{key:"volume",set:function(e){this.provider.volume(e)}}])&&V(n.prototype,i),o&&V(n,o),t}(j.a);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t){var n=t.mediaControllerListener;e.off().on("all",n,t)}function Q(e){return e&&e.sources&&e.sources[0]}var X=function(e){function t(e,n){var i,o,s,l,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(s=U(t).call(this))||"object"!==F(s)&&"function"!=typeof s?W(o):s).adPlaying=!1,i.background=(l=null,c=null,Object.defineProperties({setNext:function(e,t){c={item:e,loadPromise:t}},isNext:function(e){return!(!c||JSON.stringify(c.item.sources[0])!==JSON.stringify(e.sources[0]))},clearNext:function(){c=null}},{nextLoadPromise:{get:function(){return c?c.loadPromise:null}},currentMedia:{get:function(){return l},set:function(e){l=e}}})),i.mediaPool=n,i.mediaController=null,i.mediaControllerListener=function(e,t){return function(n,i){switch(n){case a.bb:return;case"flashThrottle":case"flashBlocked":return void e.set(n,i.value);case a.V:case a.M:return void e.set(n,i[n]);case a.P:return void e.set("playbackRate",i.playbackRate);case a.K:Object(r.k)(e.get("itemMeta"),i.metadata);break;case a.J:e.persistQualityLevel(i.currentQuality,i.levels);break;case"subtitlesTrackChanged":e.persistVideoSubtitleTrack(i.currentTrack,i.tracks);break;case a.S:case a.Q:case a.R:case a.X:case"subtitlesTracks":case"subtitlesTracksData":e.trigger(n,i);break;case a.i:return void e.persistBandwidthEstimate(i.bandwidthEstimate)}t.trigger(n,i)}}(e,W(i)),i.model=e,i.providers=new g.a(e.getConfiguration()),i.loadPromise=Promise.resolve(),i.backgroundLoading=e.get("backgroundLoading"),i.backgroundLoading||e.set("mediaElement",i.mediaPool.getPrimedElement()),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,e),n=t,(i=[{key:"setActiveItem",value:function(e){var t=this,n=this.model,i=n.get("playlist")[e];n.attributes.itemReady=!1,n.setActiveItem(e);var o=Q(i);if(!o)return Promise.reject(new m.s(m.o,m.h));var a=this.background,r=this.mediaController;if(a.isNext(i))return this._destroyActiveMedia(),this.loadPromise=this._activateBackgroundMedia(),this.loadPromise;if(this._destroyBackgroundMedia(),r){if(n.get("castActive")||this._providerCanPlay(r.provider,o))return this.loadPromise=Promise.resolve(r),r.activeItem=i,this._setActiveMedia(r),this.loadPromise;this._destroyActiveMedia()}var s=n.mediaModel;return this.loadPromise=this._setupMediaController(o).then((function(e){if(s===n.mediaModel)return e.activeItem=i,t._setActiveMedia(e),e})).catch((function(e){throw t._destroyActiveMedia(),e})),this.loadPromise}},{key:"setAttached",value:function(e){var t=this.mediaController;if(this.attached=e,t){if(!e){var n=t.detach(),i=t.item,o=t.mediaModel.get("position");return o&&(i.starttime=o),n}t.attach()}}},{key:"playVideo",value:function(e){var t,n=this,i=this.mediaController,o=this.model;if(!o.get("playlistItem"))return Promise.reject(new Error("No media"));if(e||(e=o.get("playReason")),i)t=i.play(e);else{o.set(a.bb,a.kb);var r=b((function(t){if(n.mediaController&&n.mediaController.mediaModel===t.mediaModel)return t.play(e);throw new Error("Playback cancelled.")}));t=this.loadPromise.catch((function(e){throw r.cancel(),e})).then(r.async)}return t}},{key:"stopVideo",value:function(){var e=this.mediaController,t=this.model,n=t.get("playlist")[t.get("item")];t.attributes.playlistItem=n,t.resetItem(n),e&&e.stop()}},{key:"preloadVideo",value:function(){var e=this.background,t=this.mediaController||e.currentMedia;t&&t.preload()}},{key:"pause",value:function(){var e=this.mediaController;e&&e.pause()}},{key:"castVideo",value:function(e,t){var n=this.model;n.attributes.itemReady=!1;var i=Object(r.k)({},t),o=i.starttime=n.mediaModel.get("currentTime");this._destroyActiveMedia();var a=new q(e,n);a.activeItem=i,this._setActiveMedia(a),n.mediaModel.set("currentTime",o)}},{key:"stopCast",value:function(){var e=this.model,t=e.get("item");e.get("playlist")[t].starttime=e.mediaModel.get("currentTime"),this.stopVideo(),this.setActiveItem(t)}},{key:"backgroundActiveMedia",value:function(){this.adPlaying=!0;var e=this.background,t=this.mediaController;t&&(e.currentMedia&&this._destroyMediaController(e.currentMedia),t.background=!0,e.currentMedia=t,this.mediaController=null)}},{key:"restoreBackgroundMedia",value:function(){this.adPlaying=!1;var e=this.background,t=this.mediaController,n=e.currentMedia;if(n){if(t)return this._destroyMediaController(n),void(e.currentMedia=null);var i=n.mediaModel.attributes;i.mediaState===a.nb?i.mediaState=a.pb:i.mediaState!==a.pb&&(i.mediaState=a.kb),this._setActiveMedia(n),n.background=!1,e.currentMedia=null}}},{key:"backgroundLoad",value:function(e){var t=this.background,n=Q(e);t.setNext(e,this._setupMediaController(n).then((function(t){return t.activeItem=e,t.preload(),t})).catch((function(){t.clearNext()})))}},{key:"forwardEvents",value:function(){var e=this.mediaController;e&&Y(e,this)}},{key:"routeEvents",value:function(e){var t=this.mediaController;t&&(t.off(),e&&Y(t,e))}},{key:"destroy",value:function(){this.off(),this._destroyBackgroundMedia(),this._destroyActiveMedia()}},{key:"_setActiveMedia",value:function(e){var t=this.model,n=e.mediaModel,i=e.provider;!function(e,t){var n=e.get("mediaContainer");n?t.container=n:e.once("change:mediaContainer",(function(e,n){t.container=n}))}(t,e),this.mediaController=e,t.set("mediaElement",e.mediaElement),t.setMediaModel(n),t.setProvider(i),Y(e,this),t.set("itemReady",!0)}},{key:"_destroyActiveMedia",value:function(){var e=this.mediaController,t=this.model;e&&(e.detach(),this._destroyMediaController(e),t.resetProvider(),this.mediaController=null)}},{key:"_destroyBackgroundMedia",value:function(){var e=this.background;this._destroyMediaController(e.currentMedia),e.currentMedia=null,this._destroyBackgroundLoadingMedia()}},{key:"_destroyMediaController",value:function(e){var t=this.mediaPool;e&&(t.recycle(e.mediaElement),e.destroy())}},{key:"_setupMediaController",value:function(e){var t=this,n=this.model,i=this.providers,o=function(e){return new q(new e(n.get("id"),n.getConfiguration(),t.primedElement),n)},a=i.choose(e),r=a.provider,s=a.name;return r?Promise.resolve(o(r)):i.load(s).then((function(e){return o(e)}))}},{key:"_activateBackgroundMedia",value:function(){var e=this,t=this.background,n=this.background.nextLoadPromise,i=this.model;return this._destroyMediaController(t.currentMedia),t.currentMedia=null,n.then((function(n){if(n)return t.clearNext(),e.adPlaying?(i.attributes.itemReady=!0,t.currentMedia=n):(e._setActiveMedia(n),n.background=!1),n}))}},{key:"_destroyBackgroundLoadingMedia",value:function(){var e=this,t=this.background,n=this.background.nextLoadPromise;n&&n.then((function(n){e._destroyMediaController(n),t.clearNext()}))}},{key:"_providerCanPlay",value:function(e,t){var n=this.providers.choose(t).provider;return n&&e&&e instanceof n}},{key:"audioTrack",get:function(){var e=this.mediaController;return e?e.audioTrack:-1},set:function(e){var t=this.mediaController;t&&(t.audioTrack=parseInt(e,10)||0)}},{key:"audioTracks",get:function(){var e=this.mediaController;if(e)return e.audioTracks}},{key:"beforeComplete",get:function(){var e=this.mediaController,t=this.background.currentMedia;return!(!e&&!t)&&(e?e.beforeComplete:t.beforeComplete)}},{key:"primedElement",get:function(){return this.backgroundLoading?this.mediaPool.getPrimedElement():this.model.get("mediaElement")}},{key:"quality",get:function(){return this.mediaController?this.mediaController.quality:-1},set:function(e){var t=this.mediaController;t&&(t.quality=parseInt(e,10)||0)}},{key:"qualities",get:function(){var e=this.mediaController;return e?e.qualities:null}},{key:"controls",set:function(e){var t=this.mediaController;t&&(t.controls=e)}},{key:"mute",set:function(e){var t=this.background,n=this.mediaController,i=this.mediaPool;n&&(n.mute=e),t.currentMedia&&(t.currentMedia.mute=e),i.syncMute(e)}},{key:"position",set:function(e){var t=this.mediaController;t&&(t.item.starttime=e,t.attached&&(t.position=e))}},{key:"subtitles",set:function(e){var t=this.mediaController;t&&(t.subtitles=e)}},{key:"volume",set:function(e){var t=this.background,n=this.mediaController,i=this.mediaPool;n&&(n.volume=e),t.currentMedia&&(t.currentMedia.volume=e),i.syncVolume(e)}}])&&D(n.prototype,i),o&&D(n,o),t}(j.a);function J(e){return e===a.lb||e===a.mb?a.nb:e}function K(e,t,n){if((t=J(t))!==(n=J(n))){var i=t.replace(/(?:ing|d)$/,""),o={type:i,newstate:t,oldstate:n,reason:function(e,t){return e===a.kb?t===a.rb?t:a.ob:t}(t,e.mediaModel.get("mediaState"))};"play"===i?o.playReason=e.get("playReason"):"pause"===i&&(o.pauseReason=e.get("pauseReason")),this.trigger(i,o)}}var $=n(61);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function te(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e,t,n,i){return(ne="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,i){var o,a=ae(e,t);if(a){if((o=Object.getOwnPropertyDescriptor(a,t)).set)return o.set.call(i,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(i,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(i,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i,t,n);return!0})(e,t,n,i)}function ie(e,t,n,i,o){if(!ne(e,t,n,i||e)&&o)throw new Error("failed to set property");return n}function oe(e,t,n){return(oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=ae(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ae(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(e,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o,a=(i=te(this,re(t).call(this,e,n))).model=new I;if(i.playerModel=e,i.provider=null,i.backgroundLoading=e.get("backgroundLoading"),a.mediaModel.attributes.mediaType="video",i.backgroundLoading)o=n.getAdElement();else{o=e.get("mediaElement"),a.attributes.mediaElement=o,a.attributes.mediaSrc=o.src;var r=i.srcResetListener=function(){i.srcReset()};o.addEventListener("emptied",r),o.playbackRate=o.defaultPlaybackRate=1}return i.mediaPool=Object($.a)(o,n),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,e),n=t,(i=[{key:"setup",value:function(){var e=this.model,t=this.playerModel,n=this.primedElement,i=t.attributes,o=t.mediaModel;e.setup({id:i.id,volume:i.volume,instreamMode:!0,edition:i.edition,mediaContext:o,mute:i.mute,streamType:"VOD",autostartMuted:i.autostartMuted,autostart:i.autostart,advertising:i.advertising,sdkplatform:i.sdkplatform,skipButton:!1}),e.on("change:state",K,this),e.on(a.w,(function(e){this.trigger(a.w,e)}),this),n.paused||n.pause()}},{key:"setActiveItem",value:function(e){var n=this;return this.stopVideo(),this.provider=null,oe(re(t.prototype),"setActiveItem",this).call(this,e).then((function(e){n._setProvider(e.provider)})),this.playVideo()}},{key:"usePsuedoProvider",value:function(e){this.provider=e,e&&(this._setProvider(e),e.off(a.w),e.on(a.w,(function(e){this.trigger(a.w,e)}),this))}},{key:"_setProvider",value:function(e){var t=this;if(e&&this.mediaPool){var n=this.model,i=this.playerModel,o="vpaid"===e.type;e.off(),e.on("all",(function(e,t){o&&e===a.F||this.trigger(e,Object(r.k)({},t,{type:e}))}),this);var s=n.mediaModel;e.on(a.bb,(function(e){e.oldstate=e.oldstate||n.get(a.bb),s.set("mediaState",e.newstate)})),e.on(a.X,this._nativeFullscreenHandler,this),s.on("change:mediaState",(function(e,n){t._stateHandler(n)})),e.attachMedia(),e.volume(i.get("volume")),e.mute(i.getMute()),e.setPlaybackRate&&e.setPlaybackRate(1),i.on("change:volume",(function(e,t){this.volume=t}),this),i.on("change:mute",(function(e,t){this.mute=t,t||(this.volume=i.get("volume"))}),this),i.on("change:autostartMuted",(function(e,t){t||(n.set("autostartMuted",t),this.mute=i.get("mute"))}),this)}}},{key:"destroy",value:function(){var e=this.model,t=this.mediaPool,n=this.playerModel;e.off();var i=t.getPrimedElement();if(this.backgroundLoading){t.clean();var o=n.get("mediaContainer");i.parentNode===o&&o.removeChild(i)}else i&&(i.removeEventListener("emptied",this.srcResetListener),i.src!==e.get("mediaSrc")&&this.srcReset())}},{key:"srcReset",value:function(){var e=this.playerModel,t=e.get("mediaModel"),n=e.getVideo();t.srcReset(),n&&(n.src=null)}},{key:"_nativeFullscreenHandler",value:function(e){this.model.trigger(a.X,e),this.trigger(a.y,{fullscreen:e.jwstate})}},{key:"_stateHandler",value:function(e){var t=this.model;switch(e){case a.qb:case a.pb:t.set(a.bb,e)}}},{key:"mute",set:function(e){var n=this.mediaController,i=this.model,o=this.provider;i.set("mute",e),ie(re(t.prototype),"mute",e,this,!0),n||o.mute(e)}},{key:"volume",set:function(e){var n=this.mediaController,i=this.model,o=this.provider;i.set("volume",e),ie(re(t.prototype),"volume",e,this,!0),n||o.volume(e)}}])&&ee(n.prototype,i),o&&ee(n,o),t}(X),ce={skipoffset:null,tag:null},ue=function(e,t,n,i){var o,s,l,c,u=this,d=this,p=new le(t,i),w=0,j={},g=null,b={},m=z,v=!1,y=!1,k=!1,x=!1,O=function(e){y||((e=e||{}).hasControls=!!t.get("controls"),u.trigger(a.z,e),p.model.get("state")===a.pb?e.hasControls&&p.playVideo().catch((function(){})):p.pause())},C=function(){y||p.model.get("state")===a.pb&&t.get("controls")&&(e.setFullscreen(),e.play())};function S(){p.model.set("playRejected",!0)}function M(){w++,d.loadItem(o).catch((function(){}))}function T(e,t){"complete"!==e&&(t=t||{},b.tag&&!t.tag&&(t.tag=b.tag),this.trigger(e,t),"mediaError"!==e&&"error"!==e||o&&w+1<o.length&&M())}function E(e){var t=e.newstate,n=e.oldstate||p.model.get("state");n!==t&&_(Object(r.k)({oldstate:n},j,e))}function _(t){var n=t.newstate;n===a.qb?e.trigger(a.c,t):n===a.pb&&e.trigger(a.b,t)}function A(t){var n=t.duration,i=t.position,o=p.model.mediaModel||p.model;o.set("duration",n),o.set("position",i),c||(c=(Object(h.d)(l,n)||n)-f.b),!v&&i>=Math.max(c,f.a)&&(e.preloadNextItem(),v=!0)}function P(e){var t={};b.tag&&(t.tag=b.tag),this.trigger(a.F,t),z.call(this,e)}function z(e){j={},o&&w+1<o.length?M():(e.type===a.F&&this.trigger(a.cb,{}),this.destroy())}function L(){y||n.clickHandler()&&n.clickHandler().setAlternateClickHandlers(O,C)}function I(e){e.width&&e.height&&n.resizeMedia()}this.init=function(){if(!k&&!y){k=!0,j={},p.setup(),p.on("all",T,this),p.on(a.O,S,this),p.on(a.S,A,this),p.on(a.F,P,this),p.on(a.K,I,this),p.on(a.bb,E,this),g=e.detachMedia();var i=p.primedElement;t.get("mediaContainer").appendChild(i),t.set("instream",p),p.model.set("state",a.kb);var o=n.clickHandler();return o&&o.setAlternateClickHandlers((function(){}),null),this.setText(t.get("localization").loadingAd),x=e.isBeforeComplete()||t.get("state")===a.lb,this}},this.enableAdsMode=function(i){var o=this;if(!k&&!y)return e.routeEvents({mediaControllerListener:function(e,t){o.trigger(e,t)}}),t.set("instream",p),p.model.set("state",a.qb),function(i){var o=n.clickHandler();o&&o.setAlternateClickHandlers((function(n){y||((n=n||{}).hasControls=!!t.get("controls"),d.trigger(a.z,n),i&&(t.get("state")===a.pb?e.playVideo():(e.pause(),i&&(e.trigger(a.a,{clickThroughUrl:i}),window.open(i)))))}),null)}(i),this},this.setEventData=function(e){j=e},this.setState=function(e){var t=e.newstate,n=p.model;e.oldstate=n.get("state"),n.set("state",t),_(e)},this.setTime=function(t){A(t),e.trigger(a.e,t)},this.loadItem=function(e,n){if(y||!k)return Promise.reject(new Error("Instream not setup"));j={};var i=e;Array.isArray(e)?(s=n||s,e=(o=e)[w],s&&(n=s[w])):i=[e];var c=p.model;c.set("playlist",i),t.set("hideAdsControls",!1),e.starttime=0,d.trigger(a.db,{index:w,item:e}),b=Object(r.k)({},ce,n),L(),c.set("skipButton",!1);var u=!t.get("backgroundLoading")&&g?g.then((function(){return p.setActiveItem(w)})):p.setActiveItem(w);return v=!1,void 0!==(l=e.skipoffset||b.skipoffset)&&d.setupSkipButton(l,b),u},this.setupSkipButton=function(e,t,n){var i=p.model;m=n||z,i.set("skipMessage",t.skipMessage),i.set("skipText",t.skipText),i.set("skipOffset",e),i.attributes.skipButton=!1,i.set("skipButton",!0)},this.applyProviderListeners=function(e){p.usePsuedoProvider(e),L()},this.play=function(){j={},p.playVideo()},this.pause=function(){j={},p.pause()},this.skipAd=function(e){var n=t.get("autoPause").pauseAds,i="autostart"===t.get("playReason"),o=t.get("viewable");!n||i||o||(this.noResume=!0);var r=a.d;this.trigger(r,e),m.call(this,{type:r})},this.replacePlaylistItem=function(e){y||(t.set("playlistItem",e),p.srcReset())},this.destroy=function(){y||(y=!0,this.trigger("destroyed"),this.off(),n.clickHandler()&&n.clickHandler().revertAlternateClickHandlers(),t.off(null,null,p),p.off(null,null,d),p.destroy(),k&&p.model&&(t.attributes.state=a.pb),e.forwardEvents(),t.set("instream",null),p=null,j={},g=null,k&&!t.attributes._destroyed&&(e.attachMedia(),this.noResume||(x?e.stopVideo():e.playVideo())))},this.getState=function(){return!y&&p.model.get("state")},this.setText=function(e){return y?this:(n.setAltText(e||""),this)},this.hide=function(){y||t.set("hideAdsControls",!0)},this.getMediaElement=function(){return y?null:p.primedElement},this.setSkipOffset=function(e){l=e>0?e:null,p&&p.model.set("skipOffset",l)}};Object(r.k)(ue.prototype,j.a);var de=ue,pe=n(77),we=n(76),fe=function(e){var t=this,n=[],i={},o=0,r=0;function s(e){if(e.data=e.data||[],e.name=e.label||e.name||e.language,e._id=Object(we.a)(e,n.length),!e.name){var t=Object(we.b)(e,o);e.name=t.label,o=t.unknownCount}i[e._id]=e,n.push(e)}function l(){for(var e=[{id:"off",label:"Off"}],t=0;t<n.length;t++)e.push({id:n[t]._id,label:n[t].name||"Unknown CC",language:n[t].language});return e}function c(t){var i=r=t,o=e.get("captionLabel");if("Off"!==o){for(var a=0;a<n.length;a++){var s=n[a];if(o&&o===s.name){i=a+1;break}s.default||s.defaulttrack||"default"===s._id?i=a+1:s.autoselect}var l;l=i,n.length?e.setVideoSubtitleTrack(l,n):e.set("captionsIndex",l)}else e.set("captionsIndex",0)}function u(){var t=l();d(t)!==d(e.get("captionsList"))&&(c(r),e.set("captionsList",t))}function d(e){return e.map((function(e){return"".concat(e.id,"-").concat(e.label)})).join(",")}e.on("change:playlistItem",(function(e){n=[],i={},o=0;var t=e.attributes;t.captionsIndex=0,t.captionsList=l(),e.set("captionsTrack",null)}),this),e.on("change:itemReady",(function(){var n=e.get("playlistItem").tracks,o=n&&n.length;if(o&&!e.get("renderCaptionsNatively"))for(var r=function(e){var o,r=n[e];"subtitles"!==(o=r.kind)&&"captions"!==o||i[r._id]||(s(r),Object(pe.c)(r,(function(e){!function(e,t){e.data=t}(r,e)}),(function(e){t.trigger(a.ub,e)})))},l=0;l<o;l++)r(l);u()}),this),e.on("change:captionsIndex",(function(e,t){var i=null;0!==t&&(i=n[t-1]),e.set("captionsTrack",i)}),this),this.setSubtitlesTracks=function(e){if(Array.isArray(e)){if(e.length){for(var t=0;t<e.length;t++)s(e[t]);n=Object.keys(i).map((function(e){return i[e]}))}else n=[],i={},o=0;u()}},this.selectDefaultIndex=c,this.getCurrentIndex=function(){return e.get("captionsIndex")},this.getCaptionsList=function(){return e.get("captionsList")},this.destroy=function(){this.off(null,null,this)}};Object(r.k)(fe.prototype,j.a);var he=fe,je=function(e,t){return'<div id="'.concat(e,'" class="jwplayer jw-reset jw-state-setup" tabindex="0" aria-label="').concat(t||"",'" role="application">')+'<div class="jw-aspect jw-reset"></div><div class="jw-wrapper jw-reset"><div class="jw-top jw-reset"></div><div class="jw-aspect jw-reset"></div><div class="jw-media jw-reset"></div><div class="jw-preview jw-reset"></div><div class="jw-title jw-reset-text" dir="auto"><div class="jw-title-primary jw-reset-text"></div><div class="jw-title-secondary jw-reset-text"></div></div><div class="jw-overlays jw-reset"></div><div class="jw-hidden-accessibility"><span class="jw-time-update" aria-live="assertive"></span><span class="jw-volume-update" aria-live="assertive"></span></div></div></div>'},ge=n(43),be=44,me=function(e){var t=e.get("height");if(e.get("aspectratio"))return!1;if("string"==typeof t&&t.indexOf("%")>-1)return!1;var n=1*t||NaN;return!!(n=isNaN(n)?e.get("containerHeight"):n)&&(n&&n<=be)},ve=n(67);function ye(e,t){if(e.get("fullscreen"))return 1;if(!e.get("activeTab"))return 0;if(e.get("isFloating"))return 1;var n=e.get("intersectionRatio");return void 0===n&&(n=function(e){var t=document.documentElement,n=document.body,i={top:0,left:0,right:t.clientWidth||n.clientWidth,width:t.clientWidth||n.clientWidth,bottom:t.clientHeight||n.clientHeight,height:t.clientHeight||n.clientHeight};if(!n.contains(e))return 0;if("none"===window.getComputedStyle(e).display)return 0;var o=ke(e);if(!o)return 0;var a=o,r=e.parentNode,s=!1;for(;!s;){var l=null;if(r===n||r===t||1!==r.nodeType?(s=!0,l=i):"visible"!==window.getComputedStyle(r).overflow&&(l=ke(r)),l&&(c=l,u=a,d=void 0,p=void 0,w=void 0,f=void 0,h=void 0,j=void 0,d=Math.max(c.top,u.top),p=Math.min(c.bottom,u.bottom),w=Math.max(c.left,u.left),f=Math.min(c.right,u.right),j=p-d,!(a=(h=f-w)>=0&&j>=0&&{top:d,bottom:p,left:w,right:f,width:h,height:j})))return 0;r=r.parentNode}var c,u,d,p,w,f,h,j;var g=o.width*o.height,b=a.width*a.height;return g?b/g:0}(t),window.top!==window.self&&n)?0:n}function ke(e){try{return e.getBoundingClientRect()}catch(e){}}var xe=n(62),Oe=n(49),Ce=n(80),Se=n(11);var Me=n(38),Te=n(6),Ee=n(7),_e=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Ae=function(e,t,n){for(var i=e.requestFullscreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen,o=t.exitFullscreen||t.webkitExitFullscreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.msExitFullscreen,a=!(!i||!o),r=_e.length;r--;)t.addEventListener(_e[r],n);return{events:_e,supportsDomFullscreen:function(){return a},requestFullscreen:function(){i.call(e,{navigationUI:"hide"})},exitFullscreen:function(){null!==this.fullscreenElement()&&o.apply(t)},fullscreenElement:function(){var e=t.fullscreenElement,n=t.webkitCurrentFullScreenElement,i=t.mozFullScreenElement,o=t.msFullscreenElement;return null===e?e:e||n||i||o},destroy:function(){for(var e=_e.length;e--;)t.removeEventListener(_e[e],n)}}},Pe=n(35);function ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Le,Ie=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(r.k)(this,j.a),this.revertAlternateClickHandlers(),this.domElement=n,this.model=t,this.ui=new Pe.a(n).on("click tap",this.clickHandler,this).on("doubleClick doubleTap",(function(){this.alternateDoubleClickHandler?this.alternateDoubleClickHandler():this.trigger("doubleClick")}),this)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this.ui&&(this.ui.destroy(),this.ui=this.domElement=this.model=null,this.revertAlternateClickHandlers())}},{key:"clickHandler",value:function(e){this.model.get("flashBlocked")||(this.alternateClickHandler?this.alternateClickHandler(e):this.trigger(e.type===a.n?"click":"tap"))}},{key:"element",value:function(){return this.domElement}},{key:"setAlternateClickHandlers",value:function(e,t){this.alternateClickHandler=e,this.alternateDoubleClickHandler=t||null}},{key:"revertAlternateClickHandlers",value:function(){this.alternateClickHandler=null,this.alternateDoubleClickHandler=null}}])&&ze(t.prototype,n),i&&ze(t,i),e}(),Re={back:!0,backgroundOpacity:50,edgeStyle:null,fontSize:14,fontOpacity:100,fontScale:.05,preprocessor:r.p,windowOpacity:0},Ve=function(e){var t,i,s,l,c,u,d,p,w,f=this,h=e.player;function j(){Object(r.t)(t.fontSize)&&(h.get("containerHeight")?p=Re.fontScale*t.fontSize/Re.fontSize:h.once("change:containerHeight",j,this))}function g(){var e=h.get("containerHeight");if(e){var t;if(h.get("fullscreen")&&y.OS.iOS)t=null;else{var n=e*p;t=Math.round(10*function(e){var t=h.get("mediaElement");if(t&&t.videoHeight){var n=t.videoWidth,i=t.videoHeight,o=n/i,a=h.get("containerHeight"),r=h.get("containerWidth");if(h.get("fullscreen")&&y.OS.mobile){var s=window.screen;s.orientation&&(a=s.availHeight,r=s.availWidth)}if(r&&a&&n&&i)return(r/a>o?a:i*r/n)*p}return e}(n))/10}h.get("renderCaptionsNatively")?function(e,t){var n="#".concat(e," .jw-video::-webkit-media-text-track-display");t&&(t+="px",y.OS.iOS&&Object(Se.b)(n,{fontSize:"inherit"},e,!0));w.fontSize=t,Object(Se.b)(n,w,e,!0)}(h.get("id"),t):Object(Se.d)(c,{fontSize:t})}}function b(e,t,n){var i=Object(Se.c)("#000000",n);"dropshadow"===e?t.textShadow="0 2px 1px "+i:"raised"===e?t.textShadow="0 0 5px "+i+", 0 1px 5px "+i+", 0 2px 5px "+i:"depressed"===e?t.textShadow="0 -2px 1px "+i:"uniform"===e&&(t.textShadow="-2px 0 1px "+i+",2px 0 1px "+i+",0 -2px 1px "+i+",0 2px 1px "+i+",-1px 1px 1px "+i+",1px 1px 1px "+i+",1px -1px 1px "+i+",1px 1px 1px "+i)}(c=document.createElement("div")).className="jw-captions jw-reset",this.show=function(){Object(Te.a)(c,"jw-captions-enabled")},this.hide=function(){Object(Te.o)(c,"jw-captions-enabled")},this.populate=function(e){h.get("renderCaptionsNatively")||(s=[],i=e,e?this.selectCues(e,l):this.renderCues())},this.resize=function(){g(),this.renderCues(!0)},this.renderCues=function(e){e=!!e,Le&&Le.processCues(window,s,c,e)},this.selectCues=function(e,t){if(e&&e.data&&t&&!h.get("renderCaptionsNatively")){var n=this.getAlignmentPosition(e,t);!1!==n&&(s=this.getCurrentCues(e.data,n),this.renderCues(!0))}},this.getCurrentCues=function(e,t){return Object(r.l)(e,(function(e){return t>=e.startTime&&(!e.endTime||t<=e.endTime)}))},this.getAlignmentPosition=function(e,t){var n=e.source,i=t.metadata,o=t.currentTime;return n&&i&&Object(r.w)(i[n])&&(o=i[n]),o},this.clear=function(){Object(Te.g)(c)},this.setup=function(e,n){u=document.createElement("div"),d=document.createElement("span"),u.className="jw-captions-window jw-reset",d.className="jw-captions-text jw-reset",t=Object(r.k)({},Re,n),p=Re.fontScale,j(t.fontSize);var i=t.windowColor,o=t.windowOpacity,a=t.edgeStyle;w={};var s={};!function(e,t){var n=t.color,i=t.fontOpacity;(n||i!==Re.fontOpacity)&&(e.color=Object(Se.c)(n||"#ffffff",i));if(t.back){var o=t.backgroundColor,a=t.backgroundOpacity;o===Re.backgroundColor&&a===Re.backgroundOpacity||(e.backgroundColor=Object(Se.c)(o,a))}else e.background="transparent";t.fontFamily&&(e.fontFamily=t.fontFamily);t.fontStyle&&(e.fontStyle=t.fontStyle);t.fontWeight&&(e.fontWeight=t.fontWeight);t.textDecoration&&(e.textDecoration=t.textDecoration)}(s,t),(i||o!==Re.windowOpacity)&&(w.backgroundColor=Object(Se.c)(i||"#000000",o)),b(a,s,t.fontOpacity),t.back||null!==a||b("uniform",s),Object(Se.d)(u,w),Object(Se.d)(d,s),function(e,t){g(),function(e,t){y.Browser.safari&&Object(Se.b)("#"+e+" .jw-video::-webkit-media-text-track-display-backdrop",{backgroundColor:t.backgroundColor},e,!0);Object(Se.b)("#"+e+" .jw-video::-webkit-media-text-track-display",w,e,!0),Object(Se.b)("#"+e+" .jw-video::cue",t,e,!0)}(e,t),function(e,t){Object(Se.b)("#"+e+" .jw-text-track-display",w,e),Object(Se.b)("#"+e+" .jw-text-track-cue",t,e)}(e,t)}(e,s),u.appendChild(d),c.appendChild(u),h.change("captionsTrack",(function(e,t){this.populate(t)}),this),h.set("captions",t)},this.element=function(){return c},this.destroy=function(){h.off(null,null,this),this.off()};var m=function(e){l=e,f.selectCues(i,l)};h.on("change:playlistItem",(function(){l=null,s=[]}),this),h.on(a.Q,(function(e){s=[],m(e)}),this),h.on(a.S,m,this),h.on("subtitlesTrackData",(function(){this.selectCues(i,l)}),this),h.on("change:captionsList",(function e(t,i){var r=this;1!==i.length&&(t.get("renderCaptionsNatively")||Le||(n.e(9).then(function(e){Le=n(159).default}.bind(null,n)).catch(Object(o.c)(301121)).catch((function(e){r.trigger(a.ub,e)})),t.off("change:captionsList",e,this)))}),this)};Object(r.k)(Ve.prototype,j.a);var He=Ve,Be=function(e,t){var n=t?" jw-hide":"";return'<div class="jw-logo jw-logo-'.concat(e).concat(n,' jw-reset"></div>')},Ne={linktarget:"_blank",margin:8,hide:!1,position:"top-right"};function qe(e){var t,n;Object(r.k)(this,j.a);var i=new Image;this.setup=function(){(n=Object(r.k)({},Ne,e.get("logo"))).position=n.position||Ne.position,n.hide="true"===n.hide.toString(),n.file&&"control-bar"!==n.position&&(t||(t=Object(Te.e)(Be(n.position,n.hide))),e.set("logo",n),i.onload=function(){var i=this.height,o=this.width,a={backgroundImage:'url("'+this.src+'")'};if(n.margin!==Ne.margin){var r=/(\w+)-(\w+)/.exec(n.position);3===r.length&&(a["margin-"+r[1]]=n.margin,a["margin-"+r[2]]=n.margin)}var s=.15*e.get("containerHeight"),l=.15*e.get("containerWidth");if(i>s||o>l){var c=o/i;l/s>c?(i=s,o=s*c):(o=l,i=l/c)}a.width=Math.round(o),a.height=Math.round(i),Object(Se.d)(t,a),e.set("logoWidth",a.width)},i.src=n.file,n.link&&(t.setAttribute("tabindex","0"),t.setAttribute("aria-label",e.get("localization").logo)),this.ui=new Pe.a(t).on("click tap enter",(function(e){e&&e.stopPropagation&&e.stopPropagation(),this.trigger(a.A,{link:n.link,linktarget:n.linktarget})}),this))},this.setContainer=function(e){t&&e.appendChild(t)},this.element=function(){return t},this.position=function(){return n.position},this.destroy=function(){i.onload=null,this.ui&&this.ui.destroy()}}var Fe=function(e){this.model=e,this.image=null};Object(r.k)(Fe.prototype,{setup:function(e){this.el=e},setImage:function(e){var t=this.image;t&&(t.onload=null),this.image=null;var n="";"string"==typeof e&&(n='url("'+e+'")',(t=this.image=new Image).src=e),Object(Se.d)(this.el,{backgroundImage:n})},resize:function(e,t,n){if("uniform"===n){if(e&&(this.playerAspectRatio=e/t),!this.playerAspectRatio||!this.image||"complete"!==(s=this.model.get("state"))&&"idle"!==s&&"error"!==s&&"buffering"!==s)return;var i=this.image,o=null;if(i){if(0===i.width){var a=this;return void(i.onload=function(){a.resize(e,t,n)})}var r=i.width/i.height;Math.abs(this.playerAspectRatio-r)<.09&&(o="cover")}Object(Se.d)(this.el,{backgroundSize:o})}var s},element:function(){return this.el}});var De=Fe,Ue=n(115),We=function(e){var t=new De(e),n=t.setImage.bind(t);return(t=Object(r.k)(t,j.a)).setImage=function(e,i,o,a){if(n(e),i){var r=a._model;new Ue.a("posterItem",t.el,o,a,(function(){t.trigger("videoThumbnailFirstFrame",{feedData:o.feedData,target:o,ui:"poster",viewable:r.get("viewable")})})).init()}},t},Ze=function(e){this.model=e.player};Object(r.k)(Ze.prototype,{hide:function(){Object(Se.d)(this.el,{display:"none"})},show:function(){Object(Se.d)(this.el,{display:""})},setup:function(e){this.el=e;var t=this.el.getElementsByTagName("div");this.title=t[0],this.description=t[1],this.model.on("change:logoWidth",this.update,this),this.model.change("playlistItem",this.playlistItem,this)},update:function(e){var t={},n=e.get("logo");if(n){var i=1*(""+n.margin).replace("px",""),o=e.get("logoWidth")+(isNaN(i)?0:i+10);"top-left"===n.position?t.paddingLeft=o:"top-right"===n.position&&(t.paddingRight=o)}Object(Se.d)(this.el,t)},playlistItem:function(e,t){if(t)if(e.get("displaytitle")||e.get("displaydescription")){var n="",i="";t.title&&e.get("displaytitle")&&(n=t.title),t.description&&e.get("displaydescription")&&(i=t.description),this.updateText(n,i)}else this.hide()},updateText:function(e,t){Object(Te.q)(this.title,e),Object(Te.q)(this.description,t),this.title.firstChild||this.description.firstChild?this.show():this.hide()},element:function(){return this.el}});var Ye=Ze;function Qe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Xe,Je=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.input=t.querySelector(".jw-media")}var t,n,i;return t=e,(n=[{key:"disable",value:function(){this.ui&&(this.ui.destroy(),this.ui=null)}},{key:"enable",value:function(){var e,t,n,i,o=this.container,a=this.input,r=this.ui=new Pe.a(a,{preventScrolling:!0}).on("dragStart",(function(){e=o.offsetLeft,t=o.offsetTop,n=window.innerHeight,i=window.innerWidth})).on("drag",(function(a){var s=Math.max(e+a.pageX-r.startX,0),l=Math.max(t+a.pageY-r.startY,0),c=Math.max(i-(s+o.clientWidth),0),u=Math.max(n-(l+o.clientHeight),0);0===c?s="auto":c="auto",0===l?u="auto":l="auto",Object(Se.d)(o,{left:s,right:c,top:l,bottom:u,margin:0})})).on("dragEnd",(function(){e=t=i=n=null}))}}])&&Qe(t.prototype,n),i&&Qe(t,i),e}(),Ke=n(68);n(118);var $e=y.OS.mobile,Ge=y.Browser.ie,et=null;var tt=function(e,t){var n,i,o,s,l=this,c=Object(r.k)(this,j.a,{isSetup:!1,api:e,model:t}),u=t.get("localization"),d=Object(Te.e)(je(t.get("id"),u.player)),p=d.querySelector(".jw-wrapper"),w=d.querySelector(".jw-media"),f=new Je(p),g=new We(t,e),b=new Ye(t),m=new He(t);m.on("all",c.trigger,c);var v=-1,k=-1,x=-1,O=t.get("floating");this.dismissible=O&&O.dismissible;var C,S,M,T=!1,E={},_=null,A=null;function P(){return y.OS.mobile&&!Object(Te.f)()}function z(){Object(Oe.a)(k),k=Object(Oe.b)(L)}function L(){c.isSetup&&(c.updateBounds(),c.updateStyles(),c.checkResized())}function I(e,n){if(Object(r.w)(e)&&Object(r.w)(n)){var i=Object(Ce.a)(e);Object(Ce.b)(d,i);var o=i<2;Object(Te.v)(d,"jw-flag-small-player",o),Object(Te.v)(d,"jw-orientation-portrait",n>e)}if(t.get("controls")){var a=me(t);Object(Te.v)(d,"jw-flag-audio-player",a),t.set("audioMode",a)}}function R(){t.set("visibility",ye(t,d))}this.updateBounds=function(){Object(Oe.a)(k);var e=t.get("isFloating")?p:d,n=document.body.contains(e),a=Object(Te.c)(e),r=Math.round(a.width),s=Math.round(a.height);if(E=Object(Te.c)(d),r===i&&s===o)return i&&o||z(),void t.set("inDom",n);r&&s||i&&o||z(),(r||s||n)&&(t.set("containerWidth",r),t.set("containerHeight",s)),t.set("inDom",n),n&&ve.a.observe(d)},this.updateStyles=function(){var e=t.get("containerWidth"),n=t.get("containerHeight");I(e,n),A&&A.resize(e,n),G(e,n),m.resize(),O&&q()},this.checkResized=function(){var e=t.get("containerWidth"),n=t.get("containerHeight"),r=t.get("isFloating");if(e!==i||n!==o){this.resizeListener||(this.resizeListener=new Ke.a(p,this,t)),i=e,o=n,c.trigger(a.ib,{width:e,height:n});var l=Object(Ce.a)(e);_!==l&&(_=l,c.trigger(a.j,{breakpoint:_}))}r!==s&&(s=r,c.trigger(a.x,{floating:r}),R())},this.responsiveListener=z,this.setup=function(){var i,o,r,s;g.setup(d.querySelector(".jw-preview")),b.setup(d.querySelector(".jw-title")),(n=new qe(t)).setup(),n.setContainer(p),n.on(a.A,J),m.setup(d.id,t.get("captions")),b.element().parentNode.insertBefore(m.element(),b.element()),i=e,r=new Ie(o=t,w),s=o.get("controls"),r.on({click:function(){c.trigger(a.p),A&&(ce()?A.settingsMenu.close():ue()?A.infoOverlay.close():i.playToggle({reason:"interaction"}))},tap:function(){d.removeEventListener("mousemove",W),d.removeEventListener("mouseout",Y),d.removeEventListener("mouseover",Z),c.trigger(a.p),ce()&&A.settingsMenu.close(),ue()&&A.infoOverlay.close();var e=o.get("state");if(s&&(e===a.nb||e===a.lb||o.get("instream")&&e===a.pb)&&i.playToggle({reason:"interaction"}),s&&e===a.pb){if(o.get("instream")||o.get("castActive")||"audio"===o.get("mediaType"))return;Object(Te.v)(d,"jw-flag-controls-hidden"),c.dismissible&&Object(Te.v)(d,"jw-floating-dismissible",Object(Te.i)(d,"jw-flag-controls-hidden")),m.renderCues(!0)}else A&&(A.showing?A.userInactive():A.userActive())},doubleClick:function(){return A&&i.setFullscreen()}}),d.addEventListener("mousemove",W),d.addEventListener("mouseover",Z),d.addEventListener("mouseout",Y),C=r,M=new Pe.a(d).on("click",(function(){})),S=Ae(d,document,te),t.on("change:hideAdsControls",(function(e,t){Object(Te.v)(d,"jw-flag-ads-hide-controls",t)})),t.on("change:scrubbing",(function(e,t){Object(Te.v)(d,"jw-flag-dragging",t)})),t.on("change:playRejected",(function(e,t){Object(Te.v)(d,"jw-flag-play-rejected",t)})),t.on(a.X,ee),t.on("change:".concat(a.U),(function(){G(),m.resize()})),t.player.on("change:errorEvent",ae),t.change("stretching",Q);var l=t.get("width"),u=t.get("height"),f=$(l,u);Object(Se.d)(d,f),t.change("aspectratio",X),I(l,u),t.get("controls")||(Object(Te.a)(d,"jw-flag-controls-hidden"),Object(Te.o)(d,"jw-floating-dismissible")),Ge&&Object(Te.a)(d,"jw-ie");var j=t.get("skin")||{};j.name&&Object(Te.p)(d,/jw-skin-\S+/,"jw-skin-"+j.name);var v=function(e){e||(e={});var t=e.active,n=e.inactive,i=e.background,o={};return o.controlbar=function(e){if(e||t||n||i){var o={};return e=e||{},o.iconsActive=e.iconsActive||t,o.icons=e.icons||n,o.text=e.text||n,o.background=e.background||i,o}}(e.controlbar),o.timeslider=function(e){if(e||t){var n={};return e=e||{},n.progress=e.progress||t,n.rail=e.rail,n}}(e.timeslider),o.menus=function(e){if(e||t||n||i){var o={};return e=e||{},o.text=e.text||n,o.textActive=e.textActive||t,o.background=e.background||i,o}}(e.menus),o.tooltips=function(e){if(e||n||i){var t={};return e=e||{},t.text=e.text||n,t.background=e.background||i,t}}(e.tooltips),o}(j);!function(e,t){var n;function i(t,n,i,o){if(i){t=Object(h.f)(t,"#"+e+(o?"":" "));var a={};a[n]=i,Object(Se.b)(t.join(", "),a,e)}}t&&(t.controlbar&&function(t){i([".jw-controlbar .jw-icon-inline.jw-text",".jw-title-primary",".jw-title-secondary"],"color",t.text),t.icons&&(i([".jw-button-color:not(.jw-icon-cast)",".jw-button-color.jw-toggle.jw-off:not(.jw-icon-cast)"],"color",t.icons),i([".jw-display-icon-container .jw-button-color"],"color",t.icons),Object(Se.b)("#".concat(e," .jw-icon-cast google-cast-launcher.jw-off"),"{--disconnected-color: ".concat(t.icons,"}"),e));t.iconsActive&&(i([".jw-display-icon-container .jw-button-color:hover",".jw-display-icon-container .jw-button-color:focus"],"color",t.iconsActive),i([".jw-button-color.jw-toggle:not(.jw-icon-cast)",".jw-button-color:hover:not(.jw-icon-cast)",".jw-button-color:focus:not(.jw-icon-cast)",".jw-button-color.jw-toggle.jw-off:hover:not(.jw-icon-cast)"],"color",t.iconsActive),i([".jw-svg-icon-buffer"],"fill",t.icons),Object(Se.b)("#".concat(e," .jw-icon-cast:hover google-cast-launcher.jw-off"),"{--disconnected-color: ".concat(t.iconsActive,"}"),e),Object(Se.b)("#".concat(e," .jw-icon-cast:focus google-cast-launcher.jw-off"),"{--disconnected-color: ".concat(t.iconsActive,"}"),e),Object(Se.b)("#".concat(e," .jw-icon-cast google-cast-launcher.jw-off:focus"),"{--disconnected-color: ".concat(t.iconsActive,"}"),e),Object(Se.b)("#".concat(e," .jw-icon-cast google-cast-launcher"),"{--connected-color: ".concat(t.iconsActive,"}"),e),Object(Se.b)("#".concat(e," .jw-icon-cast google-cast-launcher:focus"),"{--connected-color: ".concat(t.iconsActive,"}"),e),Object(Se.b)("#".concat(e," .jw-icon-cast:hover google-cast-launcher"),"{--connected-color: ".concat(t.iconsActive,"}"),e),Object(Se.b)("#".concat(e," .jw-icon-cast:focus google-cast-launcher"),"{--connected-color: ".concat(t.iconsActive,"}"),e));i([" .jw-settings-topbar",":not(.jw-state-idle) .jw-controlbar",".jw-flag-audio-player .jw-controlbar"],"background",t.background,!0)}(t.controlbar),t.timeslider&&function(e){var t=e.progress;"none"!==t&&(i([".jw-progress",".jw-knob"],"background-color",t),i([".jw-buffer"],"background-color",Object(Se.c)(t,50)));i([".jw-rail"],"background-color",e.rail),i([".jw-background-color.jw-slider-time",".jw-slider-time .jw-cue"],"background-color",e.background)}(t.timeslider),t.menus&&(i([".jw-option",".jw-toggle.jw-off",".jw-skip .jw-skip-icon",".jw-nextup-tooltip",".jw-nextup-close",".jw-settings-content-item",".jw-related-title"],"color",(n=t.menus).text),i([".jw-option.jw-active-option",".jw-option:not(.jw-active-option):hover",".jw-option:not(.jw-active-option):focus",".jw-settings-content-item:hover",".jw-nextup-tooltip:hover",".jw-nextup-tooltip:focus",".jw-nextup-close:hover"],"color",n.textActive),i([".jw-nextup",".jw-settings-menu"],"background",n.background)),t.tooltips&&function(e){i([".jw-skip",".jw-tooltip .jw-text",".jw-time-tip .jw-text"],"background-color",e.background),i([".jw-time-tip",".jw-tooltip"],"color",e.background),i([".jw-skip"],"border","none"),i([".jw-skip .jw-text",".jw-skip .jw-icon",".jw-time-tip .jw-text",".jw-tooltip .jw-text"],"color",e.text)}(t.tooltips),t.menus&&function(t){if(t.textActive){var n={color:t.textActive,borderColor:t.textActive,stroke:t.textActive};Object(Se.b)("#".concat(e," .jw-color-active"),n,e),Object(Se.b)("#".concat(e," .jw-color-active-hover:hover"),n,e)}if(t.text){var i={color:t.text,borderColor:t.text,stroke:t.text};Object(Se.b)("#".concat(e," .jw-color-inactive"),i,e),Object(Se.b)("#".concat(e," .jw-color-inactive-hover:hover"),i,e)}}(t.menus))}(t.get("id"),v),t.set("mediaContainer",w),t.set("iFrame",y.Features.iframe),t.set("activeTab",Object(xe.a)()),t.set("touchMode",$e&&("string"==typeof u||u>=be)),ve.a.add(this),t.get("enableGradient")&&!Ge&&Object(Te.a)(d,"jw-ab-drop-shadow"),this.isSetup=!0,t.trigger("viewSetup",d);var k=document.body.contains(d);k&&ve.a.observe(d),t.set("inDom",k)},this.init=function(){this.updateBounds(),t.on("change:fullscreen",K),t.on("change:activeTab",R),t.on("change:fullscreen",R),t.on("change:intersectionRatio",R),t.on("change:visibility",U),t.on("instreamMode",(function(e){e?de():pe()})),R(),1!==ve.a.size()||t.get("visibility")||U(t,1,0);var e=t.player;t.change("state",re),e.change("controls",F),t.change("streamType",ie),t.change("mediaType",oe),e.change("playlistItem",(function(e,t){le(e,t)})),i=o=null,O&&y.OS.mobile&&ve.a.addScrollHandler(q),this.checkResized()};var V,H=62,B=!0;function N(){var e=t.get("isFloating"),n=E.top<H,i=n?E.top<=window.scrollY:E.top<=window.scrollY+H;!e&&i?we(0,n):e&&!i&&we(1,n)}function q(){P()&&t.get("inDom")&&(clearTimeout(V),V=setTimeout(N,150),B&&(B=!1,N(),setTimeout((function(){B=!0}),50)))}function F(e,t){var n={controls:t};t?(Xe=Me.a.controls)?D():(n.loadPromise=Object(Me.b)().then((function(t){Xe=t;var n=e.get("controls");return n&&D(),n})),n.loadPromise.catch((function(e){c.trigger(a.ub,e)}))):c.removeControls(),i&&o&&c.trigger(a.o,n)}function D(){var e=new Xe(document,c.element());c.addControls(e)}function U(e,t,n){t&&!n&&(re(e,e.get("state")),c.updateStyles())}function W(e){A&&A.mouseMove(e)}function Z(e){A&&!A.showing&&"IFRAME"===e.target.nodeName&&A.userActive()}function Y(e){A&&A.showing&&(e.relatedTarget&&!d.contains(e.relatedTarget)||!e.relatedTarget&&y.Features.iframe)&&A.userActive()}function Q(e,t){Object(Te.p)(d,/jw-stretch-\S+/,"jw-stretch-"+t)}function X(e,n){Object(Te.v)(d,"jw-flag-aspect-mode",!!n);var i=d.querySelectorAll(".jw-aspect");Object(Se.d)(i,{paddingTop:n||null}),c.isSetup&&n&&!t.get("isFloating")&&(Object(Se.d)(d,$(e.get("width"))),L())}function J(n){n.link?(e.pause({reason:"interaction"}),e.setFullscreen(!1),Object(Te.l)(n.link,n.linktarget,{rel:"noreferrer"})):t.get("controls")&&e.playToggle({reason:"interaction"})}this.addControls=function(n){var r=this;A=n,Object(Te.o)(d,"jw-flag-controls-hidden"),Object(Te.v)(d,"jw-floating-dismissible",this.dismissible),n.enable(e,t),o&&(I(i,o),n.resize(i,o),m.renderCues(!0)),n.on("userActive userInactive",(function(){var e=t.get("state");e!==a.qb&&e!==a.kb||m.renderCues(!0)})),n.on("dismissFloating",(function(){r.stopFloating(!0),e.pause({reason:"interaction"})})),n.on("all",c.trigger,c),t.get("instream")&&A.setupInstream()},this.removeControls=function(){A&&(A.disable(t),A=null),Object(Te.a)(d,"jw-flag-controls-hidden"),Object(Te.o)(d,"jw-floating-dismissible")};var K=function(t,n){if(n&&A&&t.get("autostartMuted")&&A.unmuteAutoplay(e,t),S.supportsDomFullscreen())n?S.requestFullscreen():S.exitFullscreen(),ne(d,n);else if(Ge)ne(d,n);else{var i=t.get("instream"),o=i?i.provider:null,a=t.getVideo()||o;a&&a.setFullscreen&&a.setFullscreen(n)}};function $(e,n,i){var o={width:e};if(i&&void 0!==n&&t.set("aspectratio",null),!t.get("aspectratio")){var a=n;Object(r.w)(a)&&0!==a&&(a=Math.max(a,be)),o.height=a}return o}function G(e,n){if((e&&!isNaN(1*e)||(e=t.get("containerWidth")))&&(n&&!isNaN(1*n)||(n=t.get("containerHeight")))){g&&g.resize(e,n,t.get("stretching"));var i=t.getVideo();i&&i.resize(e,n,t.get("stretching"))}}function ee(e){Object(Te.v)(d,"jw-flag-ios-fullscreen",e.jwstate),te(e)}function te(e){var n=t.get("fullscreen"),i=void 0!==e.jwstate?e.jwstate:function(){if(S.supportsDomFullscreen()){var e=S.fullscreenElement();return!(!e||e!==d)}return t.getVideo().getFullScreen()}();n!==i&&t.set("fullscreen",i),z(),clearTimeout(v),v=setTimeout(G,200)}function ne(e,t){Object(Te.v)(e,"jw-flag-fullscreen",t),Object(Se.d)(document.body,{overflowY:t?"hidden":""}),t&&A&&A.userActive(),G(),z()}function ie(e,t){var n="LIVE"===t;Object(Te.v)(d,"jw-flag-live",n)}function oe(e,t){var n="audio"===t,i=e.get("provider");Object(Te.v)(d,"jw-flag-media-audio",n);var o=i&&0===i.name.indexOf("flash"),a=n&&!o?w:w.nextSibling;g.el.parentNode.insertBefore(g.el,a)}function ae(e,t){if(t){var n=Object(ge.a)(e,t);ge.a.cloneIcon&&n.querySelector(".jw-icon").appendChild(ge.a.cloneIcon("error")),b.hide(),d.appendChild(n.firstChild),Object(Te.v)(d,"jw-flag-audio-player",!!e.get("audioMode"))}else b.playlistItem(e,e.get("playlistItem"))}function re(e,t,n){if(c.isSetup){if(n===a.mb){var i=d.querySelector(".jw-error-msg");i&&i.parentNode.removeChild(i)}Object(Oe.a)(x),t===a.qb?se(t):x=Object(Oe.b)((function(){return se(t)}))}}function se(e){switch(t.get("controls")&&e!==a.pb&&Object(Te.i)(d,"jw-flag-controls-hidden")&&(Object(Te.o)(d,"jw-flag-controls-hidden"),Object(Te.v)(d,"jw-floating-dismissible",c.dismissible)),Object(Te.p)(d,/jw-state-\S+/,"jw-state-"+e),e){case a.mb:c.stopFloating();case a.nb:case a.lb:m&&m.hide();break;default:m&&(m.show(),e===a.pb&&A&&!A.showing&&m.renderCues(!0))}}this.resize=function(e,n){var i=$(e,n,!0);void 0!==e&&void 0!==n&&(t.set("width",e),t.set("height",n)),Object(Se.d)(d,i),t.get("isFloating")&&fe(),L()},this.resizeMedia=G,this.setPosterImage=function(e,t){t.setImage(e&&e.image)};var le=function(e,t){l.setPosterImage(t,g),$e&&function(e,t){var n=e.get("mediaElement");if(n){var i=Object(Te.j)(t.title||"");n.setAttribute("title",i.textContent)}}(e,t)},ce=function(){var e=A&&A.settingsMenu;return!(!e||!e.visible)},ue=function(){var e=A&&A.infoOverlay;return!(!e||!e.visible)},de=function(){Object(Te.a)(d,"jw-flag-ads"),A&&A.setupInstream(),f.disable()},pe=function(){if(C){A&&A.destroyInstream(t),et!==d||Object(Ee.m)()||f.enable(),c.setAltText(""),Object(Te.o)(d,["jw-flag-ads","jw-flag-ads-hide-controls"]),t.set("hideAdsControls",!1);var e=t.getVideo();e&&e.setContainer(w),C.revertAlternateClickHandlers()}};function we(e,n){if(e<.5&&!Object(Ee.m)()){var i=t.get("state");i!==a.nb&&i!==a.mb&&i!==a.lb&&null===et&&(et=d,t.set("isFloating",!0),Object(Te.a)(d,"jw-flag-floating"),n&&(Object(Se.d)(p,{transform:"translateY(-".concat(H-E.top,"px)")}),setTimeout((function(){Object(Se.d)(p,{transform:"translateY(0)",transition:"transform 150ms cubic-bezier(0, 0.25, 0.25, 1)"})}))),Object(Se.d)(d,{backgroundImage:g.el.style.backgroundImage||t.get("image")}),fe(),t.get("instreamMode")||f.enable(),z())}else c.stopFloating(!1,n)}function fe(){var e=t.get("width"),n=t.get("height"),i=$(e);if(i.maxWidth=Math.min(400,E.width),!t.get("aspectratio")){var o=E.width,a=E.height/o||.5625;Object(r.w)(e)&&Object(r.w)(n)&&(a=n/e),X(t,100*a+"%")}Object(Se.d)(p,i)}this.setAltText=function(e){t.set("altText",e)},this.clickHandler=function(){return C},this.getContainer=this.element=function(){return d},this.getWrapper=function(){return p},this.controlsContainer=function(){return A?A.element():null},this.getSafeRegion=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={x:0,y:0,width:i||0,height:o||0};return A&&e&&(t.height-=A.controlbarHeight()),t},this.setCaptions=function(e){m.clear(),m.setup(t.get("id"),e),m.resize()},this.setIntersection=function(e){var n=Math.round(100*e.intersectionRatio)/100;t.set("intersectionRatio",n),O&&!P()&&(T=T||n>=.5)&&we(n)},this.stopFloating=function(e,n){if(e&&(O=null,ve.a.removeScrollHandler(q)),et===d){et=null,t.set("isFloating",!1);var i=function(){Object(Te.o)(d,"jw-flag-floating"),X(t,t.get("aspectratio")),Object(Se.d)(d,{backgroundImage:null}),Object(Se.d)(p,{maxWidth:null,width:null,height:null,left:null,right:null,top:null,bottom:null,margin:null,transform:null,transition:null,"transition-timing-function":null})};n?(Object(Se.d)(p,{transform:"translateY(-".concat(H-E.top,"px)"),"transition-timing-function":"ease-out"}),setTimeout(i,150)):i(),f.disable(),z()}},this.destroy=function(){t.destroy(),ve.a.unobserve(d),ve.a.remove(this),this.isSetup=!1,this.off(),Object(Oe.a)(k),clearTimeout(v),et===d&&(et=null),M&&(M.destroy(),M=null),S&&(S.destroy(),S=null),A&&A.disable(t),C&&(C.destroy(),d.removeEventListener("mousemove",W),d.removeEventListener("mouseout",Y),d.removeEventListener("mouseover",Z),C=null),m.destroy(),n&&(n.destroy(),n=null),Object(Se.a)(t.get("id")),this.resizeListener&&(this.resizeListener.destroy(),delete this.resizeListener),O&&y.OS.mobile&&ve.a.removeScrollHandler(q)}},nt=!1,it=window.$sf,ot=function(e,t){this.playerElement=e,this.wrapperElement=t};Object(r.k)(ot.prototype,{setup:function(e){var t=Object(Te.e)(function(e){return'<span class="jw-text jw-reset">'.concat(e,"</span>")}(e));this.wrapperElement.appendChild(t),Object(Te.a)(this.playerElement,"jw-flag-top")}});var at,rt=ot,st=n(81),lt=n.n(st),ct=n(82),ut=n(116),dt=function(e,t){var i="free"===t.get("edition");i&&!at&&(n(122),at=!0);var o=new tt(e,t),r=o.setup;if(o.setPosterImage=function(n,i){var o=Object(ut.a)(n.images);o?(y.OS.mobile||o.reverse(),n.videoThumbnail=o[0].src,i.on("videoThumbnailFirstFrame",(function(t){e.trigger("videoThumbFirstFrame",t)})),i.setImage(n&&n.image,!0,n,t)):i.setImage(n&&n.image)},o.setup=function(){var e=this;(r.call(this),t.get("displayHeading"))&&new rt(o.getContainer(),o.getContainer().querySelector(".jw-top")).setup(t.get("localization").advertising.displayHeading);t.change("castAvailable",(function(t,n){var i=t.get("cast");Object(i)===i&&Object(Te.v)(e.getContainer(),"jw-flag-cast-available",n)}),this),t.change("castActive",(function(t,n){var i=t.get("airplayActive");Object(Te.v)(e.getContainer(),"jw-flag-casting",n||!1),Object(Te.v)(e.getContainer(),"jw-flag-airplay-casting",i||!1)}),this),t.change("flashBlocked",(function(t,n){Object(Te.v)(e.getContainer(),"jw-flag-flash-blocked",n)}),this)},i){var s=o.addControls;o.addControls=function(e){s.call(this,e);var t=document.querySelector(".jw-logo-button");if(t){var n=Object(ct.b)(lt.a);t.appendChild(n)}}}var l=t.get("advertising");return l&&l.outstream&&function(e,t){nt||(nt=!0,n(120));var i=t.model,o=t.getSafeRegion;t.getSafeRegion=function(e){var t=o.call(this,e);return t.height=this.api.getHeight(),t},i.on("change:mediaState",(function(n,r){if(r===a.ob||r===a.qb){if(i.off("change:mediaState",null,t),it&&it.ext&&it.ext.supports()["exp-push"]){var s=it.ext.geom(),l=s.exp,c=s.self,u=Math.min(e.getHeight()-c.h,l.yx?1/0:l.b),d=Math.min(e.getWidth()-c.w,l.xs?1/0:l.r);(u>0||d>0)&&it.ext.expand({b:Math.max(0,u),r:Math.max(0,d),push:!0})}Object(Te.o)(t.getContainer(),"jw-flag-outstream-pending"),t.getSafeRegion=o,t.responsiveListener()}}),t);var r=t.setup;t.setup=function(){r.call(this),Object(Te.a)(this.getContainer(),"jw-flag-outstream jw-flag-outstream-pending")};var s=i.get("advertising");s.dismissible&&(t.dismissible=!0,t.on("dismissFloating",(function(){e.remove()}))),it&&it.ext&&e.once(a.hb,(function(){it.ext.register(e.getWidth(),e.getHeight())})),e.once(a.cb,(function(){t.stopFloating(!0),"close"===s.endstate&&(Object(Te.a)(t.getContainer(),"jw-flag-outstream-close"),it&&it.ext&&it.ext.collapse())}))}(e,o),o};function pt(e,t,n){return(pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bt(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jt(e,t,n){return t&&ht(e.prototype,t),n&&ht(e,n),e}function gt(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?mt(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kt=/^change:(.+)$/;function xt(e,t,n){Object.keys(t).forEach((function(i){i in t&&t[i]!==n[i]&&e.trigger("change:".concat(i),e,t[i],n[i])}))}function Ot(e,t){e&&e.off(null,null,t)}var Ct=function(e){function t(e,n){var i;return ft(this,t),(i=gt(this,bt(t).call(this)))._model=e,i._mediaModel=null,Object(r.k)(e.attributes,{altText:"",fullscreen:!1,logoWidth:0,scrubbing:!1}),e.on("all",(function(t,o,a,r){o===e&&(o=mt(i)),n&&!n(t,o,a,r)||i.trigger(t,o,a,r)}),mt(i)),e.on("change:mediaModel",(function(e,t){i.mediaModel=t}),mt(i)),i}return vt(t,e),jt(t,[{key:"get",value:function(e){var t=this._mediaModel;return t&&e in t.attributes?t.get(e):this._model.get(e)}},{key:"set",value:function(e,t){return this._model.set(e,t)}},{key:"getVideo",value:function(){return this._model.getVideo()}},{key:"destroy",value:function(){Ot(this._model,this),Ot(this._mediaModel,this),this.off()}},{key:"mediaModel",set:function(e){var t=this,n=this._mediaModel;Ot(n,this),this._mediaModel=e,e.on("all",(function(n,i,o,a){i===e&&(i=t),t.trigger(n,i,o,a)}),this),n&&xt(this,e.attributes,n.attributes)}}]),t}(k.a),St=function(e){function t(e){var n;return ft(this,t),(n=gt(this,bt(t).call(this,e,(function(e){var t=n._instreamModel;if(t){var i=kt.exec(e);if(i)if(i[1]in t.attributes)return!1}return!0}))))._instreamModel=null,n._playerViewModel=new Ct(n._model),e.on("change:instream",(function(e,t){n.instreamModel=t?t.model:null}),mt(n)),n}return vt(t,e),jt(t,[{key:"get",value:function(e){var t=this._mediaModel;if(t&&e in t.attributes)return t.get(e);var n=this._instreamModel;return n&&e in n.attributes?n.get(e):this._model.get(e)}},{key:"getVideo",value:function(){var e=this._instreamModel;return e&&e.getVideo()?e.getVideo():pt(bt(t.prototype),"getVideo",this).call(this)}},{key:"destroy",value:function(){pt(bt(t.prototype),"destroy",this).call(this),Ot(this._instreamModel,this)}},{key:"player",get:function(){return this._playerViewModel}},{key:"instreamModel",set:function(e){var t=this,n=this._instreamModel;if(Ot(n,this),this._model.off("change:mediaModel",null,this),this._instreamModel=e,this.trigger("instreamMode",!!e),e)e.on("all",(function(n,i,o,a){i===e&&(i=t),t.trigger(n,i,o,a)}),this),e.change("mediaModel",(function(e,n){t.mediaModel=n}),this),xt(this,e.attributes,this._model.attributes);else if(n){this._model.change("mediaModel",(function(e,n){t.mediaModel=n}),this);var i=Object(r.k)({},this._model.attributes,n.attributes);xt(this,this._model.attributes,i)}}}]),t}(Ct);var Mt,Tt,Et=n(74),_t=(Mt=window).URL&&Mt.URL.createObjectURL?Mt.URL:Mt.webkitURL||Mt.mozURL;function At(e,t){var n=t.muted;return Tt||(Tt=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"})),e.muted=n,e.src=_t.createObjectURL(Tt),e.play()||Object(Et.a)(e)}var Pt="autoplayEnabled",zt="autoplayMuted",Lt="autoplayDisabled",It={};var Rt=n(78),Vt=n(63),Ht=n(32),Bt="tabHidden",Nt="tabVisible",qt=function(e){var t=0;return function(n){var i=n.position;i>t&&e(),t=i}};function Ft(e,t){t.off(a.N,e._onPlayAttempt),t.off(a.gb,e._triggerFirstFrame),t.off(a.S,e._onTime),e.off("change:activeTab",e._onTabVisible)}var Dt=function(e,t){e.change("mediaModel",(function(e,n,i){e._qoeItem&&i&&e._qoeItem.end(i.get("mediaState")),e._qoeItem=new Ht.a,e._qoeItem.getFirstFrame=function(){var e=this.between(a.N,a.H),t=this.between(Nt,a.H);return t>0&&t<e?t:e},e._qoeItem.tick(a.db),e._qoeItem.start(n.get("mediaState")),function(e,t){e._onTabVisible&&Ft(e,t);var n=!1;e._triggerFirstFrame=function(){if(!n){n=!0;var i=e._qoeItem;i.tick(a.H);var o=i.getFirstFrame();if(t.trigger(a.H,{loadTime:o}),t.mediaController){var r=t.mediaController.mediaModel;r.off("change:".concat(a.U),null,r),r.change(a.U,(function(e,n){n&&t.trigger(a.U,n)}),r)}Ft(e,t)}},e._onTime=qt(e._triggerFirstFrame),e._onPlayAttempt=function(){e._qoeItem.tick(a.N)},e._onTabVisible=function(t,n){n?e._qoeItem.tick(Nt):e._qoeItem.tick(Bt)},e.on("change:activeTab",e._onTabVisible),t.on(a.N,e._onPlayAttempt),t.once(a.gb,e._triggerFirstFrame),t.on(a.S,e._onTime)}(e,t),n.on("change:mediaState",(function(t,n,i){n!==i&&(e._qoeItem.end(i),e._qoeItem.start(n))}))}))};function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wt=function(){},Zt=function(){};Object(r.k)(Wt.prototype,{setup:function(e,t,n,i,o,h){var g,v,k,x,O=this,C=this,S=C._model=new I,M=!1,T=!1,E=null,_=b(N),A=b(Zt);C.originalContainer=C.currentContainer=n,C._events=i,C.trigger=function(e,t){var n=function(e,t,n){var i=n;switch(t){case"time":case"beforePlay":case"pause":case"play":case"ready":var o=e.get("viewable");void 0!==o&&(i=Object(r.k)({},n,{viewable:o}))}return i}(S,e,t);return j.a.trigger.call(this,e,n)};var P=new u.a(C,["trigger"],(function(){return!0})),z=function(e,t){C.trigger(e,t)};S.setup(e);var L=S.get("backgroundLoading"),R=new St(S);(g=this._view=new dt(t,R)).on("all",(function(e,t){t&&t.doNotForward||z(e,t)}),C);var V=this._programController=new X(S,h);ce(),V.on("all",z,C).on("subtitlesTracks",(function(e){v.setSubtitlesTracks(e.tracks);var t=v.getCurrentIndex();t>0&&re(t,e.tracks)}),C).on(a.F,(function(){Promise.resolve().then(ae)}),C).on(a.G,C.triggerError,C),Dt(S,V),S.on(a.w,C.triggerError,C),S.on("change:state",(function(e,t,n){Y()||K.call(O,e,t,n)}),this),S.on("change:castState",(function(e,t){C.trigger(a.m,t)})),S.on("change:fullscreen",(function(e,t){C.trigger(a.y,{fullscreen:t}),t&&e.set("playOnViewable",!1)})),S.on("change:volume",(function(e,t){C.trigger(a.V,{volume:t})})),S.on("change:mute",(function(e){C.trigger(a.M,{mute:e.getMute()})})),S.on("change:playbackRate",(function(e,t){C.trigger(a.ab,{playbackRate:t,position:e.get("position")})}));var H=function e(t,n){"clickthrough"!==n&&"interaction"!==n&&"external"!==n||(S.set("playOnViewable",!1),S.off("change:playReason change:pauseReason",e))};function B(e,t){Object(r.z)(t)||S.set("viewable",Math.round(t))}function N(){ue&&(!0!==S.get("autostart")||S.get("playOnViewable")||G("autostart"),ue.flush())}function q(e,t){C.trigger("viewable",{viewable:t}),F()}function F(){if((s.a[0]===t||1===S.get("viewable"))&&"idle"===S.get("state")&&!1===S.get("autostart"))if(!h.primed()&&y.OS.android){var e=h.getTestElement(),n=C.getMute();Promise.resolve().then((function(){return At(e,{muted:n})})).then((function(){"idle"===S.get("state")&&V.preloadVideo()})).catch(Zt)}else V.preloadVideo()}function D(e){C._instreamAdapter.noResume=!e,e||te({reason:"viewable"})}function U(e){e||(C.pause({reason:"viewable"}),S.set("playOnViewable",!e))}function W(e,t){var n=Y();if(e.get("playOnViewable")){if(t){var i=e.get("autoPause").pauseAds,o=e.get("pauseReason");Q()===a.nb?G("viewable"):n&&!i||"interaction"===o||J({reason:"viewable"})}else y.OS.mobile&&!n&&(C.pause({reason:"autostart"}),S.set("playOnViewable",!0));y.OS.mobile&&n&&D(t)}}function Z(e,t){var n=e.get("state"),i=Y(),o=e.get("playReason");i?e.get("autoPause").pauseAds?U(t):D(t):n===a.qb||n===a.kb?U(t):n===a.nb&&"playlist"===o&&e.once("change:state",(function(){U(t)}))}function Y(){var e=C._instreamAdapter;return!!e&&e.getState()}function Q(){var e=Y();return e||S.get("state")}function J(e){if(_.cancel(),T=!1,S.get("state")===a.mb)return Promise.resolve();var n=$(e);return S.set("playReason",n),Y()?(t.pauseAd(!1,e),Promise.resolve()):(S.get("state")===a.lb&&(ee(!0),C.setItemIndex(0)),!M&&(M=!0,C.trigger(a.C,{playReason:n,startTime:e&&e.startTime?e.startTime:S.get("playlistItem").starttime}),M=!1,Object(Vt.a)()&&!h.primed()&&h.prime(),"playlist"===n&&S.get("autoPause").viewability&&Z(S,S.get("viewable")),x)?(Object(Vt.a)()&&!L&&S.get("mediaElement").load(),x=!1,k=null,Promise.resolve()):V.playVideo(n).then(h.played))}function $(e){return e&&e.reason?e.reason:"unknown"}function G(e){if(Q()===a.nb){_=b(N);var t=S.get("advertising");(function(e,t){var n=t.cancelable,i=t.muted,o=void 0!==i&&i,a=t.allowMuted,r=void 0!==a&&a,s=t.timeout,l=void 0===s?1e4:s,c=e.getTestElement(),u=o?"muted":"".concat(r);It[u]||(It[u]=At(c,{muted:o}).catch((function(e){if(!n.cancelled()&&!1===o&&r)return At(c,{muted:o=!0});throw e})).then((function(){return o?(It[u]=null,zt):Pt})).catch((function(e){throw clearTimeout(d),It[u]=null,e.reason=Lt,e})));var d,p=It[u].then((function(e){if(clearTimeout(d),n.cancelled()){var t=new Error("Autoplay test was cancelled");throw t.reason="cancelled",t}return e})),w=new Promise((function(e,t){d=setTimeout((function(){It[u]=null;var e=new Error("Autoplay test timed out");e.reason="timeout",t(e)}),l)}));return Promise.race([p,w])})(h,{cancelable:_,muted:C.getMute(),allowMuted:!t||t.autoplayadsmuted}).then((function(t){return S.set("canAutoplay",t),t!==zt||C.getMute()||(S.set("autostartMuted",!0),ce(),S.once("change:autostartMuted",(function(e){e.off("change:viewable",W),C.trigger(a.M,{mute:S.getMute()})}))),C.getMute()&&S.get("enableDefaultCaptions")&&v.selectDefaultIndex(1),J({reason:e}).catch((function(){C._instreamAdapter||S.set("autostartFailed",!0),k=null}))})).catch((function(e){if(S.set("canAutoplay",Lt),S.set("autostart",!1),!_.cancelled()){var t=Object(m.B)(e);C.trigger(a.h,{reason:e.reason,code:t,error:e})}}))}}function ee(e){if(_.cancel(),ue.empty(),Y()){var t=C._instreamAdapter;return t&&(t.noResume=!0),void(k=function(){return V.stopVideo()})}k=null,!e&&(T=!0),M&&(x=!0),S.set("errorEvent",void 0),V.stopVideo()}function te(e){var t=$(e);S.set("pauseReason",t),S.set("playOnViewable","viewable"===t)}function ne(e){k=null,_.cancel();var n=Y();if(n&&n!==a.pb)return te(e),void t.pauseAd(!0,e);switch(S.get("state")){case a.mb:return;case a.qb:case a.kb:te(e),V.pause();break;default:M&&(x=!0)}}function ie(e,t){ee(!0),C.setItemIndex(e),C.play(t)}function oe(e){ie(S.get("item")+1,e)}function ae(){C.completeCancelled()||(k=C.completeHandler,C.shouldAutoAdvance()?C.nextItem():S.get("repeat")?oe({reason:"repeat"}):(y.OS.iOS&&le(!1),S.set("playOnViewable",!1),S.set("state",a.lb),C.trigger(a.cb,{})))}function re(e,t){e=parseInt(e,10)||0,S.persistVideoSubtitleTrack(e,t),V.subtitles=e,C.trigger(a.k,{tracks:se(),track:e})}function se(){return v.getCaptionsList()}function le(e){Object(r.s)(e)||(e=!S.get("fullscreen")),S.set("fullscreen",e),C._instreamAdapter&&C._instreamAdapter._adModel&&C._instreamAdapter._adModel.set("fullscreen",e)}function ce(){V.mute=S.getMute(),V.volume=S.get("volume")}S.on("change:playReason change:pauseReason",H),C.on(a.c,(function(e){return H(0,e.playReason)})),C.on(a.b,(function(e){return H(0,e.pauseReason)})),S.on("change:scrubbing",(function(e,t){t?(E=S.get("state")!==a.pb,ne()):E&&J({reason:"interaction"})})),S.on("change:captionsList",(function(e,t){C.trigger(a.l,{tracks:t,track:S.get("captionsIndex")||0})})),S.on("change:mediaModel",(function(e,t){var n=this;e.set("errorEvent",void 0),t.change("mediaState",(function(t,n){var i;e.get("errorEvent")||e.set(a.bb,(i=n)===a.ob||i===a.rb?a.kb:i)}),this),t.change("duration",(function(t,n){if(0!==n){var i=e.get("minDvrWindow"),o=Object(Rt.b)(n,i);e.setStreamType(o)}}),this);var i=e.get("item")+1,o="autoplay"===(e.get("related")||{}).oncomplete,r=e.get("playlist")[i];if((r||o)&&L){t.on("change:position",(function e(i,a){var s=r&&!r.daiSetting,l=t.get("duration");s&&a&&l>0&&a>=l-f.b?(t.off("change:position",e,n),V.backgroundLoad(r)):o&&(r=S.get("nextUp"))}),this)}})),(v=new he(S)).on("all",z,C),R.on("viewSetup",(function(e){Object(l.b)(O,e)})),this.playerReady=function(){g.once(a.ib,(function(){try{!function(){S.change("visibility",B),P.off(),C.trigger(a.hb,{setupTime:0}),S.change("playlist",(function(e,t){if(t.length){var n={playlist:t},i=S.get("feedData");i&&(n.feedData=Object(r.k)({},i)),C.trigger(a.eb,n)}})),S.change("playlistItem",(function(e,t){if(t){var n=t.title,i=t.image;if("mediaSession"in navigator&&window.MediaMetadata&&(n||i))try{navigator.mediaSession.metadata=new window.MediaMetadata({title:n,artist:window.location.hostname,artwork:[{src:i||""}]})}catch(e){}e.set("cues",[]),C.trigger(a.db,{index:S.get("item"),item:t})}})),P.flush(),P.destroy(),P=null,S.change("viewable",q),S.change("viewable",W),S.get("autoPause").viewability?S.change("viewable",Z):S.once("change:autostartFailed change:mute",(function(e){e.off("change:viewable",W)}));N(),S.on("change:itemReady",(function(e,t){t&&ue.flush()}))}()}catch(e){C.triggerError(Object(m.A)(m.r,m.a,e))}})),g.init()},this.preload=F,this.load=function(e,t){var n,i=C._instreamAdapter;switch(i&&(i.noResume=!0),C.trigger("destroyPlugin",{}),ee(!0),_.cancel(),_=b(N),A.cancel(),Object(Vt.a)()&&h.prime(),Ut(e)){case"string":S.attributes.item=0,S.attributes.itemReady=!1,A=b((function(e){if(e)return C.updatePlaylist(Object(p.a)(e.playlist),e)})),n=function(e){var t=this;return new Promise((function(n,i){var o=new d.a;o.on(a.eb,(function(e){n(e)})),o.on(a.w,i,t),o.load(e)}))}(e).then(A.async);break;case"object":S.attributes.item=0,n=C.updatePlaylist(Object(p.a)(e),t||{});break;case"number":n=C.setItemIndex(e);break;default:return}n.catch((function(e){C.triggerError(Object(m.z)(e,m.c))})),n.then(_.async).catch(Zt)},this.play=function(e){return J(e).catch(Zt)},this.pause=ne,this.seek=function(e,t){var n=S.get("state");if(n!==a.mb){V.position=e;var i=n===a.nb;S.get("scrubbing")||!i&&n!==a.lb||(i&&((t=t||{}).startTime=e),this.play(t))}},this.stop=ee,this.playlistItem=ie,this.playlistNext=oe,this.playlistPrev=function(e){ie(S.get("item")-1,e)},this.setCurrentCaptions=re,this.setCurrentQuality=function(e){V.quality=e},this.setFullscreen=le,this.getCurrentQuality=function(){return V.quality},this.getQualityLevels=function(){return V.qualities},this.setCurrentAudioTrack=function(e){V.audioTrack=e},this.getCurrentAudioTrack=function(){return V.audioTrack},this.getAudioTracks=function(){return V.audioTracks},this.getCurrentCaptions=function(){return v.getCurrentIndex()},this.getCaptionsList=se,this.getVisualQuality=function(){var e=this._model.get("mediaModel");return e?e.get(a.U):null},this.getConfig=function(){return this._model?this._model.getConfiguration():void 0},this.getState=Q,this.next=Zt,this.completeHandler=ae,this.completeCancelled=function(){return(e=S.get("state"))!==a.nb&&e!==a.lb&&e!==a.mb||!!T&&(T=!1,!0);var e},this.shouldAutoAdvance=function(){return S.get("item")!==S.get("playlist").length-1},this.nextItem=function(){oe({reason:"playlist"})},this.setConfig=function(e){!function(e,t){var n=e._model,i=n.attributes;t.height&&(t.height=Object(c.b)(t.height),t.width=t.width||i.width),t.width&&(t.width=Object(c.b)(t.width),t.aspectratio?(i.width=t.width,delete t.width):t.height=i.height),t.width&&t.height&&!t.aspectratio&&e._view.resize(t.width,t.height),Object.keys(t).forEach((function(o){var a=t[o];if(void 0!==a)switch(o){case"aspectratio":n.set(o,Object(c.a)(a,i.width));break;case"autostart":!function(e,t,n){e.setAutoStart(n),"idle"===e.get("state")&&!0===n&&t.play({reason:"autostart"})}(n,e,a);break;case"mute":e.setMute(a);break;case"volume":e.setVolume(a);break;case"playbackRateControls":case"playbackRates":case"repeat":case"stretching":n.set(o,a)}}))}(C,e)},this.setItemIndex=function(e){V.stopVideo();var t=S.get("playlist").length;return(e=(parseInt(e,10)||0)%t)<0&&(e+=t),V.setActiveItem(e).catch((function(e){e.code>=151&&e.code<=162&&(e=Object(m.z)(e,m.e)),O.triggerError(Object(m.A)(m.o,m.d,e))}))},this.detachMedia=function(){if(M&&(x=!0),S.get("autoPause").viewability&&Z(S,S.get("viewable")),!L)return V.setAttached(!1);V.backgroundActiveMedia()},this.attachMedia=function(){L?V.restoreBackgroundMedia():V.setAttached(!0),"function"==typeof k&&k()},this.routeEvents=function(e){return V.routeEvents(e)},this.forwardEvents=function(){return V.forwardEvents()},this.playVideo=function(e){return V.playVideo(e)},this.stopVideo=function(){return V.stopVideo()},this.castVideo=function(e,t){return V.castVideo(e,t)},this.stopCast=function(){return V.stopCast()},this.backgroundActiveMedia=function(){return V.backgroundActiveMedia()},this.restoreBackgroundMedia=function(){return V.restoreBackgroundMedia()},this.preloadNextItem=function(){V.background.currentMedia&&V.preloadVideo()},this.isBeforeComplete=function(){return V.beforeComplete},this.setVolume=function(e){S.setVolume(e),ce()},this.setMute=function(e){S.setMute(e),ce()},this.setPlaybackRate=function(e){S.setPlaybackRate(e)},this.getProvider=function(){return S.get("provider")},this.getWidth=function(){return S.get("containerWidth")},this.getHeight=function(){return S.get("containerHeight")},this.getItemQoe=function(){return S._qoeItem},this.addButton=function(e,t,n,i,o){var a=S.get("customButtons")||[],r=!1,s={img:e,tooltip:t,callback:n,id:i,btnClass:o};a=a.reduce((function(e,t){return t.id===i?(r=!0,e.push(s)):e.push(t),e}),[]),r||a.unshift(s),S.set("customButtons",a)},this.removeButton=function(e){var t=S.get("customButtons")||[];t=t.filter((function(t){return t.id!==e})),S.set("customButtons",t)},this.resize=g.resize,this.getSafeRegion=g.getSafeRegion,this.setCaptions=g.setCaptions,this.checkBeforePlay=function(){return M},this.setControls=function(e){Object(r.s)(e)||(e=!S.get("controls")),S.set("controls",e),V.controls=e},this.addCues=function(e){this.setCues(S.get("cues").concat(e))},this.setCues=function(e){S.set("cues",e)},this.updatePlaylist=function(e,t){try{var n=Object(p.b)(e,S,t);Object(p.e)(n);var i=Object(r.k)({},t);delete i.playlist,S.set("feedData",i),S.set("playlist",n)}catch(e){return Promise.reject(e)}return this.setItemIndex(S.get("item"))},this.setPlaylistItem=function(e,t){(t=Object(p.d)(S,new w.a(t),t.feedData||{}))&&(S.get("playlist")[e]=t,e===S.get("item")&&"idle"===S.get("state")&&this.setItemIndex(e))},this.playerDestroy=function(){this.off(),this.stop(),Object(l.b)(this,this.originalContainer),g&&g.destroy(),S&&S.destroy(),ue&&ue.destroy(),v&&v.destroy(),V&&V.destroy(),this.instreamDestroy()},this.isBeforePlay=this.checkBeforePlay,this.createInstream=function(){return this.instreamDestroy(),this._instreamAdapter=new de(this,S,g,h),this._instreamAdapter},this.instreamDestroy=function(){C._instreamAdapter&&(C._instreamAdapter.destroy(),C._instreamAdapter=null)};var ue=new u.a(this,["play","pause","setCurrentAudioTrack","setCurrentCaptions","setCurrentQuality","setFullscreen"],(function(){return!O._model.get("itemReady")||P}));ue.queue.push.apply(ue.queue,o),g.setup()},get:function(e){if(e in x.a){var t=this._model.get("mediaModel");return t?t.get(e):x.a[e]}return this._model.get(e)},getContainer:function(){return this.currentContainer||this.originalContainer},getMute:function(){return this._model.getMute()},triggerError:function(e){var t=this._model;e.message=t.get("localization").errors[e.key],delete e.key,t.set("errorEvent",e),t.set("state",a.mb),t.once("change:state",(function(){this.set("errorEvent",void 0)}),t),this.trigger(a.w,e)}});var Yt=Wt,Qt=function(e,t){var n=e._model,i=e._view,o=!1,s=t.height,l=t.width,c=e.getHeight;e.getHeight=function(){var e=n.get("aspectratio");return e?Math.round(n.get("containerWidth")*parseFloat(e)/100):s};var u=e.getWidth;e.getWidth=function(){return Object(r.w)(l)?l:u.call(this)},e.getSafeRegion=function(e){return i.getSafeRegion(e)},e.resize=function(e,t){return i.resize(e,t)};var d=i.resize;i.resize=function(e,t){return s=t,l=e,d.call(i,e,t)},n.setAutoStart("viewable"),e.setMute(!0),e.setItemIndex=function(){n.setActiveItem(0)},e.updatePlaylist=function(){return n.set("playlist",[{sources:[{}]}]),n.attributes.itemReady=!0,this.setItemIndex(0),Promise.resolve()};var p=e.createInstream;e.createInstream=function(){var t=p.call(this);return t.noResume=!0,o=!1,t.on("state",(function(t){var n=t.newstate;n!==a.ob&&n!==a.qb||(e.attachMedia=f,e.getHeight=c,e.getWidth=u,i.resize=d,o=!0)})),t};var w=e.attachMedia;e.attachMedia=e.playerDestroy;var f=function(){return o||n.set("repeat",!1),n.get("backgroundLoading")||this._programController.mediaPool.clean(),n.set("state",a.lb),this._programController.trigger(a.F,{}),w.call(this)};e._programController.playVideo=function(){return Promise.resolve()}},Xt="afs_ads";var Jt,Kt=function(e){var t,n=!1,i=((t=document.createElement("div")).className=Xt,t.innerHTML="&nbsp;",t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.background="transparent",t);return e.element().appendChild(i),{onReady:function(){if(n)return!0;(function(){document.body.contains(e.element())&&(null!==i.offsetParent&&i.className===Xt&&""!==i.innerHTML&&0!==i.clientHeight||(n=!0));return n})()&&this.trigger("adBlock")},getAdBlock:function(){return n}}},$t=n(86),Gt=n(27),en=n(117),tn=n(58),nn=n(19),on=301129;function an(e,t,i,r){if(function(e,t,n){var i=e.get("related"),o=t.getPlaylist(),a=!(!i||!i.file)||!!n.recommendations;return(o.length>1||a)&&(!1!==e.get("controls")||!i.disableRelated)}(e,t,r))return function(e,t){return n.e(17).then(function(i){if(!e.attributes._destroyed&&!t.getPlugin("related")){var o=new tn.a;return o.name="related",o.js=n(160).default,o}}.bind(null,n)).catch(Object(o.b)(on))}(e,t).then((function(n){var o=t.getPlugin("related");if(!o){var a=e.get("related");(o=Object(nn.a)(n,a,t)).on("nextUp",(function(t){var n=null;t===Object(t)&&((n=Object(w.a)(t)).sources=Object(p.c)(n,e),n.feedType=t.feedType),e.set("nextUp",n)})),o.on("warning",(function(e){i.trigger("warning",e)})),o.setup(e),o.addToPlayer()}})).catch((function(t){return t.message=t.message||e.get("localization").errors[t.key],delete t.key,i.trigger(a.ub,t),t}))}var rn=[],sn=!1,ln="__jw-ld-json";function cn(e,t){sn||(setTimeout((function(){rn.push(function(e,t){var n=Object(r.m)(e.sources,(function(e){return"video/mp4"===e.type}));n||(n=e.sources[0]);var i,o=e.pubdate?new Date(1e3*e.pubdate):null,a=t.getConfig(),s=e.mediaid&&a.pid?"https://cdn.jwplayer.com/players/".concat(e.mediaid,"-").concat(a.pid,".html"):null,l=t.get("duration");l&&(i="PT".concat(Math.floor(l/60),"M").concat(Math.round(l)%60,"S"));return{"@context":"https://schema.org","@type":"VideoObject",name:e.title,description:e.description,thumbnailUrl:e.image,uploadDate:o?o.toISOString():void 0,duration:i,contentUrl:n.file,embedUrl:s?'<iframe src="'.concat(s,'" frameborder="0" scrolling="auto" allowfullscreen></iframe>'):void 0}}(e,t))}),750),clearTimeout(Jt),Jt=setTimeout((function(){var e=document.createElement("script");e.setAttribute("type","application/ld+json"),e.setAttribute("id",ln),rn.length>1?e.innerText=JSON.stringify(rn):e.innerText=JSON.stringify(rn[0]),document.head.appendChild(e),sn=!0}),1e3))}var un=Yt.prototype.setup;Yt.prototype.setup=function(e,t){var r=this,s=un.apply(this,arguments),l=this._model,c=this._view,u=Kt(c),d=l.get("advertising");e.analytics&&(e.sdkplatform=e.sdkplatform||e.analytics.sdkplatform),l.once("change:visibility",(function(){u.onReady.call(r)})),this.next=function(e){e=e||{};var n=t.getPlugin("related");w.call(this,n,"nextClick",e.feedShownId,(function(){return n.next(e)}))};var p=this.nextItem;function w(e,t,n,i){if(e){var o=l.get("nextUp");o&&this.trigger(t,{mode:o.mode,ui:"nextup",feedShownId:n,target:o,itemsShown:[o],feedData:o.feedData}),"function"==typeof i&&i()}}this.nextItem=function(){var e=t.getPlugin("related");w.call(this,e,"nextAutoAdvance"),p.call(this)};var f=this.updatePlaylist;function h(){return l.get("cast")}function j(e){l.on("change:playlistItem",g,this);var n=d&&d.outstream;h()&&!n?(!(l.get("cast")||{}).customAppId&&Object(i.b)(l.get("playlist"))||v.apply(this),k.apply(this)):x();an(l,t,this,e.item),l.get("generateSEOMetadata")&&cn(e.item,this)}function g(e,n){u.onReady(),an(l,t,this,n)}this.updatePlaylist=function(e,n){var o=this,a=[];return!Object($t.a)(e)||t.getPlugin("vr")||l.get("mobileSdk")||a.push(Object($t.b)(t,l,this)),Object(i.b)(e)&&a.push(Object(i.d)(l.get("edition"))),Object(en.a)(e,"images","image"),a.length?(l.attributes.itemReady=!1,Promise.all(a).then((function(){return f.call(o,e,n)}))):f.call(this,e,n)},this.shouldAutoAdvance=function(){var e=l.get("related"),t=l.get("nextUp");return!(!t||"playlist"!==t.mode||!e.shouldAutoAdvance)},t.getAdBlock=u.getAdBlock,this.once(a.db,j,this);var b=function(e){r.trigger(a.ub,e)};function v(){var e=this;window.chrome&&y.Browser.chrome&&n.e(11).then(function(t){var i=new(0,n(162).default)(e,l);return e.castToggle=i.castToggle.bind(e._castController),e._castController=i,i.init()}.bind(null,n)).catch(Object(o.c)(301161)).catch(b)}function k(){var e=this;window.WebKitPlaybackTargetAvailabilityEvent&&!l.get("playlist").some((function(e){return!Object(Gt.b)(e.sources[0])}))?n.e(10).then(function(t){var i=n(158).default;e._airplayController=new i(e,l),e.castToggle=e._airplayController.airplayToggle.bind(e._airplayController)}.bind(null,n)).catch(Object(o.c)(301162)).catch(b):x()}function x(){var e=l.getVideo();e&&e.video&&(e.video.webkitWirelessVideoPlaybackDisabled=!0)}return l.on("change:flashBlocked",(function(e,t){var n;t?(!!e.get("flashThrottle")?n={message:"Click to run Flash"}:(n=new m.s(m.n,210002),this.trigger(a.w,n)),e.set("errorEvent",n)):e.set("errorEvent",void 0)}),this),d&&d.outstream&&Qt(this,e),s};t.default=Yt},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return K})),n.d(t,"b",(function(){return $}));var i=n(89),o=n.n(i),a=n(90),r=n.n(a),s=n(91),l=n.n(s),c=n(92),u=n.n(c),d=n(93),p=n.n(d),w=n(94),f=n.n(w),h=n(95),j=n.n(h),g=n(96),b=n.n(g),m=n(97),v=n.n(m),y=n(98),k=n.n(y),x=n(99),O=n.n(x),C=n(100),S=n.n(C),M=n(101),T=n.n(M),E=n(102),_=n.n(E),A=n(103),P=n.n(A),z=n(104),L=n.n(z),I=n(105),R=n.n(I),V=n(106),H=n.n(V),B=n(107),N=n.n(B),q=n(108),F=n.n(q),D=n(109),U=n.n(D),W=n(110),Z=n.n(W),Y=n(81),Q=n.n(Y),X=n(73),J=null;function K(e){var t=te().querySelector(G(e));return t?ee(t):null}function $(e){var t=te().querySelectorAll(e.split(",").map(G).join(","));return Array.prototype.map.call(t,(function(e){return ee(e)}))}function G(e){return".jw-svg-icon-".concat(e)}function ee(e){return e.cloneNode(!0)}function te(){return J||(J=Object(X.a)("<xml>"+o.a+r.a+l.a+u.a+p.a+f.a+j.a+b.a+v.a+k.a+O.a+S.a+T.a+_.a+P.a+L.a+R.a+H.a+N.a+F.a+U.a+Z.a+Q.a+"</xml>")),J}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(r=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(a).concat([o]).join("\n")}var r;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(o=0;o<e.length;o++){var r=e[o];null!=r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(2);function o(e){var t=[],n=(e=Object(i.i)(e)).split("\r\n\r\n");1===n.length&&(n=e.split("\n\n"));for(var o=0;o<n.length;o++)if("WEBVTT"!==n[o]){var r=a(n[o]);r.text&&t.push(r)}return t}function a(e){var t={},n=e.split("\r\n");1===n.length&&(n=e.split("\n"));var o=1;if(n[0].indexOf(" --\x3e ")>0&&(o=0),n.length>o+1&&n[o+1]){var a=n[o],r=a.indexOf(" --\x3e ");r>0&&(t.begin=Object(i.g)(a.substr(0,r)),t.end=Object(i.g)(a.substr(r+5)),t.text=n.slice(o+1).join("\r\n"))}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i,o=n(6);function a(e){return i||(i=new DOMParser),Object(o.r)(Object(o.s)(i.parseFromString(e,"image/svg+xml").documentElement))}},function(e,t,n){"use strict";function i(e){return new Promise((function(t,n){if(e.paused)return n(o("NotAllowedError",0,"play() failed."));var i=function(){e.removeEventListener("play",a),e.removeEventListener("playing",r),e.removeEventListener("pause",r),e.removeEventListener("abort",r),e.removeEventListener("error",r)},a=function(){e.addEventListener("playing",r),e.addEventListener("abort",r),e.addEventListener("error",r),e.addEventListener("pause",r)},r=function(e){if(i(),"playing"===e.type)t();else{var a='The play() request was interrupted by a "'.concat(e.type,'" event.');"error"===e.type?n(o("NotSupportedError",9,a)):n(o("AbortError",20,a))}};e.addEventListener("play",a)}))}function o(e,t,n){var i=new Error(n);return i.name=e,i.code=t,i}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var i=window.VTTCue;function o(e){if("string"!=typeof e)return!1;return!!{start:!0,middle:!0,end:!0,left:!0,right:!0}[e.toLowerCase()]&&e.toLowerCase()}if(!i){(i=function(e,t,n){var i=this;i.hasBeenReset=!1;var a="",r=!1,s=e,l=t,c=n,u=null,d="",p=!0,w="auto",f="start",h="auto",j=100,g="middle";Object.defineProperty(i,"id",{enumerable:!0,get:function(){return a},set:function(e){a=""+e}}),Object.defineProperty(i,"pauseOnExit",{enumerable:!0,get:function(){return r},set:function(e){r=!!e}}),Object.defineProperty(i,"startTime",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"endTime",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"text",{enumerable:!0,get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}}),Object.defineProperty(i,"region",{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"vertical",{enumerable:!0,get:function(){return d},set:function(e){var t=function(e){return"string"==typeof e&&(!!{"":!0,lr:!0,rl:!0}[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");d=t,this.hasBeenReset=!0}}),Object.defineProperty(i,"snapToLines",{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}}),Object.defineProperty(i,"line",{enumerable:!0,get:function(){return w},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");w=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"lineAlign",{enumerable:!0,get:function(){return f},set:function(e){var t=o(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}}),Object.defineProperty(i,"position",{enumerable:!0,get:function(){return h},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");h=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"size",{enumerable:!0,get:function(){return j},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");j=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"align",{enumerable:!0,get:function(){return g},set:function(e){var t=o(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}),i.displayState=void 0}).prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)}}t.a=i},function(e,t,n){"use strict";function i(e,t){var n=e.kind||"cc";return e.default||e.defaulttrack?"default":e._id||e.file||n+t}function o(e,t){var n=e.label||e.name||e.language;return n||(n="Unknown CC",(t+=1)>1&&(n+=" ["+t+"]")),{label:n,unknownCount:t}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var i=n(75),o=n(10),a=n(28),r=n(4),s=n(72),l=n(2),c=n(1);function u(e){throw new c.s(null,e)}function d(e,t,i){e.xhr=Object(a.a)(e.file,(function(a){!function(e,t,i,a){var d,p,f=e.responseXML?e.responseXML.firstChild:null;if(f)for("xml"===Object(r.b)(f)&&(f=f.nextSibling);f.nodeType===f.COMMENT_NODE;)f=f.nextSibling;try{if(f&&"tt"===Object(r.b)(f))d=function(e){e||u(306007);var t=[],n=e.getElementsByTagName("p"),i=30,o=e.getElementsByTagName("tt");if(o&&o[0]){var a=parseFloat(o[0].getAttribute("ttp:frameRate"));isNaN(a)||(i=a)}n||u(306005),n.length||(n=e.getElementsByTagName("tt:p")).length||(n=e.getElementsByTagName("tts:p"));for(var r=0;r<n.length;r++){for(var s=n[r],c=s.getElementsByTagName("br"),d=0;d<c.length;d++){var p=c[d];p.parentNode.replaceChild(e.createTextNode("\r\n"),p)}var w=s.innerHTML||s.textContent||s.text||"",f=Object(l.i)(w).replace(/>\s+</g,"><").replace(/(<\/?)tts?:/g,"$1").replace(/<br.*?\/>/g,"\r\n");if(f){var h=s.getAttribute("begin"),j=s.getAttribute("dur"),g=s.getAttribute("end"),b={begin:Object(l.g)(h,i),text:f};g?b.end=Object(l.g)(g,i):j&&(b.end=b.begin+Object(l.g)(j,i)),t.push(b)}}return t.length||u(306005),t}(e.responseXML),p=w(d),delete t.xhr,i(p);else{var h=e.responseText;h.indexOf("WEBVTT")>=0?n.e(18).then(function(e){return n(142).default}.bind(null,n)).catch(Object(o.c)(301131)).then((function(e){var n=new e(window);p=[],n.oncue=function(e){p.push(e)},n.onflush=function(){delete t.xhr,i(p)},n.parse(h)})).catch((function(e){delete t.xhr,a(Object(c.A)(null,c.b,e))})):(d=Object(s.a)(h),p=w(d),delete t.xhr,i(p))}}catch(e){delete t.xhr,a(Object(c.A)(null,c.b,e))}}(a,e,t,i)}),(function(e,t,n,o){i(Object(c.z)(o,c.b))}))}function p(e){e&&e.forEach((function(e){var t=e.xhr;t&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()),delete e.xhr}))}function w(e){return e.map((function(e){return new i.a(e.begin,e.end,e.text)}))}n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return w}))},function(e,t,n){"use strict";function i(e,t){return e!==1/0&&Math.abs(e)>=Math.max(a(t),0)}function o(e,t){var n="VOD";return e===1/0?n="LIVE":e<0&&(n=i(e,a(t))?"DVR":"LIVE"),n}function a(e){return void 0===e?120:Math.max(e,0)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n(6);function o(e){var t=-1;return e>=1280?t=7:e>=960?t=6:e>=800?t=5:e>=640?t=4:e>=540?t=3:e>=420?t=2:e>=320?t=1:e>=250&&(t=0),t}function a(e,t){var n="jw-breakpoint-"+t;Object(i.p)(e,/jw-breakpoint--?\d+/,n)}},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-jwplayer-logo" viewBox="0 0 992 1024" focusable="false"><path d="M144 518.4c0 6.4-6.4 6.4-6.4 0l-3.2-12.8c0 0-6.4-19.2-12.8-38.4 0-6.4-6.4-12.8-9.6-22.4-6.4-6.4-16-9.6-28.8-6.4-9.6 3.2-16 12.8-16 22.4s0 16 0 25.6c3.2 25.6 22.4 121.6 32 140.8 9.6 22.4 35.2 32 54.4 22.4 22.4-9.6 28.8-35.2 38.4-54.4 9.6-25.6 60.8-166.4 60.8-166.4 6.4-12.8 9.6-12.8 9.6 0 0 0 0 140.8-3.2 204.8 0 25.6 0 67.2 9.6 89.6 6.4 16 12.8 28.8 25.6 38.4s28.8 12.8 44.8 12.8c6.4 0 16-3.2 22.4-6.4 9.6-6.4 16-12.8 25.6-22.4 16-19.2 28.8-44.8 38.4-64 25.6-51.2 89.6-201.6 89.6-201.6 6.4-12.8 9.6-12.8 9.6 0 0 0-9.6 256-9.6 355.2 0 25.6 6.4 48 12.8 70.4 9.6 22.4 22.4 38.4 44.8 48s48 9.6 70.4-3.2c16-9.6 28.8-25.6 38.4-38.4 12.8-22.4 25.6-48 32-70.4 19.2-51.2 35.2-102.4 51.2-153.6s153.6-540.8 163.2-582.4c0-6.4 0-9.6 0-12.8 0-9.6-6.4-19.2-16-22.4-16-6.4-32 0-38.4 12.8-6.4 16-195.2 470.4-195.2 470.4-6.4 12.8-9.6 12.8-9.6 0 0 0 0-156.8 0-288 0-70.4-35.2-108.8-83.2-118.4-22.4-3.2-44.8 0-67.2 12.8s-35.2 32-48 54.4c-16 28.8-105.6 297.6-105.6 297.6-6.4 12.8-9.6 12.8-9.6 0 0 0-3.2-115.2-6.4-144-3.2-41.6-12.8-108.8-67.2-115.2-51.2-3.2-73.6 57.6-86.4 99.2-9.6 25.6-51.2 163.2-51.2 163.2v3.2z"></path></svg>'},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n(11),o=n(35),a=n(73);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s={};function l(e){if(!s[e]){var t=Object.keys(s);t.length>10&&delete s[t[0]];var n=Object(a.a)(e);s[e]=n}return s[e].cloneNode(!0)}var c=function(){function e(t,n,a,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var c,u=document.createElement("div");u.className="jw-icon jw-icon-inline jw-button-color jw-reset ".concat(s||""),u.setAttribute("button",r),u.setAttribute("role","button"),u.setAttribute("tabindex","0"),n&&u.setAttribute("aria-label",n),t&&"<svg"===t.substring(0,4)?c=l(t):((c=document.createElement("div")).className="jw-icon jw-button-image jw-button-color jw-reset",t&&Object(i.d)(c,{backgroundImage:"url(".concat(t,")")})),u.appendChild(c),new o.a(u).on("click tap enter",a,this),u.addEventListener("mousedown",(function(e){e.preventDefault()})),this.id=r,this.buttonElement=u}var t,n,a;return t=e,(n=[{key:"element",value:function(){return this.buttonElement}},{key:"toggle",value:function(e){e?this.show():this.hide()}},{key:"show",value:function(){this.buttonElement.style.display=""}},{key:"hide",value:function(){this.buttonElement.style.display="none"}}])&&r(t.prototype,n),a&&r(t,a),e}()},,function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-sharing" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M175,160c-6.9,0.2-13.6,2.6-19,7l-62-39c0.8-2.6,1.2-5.3,1-8c0.2-2.7-0.2-5.4-1-8l62-39c5.4,4.4,12.1,6.8,19,7c16.3,0.3,29.7-12.6,30-28.9c0-0.4,0-0.7,0-1.1c0-16.5-13.5-30-30-30s-30,13.5-30,30c-0.2,2.7,0.2,5.4,1,8L84,97c-5.4-4.4-12.1-6.8-19-7c-16.5,0-30,13.5-30,30s13.5,30,30,30c6.9-0.2,13.6-2.6,19-7l62,39c-0.8,2.6-1.2,5.3-1,8c0,16.5,13.5,30,30,30s30-13.5,30-30S191.6,160,175,160z"></path></svg>'},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n(10);function o(e){return window.WebGLRenderingContext&&e.some((function(e){return e.stereomode&&e.stereomode.length>0}))}function a(e,t,o){var a=function(e){o.trigger("warning",e)};return n.e(7).then(function(i){var o=new(0,n(88).default)(e,t);e.addPlugin("vr",o),o.on("error",a)}.bind(null,n)).catch(Object(i.c)(301132)).catch(a)}},,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-buffer" viewBox="0 0 240 240" focusable="false"><path d="M120,186.667a66.667,66.667,0,0,1,0-133.333V40a80,80,0,1,0,80,80H186.667A66.846,66.846,0,0,1,120,186.667Z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-replay" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M120,41.9v-20c0-5-4-8-8-4l-44,28a5.865,5.865,0,0,0-3.3,7.6A5.943,5.943,0,0,0,68,56.8l43,29c5,4,9,1,9-4v-20a60,60,0,1,1-60,60H40a80,80,0,1,0,80-79.9Z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-error" viewBox="0 0 36 36" style="width:100%;height:100%;" focusable="false"><path d="M34.6 20.2L10 33.2 27.6 16l7 3.7a.4.4 0 0 1 .2.5.4.4 0 0 1-.2.2zM33.3 0L21 12.2 9 6c-.2-.3-.6 0-.6.5V25L0 33.6 2.5 36 36 2.7z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-play" viewBox="0 0 240 240" focusable="false"><path d="M62.8,199.5c-1,0.8-2.4,0.6-3.3-0.4c-0.4-0.5-0.6-1.1-0.5-1.8V42.6c-0.2-1.3,0.7-2.4,1.9-2.6c0.7-0.1,1.3,0.1,1.9,0.4l154.7,77.7c2.1,1.1,2.1,2.8,0,3.8L62.8,199.5z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-pause" viewBox="0 0 240 240" focusable="false"><path d="M100,194.9c0.2,2.6-1.8,4.8-4.4,5c-0.2,0-0.4,0-0.6,0H65c-2.6,0.2-4.8-1.8-5-4.4c0-0.2,0-0.4,0-0.6V45c-0.2-2.6,1.8-4.8,4.4-5c0.2,0,0.4,0,0.6,0h30c2.6-0.2,4.8,1.8,5,4.4c0,0.2,0,0.4,0,0.6V194.9z M180,45.1c0.2-2.6-1.8-4.8-4.4-5c-0.2,0-0.4,0-0.6,0h-30c-2.6-0.2-4.8,1.8-5,4.4c0,0.2,0,0.4,0,0.6V195c-0.2,2.6,1.8,4.8,4.4,5c0.2,0,0.4,0,0.6,0h30c2.6,0.2,4.8-1.8,5-4.4c0-0.2,0-0.4,0-0.6V45.1z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-rewind" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M113.2,131.078a21.589,21.589,0,0,0-17.7-10.6,21.589,21.589,0,0,0-17.7,10.6,44.769,44.769,0,0,0,0,46.3,21.589,21.589,0,0,0,17.7,10.6,21.589,21.589,0,0,0,17.7-10.6,44.769,44.769,0,0,0,0-46.3Zm-17.7,47.2c-7.8,0-14.4-11-14.4-24.1s6.6-24.1,14.4-24.1,14.4,11,14.4,24.1S103.4,178.278,95.5,178.278Zm-43.4,9.7v-51l-4.8,4.8-6.8-6.8,13-13a4.8,4.8,0,0,1,8.2,3.4v62.7l-9.6-.1Zm162-130.2v125.3a4.867,4.867,0,0,1-4.8,4.8H146.6v-19.3h48.2v-96.4H79.1v19.3c0,5.3-3.6,7.2-8,4.3l-41.8-27.9a6.013,6.013,0,0,1-2.7-8,5.887,5.887,0,0,1,2.7-2.7l41.8-27.9c4.4-2.9,8-1,8,4.3v19.3H209.2A4.974,4.974,0,0,1,214.1,57.778Z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-next" viewBox="0 0 240 240" focusable="false"><path d="M165,60v53.3L59.2,42.8C56.9,41.3,55,42.3,55,45v150c0,2.7,1.9,3.8,4.2,2.2L165,126.6v53.3h20v-120L165,60L165,60z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-stop" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M190,185c0.2,2.6-1.8,4.8-4.4,5c-0.2,0-0.4,0-0.6,0H55c-2.6,0.2-4.8-1.8-5-4.4c0-0.2,0-0.4,0-0.6V55c-0.2-2.6,1.8-4.8,4.4-5c0.2,0,0.4,0,0.6,0h130c2.6-0.2,4.8,1.8,5,4.4c0,0.2,0,0.4,0,0.6V185z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-volume-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M116.4,42.8v154.5c0,2.8-1.7,3.6-3.8,1.7l-54.1-48.1H28.9c-2.8,0-5.2-2.3-5.2-5.2V94.2c0-2.8,2.3-5.2,5.2-5.2h29.6l54.1-48.1C114.6,39.1,116.4,39.9,116.4,42.8z M212.3,96.4l-14.6-14.6l-23.6,23.6l-23.6-23.6l-14.6,14.6l23.6,23.6l-23.6,23.6l14.6,14.6l23.6-23.6l23.6,23.6l14.6-14.6L188.7,120L212.3,96.4z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-volume-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M116.4,42.8v154.5c0,2.8-1.7,3.6-3.8,1.7l-54.1-48.1H28.9c-2.8,0-5.2-2.3-5.2-5.2V94.2c0-2.8,2.3-5.2,5.2-5.2h29.6l54.1-48.1C114.7,39.1,116.4,39.9,116.4,42.8z M178.2,120c0-22.7-18.5-41.2-41.2-41.2v20.6c11.4,0,20.6,9.2,20.6,20.6c0,11.4-9.2,20.6-20.6,20.6v20.6C159.8,161.2,178.2,142.7,178.2,120z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-volume-100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M116.5,42.8v154.4c0,2.8-1.7,3.6-3.8,1.7l-54.1-48H29c-2.8,0-5.2-2.3-5.2-5.2V94.3c0-2.8,2.3-5.2,5.2-5.2h29.6l54.1-48C114.8,39.2,116.5,39.9,116.5,42.8z"></path><path d="M136.2,160v-20c11.1,0,20-8.9,20-20s-8.9-20-20-20V80c22.1,0,40,17.9,40,40S158.3,160,136.2,160z"></path><path d="M216.2,120c0-44.2-35.8-80-80-80v20c33.1,0,60,26.9,60,60s-26.9,60-60,60v20C180.4,199.9,216.1,164.1,216.2,120z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-cc-on" viewBox="0 0 240 240" focusable="false"><path d="M215,40H25c-2.7,0-5,2.2-5,5v150c0,2.7,2.2,5,5,5h190c2.7,0,5-2.2,5-5V45C220,42.2,217.8,40,215,40z M108.1,137.7c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9c-2.4-3.7-6.5-5.9-10.9-5.9c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6C90.4,141.7,102,143.5,108.1,137.7z M152.9,137.7c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9c-2.4-3.7-6.5-5.9-10.9-5.9c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6C135.2,141.7,146.8,143.5,152.9,137.7z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-cc-off" viewBox="0 0 240 240" focusable="false"><path d="M99.4,97.8c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6c0,9.6,11.6,11.4,17.7,5.5c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9C107.9,100,103.8,97.8,99.4,97.8z M144.1,97.8c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6c0,9.6,11.6,11.4,17.7,5.5c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9C152.6,100,148.5,97.8,144.1,97.8L144.1,97.8z M200,60v120H40V60H200 M215,40H25c-2.7,0-5,2.2-5,5v150c0,2.7,2.2,5,5,5h190c2.7,0,5-2.2,5-5V45C220,42.2,217.8,40,215,40z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-airplay-on" viewBox="0 0 240 240" focusable="false"><path d="M229.9,40v130c0.2,2.6-1.8,4.8-4.4,5c-0.2,0-0.4,0-0.6,0h-44l-17-20h46V55H30v100h47l-17,20h-45c-2.6,0.2-4.8-1.8-5-4.4c0-0.2,0-0.4,0-0.6V40c-0.2-2.6,1.8-4.8,4.4-5c0.2,0,0.4,0,0.6,0h209.8c2.6-0.2,4.8,1.8,5,4.4C229.9,39.7,229.9,39.9,229.9,40z M104.9,122l15-18l15,18l11,13h44V75H50v60h44L104.9,122z M179.9,205l-60-70l-60,70H179.9z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-airplay-off" viewBox="0 0 240 240" focusable="false"><path d="M210,55v100h-50l20,20h45c2.6,0.2,4.8-1.8,5-4.4c0-0.2,0-0.4,0-0.6V40c0.2-2.6-1.8-4.8-4.4-5c-0.2,0-0.4,0-0.6,0H15c-2.6-0.2-4.8,1.8-5,4.4c0,0.2,0,0.4,0,0.6v130c-0.2,2.6,1.8,4.8,4.4,5c0.2,0,0.4,0,0.6,0h45l20-20H30V55H210 M60,205l60-70l60,70H60L60,205z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-playback-rate" viewBox="0 0 240 240" focusable="false"><path d="M158.83,48.83A71.17,71.17,0,1,0,230,120,71.163,71.163,0,0,0,158.83,48.83Zm45.293,77.632H152.34V74.708h12.952v38.83h38.83ZM35.878,74.708h38.83V87.66H35.878ZM10,113.538H61.755V126.49H10Zm25.878,38.83h38.83V165.32H35.878Z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-settings" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M204,145l-25-14c0.8-3.6,1.2-7.3,1-11c0.2-3.7-0.2-7.4-1-11l25-14c2.2-1.6,3.1-4.5,2-7l-16-26c-1.2-2.1-3.8-2.9-6-2l-25,14c-6-4.2-12.3-7.9-19-11V35c0.2-2.6-1.8-4.8-4.4-5c-0.2,0-0.4,0-0.6,0h-30c-2.6-0.2-4.8,1.8-5,4.4c0,0.2,0,0.4,0,0.6v28c-6.7,3.1-13,6.7-19,11L56,60c-2.2-0.9-4.8-0.1-6,2L35,88c-1.6,2.2-1.3,5.3,0.9,6.9c0,0,0.1,0,0.1,0.1l25,14c-0.8,3.6-1.2,7.3-1,11c-0.2,3.7,0.2,7.4,1,11l-25,14c-2.2,1.6-3.1,4.5-2,7l16,26c1.2,2.1,3.8,2.9,6,2l25-14c5.7,4.6,12.2,8.3,19,11v28c-0.2,2.6,1.8,4.8,4.4,5c0.2,0,0.4,0,0.6,0h30c2.6,0.2,4.8-1.8,5-4.4c0-0.2,0-0.4,0-0.6v-28c7-2.3,13.5-6,19-11l25,14c2.5,1.3,5.6,0.4,7-2l15-26C206.7,149.4,206,146.7,204,145z M120,149.9c-16.5,0-30-13.4-30-30s13.4-30,30-30s30,13.4,30,30c0.3,16.3-12.6,29.7-28.9,30C120.7,149.9,120.4,149.9,120,149.9z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-audio-tracks" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M35,34h160v20H35V34z M35,94h160V74H35V94z M35,134h60v-20H35V134z M160,114c-23.4-1.3-43.6,16.5-45,40v50h20c5.2,0.3,9.7-3.6,10-8.9c0-0.4,0-0.7,0-1.1v-20c0.3-5.2-3.6-9.7-8.9-10c-0.4,0-0.7,0-1.1,0h-10v-10c1.5-17.9,17.1-31.3,35-30c17.9-1.3,33.6,12.1,35,30v10H185c-5.2-0.3-9.7,3.6-10,8.9c0,0.4,0,0.7,0,1.1v20c-0.3,5.2,3.6,9.7,8.9,10c0.4,0,0.7,0,1.1,0h20v-50C203.5,130.6,183.4,112.7,160,114z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-quality-100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" focusable="false"><path d="M55,200H35c-3,0-5-2-5-4c0,0,0,0,0-1v-30c0-3,2-5,4-5c0,0,0,0,1,0h20c3,0,5,2,5,4c0,0,0,0,0,1v30C60,198,58,200,55,200L55,200z M110,195v-70c0-3-2-5-4-5c0,0,0,0-1,0H85c-3,0-5,2-5,4c0,0,0,0,0,1v70c0,3,2,5,4,5c0,0,0,0,1,0h20C108,200,110,198,110,195L110,195z M160,195V85c0-3-2-5-4-5c0,0,0,0-1,0h-20c-3,0-5,2-5,4c0,0,0,0,0,1v110c0,3,2,5,4,5c0,0,0,0,1,0h20C158,200,160,198,160,195L160,195z M210,195V45c0-3-2-5-4-5c0,0,0,0-1,0h-20c-3,0-5,2-5,4c0,0,0,0,0,1v150c0,3,2,5,4,5c0,0,0,0,1,0h20C208,200,210,198,210,195L210,195z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-fullscreen-off" viewBox="0 0 240 240" focusable="false"><path d="M109.2,134.9l-8.4,50.1c-0.4,2.7-2.4,3.3-4.4,1.4L82,172l-27.9,27.9l-14.2-14.2l27.9-27.9l-14.4-14.4c-1.9-1.9-1.3-3.9,1.4-4.4l50.1-8.4c1.8-0.5,3.6,0.6,4.1,2.4C109.4,133.7,109.4,134.3,109.2,134.9L109.2,134.9z M172.1,82.1L200,54.2L185.8,40l-27.9,27.9l-14.4-14.4c-1.9-1.9-3.9-1.3-4.4,1.4l-8.4,50.1c-0.5,1.8,0.6,3.6,2.4,4.1c0.5,0.2,1.2,0.2,1.7,0l50.1-8.4c2.7-0.4,3.3-2.4,1.4-4.4L172.1,82.1z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-fullscreen-on" viewBox="0 0 240 240" focusable="false"><path d="M96.3,186.1c1.9,1.9,1.3,4-1.4,4.4l-50.6,8.4c-1.8,0.5-3.7-0.6-4.2-2.4c-0.2-0.6-0.2-1.2,0-1.7l8.4-50.6c0.4-2.7,2.4-3.4,4.4-1.4l14.5,14.5l28.2-28.2l14.3,14.3l-28.2,28.2L96.3,186.1z M195.8,39.1l-50.6,8.4c-2.7,0.4-3.4,2.4-1.4,4.4l14.5,14.5l-28.2,28.2l14.3,14.3l28.2-28.2l14.5,14.5c1.9,1.9,4,1.3,4.4-1.4l8.4-50.6c0.5-1.8-0.6-3.6-2.4-4.2C197,39,196.4,39,195.8,39.1L195.8,39.1z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-close" viewBox="0 0 240 240" focusable="false"><path d="M134.8,120l48.6-48.6c2-1.9,2.1-5.2,0.2-7.2c0,0-0.1-0.1-0.2-0.2l-7.4-7.4c-1.9-2-5.2-2.1-7.2-0.2c0,0-0.1,0.1-0.2,0.2L120,105.2L71.4,56.6c-1.9-2-5.2-2.1-7.2-0.2c0,0-0.1,0.1-0.2,0.2L56.6,64c-2,1.9-2.1,5.2-0.2,7.2c0,0,0.1,0.1,0.2,0.2l48.6,48.7l-48.6,48.6c-2,1.9-2.1,5.2-0.2,7.2c0,0,0.1,0.1,0.2,0.2l7.4,7.4c1.9,2,5.2,2.1,7.2,0.2c0,0,0.1-0.1,0.2-0.2l48.7-48.6l48.6,48.6c1.9,2,5.2,2.1,7.2,0.2c0,0,0.1-0.1,0.2-0.2l7.4-7.4c2-1.9,2.1-5.2,0.2-7.2c0,0-0.1-0.1-0.2-0.2L134.8,120z"></path></svg>'},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(6),o=n(5),a=n(49),r=n(60),s=n(74);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t,n,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hoverElement=n,this.item=i,this.model=o,this.onView=a,this.type=t,this.container=null,this.played=!1,this.seeking=!1,this.completed=!1,this.src=i.videoThumbnail,this.video=Object(r.a)({class:"jw-reset jw-video-thumbnail"}),this.video.muted=!0,this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.onEnded=this.onEnded.bind(this),this.onError=this.onError.bind(this)}var t,n,c;return t=e,(n=[{key:"adapt",value:function(){var e=this.video;switch(this.type){case"overlayItem":this.container=this.hoverElement.querySelector(".jw-related-item-poster"),this.container&&this.container.parentElement&&!this.hoverElement.className.match(/jw-related-item-next-up/)&&(this.hoverElement=this.container.parentElement);break;case"widgetItem":this.container=this.hoverElement.querySelector(".jw-related-shelf-item-image");break;case"shelfItem":break;case"posterItem":e.setAttribute("loop","")}this.container||(this.container=Object(i.e)('<div class="jw-video-thumbnail-generated"></div>'))}},{key:"onPlay",value:function(){var e=this.video;return Object(i.a)(this.video,"jw-video-thumbnail-visible"),e&&!e.src&&(e.src=this.src,e.load()),this.completed&&(e.currentTime=0,Object(i.o)(e,"jw-video-thumbnail-completed"),this.completed=!1),o.OS.iOS?Promise.resolve(this.seekPlay()):this.asyncPlay()}},{key:"onPause",value:function(){Object(i.o)(this.video,"jw-video-thumbnail-visible"),this.seeking=!1,this.video.pause()}},{key:"onEnded",value:function(){"posterItem"!==this.type&&Object(i.a)(this.video,"jw-video-thumbnail-completed"),this.completed=!0,this.seeking=!1}},{key:"onFirstFrame",value:function(){this.played=!0,"function"==typeof this.onView&&this.onView(this.item)}},{key:"onError",value:function(){this.destroy()}},{key:"onViewPoster",value:function(e,t){if(t)return this.onPlay();this.onPause()}},{key:"asyncPlay",value:function(){var e=this,t=this.video;return(t.play()||Object(s.a)(t)).then((function(){e.played||e.onFirstFrame()})).catch((function(t){if(20!==t.code)return 9!==t.code&&"Failed to load because no supported source was found."!==t.message?e.seekPlay():void e.destroy()}))}},{key:"seekPlay",value:function(){var e=this,t=this.video,n=t.hasAttribute("loop"),i=this.seek=function(o){if(e.seeking){if(!t.duration)return Object(a.b)(i);r||(r=o);var s=(o-r)/1e3;n?s%=t.duration:s=Math.min(s,t.duration),t.currentTime=s,t.duration>s||n?Object(a.b)(i):e.onEnded()}},o=this.handleSeek=function(){e.onFirstFrame(),e.video.removeEventListener("seeked",o)},r=0;this.played||this.video.addEventListener("seeked",o),this.seeking=!0,Object(a.b)(i)}},{key:"addEventListeners",value:function(){"posterItem"===this.type?(this.model.once("change:state",this.destroy,this),this.model.on("change:viewable",this.onViewPoster,this),this.model.get("viewable")&&this.onViewPoster()):(o.OS.mobile||(this.hoverElement.addEventListener("mouseenter",this.onPlay),this.hoverElement.addEventListener("mouseleave",this.onPause)),this.video.addEventListener("ended",this.onEnded)),this.video.addEventListener("error",this.onError)}},{key:"removeEventListeners",value:function(){"posterItem"===this.type?(this.model.off("change: state",this.destroy,this),this.model.off("change:viewable",this.onViewPoster,this)):(o.OS.mobile||(this.hoverElement.removeEventListener("mouseenter",this.onPlay),this.hoverElement.removeEventListener("mouseleave",this.onPause)),this.video.removeEventListener("ended",this.onEnded)),this.video.removeEventListener("error",this.onError),this.handleSeek&&this.video.removeEventListener("seeked",this.handleSeek)}},{key:"init",value:function(){this.adapt(this.hoverElement.className),this.addEventListeners(),Object(i.a)(this.container,"jw-video-thumbnail-container"),"widgetItem"===this.type?Object(i.m)(this.container,this.video):this.container.appendChild(this.video),this.container.parentElement&&"posterItem"!==this.type?"shelfItem"===this.type&&Object(i.m)(this.hoverElement,this.container):this.hoverElement.appendChild(this.container)}},{key:"isDestroyed",value:function(){return!this.video}},{key:"destroy",value:function(){this.isDestroyed()||(this.removeEventListeners(),this.seeking=!1,this.seek&&Object(a.a)(this.seek),this.onPause(),this.video.src="",this.video.load(),this.container.removeChild(this.video),this.video=null,this.container.className.match(/jw-video-thumbnail-generated/)?this.container.parentNode.removeChild(this.container):Object(i.o)(this.container,"jw-video-thumbnail-container"),this.container=null)}}])&&l(t.prototype,n),c&&l(t,c),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){if(e&&e.length){var t=e.filter((function(e){return e.type&&e.type.match(/video/)}));if(t&&t.length)return t}return!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i,o=n(53);function a(e,t,n){var a=function(){try{i=window.localStorage.jwplayerLocalId}catch(e){}return i=i||Object(o.b)(12)}();e.forEach((function(e){var i=e.variations;if(i&&i[t]){i.selected=i.selected||{};var o=function(e,t){for(var n=function(e){for(var t=1794770992,n=0,i=e.length;n<i;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(e)%2520,i=t.reduce((function(e,t){return e+t.weight}),0),o=0,a=0;a<t.length;a++){var r=t[a];if((o+=2520*r.weight/i)>n)return r}}(a,i[t]),r=o[n];r&&(e[n]=r,i.selected[t]=o)}}))}},function(e,t,n){var i=n(119);"string"==typeof i&&(i=[["all-players",i,""]]),n(41).style(i,"all-players"),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,'.jw-reset{text-align:left;direction:ltr}.jw-reset-text,.jw-reset{color:inherit;background-color:transparent;padding:0;margin:0;float:none;font-family:Arial,Helvetica,sans-serif;font-size:1em;line-height:1em;list-style:none;text-transform:none;vertical-align:baseline;border:0;font-variant:inherit;font-stretch:inherit;-webkit-tap-highlight-color:rgba(255,255,255,0)}body .jw-error,body .jwplayer.jw-state-error{height:100%;width:100%}.jw-title{position:absolute;top:0}.jw-background-color{background:rgba(0,0,0,0.4)}.jw-text{color:rgba(255,255,255,0.8)}.jw-knob{color:rgba(255,255,255,0.8);background-color:#fff}.jw-button-color{color:rgba(255,255,255,0.8)}:not(.jw-flag-touch) .jw-button-color:not(.jw-logo-button):focus,:not(.jw-flag-touch) .jw-button-color:not(.jw-logo-button):hover{color:#fff}.jw-toggle{color:#fff}.jw-toggle.jw-off{color:rgba(255,255,255,0.8)}.jw-toggle.jw-off:focus{color:#fff}.jw-toggle:focus{outline:none}:not(.jw-flag-touch) .jw-toggle.jw-off:hover{color:#fff}.jw-rail{background:rgba(255,255,255,0.3)}.jw-buffer{background:rgba(255,255,255,0.3)}.jw-progress{background:#f2f2f2}.jw-time-tip,.jw-volume-tip{border:0}.jw-slider-volume.jw-volume-tip.jw-background-color.jw-slider-vertical{background:none}.jw-skip{padding:.5em;outline:none}.jw-skip .jw-skiptext,.jw-skip .jw-skip-icon{color:rgba(255,255,255,0.8)}.jw-skip.jw-skippable:hover .jw-skip-icon,.jw-skip.jw-skippable:focus .jw-skip-icon{color:#fff}.jw-icon-cast google-cast-launcher{--connected-color:#fff;--disconnected-color:rgba(255,255,255,0.8)}.jw-icon-cast google-cast-launcher:focus{outline:none}.jw-icon-cast google-cast-launcher.jw-off{--connected-color:rgba(255,255,255,0.8)}.jw-icon-cast:focus google-cast-launcher{--connected-color:#fff;--disconnected-color:#fff}.jw-icon-cast:hover google-cast-launcher{--connected-color:#fff;--disconnected-color:#fff}.jw-nextup-container{bottom:2.5em;padding:5px .5em}.jw-nextup{border-radius:0}.jw-color-active{color:#fff;stroke:#fff;border-color:#fff}:not(.jw-flag-touch) .jw-color-active-hover:hover,:not(.jw-flag-touch) .jw-color-active-hover:focus{color:#fff;stroke:#fff;border-color:#fff}.jw-color-inactive{color:rgba(255,255,255,0.8);stroke:rgba(255,255,255,0.8);border-color:rgba(255,255,255,0.8)}:not(.jw-flag-touch) .jw-color-inactive-hover:hover{color:rgba(255,255,255,0.8);stroke:rgba(255,255,255,0.8);border-color:rgba(255,255,255,0.8)}.jw-option{color:rgba(255,255,255,0.8)}.jw-option.jw-active-option{color:#fff;background-color:rgba(255,255,255,0.1)}:not(.jw-flag-touch) .jw-option:hover{color:#fff}.jwplayer{width:100%;font-size:16px;position:relative;display:block;min-height:0;overflow:hidden;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none}.jwplayer *{box-sizing:inherit}.jwplayer.jw-tab-focus:focus{outline:solid 2px #4d90fe}.jwplayer.jw-flag-aspect-mode{height:auto !important}.jwplayer.jw-flag-aspect-mode .jw-aspect{display:block}.jwplayer .jw-aspect{display:none}.jwplayer .jw-swf{outline:none}.jw-media,.jw-preview{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jw-media{overflow:hidden;cursor:pointer}.jw-plugin{position:absolute;bottom:66px}.jw-breakpoint-7 .jw-plugin{bottom:132px}.jw-plugin .jw-banner{max-width:100%;opacity:0;cursor:pointer;position:absolute;margin:auto auto 0;left:0;right:0;bottom:0;display:block}.jw-preview,.jw-captions,.jw-title{pointer-events:none}.jw-media,.jw-logo{pointer-events:all}.jw-wrapper{background-color:#000;position:absolute;top:0;left:0;right:0;bottom:0}.jw-hidden-accessibility{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.jw-contract-trigger::before{content:"";overflow:hidden;width:200%;height:200%;display:block;position:absolute;top:0;left:0}.jwplayer .jw-media video{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;margin:auto;background:transparent}.jwplayer .jw-media video::-webkit-media-controls-start-playback-button{display:none}.jwplayer.jw-stretch-uniform .jw-media video{object-fit:contain}.jwplayer.jw-stretch-none .jw-media video{object-fit:none}.jwplayer.jw-stretch-fill .jw-media video{object-fit:cover}.jwplayer.jw-stretch-exactfit .jw-media video{object-fit:fill}.jw-preview{position:absolute;display:none;opacity:1;visibility:visible;width:100%;height:100%;background:#000 no-repeat 50% 50%}.jwplayer .jw-preview,.jw-error .jw-preview{background-size:contain}.jw-stretch-none .jw-preview{background-size:auto auto}.jw-stretch-fill .jw-preview{background-size:cover}.jw-stretch-exactfit .jw-preview{background-size:100% 100%}.jw-title{display:none;padding-top:20px;width:100%;z-index:1}.jw-title-primary,.jw-title-secondary{color:#fff;padding-left:20px;padding-right:20px;padding-bottom:.5em;overflow:hidden;text-overflow:ellipsis;direction:unset;white-space:nowrap;width:100%}.jw-title-primary{font-size:1.625em}.jw-breakpoint-2 .jw-title-primary,.jw-breakpoint-3 .jw-title-primary{font-size:1.5em}.jw-flag-small-player .jw-title-primary{font-size:1.25em}.jw-flag-small-player .jw-title-secondary,.jw-title-secondary:empty{display:none}.jw-captions{position:absolute;width:100%;height:100%;text-align:center;display:none;letter-spacing:normal;word-spacing:normal;text-transform:none;text-indent:0;text-decoration:none;pointer-events:none;overflow:hidden;top:0}.jw-captions.jw-captions-enabled{display:block}.jw-captions-window{display:none;padding:.25em;border-radius:.25em}.jw-captions-window.jw-captions-window-active{display:inline-block}.jw-captions-text{display:inline-block;color:#fff;background-color:#000;word-wrap:normal;word-break:normal;white-space:pre-line;font-style:normal;font-weight:normal;text-align:center;text-decoration:none}.jw-text-track-display{font-size:inherit;line-height:1.5}.jw-text-track-cue{background-color:rgba(0,0,0,0.5);color:#fff;padding:.1em .3em}.jwplayer video::-webkit-media-controls{display:none;justify-content:flex-start}.jwplayer video::-webkit-media-text-track-display{min-width:-webkit-min-content}.jwplayer video::cue{background-color:rgba(0,0,0,0.5)}.jwplayer video::-webkit-media-controls-panel-container{display:none}.jwplayer:not(.jw-flag-controls-hidden):not(.jw-state-playing) .jw-captions,.jwplayer.jw-flag-media-audio.jw-state-playing .jw-captions,.jwplayer.jw-state-playing:not(.jw-flag-user-inactive):not(.jw-flag-controls-hidden) .jw-captions{max-height:calc(100% - 60px)}.jwplayer:not(.jw-flag-controls-hidden):not(.jw-state-playing):not(.jw-flag-ios-fullscreen) video::-webkit-media-text-track-container,.jwplayer.jw-flag-media-audio.jw-state-playing:not(.jw-flag-ios-fullscreen) video::-webkit-media-text-track-container,.jwplayer.jw-state-playing:not(.jw-flag-user-inactive):not(.jw-flag-controls-hidden):not(.jw-flag-ios-fullscreen) video::-webkit-media-text-track-container{max-height:calc(100% - 60px)}.jw-logo{position:absolute;margin:20px;cursor:pointer;pointer-events:all;background-repeat:no-repeat;background-size:contain;top:auto;right:auto;left:auto;bottom:auto;outline:none}.jw-logo.jw-tab-focus:focus{outline:solid 2px #4d90fe}.jw-flag-audio-player .jw-logo{display:none}.jw-logo-top-right{top:0;right:0}.jw-logo-top-left{top:0;left:0}.jw-logo-bottom-left{left:0}.jw-logo-bottom-right{right:0}.jw-logo-bottom-left,.jw-logo-bottom-right{bottom:44px;transition:bottom 150ms cubic-bezier(0, .25, .25, 1)}.jw-state-idle .jw-logo{z-index:1}.jw-state-setup .jw-wrapper{background-color:inherit}.jw-state-setup .jw-logo,.jw-state-setup .jw-controls,.jw-state-setup .jw-controls-backdrop{visibility:hidden}span.jw-break{display:block}body .jw-error,body .jwplayer.jw-state-error{background-color:#333;color:#fff;font-size:16px;display:table;opacity:1;position:relative}body .jw-error .jw-display,body .jwplayer.jw-state-error .jw-display{display:none}body .jw-error .jw-media,body .jwplayer.jw-state-error .jw-media{cursor:default}body .jw-error .jw-preview,body .jwplayer.jw-state-error .jw-preview{background-color:#333}body .jw-error .jw-error-msg,body .jwplayer.jw-state-error .jw-error-msg{background-color:#000;border-radius:2px;display:flex;flex-direction:row;align-items:stretch;padding:20px}body .jw-error .jw-error-msg .jw-icon,body .jwplayer.jw-state-error .jw-error-msg .jw-icon{height:30px;width:30px;margin-right:20px;flex:0 0 auto;align-self:center}body .jw-error .jw-error-msg .jw-icon:empty,body .jwplayer.jw-state-error .jw-error-msg .jw-icon:empty{display:none}body .jw-error .jw-error-msg .jw-info-container,body .jwplayer.jw-state-error .jw-error-msg .jw-info-container{margin:0;padding:0}body .jw-error:not(.jw-flag-audio-player).jw-flag-small-player .jw-error-msg,body .jwplayer.jw-state-error:not(.jw-flag-audio-player).jw-flag-small-player .jw-error-msg,body .jw-error:not(.jw-flag-audio-player).jw-breakpoint-2 .jw-error-msg,body .jwplayer.jw-state-error:not(.jw-flag-audio-player).jw-breakpoint-2 .jw-error-msg{flex-direction:column}body .jw-error:not(.jw-flag-audio-player).jw-flag-small-player .jw-error-msg .jw-error-text,body .jwplayer.jw-state-error:not(.jw-flag-audio-player).jw-flag-small-player .jw-error-msg .jw-error-text,body .jw-error:not(.jw-flag-audio-player).jw-breakpoint-2 .jw-error-msg .jw-error-text,body .jwplayer.jw-state-error:not(.jw-flag-audio-player).jw-breakpoint-2 .jw-error-msg .jw-error-text{text-align:center}body .jw-error:not(.jw-flag-audio-player).jw-flag-small-player .jw-error-msg .jw-icon,body .jwplayer.jw-state-error:not(.jw-flag-audio-player).jw-flag-small-player .jw-error-msg .jw-icon,body .jw-error:not(.jw-flag-audio-player).jw-breakpoint-2 .jw-error-msg .jw-icon,body .jwplayer.jw-state-error:not(.jw-flag-audio-player).jw-breakpoint-2 .jw-error-msg .jw-icon{flex:.5 0 auto;margin-right:0;margin-bottom:20px}.jwplayer.jw-state-error.jw-flag-audio-player .jw-error-msg .jw-break,.jwplayer.jw-state-error.jw-flag-small-player .jw-error-msg .jw-break,.jwplayer.jw-state-error.jw-breakpoint-2 .jw-error-msg .jw-break{display:inline}.jwplayer.jw-state-error.jw-flag-audio-player .jw-error-msg .jw-break:before,.jwplayer.jw-state-error.jw-flag-small-player .jw-error-msg .jw-break:before,.jwplayer.jw-state-error.jw-breakpoint-2 .jw-error-msg .jw-break:before{content:" "}.jwplayer.jw-state-error.jw-flag-audio-player .jw-error-msg{height:100%;width:100%;top:0;position:absolute;left:0;background:#000;-webkit-transform:none;transform:none;padding:4px 16px;z-index:1}.jwplayer.jw-state-error.jw-flag-audio-player .jw-error-msg.jw-info-overlay{max-width:none;max-height:none}body .jwplayer.jw-state-error .jw-title,.jw-state-idle .jw-title,.jwplayer.jw-state-complete:not(.jw-flag-casting):not(.jw-flag-audio-player):not(.jw-flag-overlay-open-related) .jw-title{display:block}body .jwplayer.jw-state-error .jw-preview,.jw-state-idle .jw-preview,.jwplayer.jw-state-complete:not(.jw-flag-casting):not(.jw-flag-audio-player):not(.jw-flag-overlay-open-related) .jw-preview{display:block}.jw-state-idle .jw-captions,.jwplayer.jw-state-complete .jw-captions,body .jwplayer.jw-state-error .jw-captions{display:none}.jw-state-idle video::-webkit-media-text-track-container,.jwplayer.jw-state-complete video::-webkit-media-text-track-container,body .jwplayer.jw-state-error video::-webkit-media-text-track-container{display:none}.jwplayer.jw-flag-fullscreen{width:100% !important;height:100% !important;top:0;right:0;bottom:0;left:0;z-index:1000;margin:0;position:fixed}body .jwplayer.jw-flag-flash-blocked .jw-title{display:block}.jwplayer.jw-flag-controls-hidden .jw-media{cursor:default}.jw-flag-audio-player:not(.jw-flag-flash-blocked) .jw-media{visibility:hidden}.jw-flag-audio-player .jw-title{background:none}.jw-flag-audio-player object{min-height:45px}.jw-flag-floating{background-size:cover;background-color:#000}.jw-flag-floating .jw-wrapper{position:fixed;z-index:2147483647;-webkit-animation:jw-float-to-bottom 150ms cubic-bezier(0, .25, .25, 1) forwards 1;animation:jw-float-to-bottom 150ms cubic-bezier(0, .25, .25, 1) forwards 1;top:auto;bottom:1rem;left:auto;right:1rem;max-width:400px;max-height:400px;margin:0 auto}@media screen and (max-width:480px){.jw-flag-floating .jw-wrapper{width:100%;left:0;right:0}}.jw-flag-floating .jw-wrapper .jw-media{touch-action:none}@media screen and (max-device-width:480px) and (orientation:portrait){.jw-flag-touch.jw-flag-floating .jw-wrapper{-webkit-animation:none;animation:none;top:62px;bottom:auto;left:0;right:0;max-width:none;max-height:none}}.jw-flag-floating .jw-float-icon{pointer-events:all;cursor:pointer;display:none}.jw-flag-floating .jw-float-icon .jw-svg-icon{-webkit-filter:drop-shadow(0 0 1px #000);filter:drop-shadow(0 0 1px #000)}.jw-flag-floating.jw-floating-dismissible .jw-dismiss-icon{display:none}.jw-flag-floating.jw-floating-dismissible.jw-flag-ads .jw-float-icon{display:flex}.jw-flag-floating.jw-floating-dismissible.jw-state-paused .jw-logo,.jw-flag-floating.jw-floating-dismissible:not(.jw-flag-user-inactive) .jw-logo{display:none}.jw-flag-floating.jw-floating-dismissible.jw-state-paused .jw-float-icon,.jw-flag-floating.jw-floating-dismissible:not(.jw-flag-user-inactive) .jw-float-icon{display:flex}.jw-float-icon{display:none;position:absolute;top:3px;right:5px;align-items:center;justify-content:center}@-webkit-keyframes jw-float-to-bottom{from{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes jw-float-to-bottom{from{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.jw-flag-top{margin-top:2em;overflow:visible}.jw-top{height:2em;line-height:2;pointer-events:none;text-align:center;opacity:.8;position:absolute;top:-2em;width:100%}.jw-top .jw-icon{cursor:pointer;pointer-events:all;height:auto;width:auto}.jw-top .jw-text{color:#555}',""])},function(e,t,n){var i=n(121);"string"==typeof i&&(i=[["all-players",i,""]]),n(41).style(i,"all-players"),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".jw-flag-outstream.jw-state-complete .jw-controls,.jw-flag-outstream.jw-state-complete .jw-controls-backdrop{display:none}.jw-flag-outstream.jw-state-complete .jw-media{pointer-events:none}.jw-flag-outstream.jw-state-complete .jw-preview{background-color:#f2f2f2}.jw-flag-outstream .jw-wrapper{transition:-webkit-transform 250ms cubic-bezier(0, .25, .25, 1);transition:transform 250ms cubic-bezier(0, .25, .25, 1);transition:transform 250ms cubic-bezier(0, .25, .25, 1), -webkit-transform 250ms cubic-bezier(0, .25, .25, 1)}.jw-flag-outstream .jw-dismiss-icon{position:absolute;right:0;bottom:0}.jw-flag-outstream-close{max-height:1px;-webkit-animation:250ms jw-outstream-collapse 1 step-end;animation:250ms jw-outstream-collapse 1 step-end}@-webkit-keyframes jw-outstream-collapse{0%{max-height:initial}100%{max-height:1px}}@keyframes jw-outstream-collapse{0%{max-height:initial}100%{max-height:1px}}.jw-flag-outstream-close .jw-wrapper{-webkit-transform:scaleY(0);transform:scaleY(0)}.jw-flag-outstream-pending{max-height:1px;max-width:100%}.jw-flag-outstream-pending.jw-flag-top{margin-top:0;overflow:hidden}.jw-flag-outstream-pending .jw-wrapper{-webkit-transform:scaleY(0);transform:scaleY(0)}",""])},function(e,t,n){var i=n(123);"string"==typeof i&&(i=[["all-players",i,""]]),n(41).style(i,"all-players"),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".jw-logo-button{pointer-events:none;width:132px}.jw-svg-icon-watermark{color:#ff0046;width:96px}.jw-controlbar .jw-svg-icon-jwplayer-logo{display:none;color:#ff0046}.jw-flag-small-player .jw-logo-button{width:44px}.jw-flag-small-player .jw-svg-icon-watermark{display:none}.jw-flag-small-player .jw-controlbar .jw-svg-icon-jwplayer-logo{display:block}.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-logo-button{bottom:6px}.jwplayer.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-icon-inline.jw-logo-button{width:186px}.jwplayer.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-svg-icon-watermark{width:150px}",""])},function(e,t,n){var i=n(125);"string"==typeof i&&(i=[["all-players",i,""]]),n(41).style(i,"all-players"),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,'.jw-overlays,.jw-controls,.jw-controls-backdrop,.jw-flag-small-player .jw-settings-menu,.jw-settings-submenu{height:100%;width:100%}.jw-settings-menu .jw-icon::after,.jw-icon-settings::after,.jw-icon-volume::after,.jw-settings-menu .jw-icon.jw-button-color::after{position:absolute;right:0}.jw-overlays,.jw-controls,.jw-controls-backdrop,.jw-settings-item-active::before{top:0;position:absolute;left:0}.jw-settings-menu .jw-icon::after,.jw-icon-settings::after,.jw-icon-volume::after,.jw-settings-menu .jw-icon.jw-button-color::after{position:absolute;bottom:0;left:0}.jw-nextup-close{position:absolute;top:0;right:0}.jw-overlays,.jw-controls,.jw-flag-small-player .jw-settings-menu{position:absolute;bottom:0;right:0}.jw-settings-menu .jw-icon::after,.jw-icon-settings::after,.jw-icon-volume::after,.jw-time-tip::after,.jw-settings-menu .jw-icon.jw-button-color::after,.jw-text-live::before,.jw-controlbar .jw-tooltip::after,.jw-settings-menu .jw-tooltip::after{content:"";display:block}.jw-svg-icon{height:24px;width:24px;fill:currentColor;pointer-events:none}.jw-icon{height:44px;width:44px;background-color:transparent;outline:none}.jw-icon.jw-tab-focus:focus{border:solid 2px #4d90fe}.jw-icon-airplay .jw-svg-icon-airplay-off{display:none}.jw-off.jw-icon-airplay .jw-svg-icon-airplay-off{display:block}.jw-icon-airplay .jw-svg-icon-airplay-on{display:block}.jw-off.jw-icon-airplay .jw-svg-icon-airplay-on{display:none}.jw-icon-cc .jw-svg-icon-cc-off{display:none}.jw-off.jw-icon-cc .jw-svg-icon-cc-off{display:block}.jw-icon-cc .jw-svg-icon-cc-on{display:block}.jw-off.jw-icon-cc .jw-svg-icon-cc-on{display:none}.jw-icon-fullscreen .jw-svg-icon-fullscreen-off{display:none}.jw-off.jw-icon-fullscreen .jw-svg-icon-fullscreen-off{display:block}.jw-icon-fullscreen .jw-svg-icon-fullscreen-on{display:block}.jw-off.jw-icon-fullscreen .jw-svg-icon-fullscreen-on{display:none}.jw-icon-volume .jw-svg-icon-volume-0{display:none}.jw-off.jw-icon-volume .jw-svg-icon-volume-0{display:block}.jw-icon-volume .jw-svg-icon-volume-100{display:none}.jw-full.jw-icon-volume .jw-svg-icon-volume-100{display:block}.jw-icon-volume .jw-svg-icon-volume-50{display:block}.jw-off.jw-icon-volume .jw-svg-icon-volume-50,.jw-full.jw-icon-volume .jw-svg-icon-volume-50{display:none}.jw-settings-menu .jw-icon::after,.jw-icon-settings::after,.jw-icon-volume::after{height:100%;width:24px;box-shadow:inset 0 -3px 0 -1px currentColor;margin:auto;opacity:0;transition:opacity 150ms cubic-bezier(0, .25, .25, 1)}.jw-settings-menu .jw-icon[aria-checked="true"]::after,.jw-settings-open .jw-icon-settings::after,.jw-icon-volume.jw-open::after{opacity:1}.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-icon-cc,.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-icon-settings,.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-icon-audio-tracks,.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-icon-hd,.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-settings-sharing,.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-icon-fullscreen,.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player).jw-flag-cast-available .jw-icon-airplay,.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player).jw-flag-cast-available .jw-icon-cast{display:none}.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-icon-volume,.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-text-live{bottom:6px}.jwplayer.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-icon-volume::after{display:none}.jw-overlays,.jw-controls{pointer-events:none}.jw-controls-backdrop{display:block;background:linear-gradient(to bottom, transparent, rgba(0,0,0,0.4) 77%, rgba(0,0,0,0.4) 100%) 100% 100% / 100% 240px no-repeat transparent;transition:opacity 250ms cubic-bezier(0, .25, .25, 1),background-size 250ms cubic-bezier(0, .25, .25, 1);pointer-events:none}.jw-overlays{cursor:auto}.jw-controls{overflow:hidden}.jw-flag-small-player .jw-controls{text-align:center}.jw-text{height:1em;font-family:Arial,Helvetica,sans-serif;font-size:.75em;font-style:normal;font-weight:normal;color:#fff;text-align:center;font-variant:normal;font-stretch:normal}.jw-controlbar,.jw-skip,.jw-display-icon-container .jw-icon,.jw-nextup-container,.jw-autostart-mute,.jw-overlays .jw-plugin{pointer-events:all}.jwplayer .jw-display-icon-container,.jw-error .jw-display-icon-container{width:auto;height:auto;box-sizing:content-box}.jw-display{display:table;height:100%;padding:57px 0;position:relative;width:100%}.jw-flag-dragging .jw-display{display:none}.jw-state-idle:not(.jw-flag-cast-available) .jw-display{padding:0}.jw-display-container{display:table-cell;height:100%;text-align:center;vertical-align:middle}.jw-display-controls{display:inline-block}.jwplayer .jw-display-icon-container{float:left}.jw-display-icon-container{display:inline-block;padding:5.5px;margin:0 22px}.jw-display-icon-container .jw-icon{height:75px;width:75px;cursor:pointer;display:flex;justify-content:center;align-items:center}.jw-display-icon-container .jw-icon .jw-svg-icon{height:33px;width:33px;padding:0;position:relative}.jw-display-icon-container .jw-icon .jw-svg-icon-rewind{padding:.2em .05em}.jw-breakpoint--1 .jw-nextup-container{display:none}.jw-breakpoint-0 .jw-display-icon-next,.jw-breakpoint--1 .jw-display-icon-next,.jw-breakpoint-0 .jw-display-icon-rewind,.jw-breakpoint--1 .jw-display-icon-rewind{display:none}.jw-breakpoint-0 .jw-display .jw-icon,.jw-breakpoint--1 .jw-display .jw-icon,.jw-breakpoint-0 .jw-display .jw-svg-icon,.jw-breakpoint--1 .jw-display .jw-svg-icon{width:44px;height:44px;line-height:44px}.jw-breakpoint-0 .jw-display .jw-icon:before,.jw-breakpoint--1 .jw-display .jw-icon:before,.jw-breakpoint-0 .jw-display .jw-svg-icon:before,.jw-breakpoint--1 .jw-display .jw-svg-icon:before{width:22px;height:22px}.jw-breakpoint-1 .jw-display .jw-icon,.jw-breakpoint-1 .jw-display .jw-svg-icon{width:44px;height:44px;line-height:44px}.jw-breakpoint-1 .jw-display .jw-icon:before,.jw-breakpoint-1 .jw-display .jw-svg-icon:before{width:22px;height:22px}.jw-breakpoint-1 .jw-display .jw-icon.jw-icon-rewind:before{width:33px;height:33px}.jw-breakpoint-2 .jw-display .jw-icon,.jw-breakpoint-3 .jw-display .jw-icon,.jw-breakpoint-2 .jw-display .jw-svg-icon,.jw-breakpoint-3 .jw-display .jw-svg-icon{width:77px;height:77px;line-height:77px}.jw-breakpoint-2 .jw-display .jw-icon:before,.jw-breakpoint-3 .jw-display .jw-icon:before,.jw-breakpoint-2 .jw-display .jw-svg-icon:before,.jw-breakpoint-3 .jw-display .jw-svg-icon:before{width:38.5px;height:38.5px}.jw-breakpoint-4 .jw-display .jw-icon,.jw-breakpoint-5 .jw-display .jw-icon,.jw-breakpoint-6 .jw-display .jw-icon,.jw-breakpoint-7 .jw-display .jw-icon,.jw-breakpoint-4 .jw-display .jw-svg-icon,.jw-breakpoint-5 .jw-display .jw-svg-icon,.jw-breakpoint-6 .jw-display .jw-svg-icon,.jw-breakpoint-7 .jw-display .jw-svg-icon{width:88px;height:88px;line-height:88px}.jw-breakpoint-4 .jw-display .jw-icon:before,.jw-breakpoint-5 .jw-display .jw-icon:before,.jw-breakpoint-6 .jw-display .jw-icon:before,.jw-breakpoint-7 .jw-display .jw-icon:before,.jw-breakpoint-4 .jw-display .jw-svg-icon:before,.jw-breakpoint-5 .jw-display .jw-svg-icon:before,.jw-breakpoint-6 .jw-display .jw-svg-icon:before,.jw-breakpoint-7 .jw-display .jw-svg-icon:before{width:44px;height:44px}.jw-controlbar{display:flex;flex-flow:row wrap;align-items:center;justify-content:center;position:absolute;left:0;bottom:0;width:100%;border:none;border-radius:0;background-size:auto;box-shadow:none;max-height:72px;transition:250ms cubic-bezier(0, .25, .25, 1);transition-property:opacity, visibility;transition-delay:0s}.jw-breakpoint-7 .jw-controlbar{max-height:140px}.jw-breakpoint-7 .jw-controlbar .jw-button-container{padding:0 48px 20px}.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-tooltip{margin-bottom:-7px}.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-icon-volume .jw-overlay{padding-bottom:40%}.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-text{font-size:1em}.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-text.jw-text-elapsed{justify-content:flex-end}.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-icon-inline,.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-icon-volume{height:60px;width:60px}.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-icon-inline .jw-svg-icon,.jw-breakpoint-7 .jw-controlbar .jw-button-container .jw-icon-volume .jw-svg-icon{height:30px;width:30px}.jw-breakpoint-7 .jw-controlbar .jw-slider-time{padding:0 60px;height:34px}.jw-breakpoint-7 .jw-controlbar .jw-slider-time .jw-slider-container{height:10px}.jw-controlbar .jw-button-image{background:no-repeat 50% 50%;background-size:contain;max-height:24px}.jw-controlbar .jw-spacer{flex:1 1 auto;align-self:stretch}.jw-controlbar .jw-icon.jw-button-color:hover{color:#fff}.jw-button-container{display:flex;flex-flow:row nowrap;flex:1 1 auto;align-items:center;justify-content:center;width:100%;padding:0 12px}.jw-slider-horizontal{background-color:transparent}.jw-icon-inline{position:relative}.jw-icon-inline,.jw-icon-tooltip{height:44px;width:44px;align-items:center;display:flex;justify-content:center}.jw-icon-inline:not(.jw-text),.jw-icon-tooltip,.jw-slider-horizontal{cursor:pointer}.jw-text-elapsed,.jw-text-duration{justify-content:flex-start;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.jw-icon-tooltip{position:relative}.jw-knob:hover,.jw-icon-inline:hover,.jw-icon-tooltip:hover,.jw-icon-display:hover,.jw-option:before:hover{color:#fff}.jw-time-tip,.jw-controlbar .jw-tooltip,.jw-settings-menu .jw-tooltip{pointer-events:none}.jw-icon-cast{display:none;margin:0;padding:0}.jw-icon-cast google-cast-launcher{background-color:transparent;border:none;padding:0;width:24px;height:24px;cursor:pointer}.jw-icon-inline.jw-icon-volume{display:none}.jwplayer .jw-text-countdown{display:none}.jw-flag-small-player .jw-display{padding-top:0;padding-bottom:0}.jw-flag-small-player:not(.jw-flag-audio-player):not(.jw-flag-ads) .jw-controlbar .jw-button-container>.jw-icon-rewind,.jw-flag-small-player:not(.jw-flag-audio-player):not(.jw-flag-ads) .jw-controlbar .jw-button-container>.jw-icon-next,.jw-flag-small-player:not(.jw-flag-audio-player):not(.jw-flag-ads) .jw-controlbar .jw-button-container>.jw-icon-playback{display:none}.jw-flag-ads-vpaid:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar,.jw-flag-user-inactive.jw-state-playing:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar,.jw-flag-user-inactive.jw-state-buffering:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar{visibility:hidden;pointer-events:none;opacity:0;transition-delay:0s, 250ms}.jw-flag-ads-vpaid:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controls-backdrop,.jw-flag-user-inactive.jw-state-playing:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controls-backdrop,.jw-flag-user-inactive.jw-state-buffering:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controls-backdrop{opacity:0}.jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-breakpoint-0 .jw-text-countdown{display:flex}.jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-breakpoint--1 .jw-text-elapsed,.jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-breakpoint-0 .jw-text-elapsed,.jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-breakpoint--1 .jw-text-duration,.jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-breakpoint-0 .jw-text-duration{display:none}.jwplayer.jw-breakpoint--1:not(.jw-flag-ads):not(.jw-flag-audio-player) .jw-text-countdown,.jwplayer.jw-breakpoint--1:not(.jw-flag-ads):not(.jw-flag-audio-player) .jw-related-btn,.jwplayer.jw-breakpoint--1:not(.jw-flag-ads):not(.jw-flag-audio-player) .jw-slider-volume{display:none}.jwplayer.jw-breakpoint--1:not(.jw-flag-ads):not(.jw-flag-audio-player) .jw-controlbar{flex-direction:column-reverse}.jwplayer.jw-breakpoint--1:not(.jw-flag-ads):not(.jw-flag-audio-player) .jw-button-container{height:30px}.jw-breakpoint--1.jw-flag-ads:not(.jw-flag-audio-player) .jw-icon-volume,.jw-breakpoint--1.jw-flag-ads:not(.jw-flag-audio-player) .jw-icon-fullscreen{display:none}.jwplayer:not(.jw-breakpoint-0) .jw-text-duration:before,.jwplayer:not(.jw-breakpoint--1) .jw-text-duration:before{content:"/";padding-right:1ch;padding-left:1ch}.jwplayer:not(.jw-flag-user-inactive) .jw-controlbar{will-change:transform}.jwplayer:not(.jw-flag-user-inactive) .jw-controlbar .jw-text{-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.jw-slider-container{display:flex;align-items:center;position:relative;touch-action:none}.jw-rail,.jw-buffer,.jw-progress{position:absolute;cursor:pointer}.jw-progress{background-color:#f2f2f2}.jw-rail{background-color:rgba(255,255,255,0.3)}.jw-buffer{background-color:rgba(255,255,255,0.3)}.jw-knob{height:13px;width:13px;background-color:#fff;border-radius:50%;box-shadow:0 0 10px rgba(0,0,0,0.4);opacity:1;pointer-events:none;position:absolute;-webkit-transform:translate(-50%, -50%) scale(0);transform:translate(-50%, -50%) scale(0);transition:150ms cubic-bezier(0, .25, .25, 1);transition-property:opacity, -webkit-transform;transition-property:opacity, transform;transition-property:opacity, transform, -webkit-transform}.jw-flag-dragging .jw-slider-time .jw-knob,.jw-icon-volume:active .jw-slider-volume .jw-knob{box-shadow:0 0 26px rgba(0,0,0,0.2),0 0 10px rgba(0,0,0,0.4),0 0 0 6px rgba(255,255,255,0.2)}.jw-slider-horizontal,.jw-slider-vertical{display:flex}.jw-slider-horizontal .jw-slider-container{height:5px;width:100%}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-cue,.jw-slider-horizontal .jw-knob{top:50%}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-cue{-webkit-transform:translate(0, -50%);transform:translate(0, -50%)}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress{height:5px}.jw-slider-horizontal .jw-rail{width:100%}.jw-slider-vertical{align-items:center;flex-direction:column}.jw-slider-vertical .jw-slider-container{height:88px;width:5px}.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-buffer,.jw-slider-vertical .jw-progress,.jw-slider-vertical .jw-knob{left:50%}.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-buffer,.jw-slider-vertical .jw-progress{height:100%;width:5px;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translate(-50%, 0);transform:translate(-50%, 0);transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out;bottom:0}.jw-slider-vertical .jw-knob{-webkit-transform:translate(-50%, 50%);transform:translate(-50%, 50%)}.jw-slider-time.jw-tab-focus:focus .jw-rail{outline:solid 2px #4d90fe}.jw-slider-time,.jw-flag-audio-player .jw-slider-volume{height:17px;width:100%;align-items:center;background:transparent none;padding:0 12px}.jw-slider-time .jw-cue{background-color:rgba(33,33,33,0.8);cursor:pointer;position:absolute;width:6px}.jw-slider-time,.jw-horizontal-volume-container{z-index:1;outline:none}.jw-slider-time .jw-rail,.jw-horizontal-volume-container .jw-rail,.jw-slider-time .jw-buffer,.jw-horizontal-volume-container .jw-buffer,.jw-slider-time .jw-progress,.jw-horizontal-volume-container .jw-progress,.jw-slider-time .jw-cue,.jw-horizontal-volume-container .jw-cue{-webkit-backface-visibility:hidden;backface-visibility:hidden;height:100%;-webkit-transform:translate(0, -50%) scale(1, .6);transform:translate(0, -50%) scale(1, .6);transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}.jw-slider-time:hover .jw-rail,.jw-horizontal-volume-container:hover .jw-rail,.jw-slider-time:focus .jw-rail,.jw-horizontal-volume-container:focus .jw-rail,.jw-flag-dragging .jw-slider-time .jw-rail,.jw-flag-dragging .jw-horizontal-volume-container .jw-rail,.jw-flag-touch .jw-slider-time .jw-rail,.jw-flag-touch .jw-horizontal-volume-container .jw-rail,.jw-slider-time:hover .jw-buffer,.jw-horizontal-volume-container:hover .jw-buffer,.jw-slider-time:focus .jw-buffer,.jw-horizontal-volume-container:focus .jw-buffer,.jw-flag-dragging .jw-slider-time .jw-buffer,.jw-flag-dragging .jw-horizontal-volume-container .jw-buffer,.jw-flag-touch .jw-slider-time .jw-buffer,.jw-flag-touch .jw-horizontal-volume-container .jw-buffer,.jw-slider-time:hover .jw-progress,.jw-horizontal-volume-container:hover .jw-progress,.jw-slider-time:focus .jw-progress,.jw-horizontal-volume-container:focus .jw-progress,.jw-flag-dragging .jw-slider-time .jw-progress,.jw-flag-dragging .jw-horizontal-volume-container .jw-progress,.jw-flag-touch .jw-slider-time .jw-progress,.jw-flag-touch .jw-horizontal-volume-container .jw-progress,.jw-slider-time:hover .jw-cue,.jw-horizontal-volume-container:hover .jw-cue,.jw-slider-time:focus .jw-cue,.jw-horizontal-volume-container:focus .jw-cue,.jw-flag-dragging .jw-slider-time .jw-cue,.jw-flag-dragging .jw-horizontal-volume-container .jw-cue,.jw-flag-touch .jw-slider-time .jw-cue,.jw-flag-touch .jw-horizontal-volume-container .jw-cue{-webkit-transform:translate(0, -50%) scale(1, 1);transform:translate(0, -50%) scale(1, 1)}.jw-slider-time:hover .jw-knob,.jw-horizontal-volume-container:hover .jw-knob,.jw-slider-time:focus .jw-knob,.jw-horizontal-volume-container:focus .jw-knob{-webkit-transform:translate(-50%, -50%) scale(1);transform:translate(-50%, -50%) scale(1)}.jw-slider-time .jw-rail,.jw-horizontal-volume-container .jw-rail{background-color:rgba(255,255,255,0.2)}.jw-slider-time .jw-buffer,.jw-horizontal-volume-container .jw-buffer{background-color:rgba(255,255,255,0.4)}.jw-flag-touch .jw-slider-time::before,.jw-flag-touch .jw-horizontal-volume-container::before{height:44px;width:100%;content:"";position:absolute;display:block;bottom:calc(100% - 17px);left:0}.jw-slider-time.jw-tab-focus:focus .jw-rail,.jw-horizontal-volume-container.jw-tab-focus:focus .jw-rail{outline:solid 2px #4d90fe}.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-slider-time{height:17px;padding:0}.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-slider-time .jw-slider-container{height:10px}.jw-breakpoint--1:not(.jw-flag-audio-player) .jw-slider-time .jw-knob{border-radius:0;border:1px solid rgba(0,0,0,0.75);height:12px;width:10px}.jw-modal{width:284px}.jw-breakpoint-7 .jw-modal,.jw-breakpoint-6 .jw-modal,.jw-breakpoint-5 .jw-modal{height:232px}.jw-breakpoint-4 .jw-modal,.jw-breakpoint-3 .jw-modal{height:192px}.jw-breakpoint-2 .jw-modal,.jw-flag-small-player .jw-modal{bottom:0;right:0;height:100%;width:100%;max-height:none;max-width:none;z-index:2}.jwplayer .jw-rightclick{display:none;position:absolute;white-space:nowrap}.jwplayer .jw-rightclick.jw-open{display:block}.jwplayer .jw-rightclick .jw-rightclick-list{border-radius:1px;list-style:none;margin:0;padding:0}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item{background-color:rgba(0,0,0,0.8);border-bottom:1px solid #444;margin:0}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item .jw-rightclick-logo{color:#fff;display:inline-flex;padding:0 10px 0 0;vertical-align:middle}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item .jw-rightclick-logo .jw-svg-icon{height:20px;width:20px}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item .jw-rightclick-link{border:none;color:#fff;display:block;font-size:11px;line-height:1em;padding:15px 23px;text-align:start;text-decoration:none;width:100%}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item:last-child{border-bottom:none}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item:hover{cursor:pointer}.jwplayer .jw-rightclick .jw-rightclick-list .jw-featured{vertical-align:middle}.jwplayer .jw-rightclick .jw-rightclick-list .jw-featured .jw-rightclick-link{color:#fff}.jwplayer .jw-rightclick .jw-rightclick-list .jw-featured .jw-rightclick-link span{color:#fff}.jwplayer .jw-rightclick .jw-info-overlay-item,.jwplayer .jw-rightclick .jw-share-item,.jwplayer .jw-rightclick .jw-shortcuts-item{border:none;background-color:transparent;outline:none;cursor:pointer}.jw-icon-tooltip.jw-open .jw-overlay{opacity:1;pointer-events:auto;transition-delay:0s}.jw-icon-tooltip.jw-open .jw-overlay:focus{outline:none}.jw-icon-tooltip.jw-open .jw-overlay:focus.jw-tab-focus{outline:solid 2px #4d90fe}.jw-slider-time .jw-overlay:before{height:1em;top:auto}.jw-slider-time .jw-icon-tooltip.jw-open .jw-overlay{pointer-events:none}.jw-volume-tip{padding:13px 0 26px}.jw-time-tip,.jw-controlbar .jw-tooltip,.jw-settings-menu .jw-tooltip{height:auto;width:100%;box-shadow:0 0 10px rgba(0,0,0,0.4);color:#fff;display:block;margin:0 0 14px;pointer-events:none;position:relative;z-index:0}.jw-time-tip::after,.jw-controlbar .jw-tooltip::after,.jw-settings-menu .jw-tooltip::after{top:100%;position:absolute;left:50%;height:14px;width:14px;border-radius:1px;background-color:currentColor;-webkit-transform-origin:75% 50%;transform-origin:75% 50%;-webkit-transform:translate(-50%, -50%) rotate(45deg);transform:translate(-50%, -50%) rotate(45deg);z-index:-1}.jw-time-tip .jw-text,.jw-controlbar .jw-tooltip .jw-text,.jw-settings-menu .jw-tooltip .jw-text{background-color:#fff;border-radius:1px;color:#000;font-size:10px;height:auto;line-height:1;padding:7px 10px;display:inline-block;min-width:100%;vertical-align:middle}.jw-controlbar .jw-overlay{position:absolute;bottom:100%;left:50%;margin:0;min-height:44px;min-width:44px;opacity:0;pointer-events:none;transition:150ms cubic-bezier(0, .25, .25, 1);transition-property:opacity, visibility;transition-delay:0s, 150ms;-webkit-transform:translate(-50%, 0);transform:translate(-50%, 0);width:100%;z-index:1}.jw-controlbar .jw-overlay .jw-contents{position:relative}.jw-controlbar .jw-option{position:relative;white-space:nowrap;cursor:pointer;list-style:none;height:1.5em;font-family:inherit;line-height:1.5em;padding:0 .5em;font-size:.8em;margin:0}.jw-controlbar .jw-option::before{padding-right:.125em}.jw-controlbar .jw-tooltip,.jw-settings-menu .jw-tooltip{position:absolute;bottom:100%;left:50%;opacity:0;-webkit-transform:translate(-50%, 0);transform:translate(-50%, 0);transition:100ms 0s cubic-bezier(0, .25, .25, 1);transition-property:opacity, visibility, -webkit-transform;transition-property:opacity, transform, visibility;transition-property:opacity, transform, visibility, -webkit-transform;visibility:hidden;white-space:nowrap;width:auto;z-index:1}.jw-controlbar .jw-tooltip.jw-open,.jw-settings-menu .jw-tooltip.jw-open{opacity:1;-webkit-transform:translate(-50%, -10px);transform:translate(-50%, -10px);transition-duration:150ms;transition-delay:500ms,0s,500ms;visibility:visible}.jw-controlbar .jw-tooltip.jw-tooltip-fullscreen,.jw-settings-menu .jw-tooltip.jw-tooltip-fullscreen{left:auto;right:0;-webkit-transform:translate(0, 0);transform:translate(0, 0)}.jw-controlbar .jw-tooltip.jw-tooltip-fullscreen.jw-open,.jw-settings-menu .jw-tooltip.jw-tooltip-fullscreen.jw-open{-webkit-transform:translate(0, -10px);transform:translate(0, -10px)}.jw-controlbar .jw-tooltip.jw-tooltip-fullscreen::after,.jw-settings-menu .jw-tooltip.jw-tooltip-fullscreen::after{left:auto;right:9px}.jw-tooltip-time{height:auto;width:0;bottom:100%;line-height:normal;padding:0;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jw-tooltip-time .jw-overlay{bottom:0;min-height:0;width:auto}.jw-tooltip{bottom:57px;display:none;position:absolute}.jw-tooltip .jw-text{height:100%;white-space:nowrap;text-overflow:ellipsis;direction:unset;max-width:246px;overflow:hidden}.jw-flag-audio-player .jw-tooltip{display:none}.jw-flag-small-player .jw-time-thumb{display:none}.jwplayer .jw-shortcuts-tooltip{top:50%;position:absolute;left:50%;background:#333;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);display:none;color:#fff;pointer-events:all;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow:hidden;flex-direction:column;z-index:1}.jwplayer .jw-shortcuts-tooltip.jw-open{display:flex}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-close{flex:0 0 auto;margin:5px 5px 5px auto}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container{display:flex;flex:1 1 auto;flex-flow:column;font-size:12px;margin:0 20px 20px;overflow-y:auto;padding:5px}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container::-webkit-scrollbar{background-color:transparent;width:6px}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container::-webkit-scrollbar-thumb{background-color:#fff;border:1px solid #333;border-radius:6px}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container .jw-shortcuts-title{font-weight:bold}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container .jw-shortcuts-header{align-items:center;display:flex;justify-content:space-between;margin-bottom:10px}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container .jw-shortcuts-tooltip-list{display:flex;max-width:340px;margin:0 10px}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container .jw-shortcuts-tooltip-list .jw-shortcuts-tooltip-descriptions{width:100%}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container .jw-shortcuts-tooltip-list .jw-shortcuts-row{display:flex;align-items:center;justify-content:space-between;margin:10px 0;width:100%}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container .jw-shortcuts-tooltip-list .jw-shortcuts-row .jw-shortcuts-description{margin-right:10px;max-width:70%}.jwplayer .jw-shortcuts-tooltip .jw-shortcuts-container .jw-shortcuts-tooltip-list .jw-shortcuts-row .jw-shortcuts-key{background:#fefefe;color:#333;overflow:hidden;padding:7px 10px;text-overflow:ellipsis;white-space:nowrap}.jw-skip{color:rgba(255,255,255,0.8);cursor:default;position:absolute;display:flex;right:.75em;bottom:56px;padding:.5em;border:1px solid #333;background-color:#000;align-items:center;height:2em}.jw-skip.jw-tab-focus:focus{outline:solid 2px #4d90fe}.jw-skip.jw-skippable{cursor:pointer;padding:.25em .75em}.jw-skip.jw-skippable:hover{cursor:pointer;color:#fff}.jw-skip.jw-skippable .jw-skip-icon{display:inline;height:24px;width:24px;margin:0}.jw-breakpoint-7 .jw-skip{padding:1.35em 1em;bottom:130px}.jw-breakpoint-7 .jw-skip .jw-text{font-size:1em;font-weight:normal}.jw-breakpoint-7 .jw-skip .jw-icon-inline{height:30px;width:30px}.jw-breakpoint-7 .jw-skip .jw-icon-inline .jw-svg-icon{height:30px;width:30px}.jw-skip .jw-skip-icon{display:none;margin-left:-0.75em;padding:0 .5em;pointer-events:none}.jw-skip .jw-skip-icon .jw-svg-icon-next{display:block;padding:0}.jw-skip .jw-text,.jw-skip .jw-skip-icon{vertical-align:middle;font-size:.7em}.jw-skip .jw-text{font-weight:bold}.jw-cast{background-size:cover;display:none;height:100%;position:relative;width:100%}.jw-cast-container{background:linear-gradient(180deg, rgba(25,25,25,0.75), rgba(25,25,25,0.25), rgba(25,25,25,0));left:0;padding:20px 20px 80px;position:absolute;top:0;width:100%}.jw-cast-text{color:#fff;font-size:1.6em}.jw-breakpoint--1 .jw-cast-text,.jw-breakpoint-0 .jw-cast-text{font-size:1.15em}.jw-breakpoint-1 .jw-cast-text,.jw-breakpoint-2 .jw-cast-text,.jw-breakpoint-3 .jw-cast-text{font-size:1.3em}.jw-nextup-container{position:absolute;bottom:66px;left:0;background-color:transparent;cursor:pointer;margin:0 auto;padding:12px;pointer-events:none;right:0;text-align:right;visibility:hidden;width:100%}.jw-settings-open .jw-nextup-container,.jw-info-open .jw-nextup-container{display:none}.jw-breakpoint-7 .jw-nextup-container{padding:60px}.jw-flag-small-player .jw-nextup-container{padding:0 12px 0 0}.jw-flag-small-player .jw-nextup-container .jw-nextup-title,.jw-flag-small-player .jw-nextup-container .jw-nextup-duration,.jw-flag-small-player .jw-nextup-container .jw-nextup-close{display:none}.jw-flag-small-player .jw-nextup-container .jw-nextup-tooltip{height:30px}.jw-flag-small-player .jw-nextup-container .jw-nextup-header{font-size:12px}.jw-flag-small-player .jw-nextup-container .jw-nextup-body{justify-content:center;align-items:center;padding:.75em .3em}.jw-flag-small-player .jw-nextup-container .jw-nextup-thumbnail{width:50%}.jw-flag-small-player .jw-nextup-container .jw-nextup{max-width:65px}.jw-flag-small-player .jw-nextup-container .jw-nextup.jw-nextup-thumbnail-visible{max-width:120px}.jw-nextup{background:#333;border-radius:0;box-shadow:0 0 10px rgba(0,0,0,0.5);color:rgba(255,255,255,0.8);display:inline-block;max-width:280px;overflow:hidden;opacity:0;position:relative;width:64%;pointer-events:all;-webkit-transform:translate(0, -5px);transform:translate(0, -5px);transition:150ms cubic-bezier(0, .25, .25, 1);transition-property:opacity, -webkit-transform;transition-property:opacity, transform;transition-property:opacity, transform, -webkit-transform;transition-delay:0s}.jw-nextup:hover .jw-nextup-tooltip{color:#fff}.jw-nextup.jw-nextup-thumbnail-visible{max-width:400px}.jw-nextup.jw-nextup-thumbnail-visible .jw-nextup-thumbnail{display:block}.jw-nextup-container-visible{visibility:visible}.jw-nextup-container-visible .jw-nextup{opacity:1;-webkit-transform:translate(0, 0);transform:translate(0, 0);transition-delay:0s, 0s, 150ms}.jw-nextup-tooltip{display:flex;height:80px}.jw-nextup-thumbnail{width:120px;background-position:center;background-size:cover;flex:0 0 auto;display:none}.jw-nextup-body{flex:1 1 auto;overflow:hidden;padding:.75em .875em;display:flex;flex-flow:column wrap;justify-content:space-between}.jw-nextup-header,.jw-nextup-title{font-size:14px;line-height:1.35}.jw-nextup-header{font-weight:bold}.jw-nextup-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.jw-nextup-duration{align-self:flex-end;text-align:right;font-size:12px}.jw-nextup-close{height:24px;width:24px;border:none;color:rgba(255,255,255,0.8);cursor:pointer;margin:6px;visibility:hidden}.jw-nextup-close:hover{color:#fff}.jw-nextup-sticky .jw-nextup-close{visibility:visible}.jw-autostart-mute{position:absolute;bottom:0;right:12px;height:44px;width:44px;background-color:rgba(33,33,33,0.4);padding:5px 4px 5px 6px;display:none}.jwplayer.jw-flag-autostart:not(.jw-flag-media-audio) .jw-nextup{display:none}.jw-settings-menu{position:absolute;bottom:57px;right:12px;align-items:flex-start;background-color:#333;display:none;flex-flow:column nowrap;max-width:284px;pointer-events:auto}.jw-settings-open .jw-settings-menu{display:flex}.jw-breakpoint-7 .jw-settings-menu{bottom:130px;right:60px;max-height:none;max-width:none;height:35%;width:25%}.jw-breakpoint-7 .jw-settings-menu .jw-settings-topbar .jw-icon-inline{height:60px;width:60px}.jw-breakpoint-7 .jw-settings-menu .jw-settings-topbar .jw-icon-inline .jw-svg-icon{height:30px;width:30px}.jw-breakpoint-7 .jw-settings-menu .jw-settings-topbar .jw-icon-inline .jw-tooltip .jw-text{font-size:1em}.jw-breakpoint-6 .jw-settings-menu,.jw-breakpoint-5 .jw-settings-menu{height:232px;width:284px;max-height:232px}.jw-breakpoint-4 .jw-settings-menu,.jw-breakpoint-3 .jw-settings-menu{height:192px;width:284px;max-height:192px}.jw-breakpoint-2 .jw-settings-menu{height:179px;width:284px;max-height:179px}.jw-flag-small-player .jw-settings-menu{max-width:none}.jw-settings-menu .jw-icon.jw-button-color::after{height:100%;width:24px;box-shadow:inset 0 -3px 0 -1px currentColor;margin:auto;opacity:0;transition:opacity 150ms cubic-bezier(0, .25, .25, 1)}.jw-settings-menu .jw-icon.jw-button-color[aria-checked="true"]::after{opacity:1}.jw-settings-topbar{align-items:center;background-color:rgba(0,0,0,0.4);display:flex;flex:0 0 auto;padding:3px 5px 0;width:100%}.jw-settings-topbar .jw-settings-close{margin-left:auto}.jw-settings-submenu{display:none;flex:1 1 auto;overflow-y:auto;padding:8px 20px 0 5px}.jw-settings-submenu::-webkit-scrollbar{background-color:transparent;width:6px}.jw-settings-submenu::-webkit-scrollbar-thumb{background-color:#fff;border:1px solid #333;border-radius:6px}.jw-settings-submenu.jw-settings-submenu-active{display:block}.jw-breakpoint-7 .jw-settings-submenu .jw-settings-content-item{font-size:1em;padding:11px 0 11px 30px}.jw-breakpoint-7 .jw-settings-submenu .jw-settings-content-item .jw-settings-item-active::before{justify-content:flex-end}.jw-breakpoint-7 .jw-settings-submenu .jw-settings-content-item .jw-auto-label{font-size:.85em;padding-left:10px}.jw-flag-touch .jw-settings-submenu{overflow-y:scroll;-webkit-overflow-scrolling:touch}.jw-auto-label{font-size:10px;font-weight:initial;opacity:.75;padding-left:5px}.jw-settings-content-item{position:relative;color:rgba(255,255,255,0.8);cursor:pointer;font-size:12px;line-height:1;padding:7px 0 7px 15px;width:100%;text-align:left;outline:none}.jw-settings-content-item:hover{color:#fff}.jw-settings-content-item:focus{font-weight:bold}.jw-flag-small-player .jw-settings-content-item{line-height:1.75}.jw-settings-content-item.jw-tab-focus:focus{border:solid 2px #4d90fe}.jw-settings-item-active{font-weight:bold;position:relative}.jw-settings-item-active::before{height:100%;width:1em;align-items:center;content:"\\2022";display:inline-flex;justify-content:center}.jw-breakpoint-2 .jw-settings-open .jw-display-container,.jw-flag-small-player .jw-settings-open .jw-display-container,.jw-flag-touch .jw-settings-open .jw-display-container{display:none}.jw-breakpoint-2 .jw-settings-open.jw-controls,.jw-flag-small-player .jw-settings-open.jw-controls,.jw-flag-touch .jw-settings-open.jw-controls{z-index:1}.jw-flag-small-player .jw-settings-open .jw-controlbar{display:none}.jw-settings-open .jw-icon-settings::after{opacity:1}.jw-settings-open .jw-tooltip-settings{display:none}.jw-sharing-link{cursor:pointer}.jw-shortcuts-container .jw-switch{position:relative;display:inline-block;transition:ease-out .15s;transition-property:opacity, background;border-radius:18px;width:80px;height:20px;padding:10px;background:rgba(80,80,80,0.8);cursor:pointer;font-size:inherit;vertical-align:middle}.jw-shortcuts-container .jw-switch .jw-switch-knob{position:absolute;top:2px;left:1px;transition:ease-out .15s;box-shadow:0 0 10px rgba(0,0,0,0.4);border-radius:13px;width:15px;height:15px;background:#fefefe}.jw-shortcuts-container .jw-switch:before,.jw-shortcuts-container .jw-switch:after{position:absolute;top:3px;transition:inherit;color:#fefefe}.jw-shortcuts-container .jw-switch:before{content:attr(data-jw-switch-disabled);right:8px}.jw-shortcuts-container .jw-switch:after{content:attr(data-jw-switch-enabled);left:8px;opacity:0}.jw-shortcuts-container .jw-switch[aria-checked="true"]{background:#475470}.jw-shortcuts-container .jw-switch[aria-checked="true"]:before{opacity:0}.jw-shortcuts-container .jw-switch[aria-checked="true"]:after{opacity:1}.jw-shortcuts-container .jw-switch[aria-checked="true"] .jw-switch-knob{left:60px}.jw-idle-icon-text{display:none;line-height:1;position:absolute;text-align:center;text-indent:.35em;top:100%;white-space:nowrap;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.jw-idle-label{border-radius:50%;color:#fff;-webkit-filter:drop-shadow(1px 1px 5px rgba(12,26,71,0.25));filter:drop-shadow(1px 1px 5px rgba(12,26,71,0.25));font:normal 16px/1 Arial,Helvetica,sans-serif;position:relative;transition:background-color 150ms cubic-bezier(0, .25, .25, 1);transition-property:background-color,-webkit-filter;transition-property:background-color,filter;transition-property:background-color,filter,-webkit-filter;-webkit-font-smoothing:antialiased}.jw-state-idle .jw-icon-display.jw-idle-label .jw-idle-icon-text{display:block}.jw-state-idle .jw-icon-display.jw-idle-label .jw-svg-icon-play{-webkit-transform:scale(.7, .7);transform:scale(.7, .7)}.jw-breakpoint-0.jw-state-idle .jw-icon-display.jw-idle-label,.jw-breakpoint--1.jw-state-idle .jw-icon-display.jw-idle-label{font-size:12px}.jw-info-overlay{top:50%;position:absolute;left:50%;background:#333;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);display:none;color:#fff;pointer-events:all;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow:hidden;flex-direction:column}.jw-info-overlay .jw-info-close{flex:0 0 auto;margin:5px 5px 5px auto}.jw-info-open .jw-info-overlay{display:flex}.jw-info-container{display:flex;flex:1 1 auto;flex-flow:column;margin:0 20px 20px;overflow-y:auto;padding:5px}.jw-info-container [class*="jw-info"]:not(:first-of-type){color:rgba(255,255,255,0.8);padding-top:10px;font-size:12px}.jw-info-container .jw-info-description{margin-bottom:30px;text-align:start}.jw-info-container .jw-info-description:empty{display:none}.jw-info-container .jw-info-duration{text-align:start}.jw-info-container .jw-info-title{text-align:start;font-size:12px;font-weight:bold}.jw-info-container::-webkit-scrollbar{background-color:transparent;width:6px}.jw-info-container::-webkit-scrollbar-thumb{background-color:#fff;border:1px solid #333;border-radius:6px}.jw-info-clientid{align-self:flex-end;font-size:12px;color:rgba(255,255,255,0.8);margin:0 20px 20px 44px;text-align:right}.jw-flag-touch .jw-info-open .jw-display-container{display:none}@supports ((-webkit-filter: drop-shadow(0 0 3px #000)) or (filter: drop-shadow(0 0 3px #000))){.jwplayer.jw-ab-drop-shadow .jw-controls .jw-svg-icon,.jwplayer.jw-ab-drop-shadow .jw-controls .jw-icon.jw-text,.jwplayer.jw-ab-drop-shadow .jw-slider-container .jw-rail,.jwplayer.jw-ab-drop-shadow .jw-title{text-shadow:none;box-shadow:none;-webkit-filter:drop-shadow(0 2px 3px rgba(0,0,0,0.3));filter:drop-shadow(0 2px 3px rgba(0,0,0,0.3))}.jwplayer.jw-ab-drop-shadow .jw-button-color{opacity:.8;transition-property:color, opacity}.jwplayer.jw-ab-drop-shadow .jw-button-color:not(:hover){color:#fff;opacity:.8}.jwplayer.jw-ab-drop-shadow .jw-button-color:hover{opacity:1}.jwplayer.jw-ab-drop-shadow .jw-controls-backdrop{background-image:linear-gradient(to bottom, hsla(0, 0%, 0%, 0), hsla(0, 0%, 0%, 0.00787) 10.79%, hsla(0, 0%, 0%, 0.02963) 21.99%, hsla(0, 0%, 0%, 0.0625) 33.34%, hsla(0, 0%, 0%, 0.1037) 44.59%, hsla(0, 0%, 0%, 0.15046) 55.48%, hsla(0, 0%, 0%, 0.2) 65.75%, hsla(0, 0%, 0%, 0.24954) 75.14%, hsla(0, 0%, 0%, 0.2963) 83.41%, hsla(0, 0%, 0%, 0.3375) 90.28%, hsla(0, 0%, 0%, 0.37037) 95.51%, hsla(0, 0%, 0%, 0.39213) 98.83%, hsla(0, 0%, 0%, 0.4));mix-blend-mode:multiply;transition-property:opacity}.jw-state-idle.jwplayer.jw-ab-drop-shadow .jw-controls-backdrop{background-image:linear-gradient(to bottom, hsla(0, 0%, 0%, 0.2), hsla(0, 0%, 0%, 0.19606) 1.17%, hsla(0, 0%, 0%, 0.18519) 4.49%, hsla(0, 0%, 0%, 0.16875) 9.72%, hsla(0, 0%, 0%, 0.14815) 16.59%, hsla(0, 0%, 0%, 0.12477) 24.86%, hsla(0, 0%, 0%, 0.1) 34.25%, hsla(0, 0%, 0%, 0.07523) 44.52%, hsla(0, 0%, 0%, 0.05185) 55.41%, hsla(0, 0%, 0%, 0.03125) 66.66%, hsla(0, 0%, 0%, 0.01481) 78.01%, hsla(0, 0%, 0%, 0.00394) 89.21%, hsla(0, 0%, 0%, 0));background-size:100% 7rem;background-position:50% 0}.jwplayer.jw-ab-drop-shadow.jw-state-idle .jw-controls{background-color:transparent}}.jw-video-thumbnail-container{position:relative;overflow:hidden}.jw-video-thumbnail-container:not(.jw-related-shelf-item-image){height:100%;width:100%}.jw-video-thumbnail-container.jw-video-thumbnail-generated{position:absolute;top:0;left:0}.jw-video-thumbnail-container:hover,.jw-related-item-content:hover .jw-video-thumbnail-container,.jw-related-shelf-item:hover .jw-video-thumbnail-container{cursor:pointer}.jw-video-thumbnail-container:hover .jw-video-thumbnail:not(.jw-video-thumbnail-completed),.jw-related-item-content:hover .jw-video-thumbnail-container .jw-video-thumbnail:not(.jw-video-thumbnail-completed),.jw-related-shelf-item:hover .jw-video-thumbnail-container .jw-video-thumbnail:not(.jw-video-thumbnail-completed){opacity:1}.jw-video-thumbnail-container .jw-video-thumbnail{position:absolute;top:50%;left:50%;bottom:unset;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);width:100%;height:auto;min-width:100%;min-height:100%;opacity:0;transition:opacity .3s ease;object-fit:cover;background:#000}.jw-related-item-next-up .jw-video-thumbnail-container .jw-video-thumbnail{height:100%;width:auto}.jw-video-thumbnail-container .jw-video-thumbnail.jw-video-thumbnail-visible:not(.jw-video-thumbnail-completed){opacity:1}.jw-video-thumbnail-container .jw-video-thumbnail.jw-video-thumbnail-completed{opacity:0}.jw-video-thumbnail-container .jw-video-thumbnail~.jw-svg-icon-play{display:none}.jw-video-thumbnail-container .jw-video-thumbnail+.jw-related-shelf-item-aspect{pointer-events:none}.jw-video-thumbnail-container .jw-video-thumbnail+.jw-related-item-poster-content{pointer-events:none}.jw-state-idle:not(.jw-flag-cast-available) .jw-display{padding:0}.jw-state-idle .jw-controls{background:rgba(0,0,0,0.4)}.jw-state-idle.jw-flag-cast-available:not(.jw-flag-audio-player) .jw-controlbar .jw-slider-time,.jw-state-idle.jw-flag-cardboard-available .jw-controlbar .jw-slider-time,.jw-state-idle.jw-flag-cast-available:not(.jw-flag-audio-player) .jw-controlbar .jw-icon:not(.jw-icon-cardboard):not(.jw-icon-cast):not(.jw-icon-airplay),.jw-state-idle.jw-flag-cardboard-available .jw-controlbar .jw-icon:not(.jw-icon-cardboard):not(.jw-icon-cast):not(.jw-icon-airplay){display:none}.jwplayer.jw-state-buffering .jw-display-icon-display .jw-icon:focus{border:none}.jwplayer.jw-state-buffering .jw-display-icon-display .jw-icon .jw-svg-icon-buffer{-webkit-animation:jw-spin 2s linear infinite;animation:jw-spin 2s linear infinite;display:block}@-webkit-keyframes jw-spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes jw-spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.jwplayer.jw-state-buffering .jw-icon-playback .jw-svg-icon-play{display:none}.jwplayer.jw-state-buffering .jw-icon-display .jw-svg-icon-pause{display:none}.jwplayer.jw-state-playing .jw-display .jw-icon-display .jw-svg-icon-play,.jwplayer.jw-state-playing .jw-icon-playback .jw-svg-icon-play{display:none}.jwplayer.jw-state-playing .jw-display .jw-icon-display .jw-svg-icon-pause,.jwplayer.jw-state-playing .jw-icon-playback .jw-svg-icon-pause{display:block}.jwplayer.jw-state-playing.jw-flag-user-inactive:not(.jw-flag-audio-player):not(.jw-flag-casting):not(.jw-flag-media-audio) .jw-controls-backdrop{opacity:0}.jwplayer.jw-state-playing.jw-flag-user-inactive:not(.jw-flag-audio-player):not(.jw-flag-casting):not(.jw-flag-media-audio) .jw-logo-bottom-left,.jwplayer.jw-state-playing.jw-flag-user-inactive:not(.jw-flag-audio-player):not(.jw-flag-casting):not(.jw-flag-media-audio):not(.jw-flag-autostart) .jw-logo-bottom-right{bottom:0}.jwplayer .jw-icon-playback .jw-svg-icon-stop{display:none}.jwplayer.jw-state-paused .jw-svg-icon-pause,.jwplayer.jw-state-idle .jw-svg-icon-pause,.jwplayer.jw-state-error .jw-svg-icon-pause,.jwplayer.jw-state-complete .jw-svg-icon-pause{display:none}.jwplayer.jw-state-error .jw-icon-display .jw-svg-icon-play,.jwplayer.jw-state-complete .jw-icon-display .jw-svg-icon-play,.jwplayer.jw-state-buffering .jw-icon-display .jw-svg-icon-play{display:none}.jwplayer:not(.jw-state-buffering) .jw-svg-icon-buffer{display:none}.jwplayer:not(.jw-state-complete) .jw-svg-icon-replay{display:none}.jwplayer:not(.jw-state-error) .jw-svg-icon-error{display:none}.jwplayer.jw-state-complete .jw-display .jw-icon-display .jw-svg-icon-replay{display:block}.jwplayer.jw-state-complete .jw-display .jw-text{display:none}.jwplayer.jw-state-complete .jw-controls{background:rgba(0,0,0,0.4);height:100%}.jw-state-idle .jw-icon-display .jw-svg-icon-pause,.jwplayer.jw-state-paused .jw-icon-playback .jw-svg-icon-pause,.jwplayer.jw-state-paused .jw-icon-display .jw-svg-icon-pause,.jwplayer.jw-state-complete .jw-icon-playback .jw-svg-icon-pause{display:none}.jw-state-idle .jw-display-icon-rewind,.jwplayer.jw-state-buffering .jw-display-icon-rewind,.jwplayer.jw-state-complete .jw-display-icon-rewind,body .jw-error .jw-display-icon-rewind,body .jwplayer.jw-state-error .jw-display-icon-rewind,.jw-state-idle .jw-display-icon-next,.jwplayer.jw-state-buffering .jw-display-icon-next,.jwplayer.jw-state-complete .jw-display-icon-next,body .jw-error .jw-display-icon-next,body .jwplayer.jw-state-error .jw-display-icon-next{display:none}body .jw-error .jw-icon-display,body .jwplayer.jw-state-error .jw-icon-display{cursor:default}body .jw-error .jw-icon-display .jw-svg-icon-error,body .jwplayer.jw-state-error .jw-icon-display .jw-svg-icon-error{display:block}body .jw-error .jw-icon-container{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-preview{display:none}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-title{padding-top:4px}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-title-primary{width:auto;display:inline-block;padding-right:.5ch}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-title-secondary{width:auto;display:inline-block;padding-left:0}body .jwplayer.jw-state-error .jw-controlbar,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-controlbar{display:none}body .jwplayer.jw-state-error .jw-settings-menu,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-settings-menu{height:100%;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}body .jwplayer.jw-state-error .jw-display,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-display{padding:0}body .jwplayer.jw-state-error .jw-logo-bottom-left,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-logo-bottom-left,body .jwplayer.jw-state-error .jw-logo-bottom-right,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-logo-bottom-right{bottom:0}.jwplayer.jw-state-playing.jw-flag-user-inactive .jw-display{visibility:hidden;pointer-events:none;opacity:0}.jwplayer.jw-state-playing:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting) .jw-display,.jwplayer.jw-state-paused:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting):not(.jw-flag-play-rejected) .jw-display{display:none}.jwplayer.jw-state-paused.jw-flag-play-rejected:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting) .jw-display-icon-rewind,.jwplayer.jw-state-paused.jw-flag-play-rejected:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting) .jw-display-icon-next{display:none}.jwplayer.jw-state-buffering .jw-display-icon-display .jw-text,.jwplayer.jw-state-complete .jw-display .jw-text{display:none}.jwplayer.jw-flag-casting:not(.jw-flag-audio-player) .jw-cast{display:block}.jwplayer.jw-flag-casting.jw-flag-airplay-casting .jw-display-icon-container{display:none}.jwplayer.jw-flag-casting .jw-icon-hd,.jwplayer.jw-flag-casting .jw-captions,.jwplayer.jw-flag-casting .jw-icon-fullscreen,.jwplayer.jw-flag-casting .jw-icon-audio-tracks{display:none}.jwplayer.jw-flag-casting.jw-flag-airplay-casting .jw-icon-volume{display:none}.jwplayer.jw-flag-casting.jw-flag-airplay-casting .jw-icon-airplay{color:#fff}.jw-state-playing.jw-flag-casting:not(.jw-flag-audio-player) .jw-display,.jw-state-paused.jw-flag-casting:not(.jw-flag-audio-player) .jw-display{display:table}.jwplayer.jw-flag-cast-available .jw-icon-cast,.jwplayer.jw-flag-cast-available .jw-icon-airplay{display:flex}.jwplayer.jw-flag-cardboard-available .jw-icon-cardboard{display:flex}.jwplayer.jw-flag-live .jw-display-icon-rewind{visibility:hidden}.jwplayer.jw-flag-live .jw-controlbar .jw-text-elapsed,.jwplayer.jw-flag-live .jw-controlbar .jw-text-duration,.jwplayer.jw-flag-live .jw-controlbar .jw-text-countdown,.jwplayer.jw-flag-live .jw-controlbar .jw-slider-time{display:none}.jwplayer.jw-flag-live .jw-controlbar .jw-text-alt{display:flex}.jwplayer.jw-flag-live .jw-controlbar .jw-overlay:after{display:none}.jwplayer.jw-flag-live .jw-nextup-container{bottom:44px}.jwplayer.jw-flag-live .jw-text-elapsed,.jwplayer.jw-flag-live .jw-text-duration{display:none}.jwplayer.jw-flag-live .jw-text-live{cursor:default}.jwplayer.jw-flag-live .jw-text-live:hover{color:rgba(255,255,255,0.8)}.jwplayer.jw-flag-live.jw-state-playing .jw-icon-playback .jw-svg-icon-stop,.jwplayer.jw-flag-live.jw-state-buffering .jw-icon-playback .jw-svg-icon-stop{display:block}.jwplayer.jw-flag-live.jw-state-playing .jw-icon-playback .jw-svg-icon-pause,.jwplayer.jw-flag-live.jw-state-buffering .jw-icon-playback .jw-svg-icon-pause{display:none}.jw-text-live{height:24px;width:auto;align-items:center;border-radius:1px;color:rgba(255,255,255,0.8);display:flex;font-size:12px;font-weight:bold;margin-right:10px;padding:0 1ch;text-rendering:geometricPrecision;text-transform:uppercase;transition:150ms cubic-bezier(0, .25, .25, 1);transition-property:box-shadow,color}.jw-text-live::before{height:8px;width:8px;background-color:currentColor;border-radius:50%;margin-right:6px;opacity:1;transition:opacity 150ms cubic-bezier(0, .25, .25, 1)}.jw-text-live.jw-dvr-live{box-shadow:inset 0 0 0 2px currentColor}.jw-text-live.jw-dvr-live::before{opacity:.5}.jw-text-live.jw-dvr-live:hover{color:#fff}.jwplayer.jw-flag-controls-hidden .jw-logo.jw-hide{visibility:hidden;pointer-events:none;opacity:0}.jwplayer.jw-flag-controls-hidden:not(.jw-flag-casting) .jw-logo-top-right{top:0}.jwplayer.jw-flag-controls-hidden .jw-plugin{bottom:.5em}.jwplayer.jw-flag-controls-hidden .jw-nextup-container{bottom:0}.jw-flag-controls-hidden .jw-controlbar,.jw-flag-controls-hidden .jw-display{visibility:hidden;pointer-events:none;opacity:0;transition-delay:0s, 250ms}.jw-flag-controls-hidden .jw-controls-backdrop{opacity:0}.jw-flag-controls-hidden .jw-logo{visibility:visible}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-logo.jw-hide{visibility:hidden;pointer-events:none;opacity:0}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing:not(.jw-flag-casting) .jw-logo-top-right{top:0}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-plugin{bottom:.5em}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-nextup-container{bottom:0}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing:not(.jw-flag-controls-hidden) .jw-media{cursor:none;-webkit-cursor-visibility:auto-hide}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing.jw-flag-casting .jw-display{display:table}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing:not(.jw-flag-ads) .jw-autostart-mute{display:flex}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-flag-casting .jw-nextup-container{bottom:66px}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-flag-casting.jw-state-idle .jw-nextup-container{display:none}.jw-flag-media-audio .jw-preview{display:block}.jwplayer.jw-flag-ads .jw-preview,.jwplayer.jw-flag-ads .jw-logo,.jwplayer.jw-flag-ads .jw-captions.jw-captions-enabled,.jwplayer.jw-flag-ads .jw-nextup-container,.jwplayer.jw-flag-ads .jw-text-duration,.jwplayer.jw-flag-ads .jw-text-elapsed{display:none}.jwplayer.jw-flag-ads video::-webkit-media-text-track-container{display:none}.jwplayer.jw-flag-ads.jw-flag-small-player .jw-display-icon-rewind,.jwplayer.jw-flag-ads.jw-flag-small-player .jw-display-icon-next,.jwplayer.jw-flag-ads.jw-flag-small-player .jw-display-icon-display{display:none}.jwplayer.jw-flag-ads.jw-flag-small-player.jw-state-buffering .jw-display-icon-display{display:inline-block}.jwplayer.jw-flag-ads .jw-controlbar{flex-wrap:wrap-reverse}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time{height:auto;padding:0;pointer-events:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-slider-container{height:5px}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-rail,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-knob,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-buffer,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-cue,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-icon-settings{display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-progress{-webkit-transform:none;transform:none;top:auto}.jwplayer.jw-flag-ads .jw-controlbar .jw-tooltip,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip:not(.jw-icon-volume),.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline:not(.jw-icon-playback):not(.jw-icon-fullscreen):not(.jw-icon-volume){display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-volume-tip{padding:13px 0}.jwplayer.jw-flag-ads .jw-controlbar .jw-text-alt{display:flex}.jwplayer.jw-flag-ads.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid) .jw-controls .jw-controlbar,.jwplayer.jw-flag-ads.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid).jw-flag-autostart .jw-controls .jw-controlbar{display:flex;pointer-events:all;visibility:visible;opacity:1}.jwplayer.jw-flag-ads.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid).jw-flag-user-inactive .jw-controls-backdrop,.jwplayer.jw-flag-ads.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid).jw-flag-autostart.jw-flag-user-inactive .jw-controls-backdrop{opacity:1;background-size:100% 60px}.jwplayer.jw-flag-ads-vpaid .jw-display-container,.jwplayer.jw-flag-touch.jw-flag-ads-vpaid .jw-display-container,.jwplayer.jw-flag-ads-vpaid .jw-skip,.jwplayer.jw-flag-touch.jw-flag-ads-vpaid .jw-skip{display:none}.jwplayer.jw-flag-ads-vpaid.jw-flag-small-player .jw-controls{background:none}.jwplayer.jw-flag-ads-vpaid.jw-flag-small-player .jw-controls::after{content:none}.jwplayer.jw-flag-ads-hide-controls .jw-controls-backdrop,.jwplayer.jw-flag-ads-hide-controls .jw-controls{display:none !important}.jw-flag-overlay-open-related .jw-controls,.jw-flag-overlay-open-related .jw-title,.jw-flag-overlay-open-related .jw-logo{display:none}.jwplayer.jw-flag-rightclick-open{overflow:visible}.jwplayer.jw-flag-rightclick-open .jw-rightclick{z-index:16777215}body .jwplayer.jw-flag-flash-blocked .jw-controls,body .jwplayer.jw-flag-flash-blocked .jw-overlays,body .jwplayer.jw-flag-flash-blocked .jw-controls-backdrop,body .jwplayer.jw-flag-flash-blocked .jw-preview{display:none}body .jwplayer.jw-flag-flash-blocked .jw-error-msg{top:25%}.jw-flag-touch.jw-breakpoint-7 .jw-captions,.jw-flag-touch.jw-breakpoint-6 .jw-captions,.jw-flag-touch.jw-breakpoint-5 .jw-captions,.jw-flag-touch.jw-breakpoint-4 .jw-captions,.jw-flag-touch.jw-breakpoint-7 .jw-nextup-container,.jw-flag-touch.jw-breakpoint-6 .jw-nextup-container,.jw-flag-touch.jw-breakpoint-5 .jw-nextup-container,.jw-flag-touch.jw-breakpoint-4 .jw-nextup-container{bottom:4.25em}.jw-flag-touch .jw-controlbar .jw-icon-volume{display:flex}.jw-flag-touch .jw-display,.jw-flag-touch .jw-display-container,.jw-flag-touch .jw-display-controls{pointer-events:none}.jw-flag-touch.jw-state-paused:not(.jw-breakpoint-1) .jw-display-icon-next,.jw-flag-touch.jw-state-playing:not(.jw-breakpoint-1) .jw-display-icon-next,.jw-flag-touch.jw-state-paused:not(.jw-breakpoint-1) .jw-display-icon-rewind,.jw-flag-touch.jw-state-playing:not(.jw-breakpoint-1) .jw-display-icon-rewind{display:none}.jw-flag-touch.jw-state-paused.jw-flag-dragging .jw-display{display:none}.jw-flag-audio-player{background-color:#000}.jw-flag-audio-player:not(.jw-flag-flash-blocked) .jw-media{visibility:hidden}.jw-flag-audio-player .jw-title{background:none}.jw-flag-audio-player object{min-height:44px}.jw-flag-audio-player:not(.jw-flag-live) .jw-spacer{display:none}.jw-flag-audio-player .jw-preview,.jw-flag-audio-player .jw-display,.jw-flag-audio-player .jw-title,.jw-flag-audio-player .jw-nextup-container{display:none}.jw-flag-audio-player .jw-controlbar{position:relative}.jw-flag-audio-player .jw-controlbar .jw-button-container{padding-right:3px;padding-left:0}.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip,.jw-flag-audio-player .jw-controlbar .jw-icon-inline{display:none}.jw-flag-audio-player .jw-controlbar .jw-icon-volume,.jw-flag-audio-player .jw-controlbar .jw-icon-playback,.jw-flag-audio-player .jw-controlbar .jw-icon-next,.jw-flag-audio-player .jw-controlbar .jw-icon-rewind,.jw-flag-audio-player .jw-controlbar .jw-icon-cast,.jw-flag-audio-player .jw-controlbar .jw-text-live,.jw-flag-audio-player .jw-controlbar .jw-icon-airplay,.jw-flag-audio-player .jw-controlbar .jw-logo-button,.jw-flag-audio-player .jw-controlbar .jw-text-elapsed,.jw-flag-audio-player .jw-controlbar .jw-text-duration{display:flex;flex:0 0 auto}.jw-flag-audio-player .jw-controlbar .jw-text-duration,.jw-flag-audio-player .jw-controlbar .jw-text-countdown{padding-right:10px}.jw-flag-audio-player .jw-controlbar .jw-slider-time{flex:0 1 auto;align-items:center;display:flex;order:1}.jw-flag-audio-player .jw-controlbar .jw-icon-volume{margin-right:0;transition:margin-right 150ms cubic-bezier(0, .25, .25, 1)}.jw-flag-audio-player .jw-controlbar .jw-icon-volume .jw-overlay{display:none}.jw-flag-audio-player .jw-controlbar .jw-horizontal-volume-container{transition:width 300ms cubic-bezier(0, .25, .25, 1);width:0}.jw-flag-audio-player .jw-controlbar .jw-horizontal-volume-container.jw-open{width:140px}.jw-flag-audio-player .jw-controlbar .jw-horizontal-volume-container.jw-open .jw-slider-volume{padding-right:24px;transition:opacity 300ms;opacity:1}.jw-flag-audio-player .jw-controlbar .jw-horizontal-volume-container.jw-open~.jw-slider-time{flex:1 1 auto;width:auto;transition:opacity 300ms, width 300ms}.jw-flag-audio-player .jw-controlbar .jw-slider-volume{opacity:0}.jw-flag-audio-player .jw-controlbar .jw-slider-volume .jw-knob{-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.jw-flag-audio-player .jw-controlbar .jw-slider-volume~.jw-icon-volume{margin-right:140px}.jw-flag-audio-player.jw-breakpoint-1 .jw-horizontal-volume-container.jw-open~.jw-slider-time,.jw-flag-audio-player.jw-breakpoint-2 .jw-horizontal-volume-container.jw-open~.jw-slider-time{opacity:0}.jw-flag-audio-player.jw-flag-small-player .jw-text-elapsed,.jw-flag-audio-player.jw-flag-small-player .jw-text-duration{display:none}.jw-flag-audio-player.jw-flag-ads .jw-slider-time{display:none}.jw-hidden{display:none}',""])},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-facebook" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 160" focusable="false"><path d="M137.8,15H22.1A7.127,7.127,0,0,0,15,22.1V137.8a7.28,7.28,0,0,0,7.1,7.2H84.5V95H67.6V75.5H84.5v-15a23.637,23.637,0,0,1,21.3-25.9,28.08,28.08,0,0,1,4.1-.1c7.2,0,13.7.6,14.9.6V52.7H114.4c-8.5,0-9.7,3.9-9.7,9.7V74.7h19.5l-2.6,19.5H104.7v50.7h33.1a7.3,7.3,0,0,0,7.2-7.2V22A7.13,7.13,0,0,0,137.8,15Z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 160" focusable="false"><path d="M135.237,15.006H24.739A9.427,9.427,0,0,0,15,24.107V135.256a9.553,9.553,0,0,0,9.365,9.737h110.9a9.427,9.427,0,0,0,9.737-9.1V24.081A9.461,9.461,0,0,0,135.237,15.006Zm-81.9,110.512H34.476V63.774h19.5v61.744ZM43.576,55.31A10.994,10.994,0,0,1,32.513,44.45v-.2a11.05,11.05,0,0,1,22.1,0A10.537,10.537,0,0,1,44.6,55.283l-.051,0A4.07,4.07,0,0,1,43.576,55.31Zm81.9,70.208h-19.5v-29.9c0-7.164,0-16.265-9.737-16.265s-11.7,7.8-11.7,16.265v29.9h-19.5V63.774h18.2v8.464h0a19.766,19.766,0,0,1,18.2-9.738c19.5,0,23.4,13,23.4,29.266v33.8h.637Z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-pinterest" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 160" focusable="false"><path d="M80,15A65.127,65.127,0,0,0,15,80a66.121,66.121,0,0,0,39,59.8,62.151,62.151,0,0,1,1.3-14.9c1.3-5.2,8.5-35.1,8.5-35.1a26.386,26.386,0,0,1-2-10.4c0-9.7,5.9-16.9,12.4-16.9,5.9,0,8.5,4.5,8.5,9.7a128.456,128.456,0,0,1-5.9,22.7,9.646,9.646,0,0,0,6.6,12,8.105,8.105,0,0,0,3.8.3c12.4,0,20.8-15.6,20.8-34.4,0-14.3-9.7-24.7-27.3-24.7a30.869,30.869,0,0,0-31.8,30v1.2a19.8,19.8,0,0,0,4.5,13,2.586,2.586,0,0,1,.6,3.3c0,1.3-1.3,3.9-1.3,5.2-.6,2-2,2-3.3,2-9.1-3.9-13-13.6-13-24.7,0-18.2,15.6-40.3,46.1-40.3a38.763,38.763,0,0,1,40.9,36.7v.4c0,25.4-14.3,44.9-35.1,44.9A18.163,18.163,0,0,1,72.7,112s-3.9,14.9-4.5,17.6a46.615,46.615,0,0,1-6.5,13.7,79.828,79.828,0,0,0,18.2,1.9A65.1,65.1,0,0,0,80,15Z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-reddit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 160" focusable="false"><path d="M136.7,60.7a18.265,18.265,0,0,0-11.6,4.1,83.108,83.108,0,0,0-40-11.5l8.1-25.1,21.1,4.7a14.927,14.927,0,1,0,14.9-16.2,15.418,15.418,0,0,0-13.6,8.1L90.5,18.7a3.75,3.75,0,0,0-4.7,2.7h0L77,52.6A93.15,93.15,0,0,0,34.2,64.1,19.471,19.471,0,0,0,23.3,60,19.137,19.137,0,0,0,5,78.3a19.777,19.777,0,0,0,7.5,14.9v4.1a38.88,38.88,0,0,0,20.4,31.9,85.678,85.678,0,0,0,46.8,12.2,93.7,93.7,0,0,0,46.8-12.2,38.741,38.741,0,0,0,20.4-31.9V93.2A18.324,18.324,0,0,0,155,78.3,18.952,18.952,0,0,0,136.7,60.7Zm-7.5-35.3a6.459,6.459,0,0,1,6.8,6v.8a6.744,6.744,0,0,1-6.8,6.8,6.459,6.459,0,0,1-6.8-6v-.8A7.312,7.312,0,0,1,129.2,25.4ZM47.1,89.2A10.2,10.2,0,1,1,57.3,99.4,10.514,10.514,0,0,1,47.1,89.2Zm57,29.8a31.975,31.975,0,0,1-24.4,7.5h0A34.711,34.711,0,0,1,55.3,119a3.821,3.821,0,1,1,5.2-5.6l.2.2a26.476,26.476,0,0,0,19,5.4h0a28.644,28.644,0,0,0,19-5.4,4,4,0,0,1,5.4,0c2,1.3,2,3.4,0,5.4Zm-2-19.7a10.2,10.2,0,1,1,10.2-10.2,10.514,10.514,0,0,1-10.2,10.2Z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-tumblr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 160" focusable="false"><path d="M115.3,131.6a30.935,30.935,0,0,1-22,7.3h-.7c-28,0-34.6-20.6-34.6-32.7v-34H46.7A2.9,2.9,0,0,1,44,69.5h0V54.2a6.2,6.2,0,0,1,2.7-4,30.359,30.359,0,0,0,20-27.3,3.574,3.574,0,0,1,3-4,1.7,1.7,0,0,1,1,0H87.4a2.9,2.9,0,0,1,2.7,2.7V48.3h19.3a3.18,3.18,0,0,1,2.7,2V69.6a2.9,2.9,0,0,1-2.7,2.7H90v31.3a8.709,8.709,0,0,0,7.4,9.9,5.7,5.7,0,0,0,1.3.1,58.63,58.63,0,0,0,7.3-1.3,4.953,4.953,0,0,1,2.7-.7c.7,0,1.3.7,2,2l5.3,15.3C115.3,129.6,116,130.3,115.3,131.6Z"></path></svg>'},function(e,t){e.exports='<svg class="jw-svg-icon jw-svg-icon-twitter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 160" focusable="false"><path d="M56.8,132.5a75.177,75.177,0,0,0,75.3-75.1V54A53.405,53.405,0,0,0,145,40.5a58.075,58.075,0,0,1-15.4,3.9,27.138,27.138,0,0,0,11.6-14.8A53.038,53.038,0,0,1,124.5,36a25.736,25.736,0,0,0-19.3-8.4A26.12,26.12,0,0,0,78.8,53.4V54a16.5,16.5,0,0,0,.7,5.8,71.966,71.966,0,0,1-54.1-27,23.9,23.9,0,0,0-3.9,13.5A26.043,26.043,0,0,0,33.1,68.2,27.018,27.018,0,0,1,20.9,65v.7A26.15,26.15,0,0,0,42.1,91.4a24.149,24.149,0,0,1-7.1.7,12.625,12.625,0,0,1-5.1-.7,25.657,25.657,0,0,0,24.5,18A53.519,53.519,0,0,1,21.6,121a19.683,19.683,0,0,1-6.4-.7,80.388,80.388,0,0,0,41.6,12.2"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-email" viewBox="0 0 160 160" focusable="false"><path d="M147.3,27.9H11.9L10,29.8v97a3.02,3.02,0,0,0,2.8,3.2H146.6a3.02,3.02,0,0,0,3.2-2.8V31C150.5,29.2,149.2,27.9,147.3,27.9ZM125.6,40.7,80.3,77.1,35,40.7Zm12.1,76.6H22.8V47.7l57.5,46,57.5-46-.1,69.6Z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-link" viewBox="0 0 160 160" focusable="false"><path d="M79.4,99.6H92.5v2a33.6,33.6,0,0,1-9.8,24.2l-9.8,9.8a34.716,34.716,0,0,1-48.4,0,34.716,34.716,0,0,1,0-48.4l9.2-10.5a33.6,33.6,0,0,1,24.2-9.8h1.9V80H58.5a19.359,19.359,0,0,0-15.1,6.5l-9.8,9.8a20.976,20.976,0,0,0-.5,29.6l.5.5a20.976,20.976,0,0,0,29.6.5l.5-.5,9.8-9.8a20.905,20.905,0,0,0,6.5-15h0v-2ZM135,24.4h0a34.716,34.716,0,0,0-48.4,0L76.1,34.2a33.6,33.6,0,0,0-9.8,24.2v2H79.4v-2a19.359,19.359,0,0,1,6.5-15.1l9.8-9.8a20.976,20.976,0,0,1,29.6-.5l.5.5a20.976,20.976,0,0,1,.5,29.6l-.5.5-10.5,9.8a20.905,20.905,0,0,1-15,6.5H99V93h1.3a33.6,33.6,0,0,0,24.2-9.8l9.8-9.8A34.89,34.89,0,0,0,135,24.4ZM63,106.2l42.5-42.5-9.8-9.8L53.2,96.4Z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-embed" viewBox="0 0 160 160" focusable="false"><path d="M153.224,81.594,126.971,54.685,117.6,64.061l21.846,21.846L117.6,107.752l8.719,8.719L152.567,90.22a5.583,5.583,0,0,0,1.406-7.782,6.067,6.067,0,0,0-.75-.844ZM33.12,54.685,6.868,80.938A5.973,5.973,0,0,0,6.68,89.47l.188.188L33.12,117.128l9.376-9.376-22.5-21.846L42.5,64.061ZM53.747,134.1,94.437,21.5,106.345,25.9,65.654,138.5Z"></path></svg>'},function(e,t,n){var i=n(136);"string"==typeof i&&(i=[["all-players",i,""]]),n(41).style(i,"all-players"),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,'.jw-settings-content-item .jw-svg-icon{margin-right:1em;height:16px;width:16px;padding:0}.jw-settings-content-item .jw-tooltip{bottom:12px;left:50px;width:60px}.jw-settings-content-item .jw-tooltip.jw-open{transition:none}.jw-sharing-link{display:flex;align-items:center;line-height:16px;text-transform:capitalize}.jw-sharing-link:hover,.jw-sharing-link:focus{text-decoration:none}.jw-sharing-copy:after{background-color:#fff;border-radius:50px;bottom:20px;color:#000;content:"Copied";display:block;font-size:13px;font-weight:bold;opacity:0;margin-left:-25px;left:50%;position:absolute;text-align:center;-webkit-transform:translateY(10px);transform:translateY(10px);transition:all 200ms ease-in-out;visibility:hidden;width:60px}.jw-sharing-copy-textarea-copied:after{opacity:1;-webkit-transform:translateY(0);transform:translateY(0);visibility:visible}.jw-sharing-copy .jw-sharing-link{padding:0}.jw-sharing-copy .jw-sharing-link:hover,.jw-sharing-copy .jw-sharing-link:focus{color:#fff}.jw-sharing-link:focus,.jw-sharing-copy:focus{outline:none}.jw-sharing-link:active,.jw-sharing-copy:active{color:#fff;font-weight:bold}.jw-sharing-textarea{display:flex;opacity:0;height:1px;cursor:pointer}',""])}])]);(window.webpackJsonpjwplayer=window.webpackJsonpjwplayer||[]).push([[13],{111:function(t,e,r){"use strict";var i=r(3),n=r(52),a={canplay:function(){this.trigger(i.E)},play:function(){this.stallTime=-1,this.video.paused||this.state===i.qb||this.setState(i.ob)},loadedmetadata:function(){var t={metadataType:"media",duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth,seekRange:this.getSeekRange()},e=this.drmUsed;e&&(t.drm=e),this.trigger(i.K,t)},timeupdate:function(){var t=this.video.currentTime,e=this.getCurrentTime(),r=this.getDuration();if(!isNaN(r)){this.seeking||this.video.paused||this.state!==i.rb&&this.state!==i.ob||this.stallTime===t||(this.stallTime=-1,this.setState(i.qb),this.trigger(i.gb));var n={position:e,duration:r,currentTime:t,seekRange:this.getSeekRange(),metadata:{currentTime:t}};if(this.getPtsOffset){var a=this.getPtsOffset();a>=0&&(n.metadata.mpegts=a+e)}var o=this.getLiveLatency();null!==o&&(n.latency=o),(this.state===i.qb||this.seeking)&&this.trigger(i.S,n)}},click:function(t){this.trigger(i.n,t)},volumechange:function(){var t=this.video;this.trigger(i.V,{volume:Math.round(100*t.volume)}),this.trigger(i.M,{mute:t.muted})},seeked:function(){this.seeking&&(this.seeking=!1,this.trigger(i.R))},playing:function(){-1===this.stallTime&&this.setState(i.qb),this.trigger(i.gb)},pause:function(){this.state!==i.lb&&(this.video.ended||this.video.error||this.video.currentTime!==this.video.duration&&this.setState(i.pb))},progress:function(){var t=this.getDuration();if(!(t<=0||t===1/0)){var e=this.video.buffered;if(e&&0!==e.length){var r=Object(n.a)(e.end(e.length-1)/t,0,1);this.trigger(i.D,{bufferPercent:100*r,position:this.getCurrentTime(),duration:t,currentTime:this.video.currentTime,seekRange:this.getSeekRange()})}}},ratechange:function(){this.trigger(i.P,{playbackRate:this.video.playbackRate})},ended:function(){this.videoHeight=0,this.streamBitrate=-1,this.state!==i.nb&&this.state!==i.lb&&this.trigger(i.F)},loadeddata:function(){this.renderNatively&&this.setTextTracks(this.video.textTracks)}};e.a=a},112:function(t,e,r){"use strict";var i=r(5),n=r(11),a=r(85),o={container:null,volume:function(t){this.video.volume=Math.min(Math.max(0,t/100),1)},mute:function(t){this.video.muted=!!t,this.video.muted||this.video.removeAttribute("muted")},resize:function(t,e,r){var a=this.video,o=a.videoWidth,s=a.videoHeight;if(t&&e&&o&&s){var u={objectFit:"",width:"",height:""};if("uniform"===r){var l=t/e,c=o/s,d=Math.abs(l-c);d<.09&&d>.0025&&(u.objectFit="fill",r="exactfit")}if(i.Browser.ie||i.OS.iOS&&i.OS.version.major<9||i.Browser.androidNative)if("uniform"!==r){u.objectFit="contain";var h=t/e,f=o/s,p=1,v=1;"none"===r?p=v=h>f?Math.ceil(100*s/e)/100:Math.ceil(100*o/t)/100:"fill"===r?p=v=h>f?h/f:f/h:"exactfit"===r&&(h>f?(p=h/f,v=1):(p=1,v=f/h)),Object(n.e)(a,"matrix(".concat(p.toFixed(2),", 0, 0, ").concat(v.toFixed(2),", 0, 0)"))}else u.top=u.left=u.margin="",Object(n.e)(a,"");Object(n.d)(a,u)}},getContainer:function(){return this.container},setContainer:function(t){this.container=t,this.video.parentNode!==t&&t.appendChild(this.video)},remove:function(){this.stop(),this.destroy();var t=this.container;t&&t===this.video.parentNode&&t.removeChild(this.video)},atEdgeOfLiveStream:function(){if(!this.isLive())return!1;return Object(a.a)(this.video.buffered)-this.video.currentTime<=2}};e.a=o},113:function(t,e,r){"use strict";e.a={eventsOn_:function(){},eventsOff_:function(){},attachMedia:function(){this.eventsOn_()},detachMedia:function(){return this.eventsOff_()}}},114:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return a}));var i=r(1);function n(t,e,r){var n=t+1e3,o=i.o;return e>0?(403===e&&(o=i.q),n+=a(e)):"http:"===(""+r).substring(0,5)&&"https:"===document.location.protocol?n+=12:0===e&&(n+=11),{code:n,key:o}}var a=function(t){return t>=400&&t<600?t:6}},137:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return n}));var i=1,n=25},138:function(t,e,r){"use strict";function i(t,e,r){if(!t)return"";var i=t.bitrate||t.bandwidth;return function(t,e){var r=null;if(e&&t){var i=Object.keys(t),a=parseFloat(e);i.length&&!isNaN(a)&&(r=t[function(t,e){var r,i=null,n=1/0;Array.isArray(t)&&t.forEach((function(t){(r=Math.abs(t-e))<n&&(i=t,n=r)}));return i}(i,n(a))])}return r}(e,i)||t.label||function(t,e,r){if(!t&&!e)return"";var i="".concat(n(e)," kbps"),a=i;t&&(a="".concat(t,"p"),e&&r&&(a+=" (".concat(i,")")));return a}(t.height,i,r)}function n(t){return Math.floor(t/1e3)}function a(t){return!!Array.isArray(t)&&t.some((function(t){var e=t.height||t.bitrate||t.bandwidth,r=this[e];return this[e]=1,r}),{})}r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return a}))},139:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r(3),n=r(0);function a(t,e){var r=e;return{start:function(){this.stop(),setInterval((function(){var e=t.getBandwidthEstimate();Object(n.A)(e)&&(r=e,t.trigger(i.i,{bandwidthEstimate:r}))}),1e3)},stop:function(){clearInterval(null)},getEstimate:function(){return r}}}},141:function(t,e,r){"use strict";var i=r(0),n=r(79),a=9;function o(t){for(var e=0,r=0,i=10,o=[];e+a<t.length;){var u=Object(n.c)(t.subarray(e,e+=3));if("ID3"===u){var l=t.subarray(e,e+=2),c=t.subarray(e,e+=1)[0];if(0!=(128&c)||l[0]<3)break;var d=Object(n.b)(t.subarray(e,e+=4));0!=(64&c)&&(i+=Object(n.b)(t.subarray(e,e+=4))),o=o.concat(s(t,r+i,d)),e+=d}else{if("3DI"!==u){e-=3;break}e+=7}r=e}return{position:e,cues:o}}function s(t,e,r){for(var i=t.length,a=e,o=[];a<e+r;){if(i-a<8)return o;var s=a;a+=4;var u=Object(n.b)(t.subarray(a,a+=4));if(i-a<u+2)return o;if(t.subarray(a,a+=1)[0]>0)return o;var l=t[a];3!==l&&0!==l||(u-=1,a+=1);var c=t.buffer.slice(s-10,a+u+1);o.push({data:c}),a+=u+1}return o}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.video=e,this.hlsjs=i,this.videoListeners=r,this.hlsjsListeners=n}var e,r,n;return e=t,(r=[{key:"on",value:function(){var t=this;this.off(),Object(i.j)(this.videoListeners,(function(e,r){t.video.addEventListener(r,e,!1)})),Object(i.j)(this.hlsjsListeners,(function(e,r){t.hlsjs.on(r,e)}))}},{key:"off",value:function(){var t=this;Object(i.j)(this.videoListeners,(function(e,r){t.video.removeEventListener(r,e)})),Object(i.j)(this.hlsjsListeners,(function(e,r){t.hlsjs.off(r,e)}))}}])&&u(e.prototype,r),n&&u(e,n),t}(),c=r(138);function d(t,e){var r=Object(c.b)(t),n=Object(i.B)(t,(function(t,i){return{label:Object(c.a)(t,e,r),level_id:t.id,hlsjsIndex:i,bitrate:t.bitrate,height:t.height,width:t.width,audioGroupId:t.attrs?t.attrs.AUDIO:void 0}}));return(n=f(n)).length>1&&n.unshift({label:"Auto",level_id:"auto",hlsjsIndex:-1}),n}function h(t,e){return Math.max(0,Object(i.q)(e,Object(i.m)(e,(function(e){return e.hlsjsIndex===t}))))}var f=function(t){return t.sort((function(t,e){return t.height&&e.height?t.height===e.height?e.bitrate-t.bitrate:e.height-t.height:e.bitrate-t.bitrate}))},p=window.jwplayer&&window.jwplayer.debug,v=function(){},g=function(t){return p?console[t].bind(console,"[Hls.js ".concat(t,"] ->")):v},y=(g("debug"),g("log"),g("info"),g("warn"),g("error"),p),m=r(137),b=r(5);function T(t){var e=t.withCredentials,r=t.aesToken,n=t.renderNatively,a=t.capLevelToPlayerSize,o=t.onXhrOpen,s=t.hlsjsConfig,u=!o&&!b.OS.android&&!b.Browser.ie&&(b.Browser.chrome&&b.Browser.version.major>=66||b.Browser.firefox&&b.Browser.version.major>=57),l={autoStartLoad:!1,testBandwidth:!1,maxBufferSize:2e7,maxMaxBufferLength:m.a,liveBackBufferLength:900,capLevelToPlayerSize:a,renderNatively:n,debug:y,captionsTextTrack1Label:"Unknown CC",captionsTextTrack2Label:"Unknown CC",progressive:u},c=Object(i.E)(s||{},["liveSyncDuration","liveSyncDurationCount","liveMaxLatencyDuration","liveMaxLatencyDurationCount","debug"]);return void 0!==c.liveSyncDurationCount||void 0!==c.liveMaxLatencyDurationCount?c.liveSyncDuration=c.liveMaxLatencyDuration=void 0:(c.liveSyncDurationCount=c.liveMaxLatencyDurationCount=void 0,l.liveSyncDuration=25),e||r||o?Object(i.k)({},l,function(t,e,r){return{xhrSetup:function(i,n){if(t&&(i.withCredentials=!0),e){var a=n.indexOf("?")>0?"&token=":"?token=";i.open("GET",n+a+e,!0)}"function"==typeof r&&r(i,n)},fetchSetup:function(r,i){if(e){var n=r.url.indexOf("?")>0?"&token=":"?token=";r.url=r.url+n+e}return t&&(i.credentials="include"),new Request(r.url,i)}}}(e,r,o),c):Object(i.k)({},l,c)}var E=r(114),S=r(1),_=23e4,R=230001,w=232002,k=230002,A=232600,L=232631,O=232632,D=233600,I=233650,C=234001,x=234002;function P(t){if(t){if(/^frag/.test(t))return 2e3;if(/^(manifest|level|audioTrack)/.test(t))return 1e3;if(/^key/.test(t))return 4e3}return 0}var M=r(112),F=r(113),N=r(83);function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){return!e||"object"!==U(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var K=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),B(this,j(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(e,t),e}(r(9).a);Object(i.k)(K.prototype,M.a,F.a,N.a);var H=r(87);function V(t,e){var r=t[e];return!Object(i.v)(r)&&r>=0?r:null}var W=r(78),Y=r(3),q=r(18),X=r(111),z=r(23),J=r(74),Q=r(139);function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function tt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t,e,r){return(rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=it(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t){var e=t.Events,r=e.SUBTITLE_TRACKS_CLEARED,a=e.MEDIA_ATTACHED,s=e.MEDIA_DETACHED,u=e.MANIFEST_PARSED,c=e.LEVEL_LOADED,f=e.LEVEL_UPDATED,p=e.LEVEL_PTS_UPDATED,v=e.LEVEL_SWITCHED,g=e.FRAG_PARSING_METADATA,y=e.BUFFER_APPENDED,M=e.BUFFER_CODECS,F=e.FRAG_BUFFERED,N=e.INIT_PTS_FOUND,U=e.NON_NATIVE_TEXT_TRACKS_FOUND,B=e.CUES_PARSED,j=e.AUDIO_TRACKS_UPDATED,G=e.ERROR,at=t.ErrorTypes,ot=at.MEDIA_ERROR,ut=at.NETWORK_ERROR,ht=function(t){var e=t.ErrorTypes.NETWORK_ERROR,r=t.ErrorDetails,i=r.MANIFEST_PARSING_ERROR,n=r.LEVEL_EMPTY_ERROR,a=r.MANIFEST_INCOMPATIBLE_CODECS_ERROR,o=r.FRAG_PARSING_ERROR,s=r.FRAG_DECRYPT_ERROR,u=r.BUFFER_STALLED_ERROR,l=r.BUFFER_APPEND_ERROR,c=r.INTERNAL_EXCEPTION,d=r.MANIFEST_LOAD_ERROR,h=r.LEVEL_LOAD_ERROR,f=r.LEVEL_LOAD_TIMEOUT,p=r.BUFFER_SEEK_OVER_HOLE,v=[d,i,a,h],g=[u,p],y=[n,h,f];return function(t){var r=t.details,d=t.response,h=t.type,f=t.fatal,p=v.indexOf(r)<0,m=g.indexOf(r)>=0,b=y.indexOf(r)>=0,T=S.o,R=_;switch(r){case i:R=A;break;case n:R=L;break;case a:T=S.n,R=O;break;case o:R=D;break;case s:R=I;break;case u:R=C;break;case l:R=x;break;case c:R=239e3;break;default:if(h===e)if(!1===navigator.onLine)p=!1,b=!1,R=(f="manifestLoadError"===r)?w:k,T=S.l;else if(/TimeOut$/.test(r))R=_+1001+P(r);else if(d){var M=Object(E.b)(_,d.code,t.url,d.text);R=M.code,T=M.key,R+=P(r)}}return{key:T,code:R,recoverable:p,stalling:m,suppressLevel:b,fatal:f,error:t}}}(t);return function(e){function E(t,e,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,E),(i=function(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?et(t):e}(this,it(E).call(this))).bandwidthMonitor=Object(Q.a)(et(i),e.bandwidthEstimate),i.bitrateSelection=e.bitrateSelection,i.bufferStallTimeout=1e3,i.connectionTimeout=null,i.connectionTimeoutDuration=1e4,i.currentHlsjsLevel=null,i.currentJwItem=null,i.dvrEnd=null,i.dvrPosition=null,i.dvrUpdatedTime=0,i.eventHandler=null,i.hlsjs=null,i.hlsjsConfig=null,i.hlsjsOptions=null,i.jwConfig=e,i.jwLevels=null,i.lastEndSn=null,i.lastPosition=0,i.lastRecoveryTime=null,i.levelDuration=0,i.live=!1,i.liveEdgePosition=null,i.liveEdgeUpdated=0,i.liveEdgeSn=-1,i.livePaused=!1,i.maxRetries=3,i.playerId=t,i.recoveringMediaError=!1,i.recoveringNetworkError=!1,i.recoveryInterval=5e3,i.renderNatively=ct(e.renderCaptionsNatively),i.retryCount=0,i.savedVideoProperties=!1,i.seeking=!1,i.src=null,i.staleManifestDurationMultiplier=3e3,i.staleManifestTimeout=null,i.state=Y.nb,i.streamBitrate=-1,i.streamType="VOD",i.supports=E.supports,i.supportsPlaybackRate=!0,i.video=r,i.videoFound=!1,i.videoHeight=0,i}var _,w,A;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(E,e),_=E,A=[{key:"setEdition",value:function(t){E.supports=Object(z.a)(t)}}],(w=[{key:"trigger",value:function(t,e){if(t===Y.bb&&e.newstate===Y.qb&&!this.videoHeight){var r=this.getCurrentHlsjsLevel();this.checkAdaptation(r)}rt(it(E.prototype),"trigger",this).call(this,t,e)}},{key:"initHlsjs",value:function(e){var r=this.jwConfig.hlsjsConfig,n={withCredentials:!!dt(e,this.jwConfig,"withCredentials"),aesToken:dt(e,this.jwConfig,"aestoken"),renderNatively:this.renderNatively,capLevelToPlayerSize:!e.stereomode,onXhrOpen:e.sources[0].onXhrOpen,hlsjsConfig:r};if(this.setupSideloadedTracks(e.tracks),!this.hlsjs||!Object(i.C)(this.hlsjsOptions)(n)){this.hlsjsOptions=n,this.restoreVideoProperties(),this.stopStaleTimeout(),this.stopConnectionTimeout(),this.hlsjsConfig=T(n);var a=Object(i.k)({},this.hlsjsConfig),o=this.bandwidthMonitor.getEstimate();Object(i.A)(o)&&(a.abrEwmaDefaultEstimate=o),this.hlsjs=new t(a),this.eventHandler=new l(this.video,this.createVideoListeners(),this.hlsjs,this.createHlsjsListeners())}}},{key:"init",value:function(t){this.destroy(),this.initHlsjs(t)}},{key:"preload",value:function(t){"metadata"===t.preload&&(this.maxBufferLength=m.b),this.load(t)}},{key:"load",value:function(t){var e=this.hlsjs,r=this.video,i=this.src,n=t.sources[0].file,a=n.url?n.url:n;if(i!==a||this.videoSrc!==r.src){var o=t.starttime||-1;o<-1&&(o=this.lastPosition),this.initHlsjs(t),this.currentJwItem=t,this.src=a,this.videoHeight=0,this.eventsOn_(),e.attachMedia(r),e.config.startPosition=o,e.loadSource(a),this.videoSrc=r.src}else this.maxBufferLength=m.a}},{key:"play",value:function(){if(this.livePaused){this.livePaused=!1;var t=Object(i.k)({},this.currentJwItem);delete t.startTime,this.src=null,this._clearNonNativeCues(),this.clearMetaCues(),this.clearTracks(),this.init(t),this.load(t)}return this.video.play()||Object(J.a)(this.video)}},{key:"pause",value:function(){this.stopConnectionTimeout(),this.live&&"LIVE"===this.streamType&&!this.livePaused&&this.livePause(),this.video.pause()}},{key:"livePause",value:function(){this.livePaused=!0,this.hlsjs.stopLoad(),this.stopStaleTimeout()}},{key:"stop",value:function(){this.clearTracks(),this.hlsjs&&(this.hlsjs.trigger(r),this.eventsOff_(),this.hlsjs.stopLoad()),this.pause(),this.setState(Y.nb)}},{key:"seek",value:function(t){var e=this.getDuration();if(e&&e!==1/0&&!Object(i.v)(e)){this.stopStaleTimeout(),this.stopConnectionTimeout();var r=t>=0?t:t+this.video.duration,n=this.getSeekRange();"DVR"===this.streamType&&(this.dvrPosition=r-this.dvrEnd,t<0&&(r+=Math.min(12,(Object(q.a)()-this.dvrUpdatedTime)/1e3))),this.seeking=!0,this.trigger(Y.Q,{position:this.getCurrentTime(),offset:r}),this.video.currentTime=r;var a=this.video.currentTime,o={position:this.getCurrentTime(),duration:e,currentTime:a,seekRange:n,metadata:{currentTime:a}};this.trigger("time",o)}}},{key:"getCurrentQuality",value:function(){var t=0;return this.hlsjs&&!this.hlsjs.autoLevelEnabled&&(t=h(this.hlsjs.manualLevel,this.jwLevels)),t}},{key:"getQualityLevels",value:function(){return Object(i.B)(this.jwLevels,(function(t){return Object(H.a)(t)}))}},{key:"getCurrentAudioTrack",value:function(){return Object(i.w)(this.currentAudioTrackIndex)?this.currentAudioTrackIndex:-1}},{key:"getAudioTracks",value:function(){return this.audioTracks||[]}},{key:"getCurrentTime",value:function(){return this.live&&"DVR"===this.streamType?(this.dvrPosition||this.updateDvrPosition(this.getSeekRange()),this.dvrPosition):this.video.currentTime}},{key:"getDuration",value:function(){if(this.live&&this.currentJwItem){var t=this.levelDuration,e=this.currentJwItem.minDvrWindow;return Object(W.a)(t,e)?(this.streamType="DVR",-t):(this.streamType="LIVE",1/0)}return this.streamType="VOD",this.video.duration}},{key:"getCurrentHlsjsLevel",value:function(){var t=0;if(this.hlsjs){var e=this.hlsjs,r=e.firstLevel,i=e.currentLevel;t=i>0?i:r}return t}},{key:"getName",value:function(){return st()}},{key:"getPlaybackRate",value:function(){return this.video.playbackRate}},{key:"getSeekRange",value:function(){var t=this.levelDuration,e=this.video,r=e.seekable,n=e.duration,a=r.length?Math.max(r.end(0),r.end(r.length-1)):n;return Object(i.v)(n)?{start:0,end:0}:{start:Math.max(0,a-t),end:a}}},{key:"getBandwidthEstimate",value:function(){var t=this.hlsjs;if(t)return t.bandwidthEstimate}},{key:"getLiveLatency",value:function(){var t=null;return this.live&&null!==this.liveEdgePosition&&(t=this.liveEdgePosition+(Object(q.a)()-this.liveEdgeUpdated)/1e3-this.video.currentTime),t}},{key:"setCurrentQuality",value:function(t){if(!(t<0)){var e,r,i,n=(e=t,r=this.jwLevels,i=-1,e>-1&&r[e]&&(i=r[e].hlsjsIndex),i);this.hlsjs.nextLevel=n,this.trigger(Y.J,{levels:this.jwLevels,currentQuality:t}),this.bitrateSelection=this.jwLevels[t].bitrate}}},{key:"setCurrentAudioTrack",value:function(t){var e=h(this.getCurrentHlsjsLevel(),this.jwLevels);if(this.jwLevels&&this.jwLevels[e]){var r=this.jwLevels[e].audioGroupId;Object(i.H)(this.audioTracksMap)&&(this.audioTracks=this.audioTracksMap[r],Object(i.w)(t)&&Object(i.H)(this.audioTracks)&&this.audioTracks[t]&&this.currentAudioTrackIndex!==t&&(this.trigger(Y.f,{tracks:this.audioTracks,currentTrack:t}),null!==this.currentAudioTrackIndex&&this.audioTracks[t].hlsjsIndex!==this.hlsjs.audioTrack&&this.trigger(Y.g,{tracks:this.audioTracks,currentTrack:t}),this.currentAudioTrackIndex=t,this.audioTracks[t].hlsjsIndex!==this.hlsjs.audioTrack&&(this.hlsjs.audioTrack=this.audioTracks[t].hlsjsIndex)))}}},{key:"updateAudioTrack",value:function(t){if(this.hlsjs.audioTracks.length){var e=this.currentAudioTrackIndex;Object(i.w)(e)?this.audioTracks[e].hlsjsIndex!==this.hlsjs.audioTrack&&(this.currentAudioTrackIndex=null):e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Math.max(Object(i.q)(t,Object(i.m)(t,(function(t){return t.defaulttrack}))),0)}(this.audioTracksMap[t.attrs.AUDIO]),this.setCurrentAudioTrack(e)}}},{key:"updateDvrPosition",value:function(t){this.dvrPosition=this.video.currentTime-t.end,this.dvrEnd=t.end,this.dvrUpdatedTime=Object(q.a)()}},{key:"setCurrentSubtitleTrack",value:function(t){this.hlsjs.subtitleTrack=t}},{key:"setPlaybackRate",value:function(t){this.video.playbackRate=this.video.defaultPlaybackRate=t}},{key:"isLive",value:function(){return this.live}},{key:"checkAdaptation",value:function(t){var e=this,r=this.hlsjs,i=r.levels,n=r.autoLevelEnabled,a=i[t];if(a){var o=a.width,s=a.height,u=a.bitrate;if(o=o||this.video.videoWidth,(s=s||this.video.videoHeight)!==this.videoHeight||u!==this.streamBitrate){var l=h(t,this.jwLevels),c="api";-1!==this.streamBitrate&&this.streamBitrate||this.videoHeight?n&&(c="auto"):c="initial choice",this.videoHeight=s,this.streamBitrate=u;var d=n?"auto":"manual",f=n&&i.length>1?"auto":this.jwLevels[l].label,p=function(){e.trigger(Y.U,{reason:c,mode:d,level:{bitrate:u,index:l,label:f,width:o,height:s}})};b.Browser.ie?this.once("time",p,this):p()}}}},{key:"createVideoListeners",value:function(){var t=this,e={waiting:function(){t.startConnectionTimeout(),t.seeking?t.setState(Y.ob):t.state===Y.qb&&(t.atEdgeOfLiveStream()&&t.setPlaybackRate(1),t.stallTime=t.video.currentTime,t.setState(Y.rb))}};return Object(i.j)(X.a,(function(r,i){"error"!==i&&(e[i]=r.bind(t))})),e}},{key:"createHlsjsListeners",value:function(){var t=this,e={};e[a]=function(){t.recoveringMediaError&&(t.hlsjs.startLoad(),t.recoveringMediaError=!1,t.resetRecovery(),t.stopStaleTimeout(),t.stopConnectionTimeout())},e[s]=function(){t._clearNonNativeCues()},e[u]=function(e,r){var n=r.levels,a=t.bitrateSelection,o=t.hlsjs,s=t.jwConfig,u=-1,l=-1;t.currentHlsjsLevel=null,t.jwLevels=d(n,s.qualityLabels),Object(i.A)(a)&&(l=u=function(t,e){if(!e)return-1;for(var r=Number.MAX_VALUE,i=-1,n=0;n<t.length;n++){var a=t[n];if(a.bitrate){var o=Math.abs(e-a.bitrate);if(o<=r&&(r=o,i=n),!o)break}}return i}(n,a)),o.startLevel=u,o.nextLevel=l,o.startLoad(o.config.startPosition),t.trigger(Y.I,{levels:t.jwLevels,currentQuality:h(u,t.jwLevels)})},e[c]=function(e,r){var i=r.details,n=i.endSN,a=i.live,o=i.targetduration;t.checkStaleManifest(n,a,o)},e[f]=function(e,r){var i=r.details,n=i.live,a=i.totalduration;t.live=n,t.levelDuration=a;var o=t.getSeekRange(),s=Math.abs(t.dvrEnd-o.end)>1;"DVR"===t.streamType&&s&&t.updateDvrPosition(o),n&&t.state===Y.nb&&t.livePause()},e[p]=function(e,r){var i=r.details,n=i.fragments,a=i.totalduration;if(t.levelDuration=a,n.length){var o=n[n.length-1];o.sn!==t.liveEdgeSn&&(t.liveEdgeUpdated=Object(q.a)(),t.liveEdgeSn=o.sn,t.liveEdgePosition=o.start+o.duration)}},e[v]=function(e,r){var i=r.level;i!==t.currentHlsjsLevel?t.setCurrentLevel(i):t.checkAdaptation(i)},e[g]=function(e,r){var a=t.hlsjs.levels[r.frag.level],s=a?a.details:null,u=s?Object(i.m)(s.fragments,(function(t){return t.sn===r.frag.sn})):null;if(r.samples)for(var l=0;l<r.samples.length;l++){var c=r.samples[l],d=c.unit,h=c.data,f=c.pts,p=d||h;if(!p){lt("No cue samples found in ".concat(g," event data"));break}var v=o(p).cues;if(!v)return void lt("No cues found in ID3 byte array");var y=Object(n.a)(v);if(!y)return void lt("No metadata found in the ID3 cues");if(!s){if(y.PRIV&&"com.apple.streaming.transportStreamTimestamp"in y.PRIV)return;return void lt("No matching level found for ID3 metadata")}if(!u)return void lt("No matching fragment found for ID3 level");var m=Math.max(f,0),b=Object(i.A)(u.endPTS)?u.endPTS:u.start+u.duration,T=t.createCue(m,b,JSON.stringify(Object(i.k)({metadataType:"id3"},y)));t.addVTTCue({type:"metadata",cue:T})&&t.trigger(Y.L,{metadataType:"id3",metadataTime:m,metadata:y})}},e[y]=function(){t.connectionTimeout&&t.stopConnectionTimeout(),t.atEdgeOfLiveStream()||t.stopStaleTimeout(),t.recoveringNetworkError&&(t.resetRecovery(),t.recoveringNetworkError=!1)},e[M]=function(e,r){if(!r.audio||!t.videoFound){var i=r.video?"video":"audio";t.videoFound=t.videoFound||"video"===i,t.trigger(Y.T,{mediaType:i})}};var r=function(e,r,i){var n=function(t,e,r){var i=V(r,"startPTS"),n=null===i?V(r,"start"):i;if(null===n)return null;switch(t){case"PROGRAM-DATE-TIME":return{metadataType:"program-date-time",programDateTime:e,start:n,end:n+V(r,"duration")};case"EXT-X-DATERANGE":var a={},o=e.split(",").map((function(t){var e=t.split("="),r=e[0],i=(e[1]||"").replace(/^"|"$/g,"");return a[r]=i,{name:r,value:i}})),s=a["START-DATE"],u=a["END-DATE"],l=n;r.programDateTime&&(l+=(new Date(s)-new Date(r.programDateTime))/1e3);var c=parseFloat(a["PLANNED-DURATION"]||a.DURATION)||0;return!c&&u&&(c=(new Date(u)-new Date(s))/1e3),{metadataType:"date-range",tag:t,content:e,attributes:o,start:l,end:l+c,startDate:s,endDate:u,duration:c};case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT":return{metadataType:"scte-35",tag:t,content:e,start:n,end:n+(parseFloat(e)||0)};case"DISCONTINUITY":var d=n+V(r,"duration");return{metadataType:"discontinuity",tag:t,discontinuitySequence:r.cc,PTS:e,start:n,end:d};default:return null}}(e,r,i);if(n){var a=t.createCue(n.start,n.end,JSON.stringify(n)),o="".concat(i.sn,"_").concat(e,"_").concat(r);if(t.addVTTCue({type:"metadata",cue:a},o)){var s=n.metadataType;delete n.metadataType,t.trigger(Y.L,{metadataType:s,metadata:n})}}};return e[F]=function(t,e){var i=e.frag;(i.tagList||[]).forEach((function(t){var e=Z(t,2),n=e[0],a=e[1];return r(n,a,i)}))},e[N]=function(t,e){var i=e.frag,n=e.initPTS;r("DISCONTINUITY",n,i)},this.renderNatively||(e[U]=function(e,r){t.addTextTracks(r.tracks)},e[B]=function(e,r){r&&r.cues&&r.cues.forEach((function(e){t.addVTTCue({type:r.type,cue:e,track:r.track})}))}),e[j]=function(e,r){var n=r.audioTracks,a=t.hlsjs.levels,o=t.getCurrentHlsjsLevel();n&&n.length&&(t.currentAudioTrackIndex=null,t.audioTracksMap=function(t){return Object(i.G)(t,(function(t,e,r){var i=e.groupId;return t[i]=t[i]||[],t[i].push({autoselect:e.autoselect,defaulttrack:e.default,groupid:i,language:e.lang,name:e.name,hlsjsIndex:r}),t}),{})}(n),t.updateAudioTrack(a[o]))},e[G]=function(e,r){var i=ht(r),n=r.type,a=i.key;if(lt(i),"DVR"===t.streamType&&n===ut){var o=t.getSeekRange();t.updateDvrPosition(o)}if(i.suppressLevel){var s=r.context||r,u=s.level,l=s.urlId,c=void 0===l?0:l;return t.hlsjs.removeLevel(u,c),t.hlsjs.levels.length?(t.jwLevels=d(t.hlsjs.levels,t.jwConfig.qualityLabels),t.hlsjs.currentLevel=0,t.hlsjs.currentLevel=-1,void t.trigger(Y.I,{levels:t.jwLevels,currentQuality:0})):void t.handleError(i.code,r,a)}if(i.fatal){var h=Object(q.a)();i.recoverable&&(n===ut||n===ot)&&t.retryCount<t.maxRetries?h>=t.lastRecoveryTime+t.recoveryInterval?(lt("Attempting to recover, retry count:",t.retryCount),n===ut?(t.recoveringNetworkError=!0,/^manifest/.test(r.details)?(t.hlsjs.stopLoad(),t.hlsjs.loadSource(t.src)):t.hlsjs.startLoad()):n===ot&&(t.recoveringMediaError=!0,t.hlsjs.recoverMediaError()),t.retryCount+=1,t.lastRecoveryTime=h):lt("Recovery not attempted - too little time between attempts",h-t.lastRecoveryTime):t.handleError(i.code,r,a)}},e}},{key:"eventsOn_",value:function(){var t=this.bandwidthMonitor;this.eventHandler.on(),t.start()}},{key:"eventsOff_",value:function(){var t=this.bandwidthMonitor,e=this.eventHandler,r=this.hlsjs;r&&(this.disableTextTrack(),this.lastPosition=this.video.currentTime,r.detachMedia(),e.off()),this.off(null,null,this),t.stop(),this.resetLifecycleVariables()}},{key:"handleError",value:function(t,e,r){this.resetLifecycleVariables(),this.trigger(Y.G,new S.s(r,t,e))}},{key:"destroy",value:function(){this.hlsjs&&(this.eventsOff_(),this.hlsjs.destroy(),this.hlsjs=null)}},{key:"stopStaleTimeout",value:function(){clearTimeout(this.staleManifestTimeout),this.staleManifestTimeout=null}},{key:"startConnectionTimeout",value:function(){var t=this;this.connectionTimeout||(this.connectionTimeout=setTimeout((function(){!1===navigator.onLine?t.handleError(k,null,S.l):t.hlsjs.startLoad()}),this.connectionTimeoutDuration))}},{key:"stopConnectionTimeout",value:function(){clearTimeout(this.connectionTimeout),this.connectionTimeout=null}},{key:"restoreVideoProperties",value:function(){this.savedVideoProperties&&(this.volume(this.jwConfig.volume),this.mute(this.jwConfig.mute),this.savedVideoProperties=!1)}},{key:"resetRecovery",value:function(){this.retryCount=0}},{key:"checkStaleManifest",value:function(t,e,r){var i=this,n=null!==this.jwConfig.liveTimeout?this.jwConfig.liveTimeout:this.staleManifestDurationMultiplier*r;0!==n&&(e&&this.lastEndSn===t?this.staleManifestTimeout||(this.staleManifestTimeout=setTimeout((function(){i.checkStreamEnded()}),n)):this.stopStaleTimeout(),this.lastEndSn=t,this.live=e)}},{key:"checkStreamEnded",value:function(){this.hlsjs&&(this.video.ended||this.atEdgeOfLiveStream())&&(this.hlsjs.stopLoad(),this.handleError(R,null,S.p))}},{key:"resetLifecycleVariables",value:function(){this.resetRecovery(),this.stopStaleTimeout(),this.stopConnectionTimeout(),this.streamBitrate=-1,this.videoFound=!1,this.videoHeight=0,this.src=null,this.currentHlsjsLevel=null,this.currentJwItem=null,this.jwLevels=null,this.lastRecoveryTime=null,this.lastEndSn=null,this.levelDuration=0,this.live=!1,this.liveEdgePosition=null,this.liveEdgeUpdated=0,this.liveEdgeSn=-1,this.livePaused=!1,this.recoveringMediaError=!1,this.recoveringNetworkError=!1,this.staleManifestTimeout=null,this.streamType="VOD"}},{key:"setCurrentLevel",value:function(t){this.currentHlsjsLevel=t,this.checkAdaptation(t),this.updateAudioTrack(this.hlsjs.levels[t])}},{key:"_clearNonNativeCues",value:function(){var t=this;!this.renderNatively&&this._textTracks&&this._textTracks.forEach((function(e){t.clearCueData(e._id)}))}},{key:"maxBufferLength",set:function(t){this.hlsjs&&(this.hlsjs.config.maxMaxBufferLength=t)}}])&&tt(_.prototype,w),A&&tt(_,A),E}(K)}r.d(e,"a",(function(){return at}));var ot,st=function(){return{name:"hlsjs"}},ut=window.jwplayer&&window.jwplayer.debug,lt=(ot="warn",ut?console[ot].bind(console):function(){}),ct=function(t){return!(!b.OS.iOS&&!b.Browser.safari)||b.Browser.chrome&&t},dt=function(t,e,r){var i=t.sources[0];return void 0!==i[r]?i[r]:void 0!==t[r]?t[r]:e[r]}},149:function(t,e){var r,i;r=window,i=function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=14)}([function(t,e,r){"use strict";r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return c}));var i=r(5),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(){}var o={trace:a,debug:a,log:a,warn:a,info:a,error:a},s=o,u=Object(i.a)(),l=function(t){if(!0===t||"object"===(void 0===t?"undefined":n(t))){!function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];r.forEach((function(e){s[e]=t[e]?t[e].bind(t):function(t){var e=u.console[t];return e?function(){for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];i[0]&&(i[0]=function(t,e){return"["+t+"] > "+e}(t,i[0])),e.apply(u.console,i)}:a}(e)}))}(t,"debug","log","info","warn","error");try{s.log()}catch(t){s=o}}else s=o},c=s},function(t,e,r){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACKS_CLEARED:"hlsSubtitleTracksCleared",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return n}));var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},n={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_EMPTY_ERROR:"levelEmptyError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var i=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},function(t,e,r){"use strict";r.d(e,"b",(function(){return n}));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,r){for(var i=r,n=0;t.isHeader(e,r);)n+=10,n+=t._readSize(e,r+6),t.isFooter(e,r+10)&&(n+=10),r+=n;if(n>0)return e.subarray(i,i+n)},t._readSize=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,(r|=(127&t[e+2])<<7)|127&t[e+3]},t.getTimeStamp=function(e){for(var r=t.getID3Frames(e),i=0;i<r.length;i++){var n=r[i];if(t.isTimeStampFrame(n))return t._readTimeStamp(n)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var r=String.fromCharCode(e[0],e[1],e[2],e[3]),i=t._readSize(e,4);return{type:r,size:i,data:e.subarray(10,10+i)}},t.getID3Frames=function(e){for(var r=0,i=[];t.isHeader(e,r);){for(var n=t._readSize(e,r+6),a=(r+=10)+n;r+8<a;){var o=t._getFrameData(e.subarray(r)),s=t._decodeFrame(o);s&&i.push(s),r+=o.size+10}t.isFooter(e,r)&&(r+=10)}return i},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var r=t._utf8ArrayToStr(e.data,!0),i=new Uint8Array(e.data.subarray(r.length+1));return{key:e.type,info:r,data:i.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var r=1,i=t._utf8ArrayToStr(e.data.subarray(r));r+=i.length+1;var n=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:i,data:n}}var a=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:a}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var r=1,i=t._utf8ArrayToStr(e.data.subarray(r));r+=i.length+1;var n=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:i,data:n}}var a=t._utf8ArrayToStr(e.data);return{key:e.type,data:a}},t._utf8ArrayToStr=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.length,i=void 0,n=void 0,a=void 0,o="",s=0;s<r;){if(0===(i=t[s++])&&e)return o;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:n=t[s++],o+=String.fromCharCode((31&i)<<6|63&n);break;case 14:n=t[s++],a=t[s++],o+=String.fromCharCode((15&i)<<12|(63&n)<<6|(63&a)<<0)}}return o},t}(),n=i._utf8ArrayToStr;e.a=i},function(t,e,r){"use strict";function i(){return"undefined"==typeof window?self:window}r.d(e,"a",(function(){return i}))},function(t,e,r){var i,n,a,o,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=s.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var u=n.exec(o.path);o.netLoc=u[1],o.path=u[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=s.normalizePath(d)}else l.path=o.path,a.params||(l.params=o.params,a.query||(l.query=o.query));return null===l.path&&(l.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(l)},parseURL:function(t){var e=i.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s},function(t,e,r){"use strict";var i=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subtle=e,this.aesIV=r}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),n=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subtle=e,this.key=r}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),i=0;i<4;i++)r[i]=e.getUint32(4*i);return r},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,i=r[0],n=r[1],a=r[2],o=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,v=0;for(v=0;v<256;v++)h[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,t[f]=g,e[g]=f;var y=h[f],m=h[y],b=h[m],T=257*h[g]^16843008*g;i[f]=T<<24|T>>>8,n[f]=T<<16|T>>>16,a[f]=T<<8|T>>>24,o[f]=T,T=16843009*b^65537*m^257*y^16843008*f,u[g]=T<<24|T>>>8,l[g]=T<<16|T>>>16,c[g]=T<<8|T>>>24,d[g]=T,f?(f=y^h[h[h[b^y]]],p^=h[h[p]]):f=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,i=0;i<e.length&&r;)r=e[i]===this.key[i],i++;if(!r){this.key=e;var n=this.keySize=e.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var a=this.ksRows=4*(n+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(a),l=this.invKeySchedule=new Uint32Array(a),c=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],v=h[2],g=h[3],y=void 0,m=void 0;for(o=0;o<a;o++)o<n?y=u[o]=e[o]:(m=y,o%n==0?(m=c[(m=m<<8|m>>>24)>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m],m^=d[o/n|0]<<24):n>6&&o%n==4&&(m=c[m>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m]),u[o]=y=(u[o-n]^m)>>>0);for(s=0;s<a;s++)o=a-s,m=3&s?u[o]:u[o-4],l[s]=s<4||o<=4?m:f[c[m>>>24]]^p[c[m>>>16&255]]^v[c[m>>>8&255]]^g[c[255&m]],l[s]=l[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,r,i){for(var n,a,o,s=this.keySize+6,u=this.invKeySchedule,l=this.invSBox,c=this.invSubMix,d=c[0],h=c[1],f=c[2],p=c[3],v=this.uint8ArrayToUint32Array_(r),g=v[0],y=v[1],m=v[2],b=v[3],T=new Int32Array(t),E=new Int32Array(T.length),S=void 0,_=void 0,R=void 0,w=void 0,k=void 0,A=void 0,L=void 0,O=void 0,D=void 0,I=void 0,C=void 0,x=void 0,P=void 0,M=void 0,F=this.networkToHostOrderSwap;e<T.length;){for(D=F(T[e]),I=F(T[e+1]),C=F(T[e+2]),x=F(T[e+3]),k=D^u[0],A=x^u[1],L=C^u[2],O=I^u[3],P=4,M=1;M<s;M++)S=d[k>>>24]^h[A>>16&255]^f[L>>8&255]^p[255&O]^u[P],_=d[A>>>24]^h[L>>16&255]^f[O>>8&255]^p[255&k]^u[P+1],R=d[L>>>24]^h[O>>16&255]^f[k>>8&255]^p[255&A]^u[P+2],w=d[O>>>24]^h[k>>16&255]^f[A>>8&255]^p[255&L]^u[P+3],k=S,A=_,L=R,O=w,P+=4;S=l[k>>>24]<<24^l[A>>16&255]<<16^l[L>>8&255]<<8^l[255&O]^u[P],_=l[A>>>24]<<24^l[L>>16&255]<<16^l[O>>8&255]<<8^l[255&k]^u[P+1],R=l[L>>>24]<<24^l[O>>16&255]<<16^l[k>>8&255]<<8^l[255&A]^u[P+2],w=l[O>>>24]<<24^l[k>>16&255]<<16^l[A>>8&255]<<8^l[255&L]^u[P+3],P+=3,E[e]=F(S^g),E[e+1]=F(w^y),E[e+2]=F(R^m),E[e+3]=F(_^b),g=D,y=I,m=C,b=x,e+=4}return i?(o=(a=(n=E.buffer).byteLength)&&new DataView(n).getUint8(a-1))?n.slice(0,a-o):n:E.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=r(2),s=r(0),u=r(1),l=r(5),c=Object(l.a)(),d=function(){function t(e,r){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).removePKCS7Padding,n=void 0===i||i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logEnabled=!0,this.observer=e,this.config=r,this.removePKCS7Padding=n,n)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,r,o){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.b.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new a),l.expandKey(e),o(l.decrypt(t,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new n(c,e)),this.fastAesKey.expandKey().then((function(n){new i(c,r).decrypt(t,n).catch((function(i){u.onWebCryptoError(i,t,e,r,o)})).then((function(t){o(t)}))})).catch((function(i){u.onWebCryptoError(i,t,e,r,o)}))}},t.prototype.onWebCryptoError=function(t,e,r,i,n){this.config.enableSoftwareAES?(s.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,i,n)):(s.b.error("decrypting error : "+t.message),this.observer.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.a=d},function(t,e,r){"use strict";var i=r(1),n=r(2),a=r(7),o=r(3),s=r(0),u=r(5);function l(t,e){return 255===t[e]&&240==(246&t[e+1])}function c(t,e){return 1&t[e+1]?7:9}function d(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function h(t,e){return!!(e+1<t.length&&l(t,e))}function f(t,e){if(e+1<t.length&&l(t,e)){var r=c(t,e);e+5<t.length&&(r=d(t,e));var i=e+r;if(i===t.length||i+1<t.length&&l(t,i))return!0}return!1}function p(t,e,r,a,o){if(!t.samplerate){var u=function(t,e,r,a){var o,u=void 0,l=void 0,c=void 0,d=void 0,h=navigator.userAgent.toLowerCase(),f=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(u=1+((192&e[r+2])>>>6),!((o=(60&e[r+2])>>>2)>p.length-1))return c=(1&e[r+2])<<2,c|=(192&e[r+3])>>>6,s.b.log("manifest codec:"+a+",ADTS data:type:"+u+",sampleingIndex:"+o+"["+p[o]+"Hz],channelConfig:"+c),/firefox/i.test(h)?o>=6?(u=5,d=new Array(4),l=o-3):(u=2,d=new Array(2),l=o):-1!==h.indexOf("android")?(u=2,d=new Array(2),l=o):(u=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&o>=6?l=o-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(o>=6&&1===c||/vivaldi/i.test(h))||!a&&1===c)&&(u=2,d=new Array(2)),l=o)),d[0]=u<<3,d[0]|=(14&o)>>1,d[1]|=(1&o)<<7,d[1]|=c<<3,5===u&&(d[1]|=(14&l)>>1,d[2]=(1&l)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[o],channelCount:c,codec:"mp4a.40."+u,manifestCodec:f};t.trigger(i.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o})}(e,r,a,o);t.config=u.config,t.samplerate=u.samplerate,t.channelCount=u.channelCount,t.codec=u.codec,t.manifestCodec=u.manifestCodec,s.b.log("parsed codec:"+t.codec+",rate:"+u.samplerate+",nb channel:"+u.channelCount)}}function v(t){return 9216e4/t}function g(t,e,r,i,n){var a=function(t,e,r,i,n){var a,o=void 0,s=t.length;if(a=c(t,e),o=d(t,e),(o-=a)>0&&e+a+o<=s)return{headerLength:a,frameLength:o,stamp:r+i*n}}(e,r,i,n,v(t.samplerate));if(a){var o=a.stamp,s=a.headerLength,u=a.frameLength,l={unit:e.subarray(r+s,r+s+u),pts:o,dts:o};return t.samples.push(l),t.len+=u,{sample:l,length:u+s}}}var y=r(4),m=function(){function t(e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.config=i,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(y.a.getID3Data(t,0)||[]).length,r=t.length;e<r;e++)if(f(t,e))return s.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var n=this._audioTrack,a=y.a.getID3Data(t,0)||[],u=y.a.getTimeStamp(a),l=Object(o.a)(u)?90*u:9e4*e,c=0,d=l,f=t.length,v=a.length,m=[{pts:d,dts:d,data:a}];v<f-1;)if(h(t,v)&&v+5<f){p(n,this.observer,t,v,n.manifestCodec);var b=g(n,t,v,l,c);if(!b){s.b.log("Unable to parse AAC frame");break}v+=b.length,d=b.sample.pts,c++}else y.a.isHeader(t,v)?(a=y.a.getID3Data(t,v),m.push({pts:d,dts:d,data:a}),v+=a.length):v++;this.remuxer.remux(n,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},t}(),b=r(9),T={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,i,n){if(!(r+24>e.length)){var a=this.parseHeader(e,r);if(a&&r+a.frameLength<=e.length){var o=i+n*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:e.subarray(r,r+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(s),t.len+=a.frameLength,{sample:s,length:a.frameLength}}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,n=t[e+2]>>4&15,a=t[e+2]>>2&3,o=t[e+2]>>1&1;if(1!==r&&0!==n&&15!==n&&3!==a){var s=3===r?3-i:3===i?3:4,u=1e3*T.BitratesMap[14*s+n-1],l=3===r?0:2===r?1:2,c=T.SamplingRateMap[3*l+a],d=t[e+3]>>6==3?1:2,h=T.SamplesCoefficients[r][i],f=T.BytesInSlot[i],p=8*h*f;return{sampleRate:c,channelCount:d,frameLength:parseInt(h*u/c+o,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=this.parseHeader(t,e),i=4;r&&r.frameLength&&(i=r.frameLength);var n=e+i;if(n===t.length||n+1<t.length&&this.isHeaderPattern(t,n))return!0}return!1}},E=T,S=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,i=new Uint8Array(4),n=Math.min(4,e);if(0===n)throw new Error("no bytes available");i.set(t.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},t.prototype.skipBits=function(t){var e=void 0;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&s.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},t.prototype.skipLZ=function(){var t=void 0;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e=8,r=8,i=void 0;for(i=0;i<t;i++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r},t.prototype.readSPS=function(){var t,e,r,i,n=0,a=0,o=0,s=0,u=void 0,l=void 0,c=void 0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),y=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(d(),t=d(),h(5),v(3),d(),y(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=f();if(3===b&&v(1),y(),y(),v(1),p())for(l=3!==b?8:12,c=0;c<l;c++)p()&&m(c<6?16:64)}y();var T=f();if(0===T)f();else if(1===T)for(v(1),g(),g(),u=f(),c=0;c<u;c++)g();y(),v(1),e=f(),r=f(),0===(i=h(1))&&v(1),v(1),p()&&(n=f(),a=f(),o=f(),s=f());var E=[1,1];if(p()&&p())switch(d()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(e+1)-2*n-2*a),height:(2-i)*(r+1)*16-(i?2:4)*(o+s),pixelRatio:E}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),_=function(){function t(e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.decryptdata=i,this.discardEPB=n,this.decrypter=new a.a(e,r,{removePKCS7Padding:!1})}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,r,i){var n=t[e].unit,a=n.subarray(16,n.length-n.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),n.set(a,16),i||s.decryptAacSamples(t,e+1,r)}))},t.prototype.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,i),!i)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),i=0,n=32;n<=t.length-16;n+=160,i+=16)r.set(t.subarray(n,n+16),i);return r},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,i=32;i<=t.length-16;i+=160,r+=16)t.set(e.subarray(r,r+16),i);return t},t.prototype.decryptAvcSample=function(t,e,r,i,n,a){var o=this.discardEPB(n.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,(function(s){n.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(t,e,r+1,i)}))},t.prototype.decryptAvcSamples=function(t,e,r,i){for(;;e++,r=0){if(e>=t.length)return void i();for(var n=t[e].units;!(r>=n.length);r++){var a=n[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,i,a,o),!o)return}}}},t}(),R={video:1,audio:2,id3:3,text:4},w=function(){function t(e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.config=i,this.typeSupported=n,this.remuxer=r,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new _(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var r=t._syncOffset(e);return!(r<0||(r&&s.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:R[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,r,i,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",n),this._audioTrack=t.createTrack("audio",n),this._id3Track=t.createTrack("id3",n),this._txtTrack=t.createTrack("text",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=i,this._duration=n},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,r,a,o){var u=void 0,l=e.length,c=void 0,d=void 0,h=void 0,f=void 0,p=!1;this.contiguous=a;var v=this.pmtParsed,g=this._avcTrack,y=this._audioTrack,m=this._id3Track,b=g.pid,T=y.pid,E=m.pid,S=this._pmtId,_=g.pesData,R=y.pesData,w=m.pesData,k=this._parsePAT,A=this._parsePMT,L=this._parsePES,O=this._parseAVCPES.bind(this),D=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),C=this._parseID3PES.bind(this),x=t._syncOffset(e);for(l-=(l+x)%188,u=x;u<l;u+=188)if(71===e[u]){if(c=!!(64&e[u+1]),d=((31&e[u+1])<<8)+e[u+2],(48&e[u+3])>>4>1){if((h=u+5+e[u+4])===u+188)continue}else h=u+4;switch(d){case b:c&&(_&&(f=L(_))&&void 0!==f.pts&&O(f,!1),_={data:[],size:0}),_&&(_.data.push(e.subarray(h,u+188)),_.size+=u+188-h);break;case T:c&&(R&&(f=L(R))&&void 0!==f.pts&&(y.isAAC?D(f):I(f)),R={data:[],size:0}),R&&(R.data.push(e.subarray(h,u+188)),R.size+=u+188-h);break;case E:c&&(w&&(f=L(w))&&void 0!==f.pts&&C(f),w={data:[],size:0}),w&&(w.data.push(e.subarray(h,u+188)),w.size+=u+188-h);break;case 0:c&&(h+=e[h]+1),S=this._pmtId=k(e,h);break;case S:c&&(h+=e[h]+1);var P=A(e,h,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=P.avc)>0&&(g.pid=b),(T=P.audio)>0&&(y.pid=T,y.isAAC=P.isAAC),(E=P.id3)>0&&(m.pid=E),p&&!v&&(s.b.log("reparse from beginning"),p=!1,u=x-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(i.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});_&&(f=L(_))&&void 0!==f.pts?(O(f,!0),g.pesData=null):g.pesData=_,R&&(f=L(R))&&void 0!==f.pts?(y.isAAC?D(f):I(f),y.pesData=null):(R&&R.size&&s.b.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=R),w&&(f=L(w))&&void 0!==f.pts?(C(f),m.pesData=null):m.pesData=w,null==this.sampleAes?this.remuxer.remux(y,g,m,this._txtTrack,r,a,o):this.decryptAndRemux(y,g,m,this._txtTrack,r,a,o)},t.prototype.decryptAndRemux=function(t,e,r,i,n,a,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,(function(){s.decryptAndRemuxAvc(t,e,r,i,n,a,o)}))}else this.decryptAndRemuxAvc(t,e,r,i,n,a,o)},t.prototype.decryptAndRemuxAvc=function(t,e,r,i,n,a,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,(function(){s.remuxer.remux(t,e,r,i,n,a,o)}))}else this.remuxer.remux(t,e,r,i,n,a,o)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,r,i){var n,a=void 0,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<n;){switch(a=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!i){s.b.log("unkown stream type:"+t[e]);break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!i){s.b.log("unkown stream type:"+t[e]);break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:r?-1===o.audio&&(o.audio=a,o.isAAC=!1):s.b.log("MPEG audio found, not supported in this browser for now");break;case 36:s.b.warn("HEVC stream type found, not supported for now");break;default:s.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return o},t.prototype._parsePES=function(t){var e=0,r=void 0,i=void 0,n=void 0,a=void 0,o=void 0,u=void 0,l=void 0,c=void 0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(1===((r=d[0])[0]<<16)+(r[1]<<8)+r[2]){if((n=(r[4]<<8)+r[5])&&n>t.size-6)return null;192&(i=r[7])&&((u=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2)>4294967295&&(u-=8589934592),64&i?((l=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2)>4294967295&&(l-=8589934592),u-l>54e5&&(s.b.warn(Math.round((u-l)/9e4)+"s delta between PTS and DTS, align them"),u=l)):l=u),c=(a=r[8])+9,t.size-=c,o=new Uint8Array(t.size);for(var f=0,p=d.length;f<p;f++){var v=(r=d[f]).byteLength;if(c){if(c>v){c-=v;continue}r=r.subarray(c),v-=c,c=0}o.set(r,e),e+=v}return n&&(n-=a+3),{data:o,pts:u,dts:l,len:n}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var r=e.samples,i=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(i||this.contiguous)?(t.id=i,r.push(t)):e.dropped++}t.debug.length&&s.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var r=this,i=this._avcTrack,n=this._parseAVCNALu(t.data),a=void 0,o=this.avcSample,s=void 0,u=!1,l=void 0,c=this.pushAccesUnit.bind(this),d=function(t,e,r,i){return{key:t,pts:e,dts:r,units:[],debug:i}};t.data=null,o&&n.length&&!i.audFound&&(c(o,i),o=this.avcSample=d(!1,t.pts,t.dts,"")),n.forEach((function(e){switch(e.type){case 1:s=!0,o||(o=r.avcSample=d(!0,t.pts,t.dts,"")),o.frame=!0;var n=e.data;if(u&&n.length>4){var h=new S(n).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(o.key=!0)}break;case 5:s=!0,o||(o=r.avcSample=d(!0,t.pts,t.dts,"")),o.key=!0,o.frame=!0;break;case 6:s=!0,(a=new S(r.discardEPB(e.data))).readUByte();for(var f=0,p=0,v=!1,g=0;!v&&a.bytesAvailable>1;){f=0;do{f+=g=a.readUByte()}while(255===g);p=0;do{p+=g=a.readUByte()}while(255===g);if(4===f&&0!==a.bytesAvailable){if(v=!0,181===a.readUByte()&&49===a.readUShort()&&1195456820===a.readUInt()&&3===a.readUByte()){var y=a.readUByte(),m=31&y,b=[y,a.readUByte()];for(l=0;l<m;l++)b.push(a.readUByte()),b.push(a.readUByte()),b.push(a.readUByte());r._insertSampleInOrder(r._txtTrack.samples,{type:3,pts:t.pts,bytes:b})}}else if(p<a.bytesAvailable)for(l=0;l<p;l++)a.readUByte()}break;case 7:if(s=!0,u=!0,!i.sps){var T=(a=new S(e.data)).readSPS();i.width=T.width,i.height=T.height,i.pixelRatio=T.pixelRatio,i.sps=[e.data],i.duration=r._duration;var E=e.data.subarray(1,4),_="avc1.";for(l=0;l<3;l++){var R=E[l].toString(16);R.length<2&&(R="0"+R),_+=R}i.codec=_}break;case 8:s=!0,i.pps||(i.pps=[e.data]);break;case 9:s=!1,i.audFound=!0,o&&c(o,i),o=r.avcSample=d(!1,t.pts,t.dts,"");break;case 12:s=!1;break;default:s=!1,o&&(o.debug+="unknown NAL "+e.type+" ")}o&&s&&o.units.push(e)})),e&&o&&(c(o,i),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var i=r-1;i>=0;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e=0,r=t.byteLength,i=void 0,n=void 0,a=this._avcTrack,o=a.naluState||0,s=o,u=[],l=void 0,c=-1,d=void 0;for(-1===o&&(c=0,d=31&t[0],o=0,e=1);e<r;)if(i=t[e++],o)if(1!==o)if(i)if(1===i){if(c>=0)l={data:t.subarray(c,e-o-1),type:d},u.push(l);else{var h=this._getLastNalUnit();if(h&&(s&&e<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),(n=e-o-1)>0)){var f=new Uint8Array(h.data.byteLength+n);f.set(h.data,0),f.set(t.subarray(0,n),h.data.byteLength),h.data=f}}e<r?(c=e,d=31&t[e],o=0):o=-1}else o=0;else o=3;else o=i?0:2;else o=i?0:1;if(c>=0&&o>=0&&(l={data:t.subarray(c,r),type:d,state:o},u.push(l)),0===u.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+t.byteLength);v.set(p.data,0),v.set(t,p.data.byteLength),p.data=v}}return a.naluState=o,u},t.prototype.discardEPB=function(t){for(var e,r=t.byteLength,i=[],n=1,a=void 0;n<r-2;)0===t[n]&&0===t[n+1]&&3===t[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return t;e=r-i.length,a=new Uint8Array(e);var o=0;for(n=0;n<e;o++,n++)o===i[0]&&(o++,i.shift()),a[n]=t[o];return a},t.prototype._parseAACPES=function(t){var e,r,a=this._audioTrack,o=t.data,u=t.pts,l=this.aacOverFlow,c=this.aacLastPTS,d=void 0,f=void 0,y=void 0;if(l){var m=new Uint8Array(l.byteLength+o.byteLength);m.set(l,0),m.set(o,l.byteLength),o=m}for(f=0,r=o.length;f<r-1&&!h(o,f);f++);if(f){var b=void 0,T=void 0;if(f<r-1?(b="AAC PES did not start with ADTS header,offset:"+f,T=!1):(b="no ADTS header found in AAC PES",T=!0),s.b.warn("parsing error:"+b),this.observer.trigger(i.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:T,reason:b}),T)return}if(p(a,this.observer,o,f,this.audioCodec),d=0,e=v(a.samplerate),l&&c){var E=c+e;Math.abs(E-u)>1&&(s.b.log("AAC: align PTS for overlapping frames by "+Math.round((E-u)/90)),u=E)}for(;f<r;)if(h(o,f)&&f+5<r){var S=g(a,o,f,u,d);if(!S)break;f+=S.length,y=S.sample.pts,d++}else f++;l=f<r?o.subarray(f,r):null,this.aacOverFlow=l,this.aacLastPTS=y},t.prototype._parseMPEGPES=function(t){for(var e=t.data,r=e.length,i=0,n=0,a=t.pts;n<r;)if(E.isHeader(e,n)){var o=E.appendFrame(this._audioTrack,e,n,a,i);if(!o)break;n+=o.length,i++}else n++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),k=function(){function t(e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.config=i,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e=void 0,r=void 0,i=y.a.getID3Data(t,0);if(i&&void 0!==y.a.getTimeStamp(i))for(e=i.length,r=Math.min(t.length-1,e+100);e<r;e++)if(E.probe(t,e))return s.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var n=y.a.getID3Data(t,0),a=y.a.getTimeStamp(n),o=a?90*a:9e4*e,s=n.length,u=t.length,l=0,c=0,d=this._audioTrack,h=[{pts:o,dts:o,data:n}];s<u;)if(E.isHeader(t,s)){var f=E.appendFrame(d,t,s,o,l);if(!f)break;s+=f.length,c=f.sample.pts,l++}else y.a.isHeader(t,s)?(n=y.a.getID3Data(t,s),h.push({pts:c,dts:c,data:n}),s+=n.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},t}(),A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),L=Math.pow(2,32)-1,O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e=void 0;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:i};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,u,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var e=Array.prototype.slice.call(arguments,1),r=8,i=e.length,n=i,a=void 0;i--;)r+=e[i].byteLength;for((a=new Uint8Array(r))[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=255&r,a.set(t,4),i=0,r=8;i<n;i++)a.set(e[i],r),r+=e[i].byteLength;return a},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(L+1)),n=Math.floor(r%(L+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,r))},t.moov=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(L+1)),n=Math.floor(r%(L+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var r=e.samples||[],i=new Uint8Array(4+r.length),n=void 0,a=void 0;for(a=0;a<r.length;a++)n=r[a].flags,i[a+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,i)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r=[],i=[],n=void 0,a=void 0,o=void 0;for(n=0;n<e.sps.length;n++)o=(a=e.sps[n]).byteLength,r.push(o>>>8&255),r.push(255&o),r=r.concat(Array.prototype.slice.call(a));for(n=0;n<e.pps.length;n++)o=(a=e.pps[n]).byteLength,i.push(o>>>8&255),i.push(255&o),i=i.concat(Array.prototype.slice.call(a));var s=t.box(t.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(i))),u=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,n=e.width,a=e.height,o=Math.floor(i/(L+1)),s=Math.floor(i%(L+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),n=e.id,a=Math.floor(r/(L+1)),o=Math.floor(r%(L+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var i=e.samples||[],n=i.length,a=12+16*n,o=new Uint8Array(a),s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0;for(r+=8+a,o.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),s=0;s<n;s++)l=(u=i[s]).duration,c=u.size,d=u.flags,h=u.cts,o.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,61440&d.degradPrio,15&d.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*s);return t.box(t.types.trun,o)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),i=void 0;return(i=new Uint8Array(t.FTYP.byteLength+r.byteLength)).set(t.FTYP),i.set(r,t.FTYP.byteLength),i},t}(),D=function(){function t(e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.config=r,this.typeSupported=i;var a=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,r,n,a,o,u){if(this.ISGenerated||this.generateIS(t,e,a),this.ISGenerated){var l=t.samples.length,c=e.samples.length,d=a,h=a;if(l&&c){var f=(t.samples[0].pts-e.samples[0].pts)/e.inputTimeScale;d+=Math.max(0,f),h+=Math.max(0,-f)}if(l){t.timescale||(s.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,a));var p=this.remuxAudio(t,d,o,u);if(c){var v=void 0;p&&(v=p.endPTS-p.startPTS),e.timescale||(s.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,a)),this.remuxVideo(e,h,o,v,u)}}else if(c){var g=this.remuxVideo(e,h,o,0,u);g&&t.codec&&this.remuxEmptyAudio(t,d,o,g)}}r.samples.length&&this.remuxID3(r,a),n.samples.length&&this.remuxText(n,a),this.observer.trigger(i.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,r){var a=this.observer,o=t.samples,u=e.samples,l=this.typeSupported,c="audio/mp4",d={},h={tracks:d},f=void 0===this._initPTS,p=void 0,v=void 0;if(f&&(p=v=1/0),t.config&&o.length&&(t.timescale=t.samplerate,s.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(c="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),d.audio={container:c,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:O.initSegment([t]),metadata:{channelCount:t.channelCount}},f&&(p=v=o[0].pts-t.inputTimeScale*r)),e.sps&&e.pps&&u.length){var g=e.inputTimeScale;e.timescale=g,d.video={container:"video/mp4",codec:e.codec,initSegment:O.initSegment([e]),metadata:{width:e.width,height:e.height}},f&&(p=Math.min(p,u[0].pts-g*r),v=Math.min(v,u[0].dts-g*r),this.observer.trigger(i.a.INIT_PTS_FOUND,{initPTS:p}))}Object.keys(d).length?(a.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,f&&(this._initPTS=p,this._initDTS=v)):a.trigger(i.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,r,a,o){var u,l,c,d=8,h=void 0,f=void 0,p=void 0,v=void 0,g=t.timescale,y=t.samples,m=[],b=y.length,T=this._PTSNormalize,E=this._initPTS,S=this.nextAvcDts,_=this.isSafari;if(0!==b){_&&(r|=y.length&&S&&(o&&Math.abs(e-S/g)<.1||Math.abs(y[0].pts-S-E)<g/5)),r||(S=e*g),y.forEach((function(t){t.pts=T(t.pts-E,S),t.dts=T(t.dts-E,S)})),y.sort((function(t,e){var r=t.dts-e.dts,i=t.pts-e.pts;return r||i||t.id-e.id}));var R=y.reduce((function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)}),0);if(R<0){s.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(R/90)+" ms to overcome this issue");for(var w=0;w<y.length;w++)y[w].dts+=R}var k=y[0];v=Math.max(k.dts,0),p=Math.max(k.pts,0);var A=Math.round((v-S)/90);r&&A&&(A>1?s.b.log("AVC:"+A+" ms hole between fragments detected,filling it"):A<-1&&s.b.log("AVC:"+-A+" ms overlapping between fragments detected"),v=S,y[0].dts=v,p=Math.max(p-A,S),y[0].pts=p,s.b.log("Video/PTS/DTS adjusted: "+Math.round(p/90)+"/"+Math.round(v/90)+",delta:"+A+" ms")),k=y[y.length-1],c=Math.max(k.dts,0),l=Math.max(k.pts,0,c),_&&(h=Math.round((c-v)/(y.length-1)));for(var L=0,D=0,I=0;I<b;I++){for(var C=y[I],x=C.units,P=x.length,M=0,F=0;F<P;F++)M+=x[F].data.length;D+=M,L+=P,C.length=M,C.dts=_?v+I*h:Math.max(C.dts,v),C.pts=Math.max(C.pts,C.dts)}var N=D+4*L+8;try{f=new Uint8Array(N)}catch(t){return void this.observer.trigger(i.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var U=new DataView(f.buffer);U.setUint32(0,N),f.set(O.types.mdat,4);for(var B=0;B<b;B++){for(var j=y[B],G=j.units,K=0,H=void 0,V=0,W=G.length;V<W;V++){var Y=G[V],q=Y.data,X=Y.data.byteLength;U.setUint32(d,X),d+=4,f.set(q,d),d+=X,K+=4+X}if(_)H=Math.max(0,h*Math.round((j.pts-j.dts)/h));else{if(B<b-1)h=y[B+1].dts-j.dts;else{var z=this.config,J=j.dts-y[B>0?B-1:B].dts;if(z.stretchShortVideoTrack){var Q=z.maxBufferHole,$=Math.floor(Q*g),Z=(a?p+a*g:this.nextAudioPts)-j.pts;Z>$?((h=Z-J)<0&&(h=J),s.b.log("It is approximately "+Z/90+" ms to the next segment; using duration "+h/90+" ms for the last video frame.")):h=J}else h=J}H=Math.round(j.pts-j.dts)}m.push({size:K,duration:h,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=c+h;var tt=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,m.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var et=m[0].flags;et.dependsOn=2,et.isNonSync=0}t.samples=m,u=O.moof(t.sequenceNumber++,v,t),t.samples=[];var rt={data1:u,data2:f,startPTS:p/g,endPTS:(l+h)/g,startDTS:v/g,endDTS:this.nextAvcDts/g,type:"video",hasAudio:!1,hasVideo:!0,nb:m.length,dropped:tt};return this.observer.trigger(i.a.FRAG_PARSING_DATA,rt),rt}},t.prototype.remuxAudio=function(t,e,r,a){var o=t.inputTimeScale,u=t.timescale,l=o/u,c=(t.isAAC?1024:1152)*l,d=this._PTSNormalize,h=this._initPTS,f=!t.isAAC&&this.typeSupported.mpeg,p=void 0,v=void 0,g=void 0,y=void 0,m=void 0,b=void 0,T=void 0,E=t.samples,S=[],_=this.nextAudioPts;if(r|=E.length&&_&&(a&&Math.abs(e-_/o)<.1||Math.abs(E[0].pts-_-h)<20*c),E.forEach((function(t){t.pts=t.dts=d(t.pts-h,e*o)})),0!==(E=E.filter((function(t){return t.pts>=0}))).length){if(r||(_=a?e*o:E[0].pts),t.isAAC)for(var R=this.config.maxAudioFramesDrift,w=0,k=_;w<E.length;){var L,D=E[w];L=D.pts-k;var I=Math.abs(1e3*L/o);if(L<=-R*c)s.b.warn("Dropping 1 audio frame @ "+(k/o).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),E.splice(w,1),t.len-=D.unit.length;else if(L>=R*c&&I<1e4&&k){var C=Math.round(L/c);s.b.warn("Injecting "+C+" audio frame @ "+(k/o).toFixed(3)+"s due to "+Math.round(1e3*L/o)+" ms gap.");for(var x=0;x<C;x++){var P=Math.max(k,0);(g=A.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),g=D.unit.subarray()),E.splice(w,0,{unit:g,pts:P,dts:P}),t.len+=g.length,k+=c,w++}D.pts=D.dts=k,k+=c,w++}else Math.abs(L),D.pts=D.dts=k,k+=c,w++}for(var M=0,F=E.length;M<F;M++){var N=E[M],U=N.unit,B=N.pts;if(void 0!==T)v.duration=Math.round((B-T)/l);else{var j=Math.round(1e3*(B-_)/o),G=0;if(r&&t.isAAC&&j){if(j>0&&j<1e4)G=Math.round((B-_)/c),s.b.log(j+" ms hole between AAC samples detected,filling it"),G>0&&((g=A.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(g=U.subarray()),t.len+=G*g.length);else if(j<-12){s.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(_/o).toFixed(3)+"s/"+(B/o).toFixed(3)+"s/"+-j+"ms"),t.len-=U.byteLength;continue}B=_}if(b=B,!(t.len>0))return;var K=f?t.len:t.len+8;p=f?0:8;try{y=new Uint8Array(K)}catch(t){return void this.observer.trigger(i.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:K,reason:"fail allocating audio mdat "+K})}f||(new DataView(y.buffer).setUint32(0,K),y.set(O.types.mdat,4));for(var H=0;H<G;H++)(g=A.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),g=U.subarray()),y.set(g,p),p+=g.byteLength,v={size:g.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(v)}y.set(U,p);var V=U.byteLength;p+=V,v={size:V,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(v),T=B}var W=0,Y=S.length;if(Y>=2&&(W=S[Y-2].duration,v.duration=W),Y){this.nextAudioPts=_=T+l*W,t.len=0,t.samples=S,m=f?new Uint8Array:O.moof(t.sequenceNumber++,b/l,t),t.samples=[];var q=b/o,X=_/o,z={data1:m,data2:y,startPTS:q,endPTS:X,startDTS:q,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.observer.trigger(i.a.FRAG_PARSING_DATA,z),z}return null}},t.prototype.remuxEmptyAudio=function(t,e,r,i){var n=t.inputTimeScale,a=n/(t.samplerate?t.samplerate:n),o=this.nextAudioPts,u=(void 0!==o?o:i.startDTS*n)+this._initDTS,l=i.endDTS*n+this._initDTS,c=1024*a,d=Math.ceil((l-u)/c),h=A.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(s.b.warn("remux empty Audio"),h){for(var f=[],p=0;p<d;p++){var v=u+p*c;f.push({unit:h,pts:v,dts:v}),t.len+=h.length}t.samples=f,this.remuxAudio(t,e,r)}else s.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.prototype.remuxID3=function(t){var e=t.samples.length,r=void 0,n=t.inputTimeScale,a=this._initPTS,o=this._initDTS;if(e){for(var s=0;s<e;s++)(r=t.samples[s]).pts=(r.pts-a)/n,r.dts=(r.dts-o)/n;this.observer.trigger(i.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},t.prototype.remuxText=function(t){t.samples.sort((function(t,e){return t.pts-e.pts}));var e=t.samples.length,r=void 0,n=t.inputTimeScale,a=this._initPTS;if(e){for(var o=0;o<e;o++)(r=t.samples[o]).pts=(r.pts-a)/n;this.observer.trigger(i.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},t.prototype._PTSNormalize=function(t,e){var r;if(void 0===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t},t}(),I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,r,n,a,o,s,u){var l=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),l.trigger(i.a.FRAG_PARSING_DATA,{data1:u,startPTS:a,startDTS:a,type:c,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),l.trigger(i.a.FRAG_PARSED)},t}(),C=Object(u.a)(),x=void 0;try{x=C.performance.now.bind(C.performance)}catch(t){s.b.debug("Unable to use Performance API on this environment"),x=C.Date.now}var P=function(){function t(e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.typeSupported=r,this.config=i,this.vendor=n}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,r,n,o,s,u,l,c,d,h,f){var p=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var v=this.decrypter;null==v&&(v=this.decrypter=new a.a(this.observer,this.config));var g=x();v.decrypt(t,e.key.buffer,e.iv.buffer,(function(t){var a=x();p.observer.trigger(i.a.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),n,o,s,u,l,c,d,h,f)}))}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),n,o,s,u,l,c,d,h,f)},t.prototype.pushDecrypted=function(t,e,r,a,o,s,u,l,c,d,h,f){var p=this.demuxer;if(!p||(u||l)&&!this.probe(t)){for(var v=this.observer,g=this.typeSupported,y=this.config,T=[{demux:w,remux:D},{demux:b.a,remux:I},{demux:m,remux:D},{demux:k,remux:D}],E=0,S=T.length;E<S;E++){var _=T[E],R=_.demux.probe;if(R(t)){var A=this.remuxer=new _.remux(v,y,g,this.vendor);p=new _.demux(v,A,y,g),this.probe=R;break}}if(!p)return void v.trigger(i.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var L=this.remuxer;(u||l)&&(p.resetInitSegment(r,a,o,d),L.resetInitSegment()),u&&(p.resetTimeStamp(f),L.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(e),p.append(t,s,c,h)},t}();e.a=P},function(t,e,r){"use strict";var i=r(0),n=r(1),a=Math.pow(2,32)-1,o=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.remuxer=r}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,r,i,a){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==r&&(r="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+i,initSegment:a?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?e:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:a?e:null})),this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),i&&(this.videoCodec=i)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r},t.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},t.findBox=function(e,r){var i=[],n=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0;if(e.data?(u=e.start,o=e.end,e=e.data):(u=0,o=e.byteLength),!r.length)return null;for(n=u;n<o;)l=(a=t.readUint32(e,n))>1?n+a:o,t.bin2str(e.subarray(n+4,n+8))===r[0]&&(1===r.length?i.push({data:e,start:n+8,end:l}):(s=t.findBox({data:e,start:n+8,end:l},r.slice(1))).length&&(i=i.concat(s))),n=l;return i},t.parseSegmentIndex=function(e){var r=t.findBox(e,["moov"])[0],i=r?r.end:null,n=0,a=t.findBox(e,["sidx"]),o=void 0;if(!a||!a[0])return null;o=[];var s=(a=a[0]).data[0];n=0===s?8:16;var u=t.readUint32(a,n);n+=4,n+=0===s?8:16,n+=2;var l=a.end+0,c=t.readUint16(a,n);n+=2;for(var d=0;d<c;d++){var h=n,f=t.readUint32(a,h);h+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=t.readUint32(a,h);h+=4,o.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/u,start:l,end:l+p-1}}),l+=p,n=h+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:c,references:o,moovEndOffset:i}},t.parseInitSegment=function(e){var r=[];return t.findBox(e,["moov","trak"]).forEach((function(e){var n=t.findBox(e,["tkhd"])[0];if(n){var a=n.data[n.start],o=0===a?12:20,s=t.readUint32(n,o),u=t.findBox(e,["mdia","mdhd"])[0];if(u){o=0===(a=u.data[u.start])?12:20;var l=t.readUint32(u,o),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[t.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=t.bin2str(h.data.subarray(h.start+12,h.start+16));i.b.log("MP4Demuxer:"+d+":"+f+" found")}r[s]={timescale:l,type:d},r[d]={timescale:l,id:s}}}}}})),r},t.getStartDTS=function(e,r){var i,n,a=void 0;return a=t.findBox(r,["moof","traf"]),i=[].concat.apply([],a.map((function(r){return t.findBox(r,["tfhd"]).map((function(i){var n,a;return n=t.readUint32(i,4),a=e[n].timescale||9e4,t.findBox(r,["tfdt"]).map((function(e){var r,i=void 0;return r=e.data[e.start],i=t.readUint32(e,4),1===r&&(i*=Math.pow(2,32),i+=t.readUint32(e,8)),i}))[0]/a}))}))),n=Math.min.apply(null,i),isFinite(n)?n:0},t.offsetStartDTS=function(e,r,i){t.findBox(r,["moof","traf"]).map((function(r){return t.findBox(r,["tfhd"]).map((function(n){var o=t.readUint32(n,4),s=e[o].timescale||9e4;t.findBox(r,["tfdt"]).map((function(e){var r=e.data[e.start],n=t.readUint32(e,4);if(0===r)t.writeUint32(e,4,n-i*s);else{n*=Math.pow(2,32),n+=t.readUint32(e,8),n-=i*s,n=Math.max(n,0);var o=Math.floor(n/(a+1)),u=Math.floor(n%(a+1));t.writeUint32(e,4,o),t.writeUint32(e,8,u)}}))}))}))},t.prototype.append=function(e,r,i,a){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,u=this.initPTS;if(void 0===u){var l=t.getStartDTS(o,e);this.initPTS=u=l-r,this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:u})}t.offsetStartDTS(o,e,u),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,i,a,e)},t.prototype.destroy=function(){},t}();e.a=o},function(t,e,r){"use strict";var i,n="object"==typeof Reflect?Reflect:null,a=n&&"function"==typeof n.apply?n.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function c(t,e,r,i){var n,a,o,s;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),void 0===o)o=a[e]=r,++t._eventsCount;else if("function"==typeof o?o=a[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=l(t))>0&&o.length>n&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,s=u,console&&console.warn&&console.warn(s)}return t}function d(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,t))}.bind(i);return n.listener=r,i.wrapFn=n,n}function h(t,e,r){var i=t._events;if(void 0===i)return[];var n=i[e];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(n):p(n,n.length)}function f(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i="error"===t,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=n[t];if(void 0===u)return!1;if("function"==typeof u)a(u,this,e);else{var l=u.length,c=p(u,l);for(r=0;r<l;++r)a(c[r],this,e)}return!0},s.prototype.addListener=function(t,e){return c(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return c(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,d(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,d(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,i,n,a,o;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(r=i[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(n=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){o=r[a].listener,n=a;break}if(n<0)return this;0===n?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,n),1===r.length&&(i[t]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var n,a=Object.keys(r);for(i=0;i<a.length;++i)"removeListener"!==(n=a[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return h(this,t,!0)},s.prototype.rawListeners=function(t){return h(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e,r){function i(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var i=r(r.s=ENTRY_MODULE);return i.default||i}var n="[\\.|\\-|\\+|\\w|/|@]+",a="\\((/\\*.*?\\*/)?s?.*?("+n+").*?\\)";function o(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(t,e,i){var s={};s[i]=[];var u=e.toString(),l=u.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return s;for(var c,d=l[1],h=new RegExp("(\\\\n|\\W)"+o(d)+a,"g");c=h.exec(u);)"dll-reference"!==c[3]&&s[i].push(c[3]);for(h=new RegExp("\\("+o(d)+'\\("(dll-reference\\s('+n+'))"\\)\\)'+a,"g");c=h.exec(u);)t[c[2]]||(s[i].push(c[1]),t[c[2]]=r(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var f,p=Object.keys(s),v=0;v<p.length;v++)for(var g=0;g<s[p[v]].length;g++)f=s[p[v]][g],isNaN(1*f)||(s[p[v]][g]=1*s[p[v]][g]);return s}function u(t){return Object.keys(t).reduce((function(e,r){return e||t[r].length>0}),!1)}t.exports=function(t,e){e=e||{};var n={main:r.m},a=e.all?{main:Object.keys(n.main)}:function(t,e){for(var r={main:[e]},i={main:[]},n={main:{}};u(r);)for(var a=Object.keys(r),o=0;o<a.length;o++){var l=a[o],c=r[l].pop();if(n[l]=n[l]||{},!n[l][c]&&t[l][c]){n[l][c]=!0,i[l]=i[l]||[],i[l].push(c);for(var d=s(t,t[l][c],l),h=Object.keys(d),f=0;f<h.length;f++)r[h[f]]=r[h[f]]||[],r[h[f]]=r[h[f]].concat(d[h[f]])}}return i}(n,t),o="";Object.keys(a).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;a[t][e];)e++;a[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a[t].map((function(e){return JSON.stringify(e)+": "+n[t][e].toString()})).join(",")+"});\n"})),o=o+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a.main.map((function(t){return JSON.stringify(t)+": "+n.main[t].toString()})).join(",")+"}))(self);";var l=new window.Blob([o],{type:"text/javascript"});if(e.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),d=new window.Worker(c);return d.objectURL=c,d}},function(t,e,r){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function a(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,i||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new a:delete t._events[e]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),l.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},l.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},l.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},l.prototype.emit=function(t,e,r,i,a,o){var s=n?n+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,a),!0;case 6:return c.fn.call(c.context,e,r,i,a,o),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,r);break;case 4:c[l].fn.call(c[l].context,e,r,i);break;default:if(!u)for(h=1,u=new Array(d-1);h<d;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},l.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},l.prototype.removeListener=function(t,e,r,i){var a=n?n+t:t;if(!this._events[a])return this;if(!e)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||i&&!o.once||r&&o.context!==r||u(this,a);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==e||i&&!o[s].once||r&&o[s].context!==r)&&l.push(o[s]);l.length?this._events[a]=1===l.length?l[0]:l:u(this,a)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&u(this,e)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l},function(t,e,r){"use strict";r.r(e);var i=r(8),n=r(1),a=r(0),o=r(10);e.default=function(t){var e=new o.EventEmitter;e.trigger=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];e.emit.apply(e,[t,t].concat(i))},e.off=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];e.removeListener.apply(e,[t].concat(i))};var r=function(e,r){t.postMessage({event:e,data:r})};t.addEventListener("message",(function(n){var o=n.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new i.a(e,o.typeSupported,s,o.vendor),Object(a.a)(s.debug),r("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),e.on(n.a.FRAG_DECRYPTED,r),e.on(n.a.FRAG_PARSING_INIT_SEGMENT,r),e.on(n.a.FRAG_PARSED,r),e.on(n.a.ERROR,r),e.on(n.a.FRAG_PARSING_METADATA,r),e.on(n.a.FRAG_PARSING_USERDATA,r),e.on(n.a.INIT_PTS_FOUND,r),e.on(n.a.FRAG_PARSING_DATA,(function(e,r){var i=[],n={event:e,data:r};r.data1&&(n.data1=r.data1.buffer,i.push(r.data1.buffer),delete r.data1),r.data2&&(n.data2=r.data2.buffer,i.push(r.data2.buffer),delete r.data2),t.postMessage(n,i)}))}},function(t,e,r){"use strict";r.r(e);var i={};r.r(i),r.d(i,"createCues",(function(){return Qt}));var n=r(6),a=r(2),o=r(3),s=r(1),u=r(0),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.prototype.onHandlerDestroying=function(){},t.prototype.onHandlerDestroyed=function(){},t.prototype.isEventHandler=function(){return"object"===l(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){if(c[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)}),this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){this.hls.off(t,this.onEvent)}),this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){try{(function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)}).call(this,t,e).call()}catch(e){u.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}(),h=r(9),f=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return f(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=n.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}(),v=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),g=function(){function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return t.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},t.prototype.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&((r=new p).method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(e)),r},v(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var t=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var r=this.lastByteRangeEndOffset;t[0]=r||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0],this._byteRange=t}return t}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}},{key:"endProgramDateTime",get:function(){if(!Object(o.a)(this.programDateTime))return null;var t=Object(o.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),t}(),y=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return y(t,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(o.a)(this.fragments[0].programDateTime))}}]),t}(),b=/^(\d+)x(\d+)$/,T=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,E=function(){function t(e){for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)r[i]=parseInt(e.slice(2*i,2*i+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=b.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e=void 0,r={};for(T.lastIndex=0;null!==(e=T.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[e[1]]=i}return r},t}(),S={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function _(t,e){return window.MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var R=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,w=/#EXT-X-MEDIA:(.*)/g,k=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),A=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,L=/\.(mp4|m4s|m4v|m4a)$/i,O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.findGroup=function(t,e){if(!t)return null;for(var r=null,i=0;i<t.length;i++){var n=t[i];n.id===e&&(r=n)}return r},t.convertAVC1ToAVCOTI=function(t){var e=void 0,r=t.split(".");return r.length>2?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return n.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var i=[],n=void 0;function a(t,e){["video","audio"].forEach((function(r){var i=t.filter((function(t){return function(t,e){var r=S[e];return!!r&&!0===r[t.slice(0,4)]}(t,r)}));if(i.length){var n=i.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[r+"Codec"]=n.length>0?n[0]:i[0],t=t.filter((function(t){return-1===i.indexOf(t)}))}})),e.unknownCodecs=t}for(R.lastIndex=0;null!=(n=R.exec(e));){var o={},s=o.attrs=new E(n[1]);o.url=t.resolve(n[2],r);var u=s.decimalResolution("RESOLUTION");u&&(o.width=u.width,o.height=u.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,a([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=t.convertAVC1ToAVCOTI(o.videoCodec)),i.push(o)}return i},t.parseMasterPlaylistMedia=function(e,r,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=void 0,o=[],s=0;for(w.lastIndex=0;null!==(a=w.exec(e));){var u={},l=new E(a[1]);if(l.TYPE===i){if(u.groupId=l["GROUP-ID"],u.instreamId=l["INSTREAM-ID"],u.name=l.NAME,u.type=i,u.default="YES"===l.DEFAULT,u.autoselect="YES"===l.AUTOSELECT,u.forced="YES"===l.FORCED,l.URI&&(u.url=t.resolve(l.URI,r)),u.lang=l.LANGUAGE,u.name||(u.name=u.lang),n.length){var c=t.findGroup(n,u.groupId);u.audioCodec=c?c.codec:n[0].codec}u.id=s++,o.push(u)}}return o},t.parseLevelPlaylist=function(t,e,r,i,n){var a=0,s=0,l=new m(e),c=new p,d=0,h=null,f=new g,v=void 0,y=void 0,b=null;for(k.lastIndex=0;null!==(v=k.exec(t));){var T=v[1];if(T){f.duration=parseFloat(T);var S=(" "+v[2]).slice(1);f.title=S||null,f.tagList.push(S?["INF",T,S]:["INF",T])}else if(v[3]){if(Object(o.a)(f.duration)){var _=a++;f.type=i,f.start=s,f.levelkey=c,f.sn=_,f.level=r,f.cc=d,f.urlId=n,f.baseurl=e,f.relurl=(" "+v[3]).slice(1),D(f,h),l.fragments.push(f),h=f,s+=f.duration,f=new g}}else if(v[4]){if(f.rawByteRange=(" "+v[4]).slice(1),h){var R=h.byteRangeEndOffset;R&&(f.lastByteRangeEndOffset=R)}}else if(v[5])f.rawProgramDateTime=(" "+v[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]),null===b&&(b=l.fragments.length);else{for(v=v[0].match(A),y=1;y<v.length&&void 0===v[y];y++);var w=(" "+v[y+1]).slice(1),O=(" "+v[y+2]).slice(1);switch(v[y]){case"#":f.tagList.push(O?[w,O]:[w]);break;case"PLAYLIST-TYPE":l.type=w.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(w);break;case"TARGETDURATION":l.targetduration=parseFloat(w);break;case"VERSION":l.version=parseInt(w);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":d++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(w);break;case"KEY":var I=new E(w),C=I.enumeratedString("METHOD"),x=I.URI,P=I.hexadecimalInteger("IV");C&&(c=new p,x&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(C)>=0&&(c.method=C,c.baseuri=e,c.reluri=x,c.key=null,c.iv=P));break;case"START":var M=new E(w).decimalFloatingPoint("TIME-OFFSET");Object(o.a)(M)&&(l.startTimeOffset=M);break;case"MAP":var F=new E(w);f.relurl=F.URI,f.rawByteRange=F.BYTERANGE,f.baseurl=e,f.level=r,f.type=i,f.sn="initSegment",l.initSegment=f,(f=new g).rawProgramDateTime=l.initSegment.rawProgramDateTime;break;default:u.b.warn("line parsed but not handled: "+v)}}}return(f=h)&&!f.relurl&&(l.fragments.pop(),s-=f.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=a-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=d,!l.initSegment&&l.fragments.length&&l.fragments.every((function(t){return L.test(t.relurl)}))&&(u.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(f=new g).relurl=l.fragments[0].relurl,f.baseurl=e,f.level=r,f.type=i,f.sn="initSegment",l.initSegment=f,l.needSidxRanges=!0),b&&function(t,e){for(var r=t[e],i=e-1;i>=0;i--){var n=t[i];n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(l.fragments,b),l},t}();function D(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(o.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var I=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),C=window.performance,x={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},P={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},M=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MANIFEST_LOADING,s.a.LEVEL_LOADING,s.a.AUDIO_TRACK_LOADING,s.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.canHaveQualityLevels=function(t){return t!==x.AUDIO_TRACK&&t!==x.SUBTITLE_TRACK},e.mapContextToLevelType=function(t){switch(t.type){case x.AUDIO_TRACK:return P.AUDIO;case x.SUBTITLE_TRACK:return P.SUBTITLE;default:return P.MAIN}},e.getResponseUrl=function(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r},e.prototype.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,i=e.loader,n=new(r||i)(e);return t.loader=n,this.loaders[t.type]=n,n},e.prototype.getInternalLoader=function(t){return this.loaders[t.type]},e.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:x.MANIFEST,level:0,id:null})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:x.LEVEL,level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:x.AUDIO_TRACK,level:null,id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:x.SUBTITLE_TRACK,level:null,id:t.id})},e.prototype.load=function(t,e){var r=this.hls.config;u.b.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var i=this.getInternalLoader(e);if(i){var n=i.context;if(n&&n.url===t)return u.b.trace("playlist request ongoing"),!1;u.b.warn("aborting previous loader for type: "+e.type),i.abort()}var a=void 0,o=void 0,s=void 0,l=void 0;switch(e.type){case x.MANIFEST:a=r.manifestLoadingMaxRetry,o=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout;break;case x.LEVEL:a=0,o=r.levelLoadingTimeOut;break;default:a=r.levelLoadingMaxRetry,o=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout}i=this.createInternalLoader(e),e.url=t,e.responseType=e.responseType||"";var c={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:l},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return u.b.debug("Calling internal loader delegate for URL: "+t),i.load(e,c,d),!0},e.prototype.loadsuccess=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r.isSidxRequest)return this._handleSidxRequest(t,r),void this._handlePlaylistLoaded(t,e,r,i);this.resetInternalLoader(r.type);var n=t.data;e.tload=C.now(),0===n.indexOf("#EXTM3U")?n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,r,i):this._handleMasterPlaylist(t,e,r,i):this._handleManifestParsingError(t,r,"no EXTM3U delimiter",i)},e.prototype.loaderror=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(e,r,!1,t)},e.prototype.loadtimeout=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(e,r,!0,null)},e.prototype._handleMasterPlaylist=function(t,r,i,n){var a=this.hls,o=t.data,l=e.getResponseUrl(t,i),c=O.parseMasterPlaylist(o,l);if(c.length){var d=c.map((function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}})),h=O.parseMasterPlaylistMedia(o,l,"AUDIO",d),f=O.parseMasterPlaylistMedia(o,l,"SUBTITLES"),p=O.parseMasterPlaylistMedia(o,l,"CLOSED-CAPTIONS");if(h.length){var v=!1;h.forEach((function(t){t.url||(v=!0)})),!1===v&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(u.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}a.trigger(s.a.MANIFEST_LOADED,{levels:c,audioTracks:h,subtitles:f,captions:p,url:l,stats:r,networkDetails:n})}else this._handleManifestParsingError(t,i,"no level found in manifest",n)},e.prototype._handleTrackOrLevelPlaylist=function(t,r,i,n){var u=this.hls,l=i.id,c=i.level,d=i.type,h=e.getResponseUrl(t,i),f=Object(o.a)(l)?l:0,p=Object(o.a)(c)?c:f,v=e.mapContextToLevelType(i),g=O.parseLevelPlaylist(t.data,h,p,v,f);if(g.tload=r.tload,g.fragments.length){if(d===x.MANIFEST){var y={url:h,details:g};u.trigger(s.a.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:h,stats:r,networkDetails:n})}if(r.tparsed=C.now(),g.needSidxRanges){var m=g.initSegment.url;this.load(m,{isSidxRequest:!0,type:d,level:c,levelDetails:g,id:l,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else i.levelDetails=g,this._handlePlaylistLoaded(t,r,i,n)}else u.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.LEVEL_EMPTY_ERROR,fatal:!1,url:h,reason:"no fragments found in level",level:i.level})},e.prototype._handleSidxRequest=function(t,e){var r=h.a.parseSegmentIndex(new Uint8Array(t.data));if(r){var i=r.references,n=e.levelDetails;i.forEach((function(t,e){var r=t.info,i=n.fragments[e];0===i.byteRange.length&&(i.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))})),n.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},e.prototype._handleManifestParsingError=function(t,e,r,i){this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.MANIFEST_PARSING_ERROR,fatal:e.type===x.MANIFEST,url:t.url,reason:r,response:t,context:e,networkDetails:i})},e.prototype._handleNetworkError=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;u.b.info("A network error occured while loading a "+t.type+"-type playlist");var n=void 0,o=void 0,l=this.getInternalLoader(t);switch(t.type){case x.MANIFEST:n=r?a.a.MANIFEST_LOAD_TIMEOUT:a.a.MANIFEST_LOAD_ERROR,o=!0;break;case x.LEVEL:n=r?a.a.LEVEL_LOAD_TIMEOUT:a.a.LEVEL_LOAD_ERROR,o=!1;break;case x.AUDIO_TRACK:n=r?a.a.AUDIO_TRACK_LOAD_TIMEOUT:a.a.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(t.type));var c={type:a.b.NETWORK_ERROR,details:n,fatal:o,url:t.url,loader:l,response:i,context:t,networkDetails:e};i&&(c.response=i),this.hls.trigger(s.a.ERROR,c)},e.prototype._handlePlaylistLoaded=function(t,r,i,n){var a=i.type,o=i.level,u=i.id,l=i.levelDetails;if(l.targetduration)if(e.canHaveQualityLevels(i.type))this.hls.trigger(s.a.LEVEL_LOADED,{details:l,level:o||0,id:u||0,stats:r,networkDetails:n});else switch(a){case x.AUDIO_TRACK:this.hls.trigger(s.a.AUDIO_TRACK_LOADED,{details:l,id:u,stats:r,networkDetails:n});break;case x.SUBTITLE_TRACK:this.hls.trigger(s.a.SUBTITLE_TRACK_LOADED,{details:l,id:u,stats:r,networkDetails:n})}else this._handleManifestParsingError(t,i,"invalid target duration",n)},I(e,null,[{key:"ContextType",get:function(){return x}},{key:"LevelType",get:function(){return P}}]),e}(d),F=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.FRAG_LOADING));return i.loaders={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){var e=this.loaders;for(var r in e){var i=e[r];i&&i.destroy()}this.loaders={},t.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,r=e.type,i=this.loaders,n=this.hls.config,a=n.fLoader,s=n.loader;e.loaded=0;var l=i[r];l&&(u.b.warn("abort previous fragment loader for type: "+r),l.abort()),l=i[r]=e.loader=n.fLoader?new a(n):new s(n);var c,d,h=void 0;h={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var f=e.byteRangeStartOffset,p=e.byteRangeEndOffset;Object(o.a)(f)&&Object(o.a)(p)&&(h.rangeStart=f,h.rangeEnd=p),c={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},l.load(h,c,d)},e.prototype.loadsuccess=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=t.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(s.a.FRAG_LOADED,{payload:n,frag:a,stats:e,networkDetails:i})},e.prototype.loaderror=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.frag,n=i.loader;n&&n.abort(),this.loaders[i.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:r})},e.prototype.loadtimeout=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.frag,n=i.loader;n&&n.abort(),this.loaders[i.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:r})},e.prototype.loadprogress=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=e.frag;n.loaded=t.loaded,this.hls.trigger(s.a.FRAG_LOAD_PROGRESS,{frag:n,stats:t,networkDetails:i})},e}(d),N=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},d.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,r=e.type,i=this.loaders[r],n=e.decryptdata,a=n.uri;if(a!==this.decrypturl||null===this.decryptkey){var o,l,c,d=this.hls.config;i&&(u.b.warn("abort previous key loader for type:"+r),i.abort()),e.loader=this.loaders[r]=new d.loader(d),this.decrypturl=a,this.decryptkey=null,o={url:a,frag:e,responseType:"arraybuffer"},l={timeout:d.fragLoadingTimeOut,maxRetry:0,retryDelay:d.fragLoadingRetryDelay,maxRetryDelay:d.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(o,l,c)}else this.decryptkey&&(n.key=this.decryptkey,this.hls.trigger(s.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(s.a.KEY_LOADED,{frag:i})},e.prototype.loaderror=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.prototype.loadtimeout=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},e}(d),U="NOT_LOADED",B="APPENDING",j="PARTIAL",G=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.BUFFER_APPENDED,s.a.FRAG_BUFFERED,s.a.FRAG_LOADED));return i.bufferPadding=.2,i.fragments=Object.create(null),i.timeRanges=Object.create(null),i.config=r.config,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,d.prototype.destroy.call(this),t.prototype.destroy.call(this)},e.prototype.getBufferedFrag=function(t,e){var r=this.fragments,i=Object.keys(r).filter((function(i){var n=r[i];if(n.body.type!==e)return!1;if(!n.buffered)return!1;var a=n.body;return a.startPTS<=t&&t<=a.endPTS}));if(0===i.length)return null;var n=i.pop();return r[n].body},e.prototype.detectEvictedFragments=function(t,e){var r=this,i=void 0,n=void 0;Object.keys(this.fragments).forEach((function(a){var o=r.fragments[a];if(!0===o.buffered){var s=o.range[t];if(s){i=s.time;for(var u=0;u<i.length;u++)if(n=i[u],!1===r.isTimeBuffered(n.startPTS,n.endPTS,e)){r.removeFragment(o.body);break}}}}))},e.prototype.detectPartialFragments=function(t){var e=this,r=this.getFragmentKey(t),i=this.fragments[r];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(t.hasElementaryStream(r)){var n=e.timeRanges[r];i.range[r]=e.getBufferedTimes(t.startPTS,t.endPTS,n)}})))},e.prototype.getBufferedTimes=function(t,e,r){for(var i=[],n=void 0,a=void 0,o=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,a=r.end(s)+this.bufferPadding,t>=n&&e<=a){i.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))});break}if(t<a&&e>n)i.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))}),o=!0;else if(e<=n)break}return{time:i,partial:o}},e.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},e.prototype.getPartialFragment=function(t){var e=this,r=void 0,i=void 0,n=void 0,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var u=e.fragments[s];e.isPartial(u)&&(i=u.body.startPTS-e.bufferPadding,n=u.body.endPTS+e.bufferPadding,t>=i&&t<=n&&(r=Math.min(t-i,n-t),o<=r&&(a=u.body,o=r)))})),a},e.prototype.getState=function(t){var e=this.getFragmentKey(t),r=this.fragments[e],i=U;return void 0!==r&&(i=r.buffered?!0===this.isPartial(r)?j:"OK":B),i},e.prototype.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},e.prototype.isTimeBuffered=function(t,e,r){for(var i=void 0,n=void 0,a=0;a<r.length;a++){if(i=r.start(a)-this.bufferPadding,n=r.end(a)+this.bufferPadding,t>=i&&e<=n)return!0;if(e<=i)return!1}return!1},e.prototype.onFragLoaded=function(t){var e=t.frag;Object(o.a)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},e.prototype.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach((function(t){var r=e.timeRanges[t];e.detectEvictedFragments(t,r)}))},e.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},e.prototype.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},e.prototype.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},e.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},e}(d),K={search:function(t,e){for(var r=0,i=t.length-1,n=null,a=null;r<=i;){var o=e(a=t[n=(r+i)/2|0]);if(o>0)r=n+1;else{if(!(o<0))return a;i=n-1}}return null}},H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.isBuffered=function(t,e){try{if(t)for(var r=t.buffered,i=0;i<r.length;i++)if(e>=r.start(i)&&e<=r.end(i))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,r){try{if(t){var i=t.buffered,n=[],a=void 0;for(a=0;a<i.length;a++)n.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(n,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,r){var i=[],n=void 0,a=void 0,o=void 0,s=void 0,u=void 0;for(t.sort((function(t,e){return t.start-e.start||e.end-t.end})),u=0;u<t.length;u++){var l=i.length;if(l){var c=i[l-1].end;t[u].start-c<r?t[u].end>c&&(i[l-1].end=t[u].end):i.push(t[u])}else i.push(t[u])}for(u=0,n=0,a=o=e;u<i.length;u++){var d=i[u].start,h=i[u].end;if(e+r>=d&&e<h)a=d,n=(o=h)-e;else if(e+r<d){s=d;break}}return{len:n,start:a||0,end:o||0,nextStart:s}},t}(),V=(r(10),r(11)),W=r(8);function Y(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}var q=r(5),X=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];this.emit.apply(this,[t,t].concat(r))},e}(r(12).EventEmitter),z=Object(q.a)(),J=Y(),Q=function(){function t(e,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=e,this.id=r;var n=this.observer=new X,o=e.config,l=function(t,r){(r=r||{}).frag=i.frag,r.id=i.id,e.trigger(t,r)};n.on(s.a.FRAG_DECRYPTED,l),n.on(s.a.FRAG_PARSING_INIT_SEGMENT,l),n.on(s.a.FRAG_PARSING_DATA,l),n.on(s.a.FRAG_PARSED,l),n.on(s.a.ERROR,l),n.on(s.a.FRAG_PARSING_METADATA,l),n.on(s.a.FRAG_PARSING_USERDATA,l),n.on(s.a.INIT_PTS_FOUND,l);var c={mp4:J.isTypeSupported("video/mp4"),mpeg:J.isTypeSupported("audio/mpeg"),mp3:J.isTypeSupported('audio/mp4; codecs="mp3"')},d=navigator.vendor;if(o.enableWorker&&"undefined"!=typeof Worker){u.b.log("demuxing in webworker");var h=void 0;try{h=this.w=V(13),this.onwmsg=this.onWorkerMessage.bind(this),h.addEventListener("message",this.onwmsg),h.onerror=function(t){e.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},h.postMessage({cmd:"init",typeSupported:c,vendor:d,id:r,config:JSON.stringify(o)})}catch(t){u.b.warn("Error in worker:",t),u.b.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),h&&z.URL.revokeObjectURL(h.objectURL),this.demuxer=new W.a(n,c,o,d),this.w=void 0}}else this.demuxer=new W.a(n,c,o,d)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,r,i,n,a,s,l){var c=this.w,d=Object(o.a)(n.startPTS)?n.startPTS:n.start,h=n.decryptdata,f=this.frag,p=!(f&&n.cc===f.cc),v=!(f&&n.level===f.level),g=f&&n.sn===f.sn+1,y=!v&&g;if(p&&u.b.log(this.id+":discontinuity detected"),v&&u.b.log(this.id+":switch detected"),this.frag=n,c)c.postMessage({cmd:"demux",data:t,decryptdata:h,initSegment:e,audioCodec:r,videoCodec:i,timeOffset:d,discontinuity:p,trackSwitch:v,contiguous:y,duration:a,accurateTimeOffset:s,defaultInitPTS:l},t instanceof ArrayBuffer?[t]:[]);else{var m=this.demuxer;m&&m.push(t,h,e,r,i,d,p,v,y,a,s,l)}},t.prototype.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":z.URL.revokeObjectURL(this.w.objectURL);break;case s.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},t}();function $(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}}function Z(t,e,r){var i=t[e],n=t[r],a=n.startPTS;Object(o.a)(a)?r>e?(i.duration=a-i.start,i.duration<0&&u.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(n.duration=i.start-a,n.duration<0&&u.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):n.start=r>e?i.start+i.duration:Math.max(i.start-n.duration,0)}function tt(t,e,r,i,n,a){var s=r;if(Object(o.a)(e.startPTS)){var u=Math.abs(e.startPTS-r);Object(o.a)(e.deltaPTS)?e.deltaPTS=Math.max(u,e.deltaPTS):e.deltaPTS=u,s=Math.max(r,e.startPTS),r=Math.min(r,e.startPTS),i=Math.max(i,e.endPTS),n=Math.min(n,e.startDTS),a=Math.max(a,e.endDTS)}var l=r-e.start;e.start=e.startPTS=r,e.maxStartPTS=s,e.endPTS=i,e.startDTS=n,e.endDTS=a,e.duration=i-r;var c=e.sn;if(!t||c<t.startSN||c>t.endSN)return 0;var d,h=void 0,f=void 0;for(d=c-t.startSN,(h=t.fragments)[d]=e,f=d;f>0;f--)Z(h,f,f-1);for(f=d;f<h.length-1;f++)Z(h,f,f+1);return t.PTSKnown=!0,l}function et(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment);var r=0,i=void 0;if(rt(t,e,(function(t,n){r=t.cc-n.cc,Object(o.a)(t.startPTS)&&(n.start=n.startPTS=t.startPTS,n.endPTS=t.endPTS,n.duration=t.duration,n.backtracked=t.backtracked,n.dropped=t.dropped,i=n),e.PTSKnown=!0})),e.PTSKnown){if(r){u.b.log("discontinuity sliding from playlist, take drift into account");for(var n=e.fragments,a=0;a<n.length;a++)n[a].cc+=r}i?tt(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):function(t,e){var r=e.startSN-t.startSN,i=t.fragments,n=e.fragments;if(!(r<0||r>i.length))for(var a=0;a<n.length;a++)n[a].start+=i[r].start}(t,e),e.PTSKnown=t.PTSKnown}}function rt(t,e,r){if(t&&e)for(var i=Math.max(t.startSN,e.startSN)-e.startSN,n=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,o=i;o<=n;o++){var s=t.fragments[a+o],u=e.fragments[o];if(!s||!u)break;r(s,u,o)}}function it(t,e,r){var i=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),n=i/2;return t&&e.endSN===t.endSN&&(i=n),r&&(i=Math.max(n,i-(window.performance.now()-r))),Math.round(i)}var nt=function(t){for(var e="",r=t.length,i=0;i<r;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e};function at(t,e){e.fragments.forEach((function(e){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}})),e.PTSKnown=!0}function ot(t,e,r){!function(t,e,r){if(function(t,e,r){var i=!1;return e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)&&(i=!0),i}(t,r,e)){var i=function(t,e){var r=t.fragments,i=e.fragments;if(i.length&&r.length){var n=function(t,e){for(var r=null,i=0;i<t.length;i+=1){var n=t[i];if(n&&n.cc===e){r=n;break}}return r}(r,i[0].cc);if(n&&(!n||n.startPTS))return n;u.b.log("No frag in previous level to align on")}else u.b.log("No fragments to align")}(r.details,e);i&&(u.b.log("Adjusting PTS using last level due to CC increase within current level"),at(i.start,e))}}(t,r,e),!r.PTSKnown&&e&&function(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var r=e.fragments[0].programDateTime,i=(t.fragments[0].programDateTime-r)/1e3+e.fragments[0].start;Object(o.a)(i)&&(u.b.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),at(i,t))}}(r,e.details)}function st(t,e,r){if(!Array.isArray(t)||!t.length||!Object(o.a)(e))return null;if(e<t[0].programDateTime)return null;if(e>=t[t.length-1].endProgramDateTime)return null;r=r||0;for(var i=0;i<t.length;++i){var n=t[i];if(ct(e,r,n))return n}return null}function ut(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=t?e[t.sn-e[0].sn+1]:null;return n&&!lt(r,i,n)?n:K.search(e,lt.bind(null,r,i))}function lt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments[2],i=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=t?1:r.start-i>t&&r.start?-1:0}function ct(t,e,r){var i=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-i>t}var dt=function(){function t(e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.media=r,this.fragmentTracker=i,this.hls=n,this.stallReported=!1}return t.prototype.poll=function(t,e){var r=this.config,i=this.media,n=i.currentTime,a=window.performance.now();if(n!==t)return this.stallReported&&(u.b.warn("playback not stuck anymore @"+n+", after "+Math.round(a-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(i.ended||!i.buffered.length||i.readyState>2||i.seeking&&H.isBuffered(i,n))){var o=a-this.stalled,s=H.bufferInfo(i,n,r.maxBufferHole);this.stalled?(o>=1e3&&this._reportStall(s.len),this._tryFixBufferStall(s,o)):this.stalled=a}},t.prototype._tryFixBufferStall=function(t,e){var r=this.config,i=this.fragmentTracker,n=this.media.currentTime,a=i.getPartialFragment(n);a&&this._trySkipBufferHole(a),t.len>.5&&e>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},t.prototype._reportStall=function(t){var e=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,u.b.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),e.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},t.prototype._trySkipBufferHole=function(t){for(var e=this.hls,r=this.media,i=r.currentTime,n=0,o=0;o<r.buffered.length;o++){var l=r.buffered.start(o);if(i>=n&&i<l)return r.currentTime=Math.max(l,r.currentTime+.1),u.b.warn("skipping hole, adjusting currentTime from "+i+" to "+r.currentTime),this.stalled=null,void e.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+r.currentTime,frag:t});n=r.buffered.end(o)}},t.prototype._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,i=r.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<t.nudgeMaxRetry){var o=i+n*t.nudgeOffset;u.b.log("adjust currentTime from "+i+" to "+o),r.currentTime=o,e.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else u.b.error("still stuck in high buffer @"+i+" after "+t.nudgeMaxRetry+", raise fatal error"),e.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!0})},t}(),ht=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call.apply(t,[this,r].concat(n)));return o._tickInterval=null,o._tickTimer=null,o._tickCallCount=0,o._boundTick=o.tick.bind(o),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.prototype.hasInterval=function(){return!!this._tickInterval},e.prototype.hasNextTick=function(){return!!this._tickTimer},e.prototype.setInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,t),!0)})),e.prototype.clearInterval=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)})),e.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},e.prototype.doTick=function(){},e}(d),ft={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},pt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.doTick=function(){},e.prototype.startLoad=function(){},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ft.STOPPED},e.prototype._streamEnded=function(t,e){var r=this.fragCurrent,i=this.fragmentTracker;if(!e.live&&r&&!r.backtracked&&r.sn===e.endSN&&!t.nextStart){var n=i.getState(r);return n===j||"OK"===n}return!1},e.prototype.onMediaSeeking=function(){var t=this.config,e=this.media,r=this.mediaBuffer,i=this.state,n=e?e.currentTime:null,a=H.bufferInfo(r||e,n,this.config.maxBufferHole);if(Object(o.a)(n)&&u.b.log("media seeking to "+n.toFixed(3)),i===ft.FRAG_LOADING){var s=this.fragCurrent;if(0===a.len&&s){var l=t.maxFragLookUpTolerance,c=s.start-l,d=s.start+s.duration+l;n<c||n>d?(s.loader&&(u.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ft.IDLE):u.b.log("seeking outside of buffer but within currently loaded fragment range")}}else i===ft.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ft.IDLE);e&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},e.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},e.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},e.prototype.onHandlerDestroyed=function(){this.state=ft.STOPPED,this.fragmentTracker=null},e}(ht),vt=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),gt=function(t){function e(r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.LEVEL_LOADED,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.FRAG_LOAD_EMERGENCY_ABORTED,s.a.FRAG_PARSING_INIT_SEGMENT,s.a.FRAG_PARSING_DATA,s.a.FRAG_PARSED,s.a.ERROR,s.a.AUDIO_TRACK_SWITCHING,s.a.AUDIO_TRACK_SWITCHED,s.a.BUFFER_CREATED,s.a.BUFFER_APPENDED,s.a.BUFFER_FLUSHED,s.a.LEVELS_UPDATED));return n.audioCodecSwap=!1,n.bitrateTest=!1,n.config=r.config,n.fragmentTracker=i,n.gapController=null,n.stallReported=!1,n._state=ft.STOPPED,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(r.config.testBandwidth?(i=0,this.bitrateTest=!0):i=r.nextAutoLevel),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&-1===t&&(u.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=ft.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=ft.STOPPED},e.prototype.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},e.prototype.doTick=function(){switch(this.state){case ft.BUFFER_FLUSHING:this.fragLoadError=0;break;case ft.IDLE:this._doTickIdle();break;case ft.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=ft.IDLE);break;case ft.FRAG_LOADING_WAITING_RETRY:var e=window.performance.now(),r=this.retryDate;(!r||e>=r||this.media&&this.media.seeking)&&(u.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ft.IDLE);break;case ft.ERROR:case ft.STOPPED:case ft.FRAG_LOADING:case ft.PARSING:case ft.PARSED:case ft.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&e.startFragPrefetch)){var i=0;this.loadedmetadata?i=r.currentTime:this.nextLoadPosition&&(i=this.nextLoadPosition);var n=t.nextLoadLevel,a=this.levels[n];if(a){var o=a.bitrate,l=void 0;l=o?Math.max(8*e.maxBufferSize/o,e.maxBufferLength):e.maxBufferLength,l=Math.min(l,e.maxMaxBufferLength);var c=H.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,e.maxBufferHole),d=c.len;if(!(d>=l)){u.b.trace("buffer length of "+d.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=n;var h=a.details;if(!h||h.live&&this.levelLastLoaded!==n)this.state=ft.WAITING_LEVEL;else{if(this._streamEnded(c,h)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(s.a.BUFFER_EOS,f),void(this.state=ft.ENDED)}this._fetchPayloadOrEos(i,c,h)}}}}},e.prototype._fetchPayloadOrEos=function(t,e,r){var i=this.fragPrevious,n=this.level,a=r.fragments,o=a.length;if(0!==o){var s=a[0].start,l=a[o-1].start+a[o-1].duration,c=e.end,d=void 0;if(r.initSegment&&!r.initSegment.data)d=r.initSegment;else if(r.live){var h=this.config.initialLiveManifestSize;if(o<h)return void u.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+h);if(null===(d=this._ensureFragmentAtLivePoint(r,c,s,l,i,a,o)))return}else c<s&&(d=a[0]);d||(d=this._findFragment(s,i,o,a,c,l,r)),d&&(d.encrypted?(u.b.log("Loading key for "+d.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+n),this._loadKey(d)):(u.b.log("Loading "+d.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+n+", currentTime:"+t.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(d)))}},e.prototype._ensureFragmentAtLivePoint=function(t,e,r,i,n,a,o){var s=this.hls.config,l=this.media,c=void 0,d=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(r-s.maxFragLookUpTolerance,i-d)){var h=this.liveSyncPosition=this.computeLivePosition(r,t);u.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),e=h,l&&l.readyState&&l.duration>h&&(l.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&e>i&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(n)if(t.hasProgramDateTime)u.b.log("live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),c=st(a,n.endProgramDateTime,s.maxFragLookUpTolerance);else{var f=n.sn+1;if(f>=t.startSN&&f<=t.endSN){var p=a[f-t.startSN];n.cc===p.cc&&(c=p,u.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=K.search(a,(function(t){return n.cc-t.cc})))&&u.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=a[Math.min(o-1,Math.round(o/2))],u.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},e.prototype._findFragment=function(t,e,r,i,n,a,o){var s=this.hls.config,l=void 0;if(l=n<a?ut(e,i,n,n>a-s.maxFragLookUpTolerance?0:s.maxFragLookUpTolerance):i[r-1]){var c=l.sn-o.startSN,d=e&&l.level===e.level,h=i[c-1],f=i[c+1];if(e&&l.sn===e.sn)if(d&&!l.backtracked)if(l.sn<o.endSN){var p=e.deltaPTS;p&&p>s.maxBufferHole&&e.dropped&&c&&!l.backtracked?(l=h,u.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(l=f,u.b.log("SN just loaded, load next one: "+l.sn,l))}else l=null;else l.backtracked&&(f&&f.backtracked?(u.b.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+f.sn),l=f):(u.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,h?(l=h).backtracked=!0:c&&(l=null)))}return l},e.prototype._loadKey=function(t){this.state=ft.KEY_LOADING,this.hls.trigger(s.a.KEY_LOADING,{frag:t})},e.prototype._loadFragment=function(t){var e=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,Object(o.a)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||e===U||e===j?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(s.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new Q(this.hls,"main")),this.state=ft.FRAG_LOADING):e===B&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},e.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,M.LevelType.MAIN)},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t=void 0,e=void 0,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((e=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),H.isBuffered(r,e)?t=this.getBufferedFrag(e):H.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var i=t;if(i!==this.fragPlaying){this.hls.trigger(s.a.FRAG_CHANGED,{frag:i});var n=i.level;this.fragPlaying&&this.fragPlaying.level===n||this.hls.trigger(s.a.LEVEL_SWITCHED,{level:n}),this.fragPlaying=i}}},e.prototype.immediateLevelSwitch=function(){if(u.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,H.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,r=void 0,i=void 0;if((e=this.getBufferedFrag(t.currentTime))&&e.startPTS>1&&this.flushMainBuffer(0,e.startPTS-1),t.paused)r=0;else{var n=this.hls.nextLoadLevel,a=this.levels[n],o=this.fragLastKbps;r=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((i=this.getBufferedFrag(t.currentTime+r))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=ft.BUFFER_FLUSHING;var r={startOffset:t,endOffset:e};this.altAudio&&(r.type="video"),this.hls.trigger(s.a.BUFFER_FLUSHING,r)},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new dt(r,e,this.fragmentTracker,this.hls)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(u.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach((function(t){t.details&&t.details.fragments.forEach((function(t){t.backtracked=void 0}))})),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(o.a)(e)&&u.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onManifestLoading=function(){u.b.log("trigger BUFFER_RESET"),this.hls.trigger(s.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},e.prototype.onManifestParsed=function(t){var e=!1,r=!1,i=void 0;t.levels.forEach((function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(e=!0),-1!==i.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=e&&r,this.audioCodecSwitch&&u.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var n=this.config;(n.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(n.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,r=t.level,i=this.levels[this.levelLastLoaded],n=this.levels[r],a=e.totalduration,l=0;if(u.b.log("level "+r+" loaded ["+e.startSN+","+e.endSN+"], cc ["+e.startCC+", "+e.endCC+"] duration:"+a),e.live){var c=n.details;c&&e.fragments.length>0?(et(c,e),l=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(l,c),e.PTSKnown&&Object(o.a)(l)?u.b.log("live playlist sliding:"+l.toFixed(3)):(u.b.log("live playlist - outdated PTS, unknown sliding"),ot(this.fragPrevious,i,e))):(u.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,ot(this.fragPrevious,i,e))}else e.PTSKnown=!1;if(n.details=e,this.levelLastLoaded=r,this.hls.trigger(s.a.LEVEL_UPDATED,{details:e,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=e.startTimeOffset;Object(o.a)(d)?(d<0&&(u.b.log("negative start time offset "+d+", count from end of last fragment"),d=l+a+d),u.b.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):e.live?(this.startPosition=this.computeLivePosition(l,e),u.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ft.WAITING_LEVEL&&(this.state=ft.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===ft.KEY_LOADING&&(this.state=ft.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=this.hls,i=this.levels,n=this.media,a=t.frag;if(this.state===ft.FRAG_LOADING&&e&&"main"===a.type&&a.level===e.level&&a.sn===e.sn){var o=t.stats,l=i[e.level],c=l.details;if(this.bitrateTest=!1,this.stats=o,u.b.log("Loaded "+e.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+e.level),a.bitrateTest&&r.nextLoadLevel)this.state=ft.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(s.a.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=ft.IDLE,o.tparsed=o.tbuffered=window.performance.now(),c.initSegment.data=t.payload,r.trigger(s.a.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else{u.b.log("Parsing "+e.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+e.level+", cc "+e.cc),this.state=ft.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(n&&n.seeking)&&(c.PTSKnown||!c.live),h=c.initSegment?c.initSegment.data:[],f=this._getAudioCodec(l);(this.demuxer=this.demuxer||new Q(this.hls,"main")).push(t.payload,h,f,l.videoCodec,e,c.totalduration,d)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===ft.PARSING){var i=t.tracks,n=void 0,a=void 0;if(i.audio&&this.altAudio&&delete i.audio,a=i.audio){var o=this.levels[this.level].audioCodec,l=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(u.b.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===l.indexOf("firefox")&&(o="mp4a.40.5"),-1!==l.indexOf("android")&&"audio/mpeg"!==a.container&&(o="mp4a.40.2",u.b.log("Android: force audio codec to "+o)),a.levelCodec=o,a.id=t.id}for(n in(a=i.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=t.id),this.hls.trigger(s.a.BUFFER_CODECS,i),i){a=i[n],u.b.log("main track:"+n+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var c=a.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.a.BUFFER_APPENDING,{type:n,data:c,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,r=this.fragCurrent,i=t.frag;if(r&&"main"===t.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==t.type||!this.altAudio)&&this.state===ft.PARSING){var n=this.levels[this.level],a=r;if(Object(o.a)(t.endPTS)||(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),!0===t.hasAudio&&a.addElementaryStream(g.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(g.ElementaryStreamTypes.VIDEO),u.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)u.b.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var l=n.details;if(!l||a.sn!==l.startSN)return u.b.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=ft.IDLE,this.fragPrevious=a,void this.tick();u.b.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var c=tt(n.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),d=this.hls;d.trigger(s.a.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:c,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(r){r&&r.length&&e.state===ft.PARSING&&(e.appended=!0,e.pendingBuffering=!0,d.trigger(s.a.BUFFER_APPENDING,{type:t.type,data:r,parent:"main",content:"data"}))})),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===ft.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=ft.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,r=t.id;if(!e){if(this.mediaBuffer!==this.media){u.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(u.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ft.IDLE}var n=this.hls;n.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=t.id,r=!!this.hls.audioTracks[e].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(u.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,r=void 0,i=void 0,n=!1;for(var a in e){var o=e[a];"main"===o.id?(i=a,r=o,"video"===a&&(this.videoBuffer=e[a].buffer)):n=!0}n&&r?(u.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==ft.PARSING&&e!==ft.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==ft.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;u.b.log("main buffered : "+nt(e.buffered)),this.fragPrevious=t;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(s.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.state=ft.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var r=!!this.media&&H.isBuffered(this.media,this.media.currentTime)&&H.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);u.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ft.FRAG_LOADING_WAITING_RETRY}else u.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ft.ERROR;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:this.state!==ft.ERROR&&(t.fatal?(this.state=ft.ERROR,u.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==ft.WAITING_LEVEL||(this.state=ft.IDLE));break;case a.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==ft.PARSING&&this.state!==ft.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ft.IDLE):(u.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,u.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},e.prototype._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e)}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=ft.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(g.ElementaryStreamTypes.VIDEO,t.buffered),this.state=ft.IDLE,this.fragPrevious=null},e.prototype.onLevelsUpdated=function(t){this.levels=t.levels},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)},e.prototype._seekToStartPos=function(){var t=this.media,e=t.currentTime,r=t.seeking?e:this.startPosition;e!==r&&(u.b.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+e+" "),t.currentTime=r)},e.prototype._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(u.b.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},vt(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,u.b.log("main stream:"+e+"->"+t),this.hls.trigger(s.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(pt),yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();window.performance;var bt=void 0,Tt=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MANIFEST_LOADED,s.a.LEVEL_LOADED,s.a.AUDIO_TRACK_SWITCHED,s.a.FRAG_LOADED,s.a.ERROR));return i.canload=!1,i.currentLevelIndex=null,i.manualLevelIndex=-1,i.timer=null,bt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},e.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach((function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)})),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e=[],r=[],i=void 0,n={},o=null,l=!1,c=!1;if(t.levels.forEach((function(t){var r=t.attrs;t.loadError=0,t.fragmentError=!1,l=l||!!t.videoCodec,c=c||!!t.audioCodec,bt&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(o=n[t.bitrate])?o.url.push(t.url):(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)),r&&(r.AUDIO&&(c=!0,$(o||t,"audio",r.AUDIO)),r.SUBTITLES&&$(o||t,"text",r.SUBTITLES))})),l&&c&&(e=e.filter((function(t){return!!t.videoCodec}))),e=e.filter((function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||_(e))&&(!r||_(r))})),t.audioTracks&&(r=t.audioTracks.filter((function(t){return!t.audioCodec||_(t.audioCodec,"audio")}))).forEach((function(t,e){t.id=e})),e.length>0){i=e[0].bitrate,e.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=e;for(var d=0;d<e.length;d++)if(e[d].bitrate===i){this._firstLevel=d,u.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(s.a.MANIFEST_PARSED,{levels:e,audioTracks:r,firstLevel:this._firstLevel,stats:t.stats,audio:c,video:l,altAudio:r.some((function(t){return!!t.url}))})}else this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,r=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){u.b.log("switching to level "+t),this.currentLevelIndex=t;var i=e[t];i.level=t,r.trigger(s.a.LEVEL_SWITCHING,i)}var n=e[t],o=n.details;if(!o||o.live){var l=n.urlId;r.trigger(s.a.LEVEL_LOADING,{url:n.url[l],level:t,id:l})}}else r.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(t.fatal)t.type===a.b.NETWORK_ERROR&&this.clearTimer();else{var e=!1,r=!1,i=void 0;switch(t.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:i=t.frag.level,r=!0;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,e=!0;break;case a.a.REMUX_ALLOC_ERROR:i=t.level,e=!0}void 0!==i&&this.recoverLevel(t,i,e,r)}},e.prototype.recoverLevel=function(t,e,r,i){var n=this,a=this.hls.config,o=t.details,s=this._levels[e],l=void 0,c=void 0,d=void 0;if(s.loadError++,s.fragmentError=i,r){if(!(this.levelRetryCount+1<=a.levelLoadingMaxRetry))return u.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return n.loadLevel()}),c),t.levelRetry=!0,this.levelRetryCount++,u.b.warn("level controller, "+o+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}(r||i)&&((l=s.url.length)>1&&s.loadError<l?(s.urlId=(s.urlId+1)%l,s.details=void 0,u.b.warn("level controller, "+o+" for level "+e+": switching to redundant URL-id "+s.urlId)):-1===this.manualLevelIndex?(d=0===e?this._levels.length-1:e-1,u.b.warn("level controller, "+o+": switch to "+d),this.hls.nextAutoLevel=this.currentLevelIndex=d):i&&(u.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var r=this._levels[e.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,r=t.level,i=t.details;if(r===this.currentLevelIndex){var n=this._levels[r];if(n.fragmentError||(n.loadError=0,this.levelRetryCount=0),i.live){var a=it(n.details,i,t.stats.trequest);u.b.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return e.loadLevel()}),a)}else this.clearTimer()}},e.prototype.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){var i=-1;r.audioGroupIds.some((function(t,r){if(t===e)return i=r,!0})),i!==r.urlId&&(r.urlId=i,this.startLoad())}},e.prototype.loadLevel=function(){if(u.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"===(void 0===t?"undefined":yt(t))&&t.url.length>0){var e=this.currentLevelIndex,r=t.urlId,i=t.url[r];u.b.log("Attempt loading level index "+e+" with URL-id "+r),this.hls.trigger(s.a.LEVEL_LOADING,{url:i,level:e,id:r})}}},e.prototype.removeLevel=function(t,e){var r=this.levels.filter((function(r,i){return i!==t||r.url.length>1&&void 0!==e&&(r.url=r.url.filter((function(t,r){return r!==e})),r.urlId=0,!0)})).map((function(t,e){var r=t.details;return r&&r.fragments&&r.fragments.forEach((function(t){t.level=e})),t}));this._levels=r,this.hls.trigger(s.a.LEVELS_UPDATED,{levels:r})},mt(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(d),Et=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),St=function(){function t(e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Et(r),this.fast_=new Et(i)}return t.prototype.sample=function(t,e){var r=8e3*e/(t=Math.max(t,this.minDelayMs_)),i=t/1e3;this.fast_.sample(i,r),this.slow_.sample(i,r)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}(),_t=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Rt=window.performance,wt=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.FRAG_LOADING,s.a.FRAG_LOADED,s.a.FRAG_BUFFERED,s.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=r,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.clearTimer(),d.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,i=r.config,n=e.level,a=void 0,o=void 0;r.levels[n].details.live?(a=i.abrEwmaFastLive,o=i.abrEwmaSlowLive):(a=i.abrEwmaFastVoD,o=i.abrEwmaSlowVoD),this._bwEstimator=new St(r,o,a,i.abrEwmaDefaultEstimate)}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent;if(r){var i=r.loader,n=t.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return u.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=i.stats;if(e&&a&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var o=Rt.now()-a.trequest,l=Math.abs(e.playbackRate);if(o>500*r.duration/l){var c=t.levels,d=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),h=c[r.level],f=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(r.duration*f/8)),v=e.currentTime,g=(p-a.loaded)/d,y=(H.bufferInfo(e,v,t.config.maxBufferHole).end-v)/l;if(y<2*r.duration/l&&g>y){var m=void 0,b=void 0;for(b=r.level-1;b>n;b--){var T=c[b].realBitrate?Math.max(c[b].realBitrate,c[b].bitrate):c[b].bitrate;if((m=r.duration*T/(6.4*d))<y)break}m<g&&(u.b.warn("loading too slow, abort fragment loading and switch to level "+b+":fragLoadedDelay["+b+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+g.toFixed(1)+":"+y.toFixed(1)),t.nextLoadLevel=b,this._bwEstimator.sample(o,a.loaded),i.abort(),this.clearTimer(),t.trigger(s.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:a}))}}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(o.a)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[e.level],i=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,n=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:i,duration:n},r.realBitrate=Math.round(8*i/n)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,r=t.frag;if(!0!==e.aborted&&"main"===r.type&&Object(o.a)(r.sn)&&(!r.bitrateTest||e.tload===e.tbuffered)){var i=e.tparsed-e.trequest;u.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(i,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},e.prototype.onError=function(t){switch(t.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,r,i,n,a,o,s,l){for(var c=n;c>=i;c--){var d=l[c];if(d){var h,f=d.details,p=f?f.totalduration/f.fragments.length:e,v=!!f&&f.live;h=c<=t?o*r:s*r;var g=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,y=g*p/h;if(u.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(h)+"/"+g+"/"+p+"/"+a+"/"+y),h>g&&(!y||v&&!this.bitrateTestDelay||y<a))return c}}return-1},_t(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this._nextABRAutoLevel;return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=this.fragCurrent,r=this.lastLevelLoaded,i=this._bwEstimator,n=t.maxAutoLevel,a=t.levels,o=t.config,s=t.minAutoLevel,l=t.media,c=o.abrBandWidthFactor,d=o.abrBandWidthUpFactor,h=e?e.duration:0,f=l?l.currentTime:0,p=l&&0!==l.playbackRate?Math.abs(l.playbackRate):1,v=i?i.getEstimate():o.abrEwmaDefaultEstimate,g=(H.bufferInfo(l,f,o.maxBufferHole).end-f)/p,y=this._findBestLevel(r,h,v,s,n,g,c,d,a);if(y>=0)return y;u.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var m=h?Math.min(h,o.maxStarvationDelay):o.maxStarvationDelay;if(0===g){var b=this.bitrateTestDelay;b&&(m=(h?Math.min(h,o.maxLoadingDelay):o.maxLoadingDelay)-b,u.b.trace("bitrate test took "+Math.round(1e3*b)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*m)+" ms"),c=d=1)}return y=this._findBestLevel(r,h,v,s,n,g+m,c,d,a),Math.max(y,0)}}]),e}(d),kt=Y(),At=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MEDIA_ATTACHING,s.a.MEDIA_DETACHING,s.a.MANIFEST_PARSED,s.a.BUFFER_RESET,s.a.BUFFER_APPENDING,s.a.BUFFER_CODECS,s.a.BUFFER_EOS,s.a.BUFFER_FLUSHING,s.a.LEVEL_PTS_UPDATED,s.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i._levelTargetDuration=10,i._live=null,i._objectUrl=null,i.bufferCodecEventsExpected=0,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){d.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-t.start)>.1){var n=i.updating;try{i.abort()}catch(t){u.b.warn("can not abort audio buffer: "+t)}n?this.audioTimestampOffset=t.start:(u.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){this.bufferCodecEventsExpected=t.altAudio?2:1,u.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var r=this.mediaSource=new kt;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),e.src=window.URL.createObjectURL(r),this._objectUrl=e.src}},e.prototype.onMediaDetaching=function(){u.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){u.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):u.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(s.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){u.b.log("media source opened"),this.hls.trigger(s.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,r=Object.keys(e).length;(r&&!t||2===r)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){u.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){u.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;u.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,r=this.segments.reduce((function(t,r){return r.parent===e?t+1:t}),0),i={},n=this.sourceBuffer;for(var a in n)i[a]=n[a].buffered;this.hls.trigger(s.a.BUFFER_APPENDED,{parent:e,pending:r,timeRanges:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===r&&this.flushLiveBackBuffer()},e.prototype.onSBUpdateError=function(t){u.b.error("sourceBuffer error:",t),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){var e=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(t).forEach((function(r){e.pendingTracks[r]=t[r]}));var r=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),r&&"open"===r.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;for(var i in t)if(!e[i]){var n=t[i],o=n.levelCodec||n.codec,l=n.container+";codecs="+o;u.b.log("creating sourceBuffer("+l+")");try{var c=e[i]=r.addSourceBuffer(l);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[i]={codec:o,container:n.container},n.buffer=c}catch(t){u.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:l})}}this.hls.trigger(s.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){u.b.error("sourceBuffer error:",t.event),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,r=t.type;for(var i in e)r&&i!==r||e[i].ended||(e[i].ended=!0,u.b.log(i+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var r in t){var i=t[r];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}u.b.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){u.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.flushLiveBackBuffer=function(){if(this._live){var t=this.hls.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))for(var e=this.media.currentTime,r=this.sourceBuffer,i=Object.keys(r),n=e-Math.max(t,this._levelTargetDuration),a=i.length-1;a>=0;a--){var o=i[a],s=r[o].buffered;s.length>0&&n>s.start(0)&&this.removeBufferRange(o,r[o],0,n)}}},e.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t,e=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(u.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(o.a)(t))&&(u.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var i in r)e+=r[i].buffered.length}catch(t){u.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(s.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(this.media.error)return this.segments=[],void u.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(e&&e.length){var i=e.shift();try{var n=r[i.type];n?n.updating?e.unshift(i):(n.ended=!1,this.parent=i.parent,n.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(r){u.b.error("error while trying to append buffer:"+r.message),e.unshift(i);var o={type:a.b.MEDIA_ERROR,parent:i.parent};22!==r.code?(this.appendError?this.appendError++:this.appendError=1,o.details=a.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(u.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0,t.trigger(s.a.ERROR,o)):(o.fatal=!1,t.trigger(s.a.ERROR,o))):(this.segments=[],o.details=a.a.BUFFER_FULL_ERROR,o.fatal=!1,t.trigger(s.a.ERROR,o))}}}},e.prototype.flushBuffer=function(t,e,r){var i=void 0,n=this.sourceBuffer;if(Object.keys(n).length){if(u.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var a in n)if(!r||a===r){if((i=n[a]).ended=!1,i.updating)return u.b.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(a,i,t,e))return this.flushBufferCounter++,!1}}else u.b.warn("abort flushing too many retries");u.b.log("buffer flushed")}return!0},e.prototype.removeBufferRange=function(t,e,r,i){try{for(var n=0;n<e.buffered.length;n++){var a=e.buffered.start(n),o=e.buffered.end(n),s=Math.max(a,r),l=Math.min(o,i);if(Math.min(l,o)-s>.5)return u.b.log("sb remove "+t+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+this.media.currentTime),e.remove(s,l),!0}}catch(t){u.b.warn("removeBufferRange failed",t)}return!1},e}(d),Lt=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Ot=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.FPS_DROP_LEVEL_CAPPING,s.a.MEDIA_ATTACHING,s.a.MANIFEST_PARSED,s.a.LEVELS_UPDATED,s.a.BUFFER_CODECS,s.a.MEDIA_DETACHING));return i.autoLevelCapping=Number.POSITIVE_INFINITY,i.firstLevel=null,i.levels=[],i.media=null,i.restrictedLevels=[],i.timer=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this._startCapping()},e.prototype.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this._startCapping()},e.prototype.onLevelsUpdated=function(t){this.levels=t.levels},e.prototype.onMediaDetaching=function(){this._stopCapping()},e.prototype.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var r=this;if(!this.levels)return-1;var i=this.levels.filter((function(i,n){return e.isLevelAllowed(n,r.restrictedLevels)&&n<=t}));return e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},e.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},e.isLevelAllowed=function(t){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,r){if(!t||t&&!t.length)return-1;for(var i,n,a=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=r)&&(i=s,!(n=t[o+1])||i.width!==n.width||i.height!==n.height)){a=o;break}}return a},Lt(e,[{key:"mediaWidth",get:function(){var t=void 0,r=this.media;return r&&(t=r.width||r.clientWidth||r.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,r=this.media;return r&&(t=r.height||r.clientHeight||r.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(d),Dt=window.performance,It=function(t){function e(r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MEDIA_ATTACHING))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},e.prototype.checkFPS=function(t,e,r){var i=Dt.now();if(e){if(this.lastTime){var n=i-this.lastTime,a=r-this.lastDroppedFrames,o=e-this.lastDecodedFrames,l=1e3*a/n,c=this.hls;if(c.trigger(s.a.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),l>0&&a>c.config.fpsDroppedMonitoringThreshold*o){var d=c.currentLevel;u.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(s.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,c.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(d),Ct=window,xt=Ct.performance,Pt=Ct.XMLHttpRequest,Mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:xt.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t=void 0,e=this.context;t=this.loader=new Pt;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,e.url)}catch(r){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,r=e.readyState,i=this.stats,n=this.context,a=this.config;if(!i.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(xt.now(),i.trequest)),4===r){var o=e.status;if(o>=200&&o<300){i.tload=Math.max(i.tfirst,xt.now());var s,l=void 0;s="arraybuffer"===n.responseType?(l=e.response).byteLength:(l=e.responseText).length,i.loaded=i.total=s;var c={url:e.responseURL,data:l};this.callbacks.onSuccess(c,i,n,e)}else i.retry>=a.maxRetry||o>=400&&o<499?(u.b.error(o+" while loading "+n.url),this.callbacks.onError({code:o,text:e.statusText},n,e)):(u.b.warn(o+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.prototype.loadtimeout=function(){u.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var i=this.callbacks.onProgress;i&&i(r,this.context,null,e)},t}(),Ft=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Nt=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.AUDIO_TRACK_LOADED,s.a.AUDIO_TRACK_SWITCHED,s.a.LEVEL_LOADED,s.a.ERROR));return i._trackId=-1,i._selectDefaultTrack=!0,i.tracks=[],i.trackIdBlacklist=Object.create(null),i.audioGroupId=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},e.prototype.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(s.a.AUDIO_TRACKS_UPDATED,{audioTracks:e})},e.prototype.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)u.b.warn("Invalid audio track id:",t.id);else{if(u.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()}},e.prototype.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},e.prototype.onLevelLoaded=function(t){var e=this.hls.levels[t.level];if(e.audioGroupIds){var r=e.audioGroupIds[e.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},e.prototype.onError=function(t){t.type===a.b.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===a.a.AUDIO_TRACK_LOAD_ERROR&&(u.b.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},e.prototype._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)u.b.debug("Same id as current audio-track passed, and track details available -> no-op");else if(t<0||t>=this.tracks.length)u.b.warn("Invalid id passed to audio-track controller");else{var e=this.tracks[t];u.b.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var r=e.url,i=e.type,n=e.id;this.hls.trigger(s.a.AUDIO_TRACK_SWITCHING,{id:n,type:i,url:r}),this._loadTrackDetailsIfNeeded(e)}},e.prototype.doTick=function(){this._updateTrack(this._trackId)},e.prototype._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var r=this.tracks[this._trackId],i=null;if(r&&(i=r.name),this._selectDefaultTrack){var n=e.filter((function(t){return t.default}));n.length?e=n:u.b.warn("No default audio tracks defined")}var o=!1,l=function(){e.forEach((function(e){o||t.audioGroupId&&e.groupId!==t.audioGroupId||i&&i!==e.name||(t._setAudioTrack(e.id),o=!0)}))};l(),o||(i=null,l()),o||(u.b.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},e.prototype._needsTrackLoading=function(t){var e=t.details;return!(!t.url||e&&!0!==e.live)},e.prototype._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,r=t.id;u.b.log("loading audio-track playlist for id: "+r),this.hls.trigger(s.a.AUDIO_TRACK_LOADING,{url:e,id:r})}},e.prototype._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,u.b.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},e.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],r=e.name,i=e.language,n=e.groupId;u.b.warn("Loading failed on audio track id: "+t+", group-id: "+n+', name/language: "'+r+'" / "'+i+'"');for(var a=t,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===r){a=o;break}a!==t?(u.b.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):u.b.warn('No fallback audio-track found for name/language: "'+r+'" / "'+i+'"')},Ft(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}]),e}(ht),Ut=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Bt=window.performance,jt=function(t){function e(r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.AUDIO_TRACKS_UPDATED,s.a.AUDIO_TRACK_SWITCHING,s.a.AUDIO_TRACK_LOADED,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.FRAG_PARSING_INIT_SEGMENT,s.a.FRAG_PARSING_DATA,s.a.FRAG_PARSED,s.a.ERROR,s.a.BUFFER_RESET,s.a.BUFFER_CREATED,s.a.BUFFER_APPENDED,s.a.BUFFER_FLUSHED,s.a.INIT_PTS_FOUND));return n.fragmentTracker=i,n.config=r.config,n.audioCodecSwap=!1,n._state=ft.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onInitPtsFound=function(t){var e=t.id,r=t.frag.cc,i=t.initPTS;"main"===e&&(this.initPTS[r]=i,this.videoTrackCC=r,u.b.log("InitPTS for cc: "+r+" found from video track: "+i),this.state===ft.WAITING_INIT_PTS&&this.tick())},e.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(u.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=ft.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=ft.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=ft.STOPPED},e.prototype.doTick=function(){var t=void 0,e=void 0,r=void 0,i=this.hls,n=i.config;switch(this.state){case ft.ERROR:case ft.PAUSED:case ft.BUFFER_FLUSHING:break;case ft.STARTING:this.state=ft.WAITING_TRACK,this.loadedmetadata=!1;break;case ft.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!n.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var l=this.mediaBuffer?this.mediaBuffer:this.media,c=this.videoBuffer?this.videoBuffer:this.media,d=H.bufferInfo(l,t,n.maxBufferHole),h=H.bufferInfo(c,t,n.maxBufferHole),f=d.len,p=d.end,v=this.fragPrevious,g=Math.min(n.maxBufferLength,n.maxMaxBufferLength),y=Math.max(g,h.len),m=this.audioSwitch,b=this.trackId;if((f<y||m)&&b<a.length){if(void 0===(r=a[b].details)){this.state=ft.WAITING_TRACK;break}if(!m&&this._streamEnded(d,r))return this.hls.trigger(s.a.BUFFER_EOS,{type:"audio"}),void(this.state=ft.ENDED);var T=r.fragments,E=T.length,S=T[0].start,_=T[E-1].start+T[E-1].duration,R=void 0;if(m)if(r.live&&!r.PTSKnown)u.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),p=0;else if(p=t,r.PTSKnown&&t<S){if(!(d.end>S||d.nextStart))return;u.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=S+.05}if(r.initSegment&&!r.initSegment.data)R=r.initSegment;else if(p<=S){if(R=T[0],null!==this.videoTrackCC&&R.cc!==this.videoTrackCC&&(R=function(t,e){return K.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(T,this.videoTrackCC)),r.live&&R.loadIdx&&R.loadIdx===this.fragLoadIdx){var w=d.nextStart?d.nextStart:S;return u.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(w+.05)),void(this.media.currentTime=w+.05)}}else{var k=void 0,A=n.maxFragLookUpTolerance;p<_?(p>_-A&&(A=0),k=ut(v,T,p,A)):k=T[E-1],k&&(R=k,S=k.start,v&&R.level===v.level&&R.sn===v.sn&&(R.sn<r.endSN?(R=T[R.sn+1-r.startSN],u.b.log("SN just loaded, load next one: "+R.sn)):R=null))}R&&(R.encrypted?(u.b.log("Loading key for "+R.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+b),this.state=ft.KEY_LOADING,i.trigger(s.a.KEY_LOADING,{frag:R})):(u.b.log("Loading "+R.sn+", cc: "+R.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+b+", currentTime:"+t+",bufferEnd:"+p.toFixed(3)),this.fragCurrent=R,(m||this.fragmentTracker.getState(R)===U)&&(this.startFragRequested=!0,Object(o.a)(R.sn)&&(this.nextLoadPosition=R.start+R.duration),i.trigger(s.a.FRAG_LOADING,{frag:R}),this.state=ft.FRAG_LOADING)))}break;case ft.WAITING_TRACK:(e=this.tracks[this.trackId])&&e.details&&(this.state=ft.IDLE);break;case ft.FRAG_LOADING_WAITING_RETRY:var L=Bt.now(),O=this.retryDate,D=(l=this.media)&&l.seeking;(!O||L>=O||D)&&(u.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ft.IDLE);break;case ft.WAITING_INIT_PTS:var I=this.videoTrackCC;if(void 0===this.initPTS[I])break;var C=this.waitingFragment;if(C){var x=C.frag.cc;I!==x?(e=this.tracks[this.trackId]).details&&e.details.live&&(u.b.warn("Waiting fragment CC ("+x+") does not match video track CC ("+I+")"),this.waitingFragment=null,this.state=ft.IDLE):(this.state=ft.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=ft.IDLE;break;case ft.STOPPED:case ft.FRAG_LOADING:case ft.PARSING:case ft.PARSED:case ft.ENDED:}},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(u.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onAudioTracksUpdated=function(t){u.b.log("audio tracks updated"),this.tracks=t.audioTracks},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=ft.PAUSED,this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=ft.IDLE),this.tick()},e.prototype.onAudioTrackLoaded=function(t){var e=t.details,r=t.id,i=this.tracks[r],n=e.totalduration,a=0;if(u.b.log("track "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+n),e.live){var s=i.details;s&&e.fragments.length>0?(et(s,e),a=e.fragments[0].start,e.PTSKnown?u.b.log("live audio playlist sliding:"+a.toFixed(3)):u.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,u.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(i.details=e,!this.startFragRequested){if(-1===this.startPosition){var l=e.startTimeOffset;Object(o.a)(l)?(u.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===ft.WAITING_TRACK&&(this.state=ft.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===ft.KEY_LOADING&&(this.state=ft.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===ft.FRAG_LOADING&&e&&"audio"===r.type&&r.level===e.level&&r.sn===e.sn){var i=this.tracks[this.trackId],n=i.details,a=n.totalduration,o=e.level,l=e.sn,c=e.cc,d=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",h=this.stats=t.stats;if("initSegment"===l)this.state=ft.IDLE,h.tparsed=h.tbuffered=Bt.now(),n.initSegment.data=t.payload,this.hls.trigger(s.a.FRAG_BUFFERED,{stats:h,frag:e,id:"audio"}),this.tick();else{this.state=ft.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new Q(this.hls,"audio"));var f=this.initPTS[c],p=n.initSegment?n.initSegment.data:[];n.initSegment||void 0!==f?(this.pendingBuffering=!0,u.b.log("Demuxing "+l+" of ["+n.startSN+" ,"+n.endSN+"],track "+o),this.demuxer.push(t.payload,p,d,null,e,a,!1,f)):(u.b.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+l+" of ["+n.startSN+" ,"+n.endSN+"],track "+o),this.waitingFragment=t,this.state=ft.WAITING_INIT_PTS)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===ft.PARSING){var i=t.tracks,n=void 0;if(i.video&&delete i.video,n=i.audio){n.levelCodec=n.codec,n.id=t.id,this.hls.trigger(s.a.BUFFER_CODECS,i),u.b.log("audio track:audio,container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var a=n.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.a.BUFFER_APPENDING,o))}this.tick()}}},e.prototype.onFragParsingData=function(t){var e=this,r=this.fragCurrent,i=t.frag;if(r&&"audio"===t.id&&"audio"===t.type&&i.sn===r.sn&&i.level===r.level&&this.state===ft.PARSING){var n=this.audioSwitch,l=this.hls,c=this.media,d=this.pendingData,h=this.trackId;r.addElementaryStream(g.ElementaryStreamTypes.AUDIO),Object(o.a)(t.endPTS)||(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),u.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),tt(this.tracks[h].details,r,t.startPTS,t.endPTS);var f=!1;if(n&&(c&&c.readyState&&c.currentTime>=t.startPTS&&(u.b.log("switching audio track : flushing all audio"),this.state=ft.BUFFER_FLUSHING,l.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),f=!0),this.audioSwitch=!1,l.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:h})),!this.pendingData)return void l.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach((function(e){e&&e.length&&d.push({type:t.type,data:e,parent:"audio",content:"data"})})),!f&&d.length&&(d.forEach((function(t){e.state===ft.PARSING&&(e.pendingBuffering=!0,l.trigger(s.a.BUFFER_APPENDING,t))})),this.pendingData=[],this.appended=!0)),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===ft.PARSING&&(this.stats.tparsed=Bt.now(),this.state=ft.PARSED,this._checkAppendedParsed())},e.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},e.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==ft.PARSING&&e!==ft.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==ft.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,r=this.hls;if(t){this.fragPrevious=t,e.tbuffered=Bt.now(),r.trigger(s.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;u.b.log("audio buffered : "+nt(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ft.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:var r=t.frag;if(r&&"audio"!==r.type)break;if(!t.fatal){var i=this.fragLoadError;i?i++:i=1;var n=this.config;if(i<=n.fragLoadingMaxRetry){this.fragLoadError=i;var o=Math.min(Math.pow(2,i-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);u.b.warn("AudioStreamController: frag loading failed, retry in "+o+" ms"),this.retryDate=Bt.now()+o,this.state=ft.FRAG_LOADING_WAITING_RETRY}else u.b.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ft.ERROR}break;case a.a.AUDIO_TRACK_LOAD_ERROR:case a.a.AUDIO_TRACK_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:this.state!==ft.ERROR&&(this.state=t.fatal?ft.ERROR:ft.IDLE,u.b.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case a.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===ft.PARSING||this.state===ft.PARSED)){var l=this.mediaBuffer,c=this.media.currentTime;if(l&&H.isBuffered(l,c)&&H.isBuffered(l,c+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,u.b.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state=ft.IDLE}else u.b.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ft.BUFFER_FLUSHING,this.hls.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},e.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(u.b.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach((function(e){t.hls.trigger(s.a.BUFFER_APPENDING,e)})),this.appended=!0,this.pendingData=[],this.state=ft.PARSED):(this.state=ft.IDLE,this.fragPrevious=null,this.tick())},Ut(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,u.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(pt),Gt=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var t="auto",e={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function i(t){return"string"==typeof t&&!!r[t.toLowerCase()]&&t.toLowerCase()}function n(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t}function a(r,a,o){var s=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,h=r,f=a,p=o,v=null,g="",y=!0,m="auto",b="start",T=50,E="middle",S=50,_="middle";if(Object.defineProperty(s,"id",n({},l,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(s,"pauseOnExit",n({},l,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(s,"startTime",n({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",n({},l,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",n({},l,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",n({},l,{get:function(){return v},set:function(t){v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",n({},l,{get:function(){return g},set:function(t){var r=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");g=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",n({},l,{get:function(){return y},set:function(t){y=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",n({},l,{get:function(){return m},set:function(e){if("number"!=typeof e&&e!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",n({},l,{get:function(){return b},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",n({},l,{get:function(){return T},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",n({},l,{get:function(){return E},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",n({},l,{get:function(){return S},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",n({},l,{get:function(){return _},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");_=e,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}(),Kt=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};function Ht(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Kt,this.regionList=[]}function Vt(){this.values=Object.create(null)}function Wt(t,e,r,i){var n=i?t.split(i):[t];for(var a in n)if("string"==typeof n[a]){var o=n[a].split(r);2===o.length&&e(o[0],o[1])}}Vt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var i=0;i<r.length;++i)if(e===r[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var Yt=new Gt(0,0,0),qt="middle"===Yt.align?"middle":"center";function Xt(t,e,r){var i=t;function n(){var e=function(t){function e(t,e,r,i){return 3600*(0|t)+60*(0|e)+(0|r)+(0|i)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=n(),a(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),a(),e.endTime=n(),a(),function(t,e){var i=new Vt;Wt(t,(function(t,e){switch(t){case"region":for(var n=r.length-1;n>=0;n--)if(r[n].id===e){i.set(t,r[n].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var a=e.split(","),o=a[0];i.integer(t,o),i.percent(t,o)&&i.set("snapToLines",!1),i.alt(t,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",qt,"end"]);break;case"position":a=e.split(","),i.percent(t,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",qt,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",qt,"end","left","right"])}}),/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");var n=i.get("line","auto");"auto"===n&&-1===Yt.line&&(n=-1),e.line=n,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",qt);var a=i.get("position","auto");"auto"===a&&50===Yt.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function zt(t){return t.replace(/<br(?: \/)?>/gi,"\n")}Ht.prototype={parse:function(t){var e=this;function r(){var t=e.buffer,r=0;for(t=zt(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;var i=t.substr(0,r);return"\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.substr(r),i}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var i=void 0;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var n=(i=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var a=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(a?a=!1:i=r(),e.state){case"HEADER":/:/.test(i)?Wt(i,(function(t,e){}),/:/):i||(e.state="ID");continue;case"NOTE":i||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){e.state="NOTE";break}if(!i)continue;if(e.cue=new Gt(0,0,""),e.state="CUE",-1===i.indexOf("--\x3e")){e.cue.id=i;continue}case"CUE":try{Xt(i,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(a=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=i;continue;case"BADCUE":i||(e.state="ID");continue}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return this.onflush&&this.onflush(),this}};var Jt=Ht;function Qt(t,e,r){for(var i=void 0,n=void 0,a=void 0,o=void 0,s=void 0,u=[],l=0;l<r.rows.length;l++)if(a=!0,o=0,s="",!(i=r.rows[l]).isEmpty()){for(var c=0;c<i.chars.length;c++)i.chars[c].uchar.match(/\s/)&&a?o++:(s+=i.chars[c].uchar,a=!1);i.cueStartTime=t,t===e&&(e+=1e-4),n=new Gt(t,e,zt(s.trim())),o>=16?o--:o++,navigator.userAgent.match(/Firefox\//)?n.line=l+1:n.line=l>7?l-2:l+1,Math.abs(32-(n.text.length+2*o))>2&&(n.align="left",n.position=Math.max(10,Math.min(90,10+2.5*o))),u.push(n)}return u}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Zt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},te=function(t){var e=t;return Zt.hasOwnProperty(t)&&(e=Zt[t]),String.fromCharCode(e)},ee=15,re=100,ie={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ne={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ae={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},oe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},se=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],ue={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var r=this.verboseFilter[t];this.verboseLevel>=r&&console.log(this.time+" ["+t+"] "+e)}},le=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},ce=function(){function t(e,r,i,n,a){$t(this,t),this.foreground=e||"white",this.underline=r||!1,this.italics=i||!1,this.background=n||"black",this.flash=a||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(this[i]=t[i])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),de=function(){function t(e,r,i,n,a,o){$t(this,t),this.uchar=e||" ",this.penState=new ce(r,i,n,a,o)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),he=function(){function t(){$t(this,t),this.chars=[];for(var e=0;e<re;e++)this.chars.push(new de);this.pos=0,this.currPenState=new ce}return t.prototype.equals=function(t){for(var e=!0,r=0;r<re;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<re;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<re;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(ue.log("DEBUG","Negative cursor position "+this.pos),this.pos=0):this.pos>re&&(ue.log("DEBUG","Too large cursor position "+this.pos),this.pos=re)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=te(t);this.pos>=re?ue.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},t.prototype.clearFromPos=function(t){var e=void 0;for(e=t;e<re;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,r=0;r<re;r++){var i=this.chars[r].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),fe=function(){function t(){$t(this,t),this.rows=[];for(var e=0;e<ee;e++)this.rows.push(new he);this.currRow=ee-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<ee;t++)this.rows[t].clear();this.currRow=ee-1},t.prototype.equals=function(t){for(var e=!0,r=0;r<ee;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<ee;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<ee;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},t.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},t.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},t.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},t.prototype.setCursor=function(t){ue.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.prototype.setPAC=function(t){ue.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<ee;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var a=n.rows[i].cueStartTime;if(a&&a<ue.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(n.rows[i+o])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,l=Math.max(u-1,0);s.setCursor(t.indent),t.color=s.chars[l].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)},t.prototype.setBkgData=function(t){ue.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null!==this.nrRollUpRows){ue.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),ue.log("INFO","Rolling up")}else ue.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],r="",i=-1,n=0;n<ee;n++){var a=this.rows[n].getTextString();a&&(i=n+1,t?e.push("Row "+i+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},t.prototype.getTextAndFormat=function(){return this.rows},t}(),pe=function(){function t(e,r){$t(this,t),this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new fe,this.nonDisplayedMemory=new fe,this.lastOutputScreen=new fe,this.currRollUpRow=this.displayedMemory.rows[ee-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[ee-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,ue.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";ue.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(ue.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){ue.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){ue.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){ue.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){ue.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){ue.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){ue.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){ue.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){ue.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){ue.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.prototype.ccCR=function(){ue.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.prototype.ccENM=function(){ue.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(ue.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,ue.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.prototype.ccTO=function(t){ue.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};e.underline=t%2==1,e.italics=t>=46,e.italics?e.foreground="white":e.foreground=["white","green","blue","cyan","red","yellow","magenta"][Math.floor(t/2)-16],ue.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=ue.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}();function ve(t,e,r){r&&(r.a=t,r.b=e)}function ge(t,e,r){if(r)return r.a===t&&r.b===e}var ye=function(){function t(e,r,i,n){$t(this,t),this.channels={1:new pe(1,e),2:new pe(2,r),3:new pe(3,i),4:new pe(4,n)},this.currChNr=-1,this.cmdHistory={1:{a:null,b:null},3:{a:null,b:null}}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e,r){var i=void 0,n=void 0,a=void 0,o=!1;ue.setTime(t);for(var s=0;s<e.length;s+=2)n=127&e[s],a=127&e[s+1],(0!==n||0!==a)&&(ue.log("DATA","["+le([e[s],e[s+1]])+"] -> ("+le([n,a])+")"),(i=this.parseCmd(n,a,r))||(i=this.parseMidrow(n,a,r)),i||(i=this.parsePAC(n,a,r)),i||(i=this.parseBackgroundAttributes(n,a,r)),i||(o=this.parseChars(n,a))&&(this.currChNr&&this.currChNr>=0?3===r&&this.currChNr>2||1===r&&this.currChNr<3?this.channels[this.currChNr].insertChars(o):ue.log("WARNING","The last seen channel number does not fall within the current field. Deferring character insertion until the field and channel match."):ue.log("WARNING","No channel found yet. TEXT-MODE?")),i||o||ue.log("WARNING","Couldn't parse cleaned data "+le([n,a])+" orig: "+le([e[s],e[s+1]])))},t.prototype.parseCmd=function(t,e,r){var i=this.cmdHistory,n=function(t){var e=void 0;return 20===t?e=1:28===t?e=2:21===t?e=3:29===t&&(e=4),e}(t),a=function(t,e){var r=null;return 23===t?r=e:31===t&&(r=e+1),r}(e,r);if(!(n&&e>=32&&e<=47||a&&e>=33&&e<=35))return!1;if(ge(t,e,i[r]))return ve(null,null,i[r]),ue.log("DEBUG","Repeated command ("+le([t,e])+") is dropped"),!0;var o=void 0;return n?(o=this.channels[n],32===e?o.ccRCL():33===e?o.ccBS():34===e?o.ccAOF():35===e?o.ccAON():36===e?o.ccDER():37===e?o.ccRU(2):38===e?o.ccRU(3):39===e?o.ccRU(4):40===e?o.ccFON():41===e?o.ccRDC():42===e?o.ccTR():43===e?o.ccRTD():44===e?o.ccEDM():45===e?o.ccCR():46===e?o.ccENM():47===e&&o.ccEOC()):(o=this.channels[a]).ccTO(e-32),ve(t,e,i[r]),this.currChNr=n,!0},t.prototype.parseMidrow=function(t,e,r){var i=null;return(17===t||25===t)&&e>=32&&e<=47&&((i=17===t?r:r+1)!==this.currChNr?(ue.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[i].ccMIDROW(e),ue.log("DEBUG","MIDROW ("+le([t,e])+")"),!0))},t.prototype.parsePAC=function(t,e,r){var i,n=this.cmdHistory,a=null;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(ge(t,e,n[r]))return ve(null,null,n[r]),!0;var o=void 0;return t<=23?(o=1,a=r):(o=2,a=r+1),i=e>=64&&e<=95?1===o?ie[t]:ae[t]:1===o?ne[t]:oe[t],this.channels[a].setPAC(this.interpretPAC(i,e)),ve(t,e,n[r]),this.currChNr=a,!0},t.prototype.interpretPAC=function(t,e){var r,i={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},t.prototype.parseChars=function(t,e,r){var i,n=null,a=null,o=null;(t>=25?(n=2,o=t-8):(n=1,o=t),o>=17&&o<=19)?(i=17===o?e+80:18===o?e+112:e+144,ue.log("INFO","Special char '"+te(i)+"' in channel "+n),a=[i]):t>=32&&t<=127&&(a=0===e?[t]:[t,e]);if(a){var s=le(a);ue.log("DEBUG","Char codes =  "+s.join(",")),ve(t,e,this.cmdHistory[r])}return a},t.prototype.parseBackgroundAttributes=function(t,e,r){var i,n=void 0,a=void 0;return((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47)&&(n={},16===t||24===t?(a=Math.floor((e-32)/2),n.background=se[a],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),i=t<24?r:r+1,this.channels[i].setBkgData(n),ve(t,e,this.cmdHistory[r]),!0)},t.prototype.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++)this.channels[t]&&this.channels[t].reset();this.cmdHistory={1:{a:null,b:null},3:{a:null,b:null}}},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}(),me=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timelineController=e,this.trackName=r,this.startTime=null,this.endTime=null,this.screen=null}return t.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.prototype.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t}(),be=r(4),Te=function(t,e,r){return t.substr(r||0,e.length)===e},Ee=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()},Se=function(t,e,r,i,n,a){var s=Object(be.b)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",l=0,c=0,d=0,h=[],f=void 0,p=!0,v=new Jt;v.oncue=function(t){var e=r[i],n=r.ccOffset;e&&e.new&&(void 0!==c?n=r.ccOffset=e.start:function(t,e,r){var i=t[e],n=t[i.prevCC];if(!n||!n.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;n&&n.new;)t.ccOffset+=i.start-n.start,i.new=!1,n=t[(i=n).prevCC];t.presentationOffset=r}(r,i,d)),d&&(n=d-r.presentationOffset),t.startTime+=n-c,t.endTime+=n-c,t.id=Ee(t.startTime.toString())+Ee(t.endTime.toString())+Ee(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&h.push(t)},v.onparsingerror=function(t){f=t},v.onflush=function(){f&&a?a(f):n(h)},s.forEach((function(t){if(p){if(Te(t,"X-TIMESTAMP-MAP=")){p=!1,t.substr(16).split(",").forEach((function(t){Te(t,"LOCAL:")?u=t.substr(6):Te(t,"MPEGTS:")&&(l=parseInt(t.substr(7)))}));try{e+(9e4*r[i].start||0)<0&&(e+=8589934592),l-=e,n=u,a=parseInt(n.substr(-3)),s=parseInt(n.substr(-6,2)),h=parseInt(n.substr(-9,2)),g=n.length>9?parseInt(n.substr(0,n.indexOf(":"))):0,c=(Object(o.a)(a)&&Object(o.a)(s)&&Object(o.a)(h)&&Object(o.a)(g)?(a+=1e3*s,a+=6e4*h,a+=36e5*g):-1)/1e3,d=l/9e4,-1===c&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){f=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(p=!1)}var n,a,s,h,g;v.parse(t+"\n")})),v.flush()};function _e(t){if(t)for("disabled"===t.mode&&(t.mode="hidden");t.cues&&t.cues.length>0;)t.removeCue(t.cues[0])}function Re(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}var we=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MEDIA_ATTACHING,s.a.MEDIA_DETACHING,s.a.FRAG_PARSING_USERDATA,s.a.FRAG_DECRYPTED,s.a.MANIFEST_LOADING,s.a.MANIFEST_LOADED,s.a.FRAG_LOADED,s.a.LEVEL_SWITCHING,s.a.INIT_PTS_FOUND,s.a.FRAG_PARSING_INIT_SEGMENT,s.a.SUBTITLE_TRACKS_CLEARED));if(i.hls=r,i.config=r.config,i.enabled=!0,i.Cues=r.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=[],i.cueRanges={},i.captionsTracks={},i.captionsProperties={textTrack1:{label:i.config.captionsTextTrack1Label,languageCode:i.config.captionsTextTrack1LanguageCode},textTrack2:{label:i.config.captionsTextTrack2Label,languageCode:i.config.captionsTextTrack2LanguageCode},textTrack3:{label:i.config.captionsTextTrack1Label,languageCode:i.config.captionsTextTrack1LanguageCode},textTrack4:{label:i.config.captionsTextTrack2Label,languageCode:i.config.captionsTextTrack2LanguageCode}},i.config.enableCEA708Captions){var n=new me(i,"textTrack1"),a=new me(i,"textTrack2"),o=new me(i,"textTrack3"),u=new me(i,"textTrack4");i.cea608Parser=new ye(n,a,o,u)}return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.addCues=function(t,e,r,i){var n=this,a=this.cueRanges[t];a||(a=this.cueRanges[t]=[]);for(var o,u,l,c,d=!1,h=a.length;h--;){var f=a[h],p=(o=f[0],u=f[1],l=e,c=r,Math.min(u,c)-Math.max(o,l));if(p>=0&&(f[0]=Math.min(f[0],e),f[1]=Math.max(f[1],r),d=!0,p/(r-e)>.5))return}d||a.push([e,r]);var v=this.Cues.createCues(e,r,i);this.config.renderNatively?v.forEach((function(e){n.captionsTracks[t].addCue(e)})):this.hls.trigger(s.a.CUES_PARSED,{type:"captions",cues:v,track:t})},e.prototype.onInitPtsFound=function(t){var e=this;if("main"===t.id&&(this.initPTS[t.frag.cc]=t.initPTS),this.unparsedVttFrags.length){var r=this.unparsedVttFrags;this.unparsedVttFrags=[],r.forEach((function(t){e.onFragLoaded(t)}))}},e.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var i=e.textTracks[r];if(i[t])return i}return null},e.prototype.createCaptionsTrack=function(t){this.captionsTracks[t]||(this.config.renderNatively?this.createNativeTrack(t):this.createNonNativeTrack(t))},e.prototype.createNativeTrack=function(t){var e=this.captionsProperties[t],r=e.label,i=e.languageCode,n=this.captionsTracks;if(!n[t]){var a=this.getExistingTrack(t);if(a)n[t]=a,_e(n[t]),function(t,e){var r=null;try{r=new window.Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}(n[t],this.media);else{var o=this.createTextTrack("captions",r,i);o&&(o[t]=!0,n[t]=o)}}},e.prototype.createNonNativeTrack=function(t){var e=this.captionsTracks,r=this.captionsProperties[t];if(r){var i={_id:t,label:r.label,kind:"captions",default:!1};e[t]=i,this.hls.trigger(s.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}},e.prototype.createTextTrack=function(t,e,r){var i=this.media;if(i)return i.addTextTrack(t,e,r)},e.prototype.destroy=function(){d.prototype.destroy.call(this)},e.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},e.prototype.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){_e(t[e]),delete t[e]}))},e.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},e.prototype._cleanTracks=function(){var t=this.media;if(t&&t.textTracks)for(var e=t.textTracks,r=0;r<e.length;r++)(e[r].textTrack1||e[r].textTrack2)&&_e(e[r])},e.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges={},this.config.enableWebVTT){var r=this.tracks&&t.subtitles&&this.tracks.length===t.subtitles.length;if(this.tracks=t.subtitles||[],this.config.renderNatively){var i=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,r){var n=void 0;if(r<i.length){for(var a=null,o=0;o<i.length;o++)if(Re(i[o],t)){a=i[o];break}a&&(n=a)}n||(n=e.createTextTrack("subtitles",t.name,t.lang)),t.default?n.mode=e.hls.subtitleDisplay?"showing":"hidden":n.mode="disabled",e.textTracks.push(n)}))}else if(!r&&this.tracks&&this.tracks.length){var n=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default}}));this.hls.trigger(s.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:n})}}this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(t){var r=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(r){var i="textTrack"+r[1];e.captionsProperties[i].label=t.name,t.lang&&(e.captionsProperties[i].languageCode=t.lang)}}))},e.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},e.prototype.onFragLoaded=function(t){var e=t.frag,r=t.payload;if("main"===e.type){var i=e.sn;if(i!==this.lastSn+1){var n=this.cea608Parser;n&&n.reset()}this.lastSn=i}else if("subtitle"===e.type)if(r.byteLength){if(!Object(o.a)(this.initPTS[e.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e}));var a=e.decryptdata;null!=a&&null!=a.key&&"AES-128"===a.method||this._parseVTTs(e,r)}else this.hls.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},e.prototype._parseVTTs=function(t,e){var r=this,i=this.vttCCs;i[t.cc]||(i[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var n=this.config.renderNatively?this.textTracks:this.tracks,a=this.hls;Se(e,this.initPTS[t.cc],i,t.cc,(function(e){var i=n[t.level];if(r.config.renderNatively)e.filter((function(t){return!i.cues.getCueById(t.id)})).forEach((function(t){i.addCue(t)}));else{var o=i.default?"default":"subtitles"+t.level;a.trigger(s.a.CUES_PARSED,{type:"subtitles",cues:e,track:o})}a.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){u.b.log("Failed to parse VTT cue: "+e),a.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}))},e.prototype.onFragDecrypted=function(t){var e=t.payload,r=t.frag;if("subtitle"===r.type){if(!Object(o.a)(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(r,e)}},e.prototype.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var r=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,r[0],1),this.cea608Parser.addData(t.samples[e].pts,r[1],3)}},e.prototype.onFragParsingInitSegment=function(){void 0===this.initPTS&&this.onInitPtsFound({initPTS:9e4})},e.prototype.extractCea608Data=function(t){for(var e=31&t[0],r=2,i=void 0,n=void 0,a=void 0,o=void 0,s=[[],[]],u=0;u<e;u++)i=t[r++],n=127&t[r++],a=127&t[r++],o=3&i,0===n&&0===a||0!=(4&i)&&(0!==o&&1!==o||(s[o].push(n),s[o].push(a)));return s},e}(d),ke=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function Ae(t){for(var e=[],r=0;r<t.length;r++){var i=t[r];"subtitles"===i.kind&&i.label&&e.push(t[r])}return e}var Le=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.MANIFEST_LOADED,s.a.SUBTITLE_TRACK_LOADED));return i.tracks=[],i.trackId=-1,i.media=null,i.stopped=!0,i.subtitleDisplay=!0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){d.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){e.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},e.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},e.prototype.onManifestLoaded=function(t){var e=this,r=t.subtitles||[];this.tracks=r,this.hls.trigger(s.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)}))},e.prototype.onSubtitleTrackLoaded=function(t){var e=this,r=t.id,i=t.details,n=this.trackId,a=this.tracks,o=a[n];if(r>=a.length||r!==n||!o||this.stopped)this._clearReloadTimer();else if(u.b.log("subtitle track "+r+" loaded"),i.live){var s=it(o.details,i,t.stats.trequest);u.b.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){e._loadCurrentTrack()}),s)}else this._clearReloadTimer()},e.prototype.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},e.prototype.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},e.prototype._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype._loadCurrentTrack=function(){var t=this.trackId,e=this.tracks,r=this.hls,i=e[t];t<0||!i||i.details&&!i.details.live||(u.b.log("Loading subtitle track "+t),r.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:i.url,id:t}))},e.prototype._toggleTrackModes=function(t){var e=this.media,r=this.subtitleDisplay,i=this.trackId;if(e){var n=Ae(e.textTracks);if(-1===t)[].slice.call(n).forEach((function(t){t.mode="disabled"}));else{var a=n[i];a&&(a.mode="disabled")}var o=n[t];o&&(o.mode=r?"showing":"hidden")}},e.prototype._setSubtitleTrackInternal=function(t){var e=this.hls,r=this.tracks;!Object(o.a)(t)||t<-1||t>=r.length||(this.trackId=t,u.b.log("Switching to subtitle track "+t),e.trigger(s.a.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},e.prototype._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderNatively){for(var t=-1,e=Ae(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack=t}},ke(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}]),e}(d),Oe=r(7),De=window.performance,Ie=function(t){function e(r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.ERROR,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.SUBTITLE_TRACKS_UPDATED,s.a.SUBTITLE_TRACK_SWITCH,s.a.SUBTITLE_TRACK_LOADED,s.a.SUBTITLE_FRAG_PROCESSED,s.a.LEVEL_UPDATED));return n.fragmentTracker=i,n.config=r.config,n.state=ft.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new Oe.a(r,r.config),n.lastAVStart=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onSubtitleFragProcessed=function(t){var e=t.frag,r=t.success;if(this.fragPrevious=e,this.state=ft.IDLE,r){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var n=void 0,a=e.start,o=0;o<i.length;o++)if(a>=i[o].start&&a<=i[o].end){n=i[o];break}var s=e.start+e.duration;n?n.end=s:(n={start:a,end:s},i.push(n))}}},e.prototype.onMediaAttached=function(t){this.media=t.media,this.state=ft.IDLE},e.prototype.onMediaDetaching=function(){this.media=null,this.state=ft.STOPPED},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.state=ft.IDLE)},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;u.b.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]}))},e.prototype.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,this.tracks&&-1!==this.currentTrackId){var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(500)}else this.clearInterval()},e.prototype.onSubtitleTrackLoaded=function(t){var e=t.id,r=t.details,i=this.currentTrackId,n=this.tracks,a=n[i];e>=n.length||e!==i||!a||(r.live&&function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=-1;rt(t,e,(function(t,e,r){e.start=t.start,i=r}));var n=e.fragments;if(i<0)n.forEach((function(t){t.start+=r}));else for(var a=i+1;a<n.length;a++)n[a].start=n[a-1].start+n[a-1].duration}(a.details,r,this.lastAVStart),a.details=r,this.setInterval(500))},e.prototype.onKeyLoaded=function(){this.state===ft.KEY_LOADING&&(this.state=ft.IDLE)},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag.decryptdata,i=t.frag,n=this.hls;if(this.state===ft.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var a=De.now();this.decrypter.decrypt(t.payload,r.key.buffer,r.iv.buffer,(function(t){var e=De.now();n.trigger(s.a.FRAG_DECRYPTED,{frag:i,payload:t,stats:{tstart:a,tdecrypt:e}})}))}},e.prototype.onLevelUpdated=function(t){var e=t.details.fragments;this.lastAVStart=e.length?e[0].start:0},e.prototype.doTick=function(){if(this.media)switch(this.state){case ft.IDLE:var t=this.config,e=this.currentTrackId,r=this.fragmentTracker,i=this.media,n=this.tracks;if(!n||!n[e]||!n[e].details)break;var a=t.maxBufferHole,o=t.maxFragLookUpTolerance,l=Math.min(t.maxBufferLength,t.maxMaxBufferLength),c=H.bufferedInfo(this._getBuffered(),i.currentTime,a),d=c.end,h=c.len,f=n[e].details,p=f.fragments,v=p.length,g=p[v-1].start+p[v-1].duration;if(h>l)return;var y=void 0,m=this.fragPrevious;d<g?(m&&f.hasProgramDateTime&&(y=st(p,m.endProgramDateTime,o)),y||(y=ut(m,p,d,o))):y=p[v-1],y&&y.encrypted?(u.b.log("Loading key for "+y.sn),this.state=ft.KEY_LOADING,this.hls.trigger(s.a.KEY_LOADING,{frag:y})):y&&r.getState(y)===U&&(this.fragCurrent=y,this.state=ft.FRAG_LOADING,this.hls.trigger(s.a.FRAG_LOADING,{frag:y}))}else this.state=ft.IDLE},e.prototype.stopLoad=function(){this.lastAVStart=0,t.prototype.stopLoad.call(this)},e.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},e}(pt),Ce=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),xe=window.XMLHttpRequest,Pe="com.widevine.alpha",Me=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,s.a.MEDIA_ATTACHED,s.a.MANIFEST_PARSED));return i._widevineLicenseUrl=r.config.widevineLicenseUrl,i._licenseXhrSetup=r.config.licenseXhrSetup,i._emeEnabled=r.config.emeEnabled,i._requestMediaKeySystemAccess=r.config.requestMediaKeySystemAccessFunc,i._mediaKeysList=[],i._media=null,i._hasSetMediaKeys=!1,i._isMediaEncrypted=!1,i._requestLicenseFailureCount=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getLicenseServerUrl=function(t){var e=void 0;switch(t){case Pe:e=this._widevineLicenseUrl;break;default:e=null}return e||(u.b.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),e},e.prototype._attemptKeySystemAccess=function(t,e,r){var i=this,n=function(t,e,r){switch(t){case Pe:return function(t,e,r){var i={videoCapabilities:[]};return e.forEach((function(t){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})})),[i]}(0,r);default:throw Error("Unknown key-system: "+t)}}(t,0,r);n?(u.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,n).then((function(e){i._onMediaKeySystemAccessObtained(t,e)})).catch((function(e){u.b.error('Failed to obtain key-system "'+t+'" access:',e)}))):u.b.warn("Can not create config for key-system (maybe because platform is not supported):",t)},e.prototype._onMediaKeySystemAccessObtained=function(t,e){var r=this;u.b.log('Access for key-system "'+t+'" obtained');var i={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(i),e.createMediaKeys().then((function(e){i.mediaKeys=e,u.b.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated()})).catch((function(t){u.b.error("Failed to create media-keys:",t)}))},e.prototype._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},e.prototype._onNewMediaKeySession=function(t){var e=this;u.b.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(r){e._onKeySessionMessage(t,r.message)}),!1)},e.prototype._onKeySessionMessage=function(t,e){u.b.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){u.b.log("Received license data, updating key-session"),t.update(e)}))},e.prototype._onMediaEncrypted=function(t,e){u.b.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=e,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},e.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_KEYS,fatal:!0});u.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},e.prototype._generateRequestWithPreferredKeySession=function(){var t=this,e=this._mediaKeysList[0];if(!e)return u.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(e.mediaKeysSessionInitialized)u.b.warn("Key-Session already initialized but requested again");else{var r=e.mediaKeysSession;r||(u.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var i=this._mediaEncryptionInitDataType,n=this._mediaEncryptionInitData;u.b.log('Generating key-session request for "'+i+'" init data type'),e.mediaKeysSessionInitialized=!0,r.generateRequest(i,n).then((function(){u.b.debug("Key-session generation succeeded")})).catch((function(e){u.b.error("Error generating key-session request:",e),t.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},e.prototype._createLicenseXhr=function(t,e,r){var i=new xe,n=this._licenseXhrSetup;try{if(n)try{n(i,t)}catch(e){i.open("POST",t,!0),n(i,t)}i.readyState||i.open("POST",t,!0)}catch(t){return u.b.error("Error setting up key-system license XHR",t),void this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,e,r),i},e.prototype._onLicenseRequestReadyStageChange=function(t,e,r,i){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,u.b.log("License request succeeded"),i(t.response);else{if(u.b.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var n=3-this._requestLicenseFailureCount+1;return u.b.warn("Retrying license request, "+n+" attempts left"),void this._requestLicense(r,i)}this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},e.prototype._generateLicenseRequestChallenge=function(t,e){var r=void 0;return"com.microsoft.playready"===t.mediaKeySystemDomain?u.b.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===Pe?r=e:u.b.error("Unsupported key-system:",t.mediaKeySystemDomain),r},e.prototype._requestLicense=function(t,e){u.b.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return u.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});var i=this.getLicenseServerUrl(r.mediaKeySystemDomain),n=this._createLicenseXhr(i,t,e);u.b.log("Sending license request to URL: "+i),n.send(this._generateLicenseRequestChallenge(r,t))},e.prototype.onMediaAttached=function(t){var e=this;if(this._emeEnabled){var r=t.media;this._media=r,r.addEventListener("encrypted",(function(t){e._onMediaEncrypted(t.initDataType,t.initData)}))}},e.prototype.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map((function(t){return t.audioCodec})),r=t.levels.map((function(t){return t.videoCodec}));this._attemptKeySystemAccess(Pe,e,r)}},Ce(e,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}(d),Fe={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Mt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:wt,bufferController:At,capLevelController:Ot,fpsController:It,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null,testBandwidth:!0};Fe.subtitleStreamController=Ie,Fe.subtitleTrackController=Le,Fe.timelineController=we,Fe.cueHandler=i,Fe.enableCEA708Captions=!0,Fe.enableWebVTT=!0,Fe.captionsTextTrack1Label="English",Fe.captionsTextTrack1LanguageCode="en",Fe.captionsTextTrack2Label="Spanish",Fe.captionsTextTrack2LanguageCode="es",Fe.audioStreamController=jt,Fe.audioTrackController=Nt,Fe.emeController=Me;var Ne=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Ue=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),n=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in n)a in r||(r[a]=n[a]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(u.a)(r.debug),i.config=r,i._autoLevelCapping=-1;var o=i.abrController=new r.abrController(i),s=new r.bufferController(i),l=new r.capLevelController(i),c=new r.fpsController(i),d=new M(i),h=new F(i),f=new N(i),p=i.levelController=new Tt(i),v=new G(i),g=[p,i.streamController=new gt(i,v)],y=r.audioStreamController;y&&g.push(new y(i,v)),i.networkControllers=g;var m=[d,h,f,o,s,l,c,v];if(y=r.audioTrackController){var b=new y(i);i.audioTrackController=b,m.push(b)}if(y=r.subtitleTrackController){var T=new y(i);i.subtitleTrackController=T,g.push(T)}if(y=r.emeController){var E=new y(i);i.emeController=E,m.push(E)}return(y=r.subtitleStreamController)&&g.push(new y(i,v)),(y=r.timelineController)&&m.push(new y(i)),i.coreComponents=m,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.isSupported=function(){return t=Y(),e=window.SourceBuffer||window.WebKitSourceBuffer,r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove,!!r&&!!i;var t,e,r,i},Ne(e,null,[{key:"version",get:function(){return"0.11.0"}},{key:"Events",get:function(){return s.a}},{key:"ErrorTypes",get:function(){return a.b}},{key:"ErrorDetails",get:function(){return a.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Fe},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){u.b.log("destroy"),this.trigger(s.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(t){t.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(t){u.b.log("attachMedia"),this.media=t,this.trigger(s.a.MEDIA_ATTACHING,{media:t})},e.prototype.detachMedia=function(){u.b.log("detachMedia"),this.trigger(s.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(t){t=n.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),u.b.log("loadSource:"+t),this.url=t,this.trigger(s.a.MANIFEST_LOADING,{url:t})},e.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;u.b.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},e.prototype.stopLoad=function(){u.b.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},e.prototype.swapAudioCodec=function(){u.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){u.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},e.prototype.removeLevel=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.levelController.removeLevel(t,e)},Ne(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){u.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){u.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){u.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){u.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){u.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){u.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,r=t?t.length:0,i=0;i<r;i++)if((t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate)>e)return i;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),e}(X);e.default=Ue}]).default},"object"==typeof e&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof e?e.Hls=i():r.Hls=i()},156:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return d}));var i=r(141),n=r(149),a=r.n(n);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,l(e).apply(this,arguments))}var r,i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),r=e,n=[{key:"getName",value:function(){return{name:"hlsjs"}}}],(i=[{key:"getName",value:function(){return{name:"hlsjs"}}}])&&s(r.prototype,i),n&&s(r,n),e}(Object(i.a)(a.a))},72:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var i=r(2);function n(t){var e=[],r=(t=Object(i.i)(t)).split("\r\n\r\n");1===r.length&&(r=t.split("\n\n"));for(var n=0;n<r.length;n++)if("WEBVTT"!==r[n]){var o=a(r[n]);o.text&&e.push(o)}return e}function a(t){var e={},r=t.split("\r\n");1===r.length&&(r=t.split("\n"));var n=1;if(r[0].indexOf(" --\x3e ")>0&&(n=0),r.length>n+1&&r[n+1]){var a=r[n],o=a.indexOf(" --\x3e ");o>0&&(e.begin=Object(i.g)(a.substr(0,o)),e.end=Object(i.g)(a.substr(o+5)),e.text=r.slice(n+1).join("\r\n"))}return e}},74:function(t,e,r){"use strict";function i(t){return new Promise((function(e,r){if(t.paused)return r(n("NotAllowedError",0,"play() failed."));var i=function(){t.removeEventListener("play",a),t.removeEventListener("playing",o),t.removeEventListener("pause",o),t.removeEventListener("abort",o),t.removeEventListener("error",o)},a=function(){t.addEventListener("playing",o),t.addEventListener("abort",o),t.addEventListener("error",o),t.addEventListener("pause",o)},o=function(t){if(i(),"playing"===t.type)e();else{var a='The play() request was interrupted by a "'.concat(t.type,'" event.');"error"===t.type?r(n("NotSupportedError",9,a)):r(n("AbortError",20,a))}};t.addEventListener("play",a)}))}function n(t,e,r){var i=new Error(r);return i.name=t,i.code=e,i}r.d(e,"a",(function(){return i}))},75:function(t,e,r){"use strict";var i=window.VTTCue;function n(t){if("string"!=typeof t)return!1;return!!{start:!0,middle:!0,end:!0,left:!0,right:!0}[t.toLowerCase()]&&t.toLowerCase()}if(!i){(i=function(t,e,r){var i=this;i.hasBeenReset=!1;var a="",o=!1,s=t,u=e,l=r,c=null,d="",h=!0,f="auto",p="start",v="auto",g=100,y="middle";Object.defineProperty(i,"id",{enumerable:!0,get:function(){return a},set:function(t){a=""+t}}),Object.defineProperty(i,"pauseOnExit",{enumerable:!0,get:function(){return o},set:function(t){o=!!t}}),Object.defineProperty(i,"startTime",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");s=t,this.hasBeenReset=!0}}),Object.defineProperty(i,"endTime",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");u=t,this.hasBeenReset=!0}}),Object.defineProperty(i,"text",{enumerable:!0,get:function(){return l},set:function(t){l=""+t,this.hasBeenReset=!0}}),Object.defineProperty(i,"region",{enumerable:!0,get:function(){return c},set:function(t){c=t,this.hasBeenReset=!0}}),Object.defineProperty(i,"vertical",{enumerable:!0,get:function(){return d},set:function(t){var e=function(t){return"string"==typeof t&&(!!{"":!0,lr:!0,rl:!0}[t.toLowerCase()]&&t.toLowerCase())}(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");d=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"snapToLines",{enumerable:!0,get:function(){return h},set:function(t){h=!!t,this.hasBeenReset=!0}}),Object.defineProperty(i,"line",{enumerable:!0,get:function(){return f},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");f=t,this.hasBeenReset=!0}}),Object.defineProperty(i,"lineAlign",{enumerable:!0,get:function(){return p},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"position",{enumerable:!0,get:function(){return v},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");v=t,this.hasBeenReset=!0}}),Object.defineProperty(i,"size",{enumerable:!0,get:function(){return g},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");g=t,this.hasBeenReset=!0}}),Object.defineProperty(i,"align",{enumerable:!0,get:function(){return y},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}}),i.displayState=void 0}).prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)}}e.a=i},76:function(t,e,r){"use strict";function i(t,e){var r=t.kind||"cc";return t.default||t.defaulttrack?"default":t._id||t.file||r+e}function n(t,e){var r=t.label||t.name||t.language;return r||(r="Unknown CC",(e+=1)>1&&(r+=" ["+e+"]")),{label:r,unknownCount:e}}r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n}))},77:function(t,e,r){"use strict";var i=r(75),n=r(10),a=r(28),o=r(4),s=r(72),u=r(2),l=r(1);function c(t){throw new l.s(null,t)}function d(t,e,i){t.xhr=Object(a.a)(t.file,(function(a){!function(t,e,i,a){var d,h,p=t.responseXML?t.responseXML.firstChild:null;if(p)for("xml"===Object(o.b)(p)&&(p=p.nextSibling);p.nodeType===p.COMMENT_NODE;)p=p.nextSibling;try{if(p&&"tt"===Object(o.b)(p))d=function(t){t||c(306007);var e=[],r=t.getElementsByTagName("p"),i=30,n=t.getElementsByTagName("tt");if(n&&n[0]){var a=parseFloat(n[0].getAttribute("ttp:frameRate"));isNaN(a)||(i=a)}r||c(306005),r.length||(r=t.getElementsByTagName("tt:p")).length||(r=t.getElementsByTagName("tts:p"));for(var o=0;o<r.length;o++){for(var s=r[o],l=s.getElementsByTagName("br"),d=0;d<l.length;d++){var h=l[d];h.parentNode.replaceChild(t.createTextNode("\r\n"),h)}var f=s.innerHTML||s.textContent||s.text||"",p=Object(u.i)(f).replace(/>\s+</g,"><").replace(/(<\/?)tts?:/g,"$1").replace(/<br.*?\/>/g,"\r\n");if(p){var v=s.getAttribute("begin"),g=s.getAttribute("dur"),y=s.getAttribute("end"),m={begin:Object(u.g)(v,i),text:p};y?m.end=Object(u.g)(y,i):g&&(m.end=m.begin+Object(u.g)(g,i)),e.push(m)}}return e.length||c(306005),e}(t.responseXML),h=f(d),delete e.xhr,i(h);else{var v=t.responseText;v.indexOf("WEBVTT")>=0?r.e(18).then(function(t){return r(142).default}.bind(null,r)).catch(Object(n.c)(301131)).then((function(t){var r=new t(window);h=[],r.oncue=function(t){h.push(t)},r.onflush=function(){delete e.xhr,i(h)},r.parse(v)})).catch((function(t){delete e.xhr,a(Object(l.A)(null,l.b,t))})):(d=Object(s.a)(v),h=f(d),delete e.xhr,i(h))}}catch(t){delete e.xhr,a(Object(l.A)(null,l.b,t))}}(a,t,e,i)}),(function(t,e,r,n){i(Object(l.z)(n,l.b))}))}function h(t){t&&t.forEach((function(t){var e=t.xhr;e&&(e.onload=null,e.onreadystatechange=null,e.onerror=null,"abort"in e&&e.abort()),delete t.xhr}))}function f(t){return t.map((function(t){return new i.a(t.begin,t.end,t.text)}))}r.d(e,"c",(function(){return d})),r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return f}))},78:function(t,e,r){"use strict";function i(t,e){return t!==1/0&&Math.abs(t)>=Math.max(a(e),0)}function n(t,e){var r="VOD";return t===1/0?r="LIVE":t<0&&(r=i(t,a(e))?"DVR":"LIVE"),r}function a(t){return void 0===t?120:Math.max(t,0)}r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n}))},79:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return o}));var i={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"};function n(t,e){for(var r,i,n,a=t.length,o="",s=e||0;s<a;)if(0!==(r=t[s++])&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:i=t[s++],o+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=t[s++],n=t[s++],o+=String.fromCharCode((15&r)<<12|(63&i)<<6|(63&n)<<0)}return o}function a(t){var e=function(t){for(var e="0x",r=0;r<t.length;r++)t[r]<16&&(e+="0"),e+=t[r].toString(16);return parseInt(e)}(t);return 127&e|(32512&e)>>1|(8323072&e)>>2|(2130706432&e)>>3}function o(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,e){if(!("value"in e)&&"data"in e&&e.data instanceof ArrayBuffer){var r=new Uint8Array(e.data),o=r.length;e={value:{key:"",data:""}};for(var s=10;s<14&&s<r.length&&0!==r[s];)e.value.key+=String.fromCharCode(r[s]),s++;var u=19,l=r[u];3!==l&&0!==l||(l=r[++u],o--);var c=0;if(1!==l&&2!==l)for(var d=u+1;d<o;d++)if(0===r[d]){c=d-u;break}if(c>0){var h=n(r.subarray(u,u+=c),0);if("PRIV"===e.value.key){if("com.apple.streaming.transportStreamTimestamp"===h){var f=1&a(r.subarray(u,u+=4)),p=a(r.subarray(u,u+=4))+(f?4294967296:0);e.value.data=p}else e.value.data=n(r,u+1);e.value.info=h}else e.value.info=h,e.value.data=n(r,u+1)}else{var v=r[u];e.value.data=1===v||2===v?function(t,e){for(var r=t.length-1,i="",n=e||0;n<r;)254===t[n]&&255===t[n+1]||(i+=String.fromCharCode((t[n]<<8)+t[n+1])),n+=2;return i}(r,u+1):n(r,u+1)}}if(i.hasOwnProperty(e.value.key)&&(t[i[e.value.key]]=e.value.data),e.value.info){var g=t[e.value.key];g!==Object(g)&&(g={},t[e.value.key]=g),g[e.value.info]=e.value.data}else t[e.value.key]=e.value.data;return t}),{})}},83:function(t,e,r){"use strict";var i=r(77),n=r(76),a=r(79),o=r(5),s=r(3),u=r(0),l={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCues:null,_initTextTracks:function(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0},addTracksListener:function(t,e,r){if(!t)return;if(c(t,e,r),this.instreamMode)return;t.addEventListener?t.addEventListener(e,r):t["on"+e]=r},clearTracks:function(){Object(i.a)(this._itemTracks);var t=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||t)&&(v(this.renderNatively,this.video.textTracks),t&&(t.oncuechange=null));this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._currentTextTrackIndex=-1,this._activeCues=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),v(this.renderNatively,this.video.textTracks))},clearMetaCues:function(){var t=this._tracksById&&this._tracksById.nativemetadata;t&&(v(this.renderNatively,[t]),t.mode="hidden",t.inuse=!0,this._cachedVTTCues[t._id]={})},clearCueData:function(t){var e=this._cachedVTTCues;e&&e[t]&&(e[t]={},this._tracksById&&(this._tracksById[t].data=[]))},disableTextTrack:function(){if(this._textTracks){var t=this._textTracks[this._currentTextTrackIndex];if(t){t.mode="disabled";var e=t._id;e&&0===e.indexOf("nativecaptions")&&(t.mode="hidden")}}},enableTextTrack:function(){if(this._textTracks){var t=this._textTracks[this._currentTextTrackIndex];t&&(t.mode="showing")}},getSubtitlesTrack:function(){return this._currentTextTrackIndex},removeTracksListener:c,addTextTracks:f,setTextTracks:function(t){if(this._currentTextTrackIndex=-1,!t)return;this._textTracks?(this._unknownCount=0,this._textTracks=this._textTracks.filter((function(t){var e=t._id;return this.renderNatively&&e&&0===e.indexOf("nativecaptions")?(delete this._tracksById[e],!1):(t.name&&0===t.name.indexOf("Unknown")&&this._unknownCount++,!0)}),this),delete this._tracksById.nativemetadata):this._initTextTracks();if(t.length)for(var e=0,r=t.length;e<r;e++){var i=t[e];if(!i._id){if("captions"===i.kind||"metadata"===i.kind){if(i._id="native"+i.kind+e,!i.label&&"captions"===i.kind){var a=Object(n.b)(i,this._unknownCount);i.name=a.label,this._unknownCount=a.unknownCount}}else i._id=Object(n.a)(i,this._textTracks.length);if(this._tracksById[i._id])continue;i.inuse=!0}if(i.inuse&&!this._tracksById[i._id])if("metadata"===i.kind)i.mode="hidden",i.oncuechange=T.bind(this),this._tracksById[i._id]=i;else if(g(i.kind)){var s=i.mode,u=void 0;if(i.mode="hidden",!i.cues.length&&i.embedded)continue;if(i.mode=s,this._cuesByTrackId[i._id]&&!this._cuesByTrackId[i._id].loaded){for(var l=this._cuesByTrackId[i._id].cues;u=l.shift();)p(this.renderNatively,i,u);i.mode=s,this._cuesByTrackId[i._id].loaded=!0}m.call(this,i)}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||d.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(o.Browser.edge||o.Browser.firefox||o.Browser.safari)&&(this.addTrackHandler=this.addTrackHandler||h.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler)));this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})},setupSideloadedTracks:function(t){if(!this.renderNatively)return;var e=t===this._itemTracks;e||Object(i.a)(this._itemTracks);if(this._itemTracks=t,!t)return;e||(this.disableTextTrack(),b.call(this),this.addTextTracks(t))},setSubtitlesTrack:function(t){if(!this.renderNatively)return void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(t-1));if(!this._textTracks)return;0===t&&this._textTracks.forEach((function(t){t.mode=t.embedded?"hidden":"disabled"}));if(this._currentTextTrackIndex===t-1)return;this.disableTextTrack(),this._currentTextTrackIndex=t-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing");this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})},textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:function(t){var e=this._tracksById[t.name];if(!e)return;e.source=t.source;for(var r=t.captions||[],n=[],a=!1,o=0;o<r.length;o++){var s=r[o],u=t.name+"_"+s.begin+"_"+s.end;this._metaCuesByTextTime[u]||(this._metaCuesByTextTime[u]=s,n.push(s),a=!0)}a&&n.sort((function(t,e){return t.begin-e.begin}));var l=Object(i.b)(n);Array.prototype.push.apply(e.data,l)},addCaptionsCue:function(t){if(!t.text||!t.begin||!t.end)return;var e,r=t.trackid.toString(),n=this._tracksById&&this._tracksById[r];n||(n={kind:"captions",_id:r,data:[]},this.addTextTracks([n]),this.trigger("subtitlesTracks",{tracks:this._textTracks}));t.useDTS&&(n.source||(n.source=t.source||"mpegts"));e=t.begin+"_"+t.text;var a=this._metaCuesByTextTime[e];if(!a){a={begin:t.begin,end:t.end,text:t.text},this._metaCuesByTextTime[e]=a;var o=Object(i.b)([a])[0];n.data.push(o)}},createCue:function(t,e,r){var i=window.VTTCue||window.TextTrackCue,n=Math.max(e||0,t+.25);return new i(t,n,r)},addVTTCue:function(t,e){this._tracksById||this._initTextTracks();var r=t.track?t.track:"native"+t.type,i=this._tracksById[r],n="captions"===t.type?"Unknown CC":"ID3 Metadata",a=t.cue;if(!i){var o={kind:t.type,_id:r,label:n,embedded:!0};i=y.call(this,o),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):f.call(this,[i])}if(E.call(this,i,a,e)){var s=this.renderNatively||"metadata"===i.kind;return s?p(s,i,a):i.data.push(a),a}return null},addVTTCuesToTrack:function(t,e){if(!this.renderNatively)return;var r,i=this._tracksById[t._id];if(!i)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[t._id]={cues:e,loaded:!1});if(this._cuesByTrackId[t._id]&&this._cuesByTrackId[t._id].loaded)return;this._cuesByTrackId[t._id]={cues:e,loaded:!0};for(;r=e.shift();)p(this.renderNatively,i,r)},triggerActiveCues:function(t){var e=this;if(!t||!t.length)return void(this._activeCues=null);var r=this._activeCues||[],i=Array.prototype.filter.call(t,(function(t){if(r.some((function(e){return i=e,(r=t).startTime===i.startTime&&r.endTime===i.endTime&&r.text===i.text&&r.data===i.data&&r.value===i.value;var r,i})))return!1;if(t.data||t.value)return!0;if(t.text){var i=JSON.parse(t.text),n={metadataTime:t.startTime,metadata:i};i.programDateTime&&(n.programDateTime=i.programDateTime),i.metadataType&&(n.metadataType=i.metadataType,delete i.metadataType),e.trigger(s.K,n)}return!1}));if(i.length){var n=Object(a.a)(i),o=i[0].startTime;this.trigger(s.K,{metadataType:"id3",metadataTime:o,metadata:n})}this._activeCues=Array.prototype.slice.call(t)},renderNatively:!1};function c(t,e,r){t&&(t.removeEventListener?t.removeEventListener(e,r):t["on"+e]=null)}function d(){var t=this.video.textTracks,e=Object(u.l)(t,(function(t){return(t.inuse||!t._id)&&g(t.kind)}));if(this._textTracks&&!S.call(this,e)){for(var r=-1,i=0;i<this._textTracks.length;i++)if("showing"===this._textTracks[i].mode){r=i;break}r!==this._currentTextTrackIndex&&this.setSubtitlesTrack(r+1)}else this.setTextTracks(t)}function h(){this.setTextTracks(this.video.textTracks)}function f(t){var e=this;t&&(this._textTracks||this._initTextTracks(),t.forEach((function(t){if(!t.kind||g(t.kind)){var r=y.call(e,t);m.call(e,r),t.file&&(t.data=[],Object(i.c)(t,(function(t){e.addVTTCuesToTrack(r,t)}),(function(t){e.trigger(s.ub,t)})))}})),this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks}))}function p(t,e,r){if(o.Browser.ie){var i=r;(t||"metadata"===e.kind)&&(i=new window.TextTrackCue(r.startTime,r.endTime,r.text)),function(t,e){var r=[],i=t.mode;t.mode="hidden";for(var n=t.cues,a=n.length-1;a>=0&&n[a].startTime>e.startTime;a--)r.unshift(n[a]),t.removeCue(n[a]);try{t.addCue(e),r.forEach((function(e){return t.addCue(e)}))}catch(t){console.error(t)}t.mode=i}(e,i)}else try{e.addCue(r)}catch(t){console.error(t)}}function v(t,e){e&&e.length&&Object(u.j)(e,(function(e){if(!(o.Browser.ie&&t&&/^(native|subtitle|cc)/.test(e._id))){o.Browser.ie&&"disabled"===e.mode||(e.mode="disabled",e.mode="hidden");for(var r=e.cues.length;r--;)e.removeCue(e.cues[r]);e.embedded||(e.mode="disabled"),e.inuse=!1}}))}function g(t){return"subtitles"===t||"captions"===t}function y(t){var e,r=Object(n.b)(t,this._unknownCount),i=r.label;if(this._unknownCount=r.unknownCount,this.renderNatively||"metadata"===t.kind){var a=this.video.textTracks;(e=Object(u.n)(a,{label:i}))||(e=this.video.addTextTrack(t.kind,i,t.language||"")),e.default=t.default,e.mode="disabled",e.inuse=!0}else(e=t).data=e.data||[];return e._id||(e._id=Object(n.a)(t,this._textTracks.length)),e}function m(t){this._textTracks.push(t),this._tracksById[t._id]=t}function b(){if(this._textTracks){var t=this._textTracks.filter((function(t){return t.embedded||"subs"===t.groupid}));this._initTextTracks(),t.forEach((function(t){this._tracksById[t._id]=t})),this._textTracks=t}}function T(t){this.triggerActiveCues(t.currentTarget.activeCues)}function E(t,e,r){var i=t.kind;this._cachedVTTCues[t._id]||(this._cachedVTTCues[t._id]={});var n,a=this._cachedVTTCues[t._id];switch(i){case"captions":case"subtitles":n=r||Math.floor(20*e.startTime);var o="_"+e.line,s=Math.floor(20*e.endTime),u=a[n+o]||a[n+1+o]||a[n-1+o];return!(u&&Math.abs(u-s)<=1)&&(a[n+o]=s,!0);case"metadata":var l=e.data?new Uint8Array(e.data).join(""):e.text;return!a[n=r||e.startTime+l]&&(a[n]=e.endTime,!0);default:return!1}}function S(t){if(t.length>this._textTracks.length)return!0;for(var e=0;e<t.length;e++){var r=t[e];if(!r._id||!this._tracksById[r._id])return!0}return!1}e.a=l},85:function(t,e,r){"use strict";function i(t){return t&&t.length?t.end(t.length-1):0}r.d(e,"a",(function(){return i}))},87:function(t,e,r){"use strict";function i(t){return{bitrate:t.bitrate,label:t.label,width:t.width,height:t.height}}r.d(e,"a",(function(){return i}))}}]);